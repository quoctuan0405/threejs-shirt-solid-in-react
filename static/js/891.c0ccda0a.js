/*! For license information please see 891.c0ccda0a.js.LICENSE.txt */
(self.webpackChunksolid_project=self.webpackChunksolid_project||[]).push([["891"],{676:function(e,t,n){"use strict";n.d(t,{Z:()=>ew});var r,i,a,o,s,l,u,c,d,h={},f=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function m(e,t){for(var n in t)e[n]=t[n];return e}function g(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n){var r,i,a,o,s=arguments;if(t=m({},t),arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===t[i]&&(t[i]=e.defaultProps[i]);return o=t.key,null!=(a=t.ref)&&delete t.ref,null!=o&&delete t.key,y(e,t,o,a)}function y(e,t,n,r){var i={type:e,props:t,key:n,ref:r,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return l.vnode&&l.vnode(i),i}function b(e){return e.children}function x(e,t){this.props=e,this.context=t}function _(e,t){if(null==t)return e.__p?_(e.__p,e.__p.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?_(e):null}function w(e){(!e.__d&&(e.__d=!0)&&1===u.push(e)||d!==l.debounceRendering)&&(d=l.debounceRendering,(l.debounceRendering||c)(S))}function S(){var e,t,n,r,i,a,o,s;for(u.sort(function(e,t){return t.__v.__b-e.__v.__b});e=u.pop();)e.__d&&(n=void 0,r=void 0,a=(i=(t=e).__v).__e,o=t.__P,s=t.u,t.u=!1,o&&(n=[],r=R(o,i,m({},i),t.__n,void 0!==o.ownerSVGElement,null,n,s,null==a?_(i):a),P(n,i),r!=a&&function e(t){var n,r;if(null!=(t=t.__p)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(r=t.__k[n])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return e(t)}}(i)))}function A(e,t,n,r,i,a,o,s,u){var c,d,p,m,v,y,b,x=n&&n.__k||f,w=x.length;if(s==h&&(s=null!=a?a[0]:w?_(n,0):null),c=0,t.__k=M(t.__k,function(n){if(null!=n){if(n.__p=t,n.__b=t.__b+1,null===(p=x[c])||p&&n.key==p.key&&n.type===p.type)x[c]=void 0;else for(d=0;d<w;d++){if((p=x[d])&&n.key==p.key&&n.type===p.type){x[d]=void 0;break}p=null}if(m=R(e,n,p=p||h,r,i,a,o,null,s,u),(d=n.ref)&&p.ref!=d&&(b||(b=[])).push(d,n.__c||m,n),null!=m){if(null==y&&(y=m),null!=n.l)m=n.l,n.l=null;else if(a==p||m!=s||null==m.parentNode){e:if(null==s||s.parentNode!==e)e.appendChild(m);else{for(v=s,d=0;(v=v.nextSibling)&&d<w;d+=2)if(v==m)break e;e.insertBefore(m,s)}"option"==t.type&&(e.value="")}s=m.nextSibling,"function"==typeof t.type&&(t.l=m)}}return c++,n}),t.__e=y,null!=a&&"function"!=typeof t.type)for(c=a.length;c--;)null!=a[c]&&g(a[c]);for(c=w;c--;)null!=x[c]&&function e(t,n,r){var i,a,o;if(l.unmount&&l.unmount(t),(i=t.ref)&&I(i,null,n),r||"function"==typeof t.type||(r=null!=(a=t.__e)),t.__e=t.l=null,null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){l.__e(e,n)}i.base=i.__P=null}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&e(i[o],n,r);null!=a&&g(a)}(x[c],x[c]);if(b)for(c=0;c<b.length;c++)I(b[c],b[++c],b[++c])}function M(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)M(e[r],t,n);else n.push(t?t(function(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return y(null,e,null,null);if(null!=e.__e||null!=e.__c){var t=y(e.type,e.props,e.key,null);return t.__e=e.__e,t}return e}(e)):e);return n}function E(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===p.test(t)?n+"px":null==n?"":n}function C(e,t,n,r,i){var a,o,s,l,u;if("key"===(t=i?"className"===t?"class":t:"class"===t?"className":t)||"children"===t);else if("style"===t){if(a=e.style,"string"==typeof n)a.cssText=n;else{if("string"==typeof r&&(a.cssText="",r=null),r)for(o in r)n&&o in n||E(a,o,"");if(n)for(s in n)r&&n[s]===r[s]||E(a,s,n[s])}}else"o"===t[0]&&"n"===t[1]?(l=t!==(t=t.replace(/Capture$/,"")),t=((u=t.toLowerCase())in e?u:t).slice(2),n?(r||e.addEventListener(t,T,l),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,T,l)):"list"!==t&&"tagName"!==t&&"form"!==t&&!i&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function T(e){return this.t[e.type](l.event?l.event(e):e)}function R(e,t,n,r,i,a,o,s,u,c){var d,p,g,v,y,_,w,S,E,T,R=t.type;if(void 0!==t.constructor)return null;(d=l.__b)&&d(t);try{e:if("function"==typeof R){if(S=t.props,E=(d=R.contextType)&&r[d.__c],T=d?E?E.props.value:d.__p:r,n.__c?w=(p=t.__c=n.__c).__p=p.__E:("prototype"in R&&R.prototype.render?t.__c=p=new R(S,T):(t.__c=p=new x(S,T),p.constructor=R,p.render=B),E&&E.sub(p),p.props=S,p.state||(p.state={}),p.context=T,p.__n=r,g=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=R.getDerivedStateFromProps&&m(p.__s==p.state?p.__s=m({},p.__s):p.__s,R.getDerivedStateFromProps(S,p.__s)),g)null==R.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&o.push(p);else{if(null==R.getDerivedStateFromProps&&null==s&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(S,T),!s&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(S,p.__s,T)){for(p.props=S,p.state=p.__s,p.__d=!1,p.__v=t,t.__e=null!=u?u!==n.__e?u:n.__e:null,t.__k=n.__k,d=0;d<t.__k.length;d++)t.__k[d]&&(t.__k[d].__p=t);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(S,p.__s,T)}for(v=p.props,y=p.state,p.context=T,p.props=S,p.state=p.__s,(d=l.__r)&&d(t),p.__d=!1,p.__v=t,p.__P=e,d=p.render(p.props,p.state,p.context),t.__k=M(null!=d&&d.type==b&&null==d.key?d.props.children:d),null!=p.getChildContext&&(r=m(m({},r),p.getChildContext())),g||null==p.getSnapshotBeforeUpdate||(_=p.getSnapshotBeforeUpdate(v,y)),A(e,t,n,r,i,a,o,u,c),p.base=t.__e;d=p.__h.pop();)p.__s&&(p.state=p.__s),d.call(p);g||null==v||null==p.componentDidUpdate||p.componentDidUpdate(v,y,_),w&&(p.__E=p.__p=null)}else t.__e=function(e,t,n,r,i,a,o,s){var l,u,c,d,p=n.props,m=t.props;if(i="svg"===t.type||i,null==e&&null!=a){for(l=0;l<a.length;l++)if(null!=(u=a[l])&&(null===t.type?3===u.nodeType:u.localName===t.type)){e=u,a[l]=null;break}}if(null==e){if(null===t.type)return document.createTextNode(m);e=i?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),a=null}return null===t.type?p!==m&&(null!=a&&(a[a.indexOf(e)]=null),e.data=m):t!==n&&(null!=a&&(a=f.slice.call(e.childNodes)),c=(p=n.props||h).dangerouslySetInnerHTML,d=m.dangerouslySetInnerHTML,s||(d||c)&&(d&&c&&d.__html==c.__html||(e.innerHTML=d&&d.__html||"")),function(e,t,n,r,i){var a;for(a in n)a in t||C(e,a,null,n[a],r);for(a in t)i&&"function"!=typeof t[a]||"value"===a||"checked"===a||n[a]===t[a]||C(e,a,t[a],n[a],r)}(e,m,p,i,s),t.__k=t.props.children,d||A(e,t,n,r,"foreignObject"!==t.type&&i,a,o,h,s),s||("value"in m&&void 0!==m.value&&m.value!==e.value&&(e.value=null==m.value?"":m.value),"checked"in m&&void 0!==m.checked&&m.checked!==e.checked&&(e.checked=m.checked))),e}(n.__e,t,n,r,i,a,o,c);(d=l.diffed)&&d(t)}catch(e){l.__e(e,t,n)}return t.__e}function P(e,t){for(var n;n=e.pop();)try{n.componentDidMount()}catch(e){l.__e(e,n.__v)}l.__c&&l.__c(t)}function I(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){l.__e(e,n)}}function B(e,t,n){return this.constructor(e,n)}function L(){return(L=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var r=t[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}l={},x.prototype.setState=function(e,t){var n=this.__s!==this.state&&this.__s||(this.__s=m({},this.state));("function"!=typeof e||(e=e(n,this.props)))&&m(n,e),null!=e&&this.__v&&(this.u=!1,t&&this.__h.push(t),w(this))},x.prototype.forceUpdate=function(e){this.__v&&(e&&this.__h.push(e),this.u=!0,w(this))},x.prototype.render=b,u=[],c="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d=l.debounceRendering,l.__e=function(e,t,n){for(var r;t=t.__p;)if((r=t.__c)&&!r.__p)try{if(r.constructor&&null!=r.constructor.getDerivedStateFromError)r.setState(r.constructor.getDerivedStateFromError(e));else{if(null==r.componentDidCatch)continue;r.componentDidCatch(e)}return w(r.__E=r)}catch(t){e=t}throw e};var k="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",D="[\\s|\\(]+("+k+")[,|\\s]+("+k+")[,|\\s]+("+k+")\\s*\\)?",N="[\\s|\\(]+("+k+")[,|\\s]+("+k+")[,|\\s]+("+k+")[,|\\s]+("+k+")\\s*\\)?",F=RegExp("rgb"+D),O=RegExp("rgba"+N),U=RegExp("hsl"+D),z=RegExp("hsla"+N),H="^(?:#?|0x?)",G="([0-9a-fA-F]{1})",V="([0-9a-fA-F]{2})",j=RegExp(H+G+G+G+"$"),W=RegExp(H+G+G+G+G+"$"),X=RegExp(H+V+V+V+"$"),J=RegExp(H+V+V+V+V+"$"),Y=Math.log,K=Math.round,q=Math.floor;function Q(e,t,n){return Math.min(Math.max(e,t),n)}function Z(e,t){var n=e.indexOf("%")>-1,r=parseFloat(e);return n?t/100*r:r}function $(e){return parseInt(e,16)}function ee(e){return e.toString(16).padStart(2,"0")}var et=function(){function e(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=L({},this.$)}var t,n=e.prototype;return n.set=function(t){if("string"==typeof t)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(t)?this.hexString=t:/^rgba?/.test(t)?this.rgbString=t:/^hsla?/.test(t)&&(this.hslString=t);else if("object"==typeof t)t instanceof e?this.hsva=t.hsva:"r"in t&&"g"in t&&"b"in t?this.rgb=t:"h"in t&&"s"in t&&"v"in t?this.hsv=t:"h"in t&&"s"in t&&"l"in t?this.hsl=t:"kelvin"in t&&(this.kelvin=t.kelvin);else throw Error("Invalid color value")},n.setChannel=function(e,t,n){var r;this[e]=L({},this[e],((r={})[t]=n,r))},n.reset=function(){this.hsva=this.initialValue},n.clone=function(){return new e(this)},n.unbind=function(){this.onChange=void 0},e.hsvToRgb=function(e){var t=e.h/60,n=e.s/100,r=e.v/100,i=q(t),a=t-i,o=r*(1-n),s=r*(1-a*n),l=r*(1-(1-a)*n),u=i%6,c=[r,s,o,o,l,r][u],d=[l,r,r,s,o,o][u],h=[o,o,l,r,r,s][u];return{r:Q(255*c,0,255),g:Q(255*d,0,255),b:Q(255*h,0,255)}},e.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),o=i-a,s=0;switch(i){case a:s=0;break;case t:s=(n-r)/o+6*(n<r);break;case n:s=(r-t)/o+2;break;case r:s=(t-n)/o+4}return{h:60*s%360,s:Q(100*(0===i?0:o/i),0,100),v:Q(100*i,0,100)}},e.hsvToHsl=function(e){var t=e.s/100,n=e.v/100,r=(2-t)*n,i=r<=1?r:2-r;return{h:e.h,s:Q(100*(i<1e-9?0:t*n/i),0,100),l:Q(50*r,0,100)}},e.hslToHsv=function(e){var t=2*e.l,n=e.s*(t<=100?t:200-t)/100;return{h:e.h,s:Q(100*(t+n<1e-9?0:2*n/(t+n)),0,100),v:Q((t+n)/2,0,100)}},e.kelvinToRgb=function(e){var t,n,r,i=e/100;return i<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*Y(n),r=i<20?0:-254.76935184120902+.8274096064007395*(r=i-10)+115.67994401066147*Y(r)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*Y(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*Y(n),r=255),{r:Q(q(t),0,255),g:Q(q(n),0,255),b:Q(q(r),0,255)}},e.rgbToKelvin=function(t){for(var n,r=t.r,i=t.b,a=2e3,o=4e4;o-a>.4;){n=(o+a)*.5;var s=e.kelvinToRgb(n);s.b/s.r>=i/r?o=n:a=n}return n},t=[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var t=this.$;if(e=L({},t,e),this.onChange){var n={h:!1,v:!1,s:!1,a:!1};for(var r in t)n[r]=e[r]!=t[r];this.$=e,(n.h||n.s||n.v||n.a)&&this.onChange(this,n)}else this.$=e}},{key:"hsva",get:function(){return L({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=L({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return e.rgbToKelvin(this.rgb)},set:function(t){this.rgb=e.kelvinToRgb(t)}},{key:"red",get:function(){return this.rgb.r},set:function(e){this.rgb=L({},this.rgb,{r:e})}},{key:"green",get:function(){return this.rgb.g},set:function(e){this.rgb=L({},this.rgb,{g:e})}},{key:"blue",get:function(){return this.rgb.b},set:function(e){this.rgb=L({},this.rgb,{b:e})}},{key:"rgb",get:function(){var t=e.hsvToRgb(this.$),n=t.r,r=t.g,i=t.b;return{r:K(n),g:K(r),b:K(i)}},set:function(t){this.hsv=L({},e.rgbToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"rgba",get:function(){return L({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var t=e.hsvToHsl(this.$),n=t.h,r=t.s,i=t.l;return{h:K(n),s:K(r),l:K(i)}},set:function(t){this.hsv=L({},e.hslToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"hsla",get:function(){return L({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var t,n,r,i,a=1;if((t=F.exec(e))?(n=Z(t[1],255),r=Z(t[2],255),i=Z(t[3],255)):(t=O.exec(e))&&(n=Z(t[1],255),r=Z(t[2],255),i=Z(t[3],255),a=Z(t[4],1)),t)this.rgb={r:n,g:r,b:i,a:a};else throw Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+ee(e.r)+ee(e.g)+ee(e.b)},set:function(e){var t,n,r,i,a=255;if((t=j.exec(e))?(n=17*$(t[1]),r=17*$(t[2]),i=17*$(t[3])):(t=W.exec(e))?(n=17*$(t[1]),r=17*$(t[2]),i=17*$(t[3]),a=17*$(t[4])):(t=X.exec(e))?(n=$(t[1]),r=$(t[2]),i=$(t[3])):(t=J.exec(e))&&(n=$(t[1]),r=$(t[2]),i=$(t[3]),a=$(t[4])),t)this.rgb={r:n,g:r,b:i,a:a/255};else throw Error("Invalid hex string")}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+ee(e.r)+ee(e.g)+ee(e.b)+ee(q(255*e.a))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var t,n,r,i,a=1;if((t=U.exec(e))?(n=Z(t[1],360),r=Z(t[2],100),i=Z(t[3],100)):(t=z.exec(e))&&(n=Z(t[1],360),r=Z(t[2],100),i=Z(t[3],100),a=Z(t[4],1)),t)this.hsl={h:n,s:r,l:i,a:a};else throw Error("Invalid hsl string")}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function en(e){var t,n=e.width,r=e.sliderSize,i=e.borderWidth,a=e.handleRadius,o=e.padding,s=e.sliderShape,l="horizontal"===e.layoutDirection;return(r=null!=(t=r)?t:2*o+2*a,"circle"===s)?{handleStart:e.padding+e.handleRadius,handleRange:n-2*o-2*a,width:n,height:n,cx:n/2,cy:n/2,radius:n/2-i/2}:{handleStart:r/2,handleRange:n-r,radius:r/2,x:0,y:0,width:l?r:n,height:l?n:r}}var er=2*Math.PI,ei=function(e,t){return Math.sqrt(e*e+t*t)};function ea(e){return e.width/2-e.padding-e.handleRadius-e.borderWidth}function eo(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function es(e,t,n){var r=e.wheelAngle,i=e.wheelDirection;return n&&"clockwise"===i?t=r+t:"clockwise"===i?t=360-r+t:n&&"anticlockwise"===i?t=r+180-t:"anticlockwise"===i&&(t=r-t),(t%360+360)%360}function el(e,t,n){var r=eo(e),i=r.cx,a=r.cy,o=ea(e);t=i-t;var s=es(e,360/er*Math.atan2(-(n=a-n),-t)),l=Math.min(ei(t,n),o);return{h:Math.round(s),s:Math.round(100/o*l)}}function eu(e){var t=e.width,n=e.boxHeight;return{width:t,height:null!=n?n:t,radius:e.padding+e.handleRadius}}function ec(e,t,n){var r=eu(e),i=r.width,a=r.height,o=r.radius;return{s:Math.max(0,Math.min((t-o)/(i-2*o)*100,100)),v:Math.max(0,Math.min(100-(n-o)/(a-2*o)*100,100))}}function ed(e,t,n,r){for(var i=0;i<r.length;i++){var a=r[i].x-t,o=r[i].y-n;if(Math.sqrt(a*a+o*o)<e.handleRadius)return i}return null}function eh(e){return{boxSizing:"border-box",border:e.borderWidth+"px solid "+e.borderColor}}function ef(e,t,n){return e+"-gradient("+t+", "+n.map(function(e){var t=e[0];return e[1]+" "+t+"%"}).join(",")+")"}function ep(e){return"string"==typeof e?e:e+"px"}var em=["mousemove","touchmove","mouseup","touchend"],eg=function(e){function t(t){e.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(e){var t=this.handleEvent.bind(this),n="horizontal"===e.layoutDirection,r=null===e.margin?e.sliderMargin:e.margin,i={overflow:"visible",display:n?"inline-block":"block"};return e.index>0&&(i[n?"marginLeft":"marginTop"]=r),v(b,null,e.children(this.uid,{onMouseDown:t,ontouchstart:t},i))},t.prototype.handleEvent=function(e){var t=this,n=this.props.onInput,r=this.base.getBoundingClientRect();e.preventDefault();var i=e.touches?e.changedTouches[0]:e,a=i.clientX-r.left,o=i.clientY-r.top;switch(e.type){case"mousedown":case"touchstart":!1!==n(a,o,0)&&em.forEach(function(e){document.addEventListener(e,t,{passive:!1})});break;case"mousemove":case"touchmove":n(a,o,1);break;case"mouseup":case"touchend":n(a,o,2),em.forEach(function(e){document.removeEventListener(e,t,{passive:!1})})}},t}(x);function ev(e){var t,n,r,i,a=e.r,s=e.url;return v("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+ep(e.x)+", "+ep(e.y)+")",willChange:"transform",top:ep(-a),left:ep(-a),width:ep(2*a),height:ep(2*a),position:"absolute",overflow:"visible"}},s&&v("use",Object.assign({xlinkHref:(o||(o=document.getElementsByTagName("base")),t=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(t),r=/iPhone|iPod|iPad/i.test(t),i=window.location,(n||r)&&o.length>0?i.protocol+"//"+i.host+i.pathname+i.search+s:s)},e.props)),!s&&v("circle",{cx:a,cy:a,r:a,fill:"none","stroke-width":2,stroke:"#000"}),!s&&v("circle",{cx:a,cy:a,r:a-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function ey(e){var t,n,r,i,a,o,s,l,u,c=e.activeIndex,d=void 0!==c&&c<e.colors.length?e.colors[c]:e.color,h=en(e),f=h.width,p=h.height,m=h.radius,g=(n=(t=en(e)).width,r=t.height,i=t.handleRange,a=t.handleStart,o="horizontal"===e.layoutDirection,s=function(e,t){var n=t.hsva,r=t.rgb;switch(e.sliderType){case"red":return r.r/2.55;case"green":return r.g/2.55;case"blue":return r.b/2.55;case"alpha":return 100*n.a;case"kelvin":var i=e.minTemperature,a=e.maxTemperature;return Math.max(0,Math.min((t.kelvin-i)/(a-i)*100,100));case"hue":return n.h/=3.6;case"saturation":return n.s;default:return n.v}}(e,d),l=o?n/2:r/2,u=a+s/100*i,o&&(u=-1*u+i+2*a),{x:o?l:u,y:o?u:l}),y=function(e,t){var n=t.hsv,r=t.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+r.g+","+r.b+")"],[100,"rgb(255,"+r.g+","+r.b+")"]];case"green":return[[0,"rgb("+r.r+",0,"+r.b+")"],[100,"rgb("+r.r+",255,"+r.b+")"]];case"blue":return[[0,"rgb("+r.r+","+r.g+",0)"],[100,"rgb("+r.r+","+r.g+",255)"]];case"alpha":return[[0,"rgba("+r.r+","+r.g+","+r.b+",0)"],[100,"rgb("+r.r+","+r.g+","+r.b+")"]];case"kelvin":for(var i=[],a=e.minTemperature,o=e.maxTemperature,s=o-a,l=a,u=0;l<o;l+=s/8,u+=1){var c=et.kelvinToRgb(l),d=c.r,h=c.g,f=c.b;i.push([12.5*u,"rgb("+d+","+h+","+f+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var p=et.hsvToHsl({h:n.h,s:0,v:n.v}),m=et.hsvToHsl({h:n.h,s:100,v:n.v});return[[0,"hsl("+p.h+","+p.s+"%,"+p.l+"%)"],[100,"hsl("+m.h+","+m.s+"%,"+m.l+"%)"]];default:var g=et.hsvToHsl({h:n.h,s:n.s,v:100});return[[0,"#000"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]]}}(e,d);return v(eg,Object.assign({},e,{onInput:function(t,n,r){var i=function(e,t,n){var r,i=en(e),a=i.handleRange,o=i.handleStart;r=Math.max(Math.min(r="horizontal"===e.layoutDirection?-1*n+a+o:t-o,a),0);var s=Math.round(100/a*r);switch(e.sliderType){case"kelvin":var l=e.minTemperature;return l+s/100*(e.maxTemperature-l);case"alpha":return s/100;case"hue":return 3.6*s;case"red":case"blue":case"green":return 2.55*s;default:return s}}(e,t,n);e.parent.inputActive=!0,d[e.sliderType]=i,e.onInput(r,e.id)}}),function(t,n,r){return v("div",Object.assign({},n,{className:"IroSlider",style:Object.assign({},{position:"relative",width:ep(f),height:ep(p),borderRadius:ep(m),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},r)}),v("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:ep(m),background:ef("linear","horizontal"===e.layoutDirection?"to top":"to right",y)},eh(e))}),v(ev,{isActive:!0,index:d.index,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:g.x,y:g.y}))})}function eb(e){var t=eo(e).width,n=e.colors;e.borderWidth;var r=e.parent,i=e.color,a=i.hsv,o=n.map(function(t){var n,r,i,a,o,s,l,u;return n=t.hsv,i=(r=eo(e)).cx,a=r.cy,o=ea(e),s=(180+es(e,n.h,!0))*(er/360),{x:i+(l=n.s/100*o)*Math.cos(s)*(u="clockwise"===e.wheelDirection?-1:1),y:a+l*Math.sin(s)*u}}),s={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};return v(eg,Object.assign({},e,{onInput:function(t,n,a){if(0===a){if(l=(s=eo(e)).cx,u=s.cy,c=e.width/2,!(ei(l-t,u-n)<c))return!1;var s,l,u,c,d=ed(e,t,n,o);null!==d?r.setActiveColor(d):(r.inputActive=!0,i.hsv=el(e,t,n),e.onInput(a,e.id))}else 1===a&&(r.inputActive=!0,i.hsv=el(e,t,n));e.onInput(a,e.id)}}),function(r,l,u){return v("div",Object.assign({},l,{className:"IroWheel",style:Object.assign({},{width:ep(t),height:ep(t),position:"relative"},u)}),v("div",{className:"IroWheelHue",style:Object.assign({},s,{transform:"rotateZ("+(e.wheelAngle+90)+"deg)",background:"clockwise"===e.wheelDirection?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)"})}),v("div",{className:"IroWheelSaturation",style:Object.assign({},s,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),e.wheelLightness&&v("div",{className:"IroWheelLightness",style:Object.assign({},s,{background:"#000",opacity:1-a.v/100})}),v("div",{className:"IroWheelBorder",style:Object.assign({},s,eh(e))}),n.filter(function(e){return e!==i}).map(function(t){return v(ev,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:o[t.index].x,y:o[t.index].y})}),v(ev,{isActive:!0,index:i.index,fill:i.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:o[i.index].x,y:o[i.index].y}))})}ev.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},ey.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var ex=function(e){function t(t){var n=this;e.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id,(t.colors.length>0?t.colors:[t.color]).forEach(function(e){return n.addColor(e)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addColor=function(e,t){void 0===t&&(t=this.colors.length);var n=new et(e,this.onColorChange.bind(this));this.colors.splice(t,0,n),this.colors.forEach(function(e,t){return e.index=t}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",n)},t.prototype.removeColor=function(e){var t=this.colors.splice(e,1)[0];t.unbind(),this.colors.forEach(function(e,t){return e.index=t}),this.state&&this.setState({colors:this.colors}),t.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",t)},t.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},t.prototype.setColors=function(e,t){var n=this;void 0===t&&(t=0),this.colors.forEach(function(e){return e.unbind()}),this.colors=[],e.forEach(function(e){return n.addColor(e)}),this.setActiveColor(t),this.emit("color:setAll",this.colors)},t.prototype.on=function(e,t){var n=this,r=this.events;(Array.isArray(e)?e:[e]).forEach(function(e){(r[e]||(r[e]=[])).push(t),n.deferredEvents[e]&&(n.deferredEvents[e].forEach(function(e){t.apply(null,e)}),n.deferredEvents[e]=[])})},t.prototype.off=function(e,t){var n=this;(Array.isArray(e)?e:[e]).forEach(function(e){var r=n.events[e];r&&r.splice(r.indexOf(t),1)})},t.prototype.emit=function(e){for(var t=this,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var i=this.activeEvents;i.hasOwnProperty(e)&&i[e]||(i[e]=!0,(this.events[e]||[]).forEach(function(e){return e.apply(t,n)}),i[e]=!1)},t.prototype.deferredEmit=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=this.deferredEvents;this.emit.apply(this,[e].concat(t)),(r[e]||(r[e]=[])).push(t)},t.prototype.setOptions=function(e){this.setState(e)},t.prototype.resize=function(e){this.setOptions({width:e})},t.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},t.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},t.prototype.onColorChange=function(e,t){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,t)),this.emit("color:change",e,t)},t.prototype.emitInputEvent=function(e,t){0===e?this.emit("input:start",this.color,t):1===e?this.emit("input:move",this.color,t):2===e&&this.emit("input:end",this.color,t)},t.prototype.render=function(e,t){var n=this,r=t.layout;return!Array.isArray(r)&&(r=[{component:eb},{component:ey}],t.transparency&&r.push({component:ey,options:{sliderType:"alpha"}})),v("div",{class:"IroColorPicker",id:t.id,style:{display:t.display}},r.map(function(e,r){return v(e.component,Object.assign({},t,e.options,{ref:void 0,onInput:n.emitInputEvent.bind(n),parent:n,index:r}))}))},t}(x);ex.defaultProps=Object.assign({},{width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},{colors:[],display:"block",id:null,layout:"default",margin:null});var e_=((r=function(e,t){var n,r,i,a,o,s,u=document.createElement("div");function c(){var t=e instanceof Element?e:document.querySelector(e);t.appendChild(s.base),s.onMount(t)}return n=v(ex,Object.assign({},{ref:function(e){return s=e}},t)),l.__p&&l.__p(n,u),a=(i=void 0===h)?null:r&&r.__k||u.__k,n=v(b,null,[n]),o=[],R(u,i?u.__k=n:(r||u).__k=n,a||h,h,void 0!==u.ownerSVGElement,r&&!i?[r]:a?null:f.slice.call(u.childNodes),o,!1,r||h,i),P(o,n),"loading"!==document.readyState?c():document.addEventListener("DOMContentLoaded",c),s}).prototype=ex.prototype,Object.assign(r,ex),r.__component=ex,r);(i=s||(s={})).version="5.5.2",i.Color=et,i.ColorPicker=e_,(a=i.ui||(i.ui={})).h=v,a.ComponentBase=eg,a.Handle=ev,a.Slider=ey,a.Wheel=eb,a.Box=function(e){var t=eu(e),n=t.width,r=t.height,i=t.radius,a=e.colors,o=e.parent,s=e.activeIndex,l=void 0!==s&&s<e.colors.length?e.colors[s]:e.color,u=[[[0,"#fff"],[100,"hsl("+l.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]],c=a.map(function(t){var n,r,i,a,o,s;return r=(n=eu(e)).width,i=n.height,a=n.radius,o=t.hsv,s=i-2*a,{x:a+o.s/100*(r-2*a),y:a+(s-o.v/100*s)}});return v(eg,Object.assign({},e,{onInput:function(t,n,r){if(0===r){var i=ed(e,t,n,c);null!==i?o.setActiveColor(i):(o.inputActive=!0,l.hsv=ec(e,t,n),e.onInput(r,e.id))}else 1===r&&(o.inputActive=!0,l.hsv=ec(e,t,n));e.onInput(r,e.id)}}),function(t,o,s){return v("div",Object.assign({},o,{className:"IroBox",style:Object.assign({},{width:ep(n),height:ep(r),position:"relative"},s)}),v("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:ep(i)},eh(e),{background:ef("linear","to bottom",u[1])+","+ef("linear","to right",u[0])})}),a.filter(function(e){return e!==l}).map(function(t){return v(ev,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:c[t.index].x,y:c[t.index].y})}),v(ev,{isActive:!0,index:l.index,fill:l.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:c[l.index].x,y:c[l.index].y}))})};let ew=s},8286:function(e,t,n){"use strict";n.d(t,{mI:()=>f,iA:()=>h});var r=n(6056),i=n(5300),a=n(5263),o=n(3975);function s(e,t,n,r){let a=class extends i.jyz{constructor(a={}){let o=Object.entries(e);super({uniforms:o.reduce((e,[t,n])=>{let r=i.rDY.clone({[t]:{value:n}});return{...e,...r}},{}),vertexShader:t,fragmentShader:n}),this.key="",o.forEach(([e])=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t})),Object.assign(this,a),r&&r(this)}};return a.key=i.M8C.generateUUID(),a}let l=s({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),u=parseInt(i.UZH.replace(/\D+/g,"")),c=a.createContext(null),d=s({color:new i.Ilk,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${u>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),h=a.forwardRef(({children:e,temporal:t,frames:n=40,limit:r=1/0,blend:i=20,scale:s=10,opacity:l=1,alphaTest:u=.75,color:h="black",colorBlend:f=2,resolution:m=1024,toneMapped:g=!0,...v},y)=>{(0,o.e)({SoftShadowMaterial:d});let b=(0,o.A)(e=>e.gl),x=(0,o.A)(e=>e.scene),_=(0,o.A)(e=>e.camera),w=(0,o.A)(e=>e.invalidate),S=a.useRef(null),A=a.useRef(null),[M]=a.useState(()=>new p(b,x,m));a.useLayoutEffect(()=>{M.configure(S.current)},[]);let E=a.useMemo(()=>({lights:new Map,temporal:!!t,frames:Math.max(2,n),blend:Math.max(2,n===1/0?i:n),count:0,getMesh:()=>S.current,reset:()=>{M.clear();let e=S.current.material;e.opacity=0,e.alphaTest=0,E.count=0},update:(e=1)=>{let t=S.current.material;E.temporal?(t.opacity=Math.min(l,t.opacity+l/E.blend),t.alphaTest=Math.min(u,t.alphaTest+u/E.blend)):(t.opacity=l,t.alphaTest=u),A.current.visible=!0,M.prepare();for(let t=0;t<e;t++)E.lights.forEach(e=>e.update()),M.update(_,E.blend);A.current.visible=!1,M.finish()}}),[M,_,x,t,n,i,l,u]);return a.useLayoutEffect(()=>{E.reset(),E.temporal||E.frames===1/0||E.update(E.blend)}),a.useImperativeHandle(y,()=>E,[E]),(0,o.C)(()=>{(E.temporal||E.frames===1/0)&&E.count<E.frames&&E.count<r&&(w(),E.update(),E.count++)}),a.createElement("group",v,a.createElement("group",{traverse:()=>null,ref:A},a.createElement(c.Provider,{value:E},e)),a.createElement("mesh",{receiveShadow:!0,ref:S,scale:s,rotation:[-Math.PI/2,0,0]},a.createElement("planeGeometry",null),a.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:g,color:h,blend:f,map:M.progressiveLightMap2.texture})))}),f=a.forwardRef(({castShadow:e=!0,bias:t=.001,mapSize:n=512,size:o=5,near:s=.5,far:l=500,frames:d=1,position:h=[0,0,0],radius:f=1,amount:p=8,intensity:m=u>=155?Math.PI:1,ambient:g=.5,...v},y)=>{let b=a.useRef(null),x=new i.Pa4(...h).length(),_=a.useContext(c),w=a.useCallback(()=>{let e;if(b.current)for(let t=0;t<b.current.children.length;t++)if(e=b.current.children[t],Math.random()>g)e.position.set(h[0]+i.M8C.randFloatSpread(f),h[1]+i.M8C.randFloatSpread(f),h[2]+i.M8C.randFloatSpread(f));else{let t=Math.acos(2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math.random();e.position.set(Math.cos(t)*Math.cos(n)*x,Math.abs(Math.cos(t)*Math.sin(n)*x),Math.sin(t)*x)}},[f,g,x,...h]),S=a.useMemo(()=>({update:w}),[w]);return a.useImperativeHandle(y,()=>S,[S]),a.useLayoutEffect(()=>{var e;let t=b.current;return _&&(null==(e=_.lights)||e.set(t.uuid,S)),()=>{var e;null==_||null==(e=_.lights)||e.delete(t.uuid)}},[_,S]),a.createElement("group",(0,r.Z)({ref:b},v),Array.from({length:p},(r,i)=>a.createElement("directionalLight",{key:i,castShadow:e,"shadow-bias":t,"shadow-mapSize":[n,n],intensity:m/p},a.createElement("orthographicCamera",{attach:"shadow-camera",args:[-o,o,o,-o,s,l]}))))});class p{constructor(e,t,n=1024){this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new i.Ilk,this.clearAlpha=0;let r={type:i.cLu,magFilter:i.TyD,minFilter:i.TyD};this.progressiveLightMap1=new i.dd2(this.res,this.res,r),this.progressiveLightMap2=new i.dd2(this.res,this.res,r),this.discardMat=new l,this.targetMat=new i.YBo({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=e=>{e.vertexShader="varying vec2 vUv;\n"+e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";let t=e.fragmentShader.indexOf("void main() {");e.fragmentShader="varying vec2 vUv;\n"+e.fragmentShader.slice(0,t)+"uniform sampler2D previousShadowMap;\n	uniform float averagingWindow;\n"+e.fragmentShader.slice(t-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,e.uniforms.previousShadowMap=this.previousShadowMap,e.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{e.geometry?this.meshes.push({object:e,material:e.material}):e.isLight&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;let n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,i=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=i}}},637:function(e,t,n){"use strict";n.d(t,{M:()=>o});var r=n(6056),i=n(5300),a=n(5263);let o=a.forwardRef(function({children:e,disable:t,disableX:n,disableY:o,disableZ:s,left:l,right:u,top:c,bottom:d,front:h,back:f,onCentered:p,precise:m=!0,cacheKey:g=0,...v},y){let b=a.useRef(null),x=a.useRef(null),_=a.useRef(null);return a.useLayoutEffect(()=>{x.current.matrixWorld.identity();let e=new i.ZzF().setFromObject(_.current,m),r=new i.Pa4,a=new i.aLr,g=e.max.x-e.min.x,v=e.max.y-e.min.y,y=e.max.z-e.min.z;e.getCenter(r),e.getBoundingSphere(a);let w=c?v/2:d?-v/2:0,S=l?-g/2:u?g/2:0,A=h?y/2:f?-y/2:0;x.current.position.set(t||n?0:-r.x+S,t||o?0:-r.y+w,t||s?0:-r.z+A),void 0!==p&&p({parent:b.current.parent,container:b.current,width:g,height:v,depth:y,boundingBox:e,boundingSphere:a,center:r,verticalAlignment:w,horizontalAlignment:S,depthAlignment:A})},[g,p,c,l,h,t,n,o,s,m,u,d,f]),a.useImperativeHandle(y,()=>b.current,[]),a.createElement("group",(0,r.Z)({ref:b},v),a.createElement("group",{ref:x},a.createElement("group",{ref:_},e)))})},3414:function(e,t,n){"use strict";n.d(t,{_:()=>c});var r=n(6056),i=n(5263),a=n(5300),o=n(3975);class s extends a.u9r{constructor(e,t,n,r){super();let i=[],o=[],s=[],u=new a.Pa4,c=new a.yGw;c.makeRotationFromEuler(n),c.setPosition(t);let d=new a.yGw;function h(t,n,r){n.applyMatrix4(e.matrixWorld),n.applyMatrix4(d),r.transformDirection(e.matrixWorld),t.push(new l(n.clone(),r.clone()))}function f(e,t){let n=[],i=.5*Math.abs(r.dot(t));for(let r=0;r<e.length;r+=3){let a,o,s,l,u,c,d,h=0,f=e[r+0].position.dot(t)-i,m=e[r+1].position.dot(t)-i,g=e[r+2].position.dot(t)-i;switch(+!!(u=f>0)+ +!!(c=m>0)+ +!!(d=g>0)){case 0:n.push(e[r]),n.push(e[r+1]),n.push(e[r+2]);break;case 1:if(u&&(a=e[r+1],o=e[r+2],s=p(e[r],a,t,i),l=p(e[r],o,t,i)),c){a=e[r],o=e[r+2],s=p(e[r+1],a,t,i),l=p(e[r+1],o,t,i),n.push(s),n.push(o.clone()),n.push(a.clone()),n.push(o.clone()),n.push(s.clone()),n.push(l);break}d&&(a=e[r],o=e[r+1],s=p(e[r+2],a,t,i),l=p(e[r+2],o,t,i)),n.push(a.clone()),n.push(o.clone()),n.push(s),n.push(l),n.push(s.clone()),n.push(o.clone());break;case 2:u||(o=p(a=e[r].clone(),e[r+1],t,i),s=p(a,e[r+2],t,i),n.push(a),n.push(o),n.push(s)),c||(o=p(a=e[r+1].clone(),e[r+2],t,i),s=p(a,e[r],t,i),n.push(a),n.push(o),n.push(s)),d||(o=p(a=e[r+2].clone(),e[r],t,i),s=p(a,e[r+1],t,i),n.push(a),n.push(o),n.push(s))}}return n}function p(e,t,n,r){let i=e.position.dot(n)-r,o=i/(i-(t.position.dot(n)-r));return new l(new a.Pa4(e.position.x+o*(t.position.x-e.position.x),e.position.y+o*(t.position.y-e.position.y),e.position.z+o*(t.position.z-e.position.z)),new a.Pa4(e.normal.x+o*(t.normal.x-e.normal.x),e.normal.y+o*(t.normal.y-e.normal.y),e.normal.z+o*(t.normal.z-e.normal.z)))}d.copy(c).invert(),function(){let t;let n=[],l=new a.Pa4,d=new a.Pa4;if(!0===e.geometry.isGeometry){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}let p=e.geometry,m=p.attributes.position,g=p.attributes.normal;if(null!==p.index){let e=p.index;for(t=0;t<e.count;t++)l.fromBufferAttribute(m,e.getX(t)),d.fromBufferAttribute(g,e.getX(t)),h(n,l,d)}else for(t=0;t<m.count;t++)l.fromBufferAttribute(m,t),d.fromBufferAttribute(g,t),h(n,l,d);for(t=0,n=f(n,u.set(1,0,0)),n=f(n,u.set(-1,0,0)),n=f(n,u.set(0,1,0)),n=f(n,u.set(0,-1,0)),n=f(n,u.set(0,0,1)),n=f(n,u.set(0,0,-1));t<n.length;t++){let e=n[t];s.push(.5+e.position.x/r.x,.5+e.position.y/r.y),e.position.applyMatrix4(c),i.push(e.position.x,e.position.y,e.position.z),o.push(e.normal.x,e.normal.y,e.normal.z)}}(),this.setAttribute("position",new a.a$l(i,3)),this.setAttribute("normal",new a.a$l(o,3)),this.setAttribute("uv",new a.a$l(s,2))}}class l{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function u(e=[0,0,0]){return Array.isArray(e)?e:e instanceof a.Pa4||e instanceof a.USm?[e.x,e.y,e.z]:[e,e,e]}let c=i.forwardRef(function({debug:e,depthTest:t=!1,polygonOffsetFactor:n=-10,map:l,mesh:c,children:d,position:h,rotation:f,scale:p,...m},g){let v=i.useRef(null);i.useImperativeHandle(g,()=>v.current);let y=i.useRef(null),b=i.useRef({position:new a.Pa4,rotation:new a.USm,scale:new a.Pa4(1,1,1)});return i.useLayoutEffect(()=>{let e=(null==c?void 0:c.current)||v.current.parent,t=v.current;if(!(e instanceof a.Kj0))throw Error('Decal must have a Mesh as parent or specify its "mesh" prop');if(e){(0,o.q)(b.current,{position:h,scale:p});let n=e.matrixWorld.clone();if(e.matrixWorld.identity(),f&&"number"!=typeof f)(0,o.q)(b.current,{rotation:f});else{let t=new a.Tme;t.position.copy(b.current.position);let n=e.geometry.attributes.position.array;void 0===e.geometry.attributes.normal&&e.geometry.computeVertexNormals();let r=e.geometry.attributes.normal.array,i=1/0;new a.Pa4;let s=new a.Pa4,l=t.position.x,u=t.position.y,c=t.position.z,d=n.length,h=-1;for(let e=0;e<d;e+=3){let t=n[e],r=n[e+1],a=n[e+2],o=t-l,s=r-u,d=a-c,f=o*o+s*s+d*d;f<i&&(i=f,h=e)}s.fromArray(r,h),t.lookAt(t.position.clone().add(s)),t.rotateZ(Math.PI),t.rotateY(Math.PI),"number"==typeof f&&t.rotateZ(f),(0,o.q)(b.current,{rotation:t.rotation})}return t.geometry=new s(e,b.current.position,b.current.rotation,b.current.scale),e.matrixWorld=n,()=>{t.geometry.dispose()}}},[c,...u(h),...u(p),...u(f)]),i.useLayoutEffect(()=>{y.current&&((0,o.q)(y.current,b.current),y.current.traverse(e=>e.raycast=()=>null))},[e]),i.createElement("mesh",(0,r.Z)({ref:v,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":n,"material-depthTest":t,"material-map":l},m),d,e&&i.createElement("mesh",{ref:y},i.createElement("boxGeometry",null),i.createElement("meshNormalMaterial",{wireframe:!0}),i.createElement("axesHelper",null)))})},2629:function(e,t,n){"use strict";let r;n.d(t,{qA:()=>eS});var i=n(6056),a=n(5263),o=n(3975),s=n(5300),l=n(8992);let u=e=>e&&e.isCubeTexture;class c extends s.Kj0{constructor(e,t){var n,r;let i=u(e),a=Math.floor(Math.log2((null!=(r=i?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024)/4)),o=Math.pow(2,a),c=3*Math.max(o,112),d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,h=[i?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/(4*o)}`,`#define CUBEUV_MAX_MIP ${a}.0`].join("\n")+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${l.i>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,f={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new s.cJO(1,16),new s.jyz({uniforms:f,fragmentShader:h,vertexShader:d,side:s.ehD}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class d extends s.yxD{constructor(e){super(e),this.type=s.cLu}parse(e){let t,n,r;let i=function(e,t){switch(e){case 1:throw Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw Error("THREE.RGBELoader: Memory Error: "+(t||""))}},a=function(e,t,n){t=t||1024;let r=e.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=s.indexOf("\n"))&&a<t&&r<e.byteLength;)o+=s,a+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return -1<i&&(!1!==n&&(e.pos+=a+i+1),o+s.slice(0,i))},o=new Uint8Array(e);o.pos=0;let l=function(e){let t,n;let r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for(!(e.pos>=e.byteLength)&&(t=a(e))||i(1,"no header found"),(n=t.match(/^#\?(\S+)/))||i(3,"bad initial token"),u.valid|=1,u.programtype=n[1],u.string+=t+"\n";!1!==(t=a(e));){if(u.string+=t+"\n","#"===t.charAt(0)){u.comments+=t+"\n";continue}if((n=t.match(r))&&(u.gamma=parseFloat(n[1])),(n=t.match(o))&&(u.exposure=parseFloat(n[1])),(n=t.match(s))&&(u.valid|=2,u.format=n[1]),(n=t.match(l))&&(u.valid|=4,u.height=parseInt(n[1],10),u.width=parseInt(n[2],10)),2&u.valid&&4&u.valid)break}return 2&u.valid||i(3,"missing format specifier"),4&u.valid||i(3,"missing image size specifier"),u}(o),u=l.width,c=l.height,d=function(e,t,n){if(t<8||t>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);t!==(e[2]<<8|e[3])&&i(3,"wrong scanline width");let r=new Uint8Array(4*t*n);r.length||i(4,"unable to allocate buffer space");let a=0,o=0,s=4*t,l=new Uint8Array(4),u=new Uint8Array(s),c=n;for(;c>0&&o<e.byteLength;){o+4>e.byteLength&&i(1),l[0]=e[o++],l[1]=e[o++],l[2]=e[o++],l[3]=e[o++],(2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=t)&&i(3,"bad rgbe scanline format");let n=0,d;for(;n<s&&o<e.byteLength;){let t=(d=e[o++])>128;if(t&&(d-=128),(0===d||n+d>s)&&i(3,"bad scanline data"),t){let t=e[o++];for(let e=0;e<d;e++)u[n++]=t}else u.set(e.subarray(o,o+d),n),n+=d,o+=d}for(let e=0;e<t;e++){let n=0;r[a]=u[e+n],n+=t,r[a+1]=u[e+n],n+=t,r[a+2]=u[e+n],n+=t,r[a+3]=u[e+n],a+=4}c--}return r}(o.subarray(o.pos),u,c);switch(this.type){case s.VzW:let h=new Float32Array(4*(r=d.length/4));for(let e=0;e<r;e++)!function(e,t,n,r){let i=Math.pow(2,e[t+3]-128)/255;n[r+0]=e[t+0]*i,n[r+1]=e[t+1]*i,n[r+2]=e[t+2]*i,n[r+3]=1}(d,4*e,h,4*e);t=h,n=s.VzW;break;case s.cLu:let f=new Uint16Array(4*(r=d.length/4));for(let e=0;e<r;e++)!function(e,t,n,r){let i=Math.pow(2,e[t+3]-128)/255;n[r+0]=s.A5E.toHalfFloat(Math.min(e[t+0]*i,65504)),n[r+1]=s.A5E.toHalfFloat(Math.min(e[t+1]*i,65504)),n[r+2]=s.A5E.toHalfFloat(Math.min(e[t+2]*i,65504)),n[r+3]=s.A5E.toHalfFloat(1)}(d,4*e,f,4*e);t=f,n=s.cLu;break;default:throw Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:u,height:c,data:t,header:l.string,gamma:l.gamma,exposure:l.exposure,type:n}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){switch(e.type){case s.VzW:case s.cLu:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=s.wem,e.magFilter=s.wem,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)},n,r)}}var h=Uint8Array,f=Uint16Array,p=Uint32Array,m=new h([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),g=new h([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),v=new h([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),y=function(e,t){for(var n=new f(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new p(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},b=y(m,2),x=b[0],_=b[1];x[28]=258,_[258]=28;var w=y(g,0),S=w[0];w[1];for(var A=new f(32768),M=0;M<32768;++M){var E=(43690&M)>>>1|(21845&M)<<1;E=(61680&(E=(52428&E)>>>2|(13107&E)<<2))>>>4|(3855&E)<<4,A[M]=((65280&E)>>>8|(255&E)<<8)>>>1}for(var C=function(e,t,n){for(var r,i=e.length,a=0,o=new f(t);a<i;++a)++o[e[a]-1];var s=new f(t);for(a=0;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){r=new f(1<<t);var l=15-t;for(a=0;a<i;++a)if(e[a])for(var u=a<<4|e[a],c=t-e[a],d=s[e[a]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)r[A[d]>>>l]=u}else for(a=0,r=new f(i);a<i;++a)e[a]&&(r[a]=A[s[e[a]-1]++]>>>15-e[a]);return r},T=new h(288),M=0;M<144;++M)T[M]=8;for(var M=144;M<256;++M)T[M]=9;for(var M=256;M<280;++M)T[M]=7;for(var M=280;M<288;++M)T[M]=8;for(var R=new h(32),M=0;M<32;++M)R[M]=5;var P=C(T,9,1),I=C(R,5,1),B=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},L=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},k=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},D=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof f?f:e instanceof p?p:h)(n-t);return r.set(e.subarray(t,n)),r},N=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new h(0);var i=!t||n,a=!n||n.i;n||(n={}),t||(t=new h(3*r));var o=function(e){var n=t.length;if(e>n){var r=new h(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,l=n.p||0,u=n.b||0,c=n.l,d=n.d,f=n.m,p=n.n,y=8*r;do{if(!c){n.f=s=L(e,l,1);var b=L(e,l+1,3);if(l+=3,b){if(1==b)c=P,d=I,f=9,p=5;else if(2==b){var _=L(e,l,31)+257,w=L(e,l+10,15)+4,A=_+L(e,l+5,31)+1;l+=14;for(var M=new h(A),E=new h(19),T=0;T<w;++T)E[v[T]]=L(e,l+3*T,7);l+=3*w;for(var R=B(E),N=(1<<R)-1,F=C(E,R,1),T=0;T<A;){var O=F[L(e,l,N)];l+=15&O;var U=O>>>4;if(U<16)M[T++]=U;else{var z=0,H=0;for(16==U?(H=3+L(e,l,3),l+=2,z=M[T-1]):17==U?(H=3+L(e,l,7),l+=3):18==U&&(H=11+L(e,l,127),l+=7);H--;)M[T++]=z}}var G=M.subarray(0,_),V=M.subarray(_);f=B(G),p=B(V),c=C(G,f,1),d=C(V,p,1)}else throw"invalid block type"}else{var j,U=((j=l)/8|0)+(7&j&&1)+4,W=e[U-4]|e[U-3]<<8,X=U+W;if(X>r){if(a)throw"unexpected EOF";break}i&&o(u+W),t.set(e.subarray(U,X),u),n.b=u+=W,n.p=l=8*X;continue}if(l>y){if(a)throw"unexpected EOF";break}}i&&o(u+131072);for(var J=(1<<f)-1,Y=(1<<p)-1,K=l;;K=l){var z=c[k(e,l)&J],q=z>>>4;if((l+=15&z)>y){if(a)throw"unexpected EOF";break}if(!z)throw"invalid length/literal";if(q<256)t[u++]=q;else if(256==q){K=l,c=null;break}else{var Q=q-254;if(q>264){var T=q-257,Z=m[T];Q=L(e,l,(1<<Z)-1)+x[T],l+=Z}var $=d[k(e,l)&Y],ee=$>>>4;if(!$)throw"invalid distance";l+=15&$;var V=S[ee];if(ee>3){var Z=g[ee];V+=k(e,l)&(1<<Z)-1,l+=Z}if(l>y){if(a)throw"unexpected EOF";break}i&&o(u+131072);for(var et=u+Q;u<et;u+=4)t[u]=t[u-V],t[u+1]=t[u+1-V],t[u+2]=t[u+2-V],t[u+3]=t[u+3-V];u=et}}n.l=c,n.p=K,n.b=u,c&&(s=1,n.m=f,n.d=d,n.n=p)}while(!s);return u==t.length?t:D(t,0,u)},F=new h(0),O=function(e){if((15&e[0])!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function U(e,t){return N((O(e),e.subarray(2,-4)),t)}var z="undefined"!=typeof TextDecoder&&new TextDecoder;try{z.decode(F,{stream:!0})}catch(e){}let H=l.i>=152;class G extends s.yxD{constructor(e){super(e),this.type=s.cLu}parse(e){let t={l:0,c:0,lc:0};function n(e,n,r,i,a){for(;r<e;)n=n<<8|E(i,a),r+=8;r-=e,t.l=n>>r&(1<<e)-1,t.c=n,t.lc=r}let r=Array(59),i={c:0,lc:0};function a(e,t,n,r){e=e<<8|E(n,r),t+=8,i.c=e,i.lc=t}let o={c:0,lc:0};function l(e,t,n,r,s,l,u,c,d,h){if(e==t){r<8&&(a(n,r,s,u),n=i.c,r=i.lc);var f=n>>(r-=8),f=new Uint8Array([f])[0];if(d.value+f>h)return!1;for(var p=c[d.value-1];f-- >0;)c[d.value++]=p}else{if(!(d.value<h))return!1;c[d.value++]=e}o.c=n,o.lc=r}function u(e){var t=65535&e;return t>32767?t-65536:t}let c={a:0,b:0};function d(e,t){var n=u(e),r=u(t),i=n+(1&r)+(r>>1),a=i-r;c.a=i,c.b=a}function h(e,t){var n=65535&t,r=(65535&e)-(n>>1)&65535;c.a=n+r-32768&65535,c.b=r}function f(e,s,u,c,d,h){var f=u.value,p=M(s,u),m=M(s,u);u.value+=4;var g=M(s,u);if(u.value+=4,p<0||p>=65537||m<0||m>=65537)throw"Something wrong with HUF_ENCSIZE";var v=Array(65537),y=Array(16384);!function(e){for(var t=0;t<16384;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(y);var b=c-(u.value-f);if(!function(e,i,a,o,s,l,u){for(var c=0,d=0;s<=l;s++){if(a.value-a.value>o)return!1;n(6,c,d,e,a);var h=t.l;if(c=t.c,d=t.lc,u[s]=h,63==h){if(a.value-a.value>o)throw"Something wrong with hufUnpackEncTable";n(8,c,d,e,a);var f=t.l+6;if(c=t.c,d=t.lc,s+f>l+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)u[s++]=0;s--}else if(h>=59){var f=h-59+2;if(s+f>l+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)u[s++]=0;s--}}!function(e){for(var t=0;t<=58;++t)r[t]=0;for(var t=0;t<65537;++t)r[e[t]]+=1;for(var n=0,t=58;t>0;--t){var i=n+r[t]>>1;r[t]=n,n=i}for(var t=0;t<65537;++t){var a=e[t];a>0&&(e[t]=a|r[a]++<<6)}}(u)}(e,0,u,b,p,m,v),g>8*(c-(u.value-f)))throw"Something wrong with hufUncompress";!function(e,t,n,r){for(;t<=n;t++){var i=e[t]>>6,a=63&e[t];if(i>>a)throw"Invalid table entry";if(a>14){var o=r[i>>a-14];if(o.len)throw"Invalid table entry";if(o.lit++,o.p){var s=o.p;o.p=Array(o.lit);for(var l=0;l<o.lit-1;++l)o.p[l]=s[l]}else o.p=[,];o.p[o.lit-1]=t}else if(a)for(var u=0,l=1<<14-a;l>0;l--){var o=r[(i<<14-a)+u];if(o.len||o.p)throw"Invalid table entry";o.len=a,o.lit=t,u++}}}(v,p,m,y),function(e,t,n,r,s,u,c,d,h,f){for(var p=0,m=0,g=Math.trunc(s.value+(u+7)/8);s.value<g;)for(a(p,m,n,s),p=i.c,m=i.lc;m>=14;){var v=t[p>>m-14&16383];if(v.len)m-=v.len,l(v.lit,c,p,m,n,r,s,h,f,d),p=o.c,m=o.lc;else{if(!v.p)throw"hufDecode issues";for(y=0;y<v.lit;y++){for(var y,b=63&e[v.p[y]];m<b&&s.value<g;)a(p,m,n,s),p=i.c,m=i.lc;if(m>=b&&e[v.p[y]]>>6==(p>>m-b&(1<<b)-1)){m-=b,l(v.p[y],c,p,m,n,r,s,h,f,d),p=o.c,m=o.lc;break}}if(y==v.lit)throw"hufDecode issues"}}var x=8-u&7;for(p>>=x,m-=x;m>0;){var v=t[p<<14-m&16383];if(v.len)m-=v.len,l(v.lit,c,p,m,n,r,s,h,f,d),p=o.c,m=o.lc;else throw"hufDecode issues"}}(v,y,e,s,u,g,m,h,d,{value:0})}function p(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function m(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,a=e.length-1;!(i>a)&&(t[i++]=e[n++],!(i>a));){t[i++]=e[r++]}}function g(e){for(var t=e.byteLength,n=[],r=0,i=new DataView(e);t>0;){var a=i.getInt8(r++);if(a<0){var o=-a;t-=o+1;for(var s=0;s<o;s++)n.push(i.getUint8(r++))}else{var o=a;t-=2;for(var l=i.getUint8(r++),s=0;s<o+1;s++)n.push(l)}}return n}function v(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function y(e){var t=new Uint8Array(g(e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size))),n=new Uint8Array(t.length);return p(t),m(t,n),new DataView(n.buffer)}function b(e){var t=U(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return p(t),m(t,n),new DataView(n.buffer)}function x(e){for(var t=e.viewer,n={value:e.offset.value},r=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),i=new Uint8Array(8192),a=0,o=Array(e.channels),s=0;s<e.channels;s++)o[s]={},o[s].start=a,o[s].end=o[s].start,o[s].nx=e.width,o[s].ny=e.lines,o[s].size=e.type,a+=o[s].nx*o[s].ny*o[s].size;var l=B(t,n),u=B(t,n);if(u>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(l<=u)for(var s=0;s<u-l+1;s++)i[s+l]=C(t,n);var p=new Uint16Array(65536),m=function(e,t){for(var n=0,r=0;r<65536;++r)(0==r||e[r>>3]&1<<(7&r))&&(t[n++]=r);for(var i=n-1;n<65536;)t[n++]=0;return i}(i,p),g=M(t,n);f(e.array,t,n,g,r,a);for(var s=0;s<e.channels;++s)for(var v=o[s],y=0;y<o[s].size;++y)!function(e,t,n,r,i,a,o){for(var s=o<16384,l=n>i?i:n,u=1;u<=l;)u<<=1;for(u>>=1,f=u,u>>=1;u>=1;){for(var f,p,m,g,v,y=0,b=0+a*(i-f),x=a*u,_=a*f,w=r*u,S=r*f;y<=b;y+=_){for(var A=y,M=y+r*(n-f);A<=M;A+=S){var E=A+w,C=A+x,T=C+w;s?(d(e[A+t],e[C+t]),p=c.a,g=c.b,d(e[E+t],e[T+t]),m=c.a,v=c.b,d(p,m),e[A+t]=c.a,e[E+t]=c.b,d(g,v)):(h(e[A+t],e[C+t]),p=c.a,g=c.b,h(e[E+t],e[T+t]),m=c.a,v=c.b,h(p,m),e[A+t]=c.a,e[E+t]=c.b,h(g,v)),e[C+t]=c.a,e[T+t]=c.b}if(n&u){var C=A+x;s?d(e[A+t],e[C+t]):h(e[A+t],e[C+t]),p=c.a,e[C+t]=c.b,e[A+t]=p}}if(i&u)for(var A=y,M=y+r*(n-f);A<=M;A+=S){var E=A+w;s?d(e[A+t],e[E+t]):h(e[A+t],e[E+t]),p=c.a,e[E+t]=c.b,e[A+t]=p}f=u,u>>=1}}(r,v.start+y,v.nx,v.size,v.ny,v.nx*v.size,m);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(p,r,a);for(var b=0,x=new Uint8Array(r.buffer.byteLength),_=0;_<e.lines;_++)for(var w=0;w<e.channels;w++){var v=o[w],S=v.nx*v.size,A=new Uint8Array(r.buffer,2*v.end,2*S);x.set(A,b),b+=2*S,v.end+=S}return new DataView(x.buffer)}function _(e){var t=U(e.array.slice(e.offset.value,e.offset.value+e.size));let n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n),i=0,a=0,o=[,,,,];for(let n=0;n<e.lines;n++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:o[0]=i,o[1]=o[0]+e.width,i=o[1]+e.width;for(let i=0;i<e.width;++i)n+=t[o[0]++]<<8|t[o[1]++],r[a]=n,a++;break;case 2:o[0]=i,o[1]=o[0]+e.width,o[2]=o[1]+e.width,i=o[2]+e.width;for(let i=0;i<e.width;++i)n+=t[o[0]++]<<24|t[o[1]++]<<16|t[o[2]++]<<8,r[a]=n,a++}}return new DataView(r.buffer)}function w(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:T(t,n),unknownUncompressedSize:T(t,n),unknownCompressedSize:T(t,n),acCompressedSize:T(t,n),dcCompressedSize:T(t,n),rleCompressedSize:T(t,n),rleUncompressedSize:T(t,n),rleRawSize:T(t,n),totalAcUncompressedCount:T(t,n),totalDcUncompressedCount:T(t,n),acCompression:T(t,n)};if(i.version<2)throw"EXRLoader.parse: "+F.compression+" version "+i.version+" is unsupported";for(var a=[],o=B(t,n)-2;o>0;){var l=S(t.buffer,n),u=C(t,n),c=u>>2&3,d=new Int8Array([(u>>4)-1])[0],h=C(t,n);a.push({name:l,index:d,type:h,compression:c}),o-=l.length+3}for(var p=F.channels,m=Array(e.channels),v=0;v<e.channels;++v){var y=m[v]={},x=p[v];y.name=x.name,y.compression=0,y.decoded=!1,y.type=x.pixelType,y.pLinear=x.pLinear,y.width=e.width,y.height=e.lines}for(var _={idx:[,,,]},w=0;w<e.channels;++w)for(var y=m[w],v=0;v<a.length;++v){var A=a[v];y.name==A.name&&(y.compression=A.compression,A.index>=0&&(_.idx[A.index]=w),y.offset=w)}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var M=new Uint16Array(i.totalAcUncompressedCount);f(e.array,t,n,i.acCompressedSize,M,i.totalAcUncompressedCount);break;case 1:var E=e.array.slice(n.value,n.value+i.totalAcUncompressedCount),R=U(E),M=new Uint16Array(R.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var P=new Uint16Array(b({array:e.array,offset:n,size:i.dcCompressedSize}).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){var E=e.array.slice(n.value,n.value+i.rleCompressedSize),R=U(E),L=g(R.buffer);n.value+=i.rleCompressedSize}for(var k=0,D=Array(m.length),v=0;v<D.length;++v)D[v]=[];for(var N=0;N<e.lines;++N)for(var O=0;O<m.length;++O)D[O].push(k),k+=m[O].width*e.type*2;!function(e,t,n,r,i,a){var o=new DataView(a.buffer),l=n[e.idx[0]].width,u=n[e.idx[0]].height,c=Math.floor(l/8),d=Math.ceil(l/8),h=Math.ceil(u/8),f=l-(d-1)*8,p=u-(h-1)*8,m={value:0},g=[,,,],v=[,,,],y=[,,,],b=[,,,],x=[,,,];for(let n=0;n<3;++n)x[n]=t[e.idx[n]],g[n]=n<1?0:g[n-1]+d*h,v[n]=new Float32Array(64),y[n]=new Uint16Array(64),b[n]=new Uint16Array(64*d);for(let t=0;t<h;++t){var _,w,S=8;t==h-1&&(S=p);var A=8;for(let e=0;e<d;++e){e==d-1&&(A=f);for(let e=0;e<3;++e){y[e].fill(0),y[e][0]=i[g[e]++],function(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}(m,r,y[e]),_=y[e],(w=v[e])[0]=I(_[0]),w[1]=I(_[1]),w[2]=I(_[5]),w[3]=I(_[6]),w[4]=I(_[14]),w[5]=I(_[15]),w[6]=I(_[27]),w[7]=I(_[28]),w[8]=I(_[2]),w[9]=I(_[4]),w[10]=I(_[7]),w[11]=I(_[13]),w[12]=I(_[16]),w[13]=I(_[26]),w[14]=I(_[29]),w[15]=I(_[42]),w[16]=I(_[3]),w[17]=I(_[8]),w[18]=I(_[12]),w[19]=I(_[17]),w[20]=I(_[25]),w[21]=I(_[30]),w[22]=I(_[41]),w[23]=I(_[43]),w[24]=I(_[9]),w[25]=I(_[11]),w[26]=I(_[18]),w[27]=I(_[24]),w[28]=I(_[31]),w[29]=I(_[40]),w[30]=I(_[44]),w[31]=I(_[53]),w[32]=I(_[10]),w[33]=I(_[19]),w[34]=I(_[23]),w[35]=I(_[32]),w[36]=I(_[39]),w[37]=I(_[45]),w[38]=I(_[52]),w[39]=I(_[54]),w[40]=I(_[20]),w[41]=I(_[22]),w[42]=I(_[33]),w[43]=I(_[38]),w[44]=I(_[46]),w[45]=I(_[51]),w[46]=I(_[55]),w[47]=I(_[60]),w[48]=I(_[21]),w[49]=I(_[34]),w[50]=I(_[37]),w[51]=I(_[47]),w[52]=I(_[50]),w[53]=I(_[56]),w[54]=I(_[59]),w[55]=I(_[61]),w[56]=I(_[35]),w[57]=I(_[36]),w[58]=I(_[48]),w[59]=I(_[49]),w[60]=I(_[57]),w[61]=I(_[58]),w[62]=I(_[62]),w[63]=I(_[63]),function(e){let t=.5*Math.cos(3.14159/16),n=.5*Math.cos(3.14159/8),r=.5*Math.cos(3*3.14159/16),i=.5*Math.cos(3*3.14159/8);for(var a=[,,,,],o=[,,,,],s=[,,,,],l=[,,,,],u=0;u<8;++u){var c=8*u;a[0]=n*e[c+2],a[1]=i*e[c+2],a[2]=n*e[c+6],a[3]=i*e[c+6],o[0]=t*e[c+1]+r*e[c+3]+.2777854612564676*e[c+5]+.09754573032714427*e[c+7],o[1]=r*e[c+1]-.09754573032714427*e[c+3]-t*e[c+5]-.2777854612564676*e[c+7],o[2]=.2777854612564676*e[c+1]-t*e[c+3]+.09754573032714427*e[c+5]+r*e[c+7],o[3]=.09754573032714427*e[c+1]-.2777854612564676*e[c+3]+r*e[c+5]-t*e[c+7],s[0]=.35355362513961314*(e[c+0]+e[c+4]),s[3]=.35355362513961314*(e[c+0]-e[c+4]),s[1]=a[0]+a[3],s[2]=a[1]-a[2],l[0]=s[0]+s[1],l[1]=s[3]+s[2],l[2]=s[3]-s[2],l[3]=s[0]-s[1],e[c+0]=l[0]+o[0],e[c+1]=l[1]+o[1],e[c+2]=l[2]+o[2],e[c+3]=l[3]+o[3],e[c+4]=l[3]-o[3],e[c+5]=l[2]-o[2],e[c+6]=l[1]-o[1],e[c+7]=l[0]-o[0]}for(var d=0;d<8;++d)a[0]=n*e[16+d],a[1]=i*e[16+d],a[2]=n*e[48+d],a[3]=i*e[48+d],o[0]=t*e[8+d]+r*e[24+d]+.2777854612564676*e[40+d]+.09754573032714427*e[56+d],o[1]=r*e[8+d]-.09754573032714427*e[24+d]-t*e[40+d]-.2777854612564676*e[56+d],o[2]=.2777854612564676*e[8+d]-t*e[24+d]+.09754573032714427*e[40+d]+r*e[56+d],o[3]=.09754573032714427*e[8+d]-.2777854612564676*e[24+d]+r*e[40+d]-t*e[56+d],s[0]=.35355362513961314*(e[d]+e[32+d]),s[3]=.35355362513961314*(e[d]-e[32+d]),s[1]=a[0]+a[3],s[2]=a[1]-a[2],l[0]=s[0]+s[1],l[1]=s[3]+s[2],l[2]=s[3]-s[2],l[3]=s[0]-s[1],e[0+d]=l[0]+o[0],e[8+d]=l[1]+o[1],e[16+d]=l[2]+o[2],e[24+d]=l[3]+o[3],e[32+d]=l[3]-o[3],e[40+d]=l[2]-o[2],e[48+d]=l[1]-o[1],e[56+d]=l[0]-o[0]}(v[e])}!function(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}}(v);for(let t=0;t<3;++t)!function(e,t,n){for(var r,i=0;i<64;++i){t[n+i]=s.A5E.toHalfFloat((r=e[i])<=1?Math.sign(r)*Math.pow(Math.abs(r),2.2):Math.sign(r)*Math.pow(9.025013291561939,Math.abs(r)-1))}}(v[t],b[t],64*e)}let a=0;for(let r=0;r<3;++r){let i=n[e.idx[r]].type;for(let e=8*t;e<8*t+S;++e){a=x[r][e];for(let t=0;t<c;++t){let n=64*t+(7&e)*8;o.setUint16(a+0*i,b[r][n+0],!0),o.setUint16(a+2*i,b[r][n+1],!0),o.setUint16(a+4*i,b[r][n+2],!0),o.setUint16(a+6*i,b[r][n+3],!0),o.setUint16(a+8*i,b[r][n+4],!0),o.setUint16(a+10*i,b[r][n+5],!0),o.setUint16(a+12*i,b[r][n+6],!0),o.setUint16(a+14*i,b[r][n+7],!0),a+=16*i}}if(c!=d)for(let e=8*t;e<8*t+S;++e){let t=x[r][e]+8*c*2*i,n=64*c+(7&e)*8;for(let e=0;e<A;++e)o.setUint16(t+2*e*i,b[r][n+e],!0)}}}for(var M=new Uint16Array(l),o=new DataView(a.buffer),E=0;E<3;++E){n[e.idx[E]].decoded=!0;var C=n[e.idx[E]].type;if(2==n[E].type)for(var T=0;T<u;++T){let e=x[E][T];for(var R=0;R<l;++R)M[R]=o.getUint16(e+2*R*C,!0);for(var R=0;R<l;++R)o.setFloat32(e+2*R*C,I(M[R]),!0)}}}(_,D,m,M,P,r);for(var v=0;v<m.length;++v){var y=m[v];if(!y.decoded){if(2===y.compression)for(var z=0,H=0,N=0;N<e.lines;++N){for(var G=D[v][z],V=0;V<y.width;++V){for(var j=0;j<2*y.type;++j)r[G++]=L[H+j*y.width*y.height];H++}z++}else throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(r.buffer)}function S(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=new TextDecoder().decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function A(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function M(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function E(e,t){var n=e[t.value];return t.value=t.value+1,n}function C(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}let T=function(e,t){let n;return"getBigInt64"in DataView.prototype?n=Number(e.getBigInt64(t.value,!0)):n=e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function R(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function P(e,t){return s.A5E.toHalfFloat(R(e,t))}function I(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function B(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function L(e,t){return I(B(e,t))}let k=new DataView(e),D=new Uint8Array(e),N={value:0},F=function(e,t,n){let r={};if(0x1312f76!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);let i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var a=!0;a;){var o=S(t,n);if(0==o)a=!1;else{var s=S(t,n),l=M(e,n),u=function(e,t,n,r,i){var a,o,s,l,u,c,d;if("string"===r||"stringvector"===r||"iccProfile"===r)return a=new TextDecoder().decode(new Uint8Array(t).slice(n.value,n.value+i)),n.value=n.value+i,a;if("chlist"===r)return function(e,t,n,r){for(var i=n.value,a=[];n.value<i+r-1;){var o=S(t,n),s=A(e,n),l=C(e,n);n.value+=3;var u=A(e,n),c=A(e,n);a.push({name:o,pixelType:s,pLinear:l,xSampling:u,ySampling:c})}return n.value+=1,a}(e,t,n,i);if("chromaticities"===r)return o=R(e,n),s=R(e,n),l=R(e,n),u=R(e,n),c=R(e,n),{redX:o,redY:s,greenX:l,greenY:u,blueX:c,blueY:R(e,n),whiteX:R(e,n),whiteY:R(e,n)};if("compression"===r)return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][C(e,n)];if("box2i"===r)return d=M(e,n),{xMin:d,yMin:M(e,n),xMax:M(e,n),yMax:M(e,n)};else if("lineOrder"===r)return["INCREASING_Y"][C(e,n)];else if("float"===r)return R(e,n);else if("v2f"===r)return[R(e,n),R(e,n)];else if("v3f"===r)return[R(e,n),R(e,n),R(e,n)];else if("int"===r)return A(e,n);else if("rational"===r)return[A(e,n),M(e,n)];else if("timecode"===r)return[M(e,n),M(e,n)];else return"preview"===r?(n.value+=i,"skipped"):(n.value+=i,void 0)}(e,t,n,s,l);void 0===u?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${s}'.`):r[o]=u}}if((-5&i)!=0)throw console.error("EXRHeader:",r),"THREE.EXRLoader: provided file is currently unsupported.";return r}(k,e,N),O=function(e,t,n,r,i){let a={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[H?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":a.lines=1,a.uncompress=v;break;case"RLE_COMPRESSION":a.lines=1,a.uncompress=y;break;case"ZIPS_COMPRESSION":a.lines=1,a.uncompress=b;break;case"ZIP_COMPRESSION":a.lines=16,a.uncompress=b;break;case"PIZ_COMPRESSION":a.lines=32,a.uncompress=x;break;case"PXR24_COMPRESSION":a.lines=16,a.uncompress=_;break;case"DWAA_COMPRESSION":a.lines=32,a.uncompress=w;break;case"DWAB_COMPRESSION":a.lines=256,a.uncompress=w;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(a.scanlineBlockSize=a.lines,1==a.type)switch(i){case s.VzW:a.getter=L,a.inputSize=2;break;case s.cLu:a.getter=B,a.inputSize=2}else if(2==a.type)switch(i){case s.VzW:a.getter=R,a.inputSize=4;break;case s.cLu:a.getter=P,a.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+a.type+" for "+e.compression+".";a.blockCount=(e.dataWindow.yMax+1)/a.scanlineBlockSize;for(var o=0;o<a.blockCount;o++)T(t,r);a.outputChannels=3==a.channels?4:a.channels;let l=a.width*a.height*a.outputChannels;switch(i){case s.VzW:a.byteArray=new Float32Array(l),a.channels<a.outputChannels&&a.byteArray.fill(1,0,l);break;case s.cLu:a.byteArray=new Uint16Array(l),a.channels<a.outputChannels&&a.byteArray.fill(15360,0,l);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return a.bytesPerLine=a.width*a.inputSize*a.channels,4==a.outputChannels?a.format=s.wk1:a.format=s.hEm,H?a.colorSpace="srgb-linear":a.encoding=3e3,a}(F,k,D,N,this.type),z={value:0},G={R:0,G:1,B:2,A:3,Y:0};for(let e=0;e<O.height/O.scanlineBlockSize;e++){let t=M(k,N);O.size=M(k,N),O.lines=t+O.scanlineBlockSize>O.height?O.height-t:O.scanlineBlockSize;let n=O.size<O.lines*O.bytesPerLine?O.uncompress(O):v(O);N.value+=O.size;for(let t=0;t<O.scanlineBlockSize;t++){let r=t+e*O.scanlineBlockSize;if(r>=O.height)break;for(let e=0;e<O.channels;e++){let i=G[F.channels[e].name];for(let a=0;a<O.width;a++){z.value=(t*(O.channels*O.width)+e*O.width+a)*O.inputSize;let o=(O.height-1-r)*(O.width*O.outputChannels)+a*O.outputChannels+i;O.byteArray[o]=O.getter(n,z)}}}}return{header:F,width:O.width,height:O.height,data:O.byteArray,format:O.format,[H?"colorSpace":"encoding"]:O[H?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){H?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=s.wem,e.magFilter=s.wem,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)},n,r)}}var V=n(9708);let j=(e,t,n)=>{let r;switch(e){case s.ywz:r=new Uint8ClampedArray(t*n*4);break;case s.cLu:r=new Uint16Array(t*n*4);break;case s.JQ4:r=new Uint32Array(t*n*4);break;case s.T95:r=new Int8Array(t*n*4);break;case s.iAb:r=new Int16Array(t*n*4);break;case s.Kz5:r=new Int32Array(t*n*4);break;case s.VzW:r=new Float32Array(t*n*4);break;default:throw Error("Unsupported data type")}return r},W=(e,t,n,i)=>{if(void 0!==r)return r;let a=new s.dd2(1,1,i);t.setRenderTarget(a);let o=new s.Kj0(new s._12,new s.vBJ({color:0xffffff}));t.render(o,n),t.setRenderTarget(null);let l=j(e,a.width,a.height);return t.readRenderTargetPixels(a,0,0,a.width,a.height,l),a.dispose(),o.geometry.dispose(),o.material.dispose(),r=0!==l[0]};class X{constructor(e){var t,n,r,i,a,o,l,u,c,d,h,f,p,m,g,v;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;let y={format:s.wk1,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)!==void 0?null===(n=e.renderTargetOptions)||void 0===n?void 0:n.anisotropy:1,generateMipmaps:(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps)!==void 0&&(null===(i=e.renderTargetOptions)||void 0===i?void 0:i.generateMipmaps),magFilter:(null===(a=e.renderTargetOptions)||void 0===a?void 0:a.magFilter)!==void 0?null===(o=e.renderTargetOptions)||void 0===o?void 0:o.magFilter:s.wem,minFilter:(null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter)!==void 0?null===(u=e.renderTargetOptions)||void 0===u?void 0:u.minFilter:s.wem,samples:(null===(c=e.renderTargetOptions)||void 0===c?void 0:c.samples)!==void 0?null===(d=e.renderTargetOptions)||void 0===d?void 0:d.samples:void 0,wrapS:(null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS)!==void 0?null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapS:s.uWy,wrapT:(null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapT)!==void 0?null===(m=e.renderTargetOptions)||void 0===m?void 0:m.wrapT:s.uWy};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=X.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new s.xsS,this._camera=new s.iKG,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!W(this._type,this._renderer,this._camera,y)){let e;this._type===s.cLu&&(e=this._renderer.extensions.has("EXT_color_buffer_float")?s.VzW:void 0),void 0!==e?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${s.VzW}`),this._type=e):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new s.Kj0(new s._12,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new s.dd2(this.width,this.height,y),this._renderTarget.texture.mapping=(null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping)!==void 0?null===(v=e.renderTargetOptions)||void 0===v?void 0:v.mapping:s.xfE}static instantiateRenderer(){let e=new V.WebGLRenderer;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw Error("Can't read pixels in this browser");let e=j(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){let t=new s.IEO(this.toArray(),this.width,this.height,s.wk1,this._type,(null==e?void 0:e.mapping)||s.xfE,(null==e?void 0:e.wrapS)||s.uWy,(null==e?void 0:e.wrapT)||s.uWy,(null==e?void 0:e.magFilter)||s.wem,(null==e?void 0:e.minFilter)||s.wem,(null==e?void 0:e.anisotropy)||1,s.GUF);return t.generateMipmaps=(null==e?void 0:e.generateMipmaps)!==void 0&&(null==e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof s.jyz&&Object.values(this.material.uniforms).forEach(e=>{e.value instanceof s.xEZ&&e.value.dispose()}),Object.values(this.material).forEach(e=>{e instanceof s.xEZ&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}let J=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Y=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class K extends s.jyz{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:r,gainMapMax:i,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:u,gainMap:c}){super({name:"GainMapDecoderMaterial",vertexShader:J,fragmentShader:Y,uniforms:{sdr:{value:u},gainMap:{value:c},gamma:{value:new s.Pa4(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new s.Pa4().fromArray(t)},offsetSdr:{value:new s.Pa4().fromArray(n)},gainMapMin:{value:new s.Pa4().fromArray(r)},gainMapMax:{value:new s.Pa4().fromArray(i)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:s.jFi,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){let e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){let t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){let e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class q extends Error{}class Q extends Error{}let Z=(e,t,n)=>{let r=RegExp(`${t}="([^"]*)"`,"i").exec(e);if(r)return r[1];let i=RegExp(`<${t}[^>]*>([\\s\\S]*?)</${t}>`,"i").exec(e);if(i){let e=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return e&&3===e.length?e.map(e=>e.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(void 0!==n)return n;throw Error(`Can't find ${t} in gainmap metadata`)},$=e=>{let t;"undefined"!=typeof TextDecoder?t=new TextDecoder().decode(e):t=e.toString();let n=t.indexOf("<x:xmpmeta");for(;-1!==n;){let e=t.indexOf("x:xmpmeta>",n),r=t.slice(n,e+10);try{let e=Z(r,"hdrgm:GainMapMin","0"),t=Z(r,"hdrgm:GainMapMax"),n=Z(r,"hdrgm:Gamma","1"),i=Z(r,"hdrgm:OffsetSDR","0.015625"),a=Z(r,"hdrgm:OffsetHDR","0.015625"),o=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),s=o?o[1]:"0",l=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!l)throw Error("Incomplete gainmap metadata");let u=l[1];return{gainMapMin:Array.isArray(e)?e.map(e=>parseFloat(e)):[parseFloat(e),parseFloat(e),parseFloat(e)],gainMapMax:Array.isArray(t)?t.map(e=>parseFloat(e)):[parseFloat(t),parseFloat(t),parseFloat(t)],gamma:Array.isArray(n)?n.map(e=>parseFloat(e)):[parseFloat(n),parseFloat(n),parseFloat(n)],offsetSdr:Array.isArray(i)?i.map(e=>parseFloat(e)):[parseFloat(i),parseFloat(i),parseFloat(i)],offsetHdr:Array.isArray(a)?a.map(e=>parseFloat(e)):[parseFloat(a),parseFloat(a),parseFloat(a)],hdrCapacityMin:parseFloat(s),hdrCapacityMax:parseFloat(u)}}catch(e){}n=t.indexOf("<x:xmpmeta",e)}};class ee{constructor(e){this.options={debug:!!e&&void 0!==e.debug&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise((t,n)=>{let r;let i=this.options.debug,a=new DataView(e.buffer);if(65496!==a.getUint16(0)){n(Error("Not a valid jpeg"));return}let o=a.byteLength,s=2,l=0;for(;s<o;){if(++l>250){n(Error(`Found no marker after ${l} loops 😵`));return}if(255!==a.getUint8(s)){n(Error(`Not a valid marker at offset 0x${s.toString(16)}, found: 0x${a.getUint8(s).toString(16)}`));return}if(r=a.getUint8(s+1),i&&console.log(`Marker: ${r.toString(16)}`),226===r){i&&console.log("Found APP2 marker (0xffe2)");let e=s+4;if(0x4d504600===a.getUint32(e)){let r;let i=e+4;if(18761===a.getUint16(i))r=!1;else if(19789===a.getUint16(i))r=!0;else{n(Error("No valid endianness marker found in TIFF header"));return}if(42!==a.getUint16(i+2,!r)){n(Error("Not valid TIFF data! (no 0x002A marker)"));return}let o=a.getUint32(i+4,!r);if(o<8){n(Error("Not valid TIFF data! (First offset less than 8)"));return}let s=i+o,l=a.getUint16(s,!r),u=s+2,c=0;for(let e=u;e<u+12*l;e+=12)45057===a.getUint16(e,!r)&&(c=a.getUint32(e+8,!r));let d=s+2+12*l+4,h=[];for(let e=d;e<d+16*c;e+=16){let t={MPType:a.getUint32(e,!r),size:a.getUint32(e+4,!r),dataOffset:a.getUint32(e+8,!r),dependantImages:a.getUint32(e+12,!r),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=i+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,h.push(t)}if(this.options.extractNonFII&&h.length){let e=new Blob([a]),n=[];for(let t of h){if(t.isFII&&!this.options.extractFII)continue;let r=e.slice(t.start,t.end+1,"image/jpeg");n.push(r)}t(n)}}}s+=2+a.getUint16(s+2)}})}}let et=async e=>{let t=$(e);if(!t)throw new Q("Gain map XMP metadata not found");let n=new ee({extractFII:!0,extractNonFII:!0}),r=await n.extract(e);if(2!==r.length)throw new q("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:t}},en=e=>new Promise((t,n)=>{let r=document.createElement("img");r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=URL.createObjectURL(e)});class er extends s.aNw{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new s.lLk}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");let e=new K({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new s.xEZ,sdr:new s.xEZ});return new X({width:16,height:16,type:s.cLu,colorSpace:s.GUF,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){let i,a;let o=r?new Blob([r],{type:"image/jpeg"}):void 0,l=new Blob([n],{type:"image/jpeg"}),u=!1;if("undefined"==typeof createImageBitmap){let e=await Promise.all([o?en(o):Promise.resolve(void 0),en(l)]);a=e[0],i=e[1],u=!0}else{let e=await Promise.all([o?createImageBitmap(o,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:"flipY"})]);a=e[0],i=e[1]}let c=new s.xEZ(a||new ImageData(2,2),s.xfE,s.uWy,s.uWy,s.wem,s.FDw,s.wk1,s.ywz,1,s.GUF);c.flipY=u,c.needsUpdate=!0;let d=new s.xEZ(i,s.xfE,s.uWy,s.uWy,s.wem,s.FDw,s.wk1,s.ywz,1,s.KI_);d.flipY=u,d.needsUpdate=!0,e.width=i.width,e.height=i.height,e.material.gainMap=c,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class ei extends er{load([e,t,n],r,i,a){let o,l,u;let c=this.prepareQuadRenderer(),d=async()=>{if(o&&l&&u){try{await this.render(c,u,o,l)}catch(r){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),"function"==typeof a&&a(r),c.disposeOnDemandRenderer();return}"function"==typeof r&&r(c),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),c.disposeOnDemandRenderer()}},h=!0,f=0,p=0,m=!0,g=0,v=0,y=!0,b=0,x=0,_=()=>{"function"==typeof i&&i(new ProgressEvent("progress",{lengthComputable:h&&m&&y,loaded:p+v+x,total:f+g+b}))};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);let w=new s.hH6(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(e,async e=>{if("string"==typeof e)throw Error("Invalid sdr buffer");o=e,await d()},e=>{h=e.lengthComputable,p=e.loaded,f=e.total,_()},t=>{this.manager.itemError(e),"function"==typeof a&&a(t)});let S=new s.hH6(this._internalLoadingManager);S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setPath(this.path),S.setWithCredentials(this.withCredentials),S.load(t,async e=>{if("string"==typeof e)throw Error("Invalid gainmap buffer");l=e,await d()},e=>{m=e.lengthComputable,v=e.loaded,g=e.total,_()},e=>{this.manager.itemError(t),"function"==typeof a&&a(e)});let A=new s.hH6(this._internalLoadingManager);return A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(this.withCredentials),A.load(n,async e=>{if("string"!=typeof e)throw Error("Invalid metadata string");u=JSON.parse(e),await d()},e=>{y=e.lengthComputable,x=e.loaded,b=e.total,_()},e=>{this.manager.itemError(n),"function"==typeof a&&a(e)}),c}}class ea extends er{load(e,t,n,r){let i=this.prepareQuadRenderer(),a=new s.hH6(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async n=>{let a,o,s;if("string"==typeof n)throw Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");let l=new Uint8Array(n);try{let e=await et(l);a=e.sdr,o=e.gainMap,s=e.metadata}catch(t){if(t instanceof Q||t instanceof q)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),s={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},a=l;else throw t}try{await this.render(i,s,a,o)}catch(t){this.manager.itemError(e),"function"==typeof r&&r(t),i.disposeOnDemandRenderer();return}"function"==typeof t&&t(i),this.manager.itemEnd(e),i.disposeOnDemandRenderer()},n,t=>{this.manager.itemError(e),"function"==typeof r&&r(t)}),i}}let eo={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},es="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",el=e=>Array.isArray(e),eu=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function ec({files:e=eu,path:t="",preset:n,colorSpace:r,extensions:i}={}){n&&(ef(n),e=eo[n],t=es);let l=el(e),{extension:u,isCubemap:c}=ep(e),d=em(u);if(!d)throw Error("useEnvironment: Unrecognized file extension: "+e);let h=(0,o.A)(e=>e.gl);(0,a.useLayoutEffect)(()=>{("webp"===u||"jpg"===u||"jpeg"===u)&&h.domElement.addEventListener("webglcontextlost",function(){o.F.clear(d,l?[e]:e)},{once:!0})},[e,h.domElement]);let f=(0,o.F)(d,l?[e]:e,e=>{("webp"===u||"jpg"===u||"jpeg"===u)&&e.setRenderer(h),null==e.setPath||e.setPath(t),i&&i(e)}),p=l?f[0]:f;if("jpg"===u||"jpeg"===u||"webp"===u){var m;p=null==(m=p.renderTarget)?void 0:m.texture}return p.mapping=c?s.fY$:s.dSO,p.colorSpace=null!=r?r:c?"srgb":"srgb-linear",p}let ed={files:eu,path:"",preset:void 0,extensions:void 0};ec.preload=e=>{let t={...ed,...e},{files:n,path:r=""}=t,{preset:i,extensions:a}=t;i&&(ef(i),n=eo[i],r=es);let{extension:s}=ep(n);if("webp"===s||"jpg"===s||"jpeg"===s)throw Error("useEnvironment: Preloading gainmaps is not supported");let l=em(s);if(!l)throw Error("useEnvironment: Unrecognized file extension: "+n);o.F.preload(l,el(n)?[n]:n,e=>{null==e.setPath||e.setPath(r),a&&a(e)})};let eh={files:eu,preset:void 0};function ef(e){if(!(e in eo))throw Error("Preset must be one of: "+Object.keys(eo).join(", "))}function ep(e){var t;let n=el(e)&&6===e.length,r=el(e)&&3===e.length&&e.some(e=>e.endsWith("json")),i=el(e)?e[0]:e;return{extension:n?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":null==(t=i.split(".").pop())||null==(t=t.split("?"))||null==(t=t.shift())?void 0:t.toLowerCase(),isCubemap:n,isGainmap:r}}function em(e){return"cube"===e?s.cBK:"hdr"===e?d:"exr"===e?G:"jpg"===e||"jpeg"===e?ea:"webp"===e?ei:null}ec.clear=e=>{let t={...eh,...e},{files:n}=t,{preset:r}=t;r&&(ef(r),n=eo[r]);let{extension:i}=ep(n),a=em(i);if(!a)throw Error("useEnvironment: Unrecognized file extension: "+n);o.F.clear(a,el(n)?[n]:n)};let eg=e=>e.current&&e.current.isScene,ev=e=>eg(e)?e.current:e;function ey(e,t,n,r,i={}){var a,s,l,u;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};let c=ev(t||n),d=c.background,h=c.environment,f={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:null!==(a=null==(s=c.backgroundRotation)||null==s.clone?void 0:s.clone())&&void 0!==a?a:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:null!==(l=null==(u=c.environmentRotation)||null==u.clone?void 0:u.clone())&&void 0!==l?l:[0,0,0]};return"only"!==e&&(c.environment=r),e&&(c.background=r),(0,o.q)(c,i),()=>{"only"!==e&&(c.environment=h),e&&(c.background=d),(0,o.q)(c,f)}}function eb({scene:e,background:t=!1,map:n,...r}){let i=(0,o.A)(e=>e.scene);return a.useLayoutEffect(()=>{if(n)return ey(t,e,i,n,r)}),null}function ex({background:e=!1,scene:t,blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:l,environmentRotation:u,...c}){let d=ec(c),h=(0,o.A)(e=>e.scene);return a.useLayoutEffect(()=>ey(e,t,h,d,{backgroundBlurriness:null!=n?n:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:l,environmentRotation:u})),a.useEffect(()=>()=>{d.dispose()},[d]),null}function e_({children:e,near:t=.1,far:n=1e3,resolution:r=256,frames:i=1,map:l,background:u=!1,blur:c,backgroundBlurriness:d,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:p,environmentRotation:m,scene:g,files:v,path:y,preset:b,extensions:x}){let _=(0,o.A)(e=>e.gl),w=(0,o.A)(e=>e.scene),S=a.useRef(null),[A]=a.useState(()=>new s.xsS),M=a.useMemo(()=>{let e=new s.oAp(r);return e.texture.type=s.cLu,e},[r]);a.useEffect(()=>()=>{M.dispose()},[M]),a.useLayoutEffect(()=>{if(1===i){let e=_.autoClear;_.autoClear=!0,S.current.update(_,A),_.autoClear=e}return ey(u,g,w,M.texture,{backgroundBlurriness:null!=c?c:d,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:p,environmentRotation:m})},[e,A,M.texture,g,w,u,i,_]);let E=1;return(0,o.C)(()=>{if(i===1/0||E<i){let e=_.autoClear;_.autoClear=!0,S.current.update(_,A),_.autoClear=e,E++}}),a.createElement(a.Fragment,null,(0,o.o)(a.createElement(a.Fragment,null,e,a.createElement("cubeCamera",{ref:S,args:[t,n,M]}),v||b?a.createElement(ex,{background:!0,files:v,preset:b,path:y,extensions:x}):l?a.createElement(eb,{background:!0,map:l,extensions:x}):null),A))}function ew(e){var t,n,r,s;let l=ec(e),u=e.map||l;a.useMemo(()=>(0,o.e)({GroundProjectedEnvImpl:c}),[]),a.useEffect(()=>()=>{l.dispose()},[l]);let d=a.useMemo(()=>[u],[u]),h=null==(t=e.ground)?void 0:t.height,f=null==(n=e.ground)?void 0:n.radius,p=null!==(r=null==(s=e.ground)?void 0:s.scale)&&void 0!==r?r:1e3;return a.createElement(a.Fragment,null,a.createElement(eb,(0,i.Z)({},e,{map:u})),a.createElement("groundProjectedEnvImpl",{args:d,scale:p,height:h,radius:f}))}function eS(e){return e.ground?a.createElement(ew,e):e.map?a.createElement(eb,e):e.children?a.createElement(e_,e):a.createElement(ex,e)}},7291:function(e,t,n){"use strict";let r;n.d(t,{L:()=>ec}),n(5263);var i=n(5300);let a=new WeakMap;class o extends i.aNw{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){let a=new i.hH6(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,e=>{let n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){let i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let n;for(let e in t.attributeTypes){let n=t.attributeTypes[e];void 0!==n.BYTES_PER_ELEMENT&&(t.attributeTypes[e]=n.name)}let r=JSON.stringify(t);if(a.has(e)){let t=a.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(i,o).then(r=>(n=r,new Promise((r,a)=>{n._callbacks[i]={resolve:r,reject:a},n.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.catch(()=>!0).then(()=>{n&&i&&this._releaseTask(n,i)}),a.set(e,{key:r,promise:s}),s}_createGeometry(e){let t=new i.u9r;e.index&&t.setIndex(new i.TlE(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n],a=r.name,o=r.array,s=r.itemSize;t.setAttribute(a,new i.TlE(o,s))}return t}_loadLibrary(e,t){let n=new i.hH6(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,r)=>{n.load(e,t,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let r=s.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function s(){let e,t;onmessage=function(n){let r=n.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let i=r.buffer,a=r.taskConfig;t.then(e=>{let t=e.draco,n=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(i),i.byteLength);try{let e=function(e,t,n,r){let i,a;let o=r.attributeIDs,s=r.attributeTypes,l=t.GetEncodedGeometryType(n);if(l===e.TRIANGULAR_MESH)i=new e.Mesh,a=t.DecodeBufferToMesh(n,i);else if(l===e.POINT_CLOUD)i=new e.PointCloud,a=t.DecodeBufferToPointCloud(n,i);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!a.ok()||0===i.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());let u={index:null,attributes:[]};for(let n in o){let a,l;let c=self[s[n]];if(r.useUniqueIDs)l=o[n],a=t.GetAttributeByUniqueId(i,l);else{if(-1===(l=t.GetAttributeId(i,e[o[n]])))continue;a=t.GetAttribute(i,l)}u.attributes.push(function(e,t,n,r,i,a){let o=a.num_components(),s=n.num_points()*o,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,u,l,c);let d=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:d,itemSize:o}}(e,t,i,n,c,a))}return l===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){let r=3*n.num_faces(),i=4*r,a=e._malloc(i);t.GetTrianglesUInt32Array(n,i,a);let o=new Uint32Array(e.HEAPF32.buffer,a,r).slice();return e._free(a),{array:o,itemSize:1}}(e,t,i)),e.destroy(i),u}(t,n,o,a),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(o),t.destroy(n)}})}}}let l=()=>{let e;if(r)return r;let t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(t)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");let a=WebAssembly.instantiate(function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);t[n]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)t[r++]=t[i]<60?n[t[i]]:(t[i]-60)*64+t[++i];return t.buffer.slice(0,r)}(i),{}).then(t=>{(e=t.instance).exports.__wasm_call_ctors()});function o(t,n,r,i,a,o){let s=e.exports.sbrk,l=r+3&-4,u=s(l*i),c=s(a.length),d=new Uint8Array(e.exports.memory.buffer);d.set(a,c);let h=t(u,r,i,c,a.length);if(0===h&&o&&o(u,l,i),n.set(d.subarray(u,u+r*i)),s(u-s(0)),0!==h)throw Error(`Malformed buffer data: ${h}`)}let s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return r={ready:a,supported:!0,decodeVertexBuffer(t,n,r,i,a){o(e.exports.meshopt_decodeVertexBuffer,t,n,r,i,e.exports[s[a]])},decodeIndexBuffer(t,n,r,i){o(e.exports.meshopt_decodeIndexBuffer,t,n,r,i)},decodeIndexSequence(t,n,r,i){o(e.exports.meshopt_decodeIndexSequence,t,n,r,i)},decodeGltfBuffer(t,n,r,i,a,u){o(e.exports[l[a]],t,n,r,i,e.exports[s[u]])}}};function u(e,t){if(t===i.WwZ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==i.z$h&&t!==i.UlW)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let n=e.getIndex();if(null===n){let t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}let r=n.count-2,a=[];if(n){if(t===i.z$h)for(let e=1;e<=r;e++)a.push(n.getX(0)),a.push(n.getX(e)),a.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(a.push(n.getX(e)),a.push(n.getX(e+1)),a.push(n.getX(e+2))):(a.push(n.getX(e+2)),a.push(n.getX(e+1)),a.push(n.getX(e)))}a.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=e.clone();return o.setIndex(a),o.clearGroups(),o}}var c=n(8992);function d(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}let h="srgb",f="srgb-linear";class p extends i.aNw{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new x(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new P(e)}),this.register(function(e){return new I(e)}),this.register(function(e){return new B(e)}),this.register(function(e){return new S(e)}),this.register(function(e){return new A(e)}),this.register(function(e){return new M(e)}),this.register(function(e){return new E(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new C(e)}),this.register(function(e){return new w(e)}),this.register(function(e){return new R(e)}),this.register(function(e){return new T(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new L(e)}),this.register(function(e){return new k(e)})}load(e,t,n,r){let a;let o=this;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){let t=i.Zp0.extractUrlBase(e);a=i.Zp0.resolveURL(t,this.path)}else a=i.Zp0.extractUrlBase(e);this.manager.itemStart(e);let s=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},l=new i.hH6(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(n){try{o.parse(n,a,function(n){t(n),o.manager.itemEnd(e)},s)}catch(e){s(e)}},n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;let a={},o={};if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(d(new Uint8Array(e.slice(0,4)))===D){try{a[g.KHR_BINARY_GLTF]=new F(e)}catch(e){r&&r(e);return}i=JSON.parse(a[g.KHR_BINARY_GLTF].content)}else i=JSON.parse(d(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2){r&&r(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let s=new ei(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](s);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,a[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){let t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case g.KHR_MATERIALS_UNLIT:a[t]=new y;break;case g.KHR_DRACO_MESH_COMPRESSION:a[t]=new O(i,this.dracoLoader);break;case g.KHR_TEXTURE_TRANSFORM:a[t]=new U;break;case g.KHR_MESH_QUANTIZATION:a[t]=new z;break;default:n.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,r)}parseAsync(e,t){let n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function m(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let g={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class v{constructor(e){this.parser=e,this.name=g.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){let t;let n=this.parser,r="light:"+e,a=n.cache.get(r);if(a)return a;let o=n.json,s=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],l=new i.Ilk(0xffffff);void 0!==s.color&&l.setRGB(s.color[0],s.color[1],s.color[2],f);let u=void 0!==s.range?s.range:0;switch(s.type){case"directional":(t=new i.Ox3(l)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new i.cek(l)).distance=u;break;case"spot":(t=new i.PMe(l)).distance=u,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,t.angle=s.spot.outerConeAngle,t.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return t.position.set(0,0,0),t.decay=2,ee(t,s),void 0!==s.intensity&&(t.intensity=s.intensity),t.name=n.createUniqueName(s.name||"light_"+e),a=Promise.resolve(t),n.cache.add(r,a),a}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e)})}}class y{constructor(){this.name=g.KHR_MATERIALS_UNLIT}getMaterialType(){return i.vBJ}extendParams(e,t,n){let r=[];e.color=new i.Ilk(1,1,1),e.opacity=1;let a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let t=a.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],f),e.opacity=t[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture,h))}return Promise.all(r)}}class b{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class x{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){let e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.FM8(e,e)}return Promise.all(a)}}class _{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class w{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class S{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[];t.sheenColor=new i.Ilk(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){let e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],f)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,h)),void 0!==o.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}}class A{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class M{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let s=o.attenuationColor||[1,1,1];return t.attenuationColor=new i.Ilk().setRGB(s[0],s[1],s[2],f),Promise.all(a)}}class E{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class C{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));let s=o.specularColorFactor||[1,1,1];return t.specularColor=new i.Ilk().setRGB(s[0],s[1],s[2],f),void 0!==o.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,h)),Promise.all(a)}}class T{constructor(e){this.parser=e,this.name=g.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(i)}}class R{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.EJi:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}class P{constructor(e){this.parser=e,this.name=g.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(!(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,i.source,a)}}class I{constructor(e){this.parser=e,this.name=g.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){let e=n.options.manager.getHandler(o.uri);null!==e&&(s=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class B{constructor(e){this.parser=e,this.name=g.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){let e=n.options.manager.getHandler(o.uri);null!==e&&(s=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class L{constructor(e){this.name=g.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,n=t.bufferViews[e];if(!n.extensions||!n.extensions[this.name])return null;{let e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return r.then(function(t){let n=e.byteOffset||0,r=e.byteLength||0,a=e.count,o=e.byteStride,s=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(a,o,s,e.mode,e.filter).then(function(e){return e.buffer}):i.ready.then(function(){let t=new ArrayBuffer(a*o);return i.decodeGltfBuffer(new Uint8Array(t),a,o,s,e.mode,e.filter),t})})}}}class k{constructor(e){this.name=g.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;for(let e of t.meshes[n.mesh].primitives)if(e.mode!==j.TRIANGLES&&e.mode!==j.TRIANGLE_STRIP&&e.mode!==j.TRIANGLE_FAN&&void 0!==e.mode)return null;let r=n.extensions[this.name].attributes,a=[],o={};for(let e in r)a.push(this.parser.getDependency("accessor",r[e]).then(t=>(o[e]=t,o[e])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(e=>{let t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,a=[];for(let e of n){let t=new i.yGw,n=new i.Pa4,s=new i._fP,l=new i.Pa4(1,1,1),u=new i.SPe(e.geometry,e.material,r);for(let e=0;e<r;e++)o.TRANSLATION&&n.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&s.fromBufferAttribute(o.ROTATION,e),o.SCALE&&l.fromBufferAttribute(o.SCALE,e),u.setMatrixAt(e,t.compose(n,s,l));for(let t in o)if("_COLOR_0"===t){let e=o[t];u.instanceColor=new i.lb7(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);i.Tme.prototype.copy.call(u,e),this.parser.assignFinalMaterial(u),a.push(u)}return t.isGroup?(t.clear(),t.add(...a),t):a[0]}))}}let D="glTF",N={JSON:0x4e4f534a,BIN:5130562};class F{constructor(e){this.name=g.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12);if(this.header={magic:d(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==D)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let n=this.header.length-12,r=new DataView(e,12),i=0;for(;i<n;){let t=r.getUint32(i,!0);i+=4;let n=r.getUint32(i,!0);if(i+=4,n===N.JSON){let n=new Uint8Array(e,12+i,t);this.content=d(n)}else if(n===N.BIN){let n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class O{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=g.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(let e in a)o[K[e]||e.toLowerCase()]=a[e];for(let t in e.attributes){let r=K[t]||t.toLowerCase();if(void 0!==a[t]){let i=n.accessors[e.attributes[t]],a=W[i.componentType];l[r]=a.name,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t,n){r.decodeDracoFile(e,function(e){for(let t in e.attributes){let n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)},o,l,f,n)})})}}class U{constructor(){this.name=g.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class z{constructor(){this.name=g.KHR_MESH_QUANTIZATION}}class H extends i._C8{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,d=c*c,h=d*c,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+c;for(let e=0;e!==o;e++){let t=a[p+e+o],n=a[p+e+s]*u,r=a[f+e+o],l=a[f+e]*u;i[e]=v*t+y*n+m*r+g*l}return i}}let G=new i._fP;class V extends H{interpolate_(e,t,n,r){let i=super.interpolate_(e,t,n,r);return G.fromArray(i).normalize().toArray(i),i}}let j={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},W={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},X={9728:i.TyD,9729:i.wem,9984:i.YLQ,9985:i.qyh,9986:i.aH4,9987:i.D1R},J={33071:i.uWy,33648:i.OoA,10497:i.rpg},Y={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},K={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...c.i>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},q={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Q={CUBICSPLINE:void 0,LINEAR:i.NMF,STEP:i.Syv},Z={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function $(e,t,n){for(let r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function ee(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function et(e){let t="",n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function en(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let er=new i.yGw;class ei{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new m,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,a=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(r=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&a<98?this.textureLoader=new i.dpR(this.options.manager):this.textureLoader=new i.QRU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){let a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return $(i,a,r),ee(a,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){for(let e of a.scenes)e.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){let r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;let r=n.clone(),i=(e,t)=>{let n=this.associations.get(e);for(let[r,a]of(null!=n&&this.associations.set(t,n),e.children.entries()))i(a,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){let r=e(t[n]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let n=[];for(let r=0;r<t.length;r++){let i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){let n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[g.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(e,a){n.load(i.Zp0.resolveURL(t.uri,r.path),e,void 0,function(){a(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){let t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){let e=Y[r.type],t=W[r.componentType],n=!0===r.normalized,a=new t(r.count*e);return Promise.resolve(new i.TlE(a,e,n))}let a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(e){let a,o;let s=e[0],l=Y[r.type],u=W[r.componentType],c=u.BYTES_PER_ELEMENT,d=c*l,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(f&&f!==d){let e=Math.floor(h/f),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count,d=t.cache.get(n);d||(a=new u(s,e*f,r.count*f/c),d=new i.vpT(a,f/c),t.cache.add(n,d)),o=new i.kB5(d,l,h%f/c,p)}else a=null===s?new u(r.count*l):new u(s,h,r.count*l),o=new i.TlE(a,l,p);if(void 0!==r.sparse){let t=Y.SCALAR,n=W[r.sparse.indices.componentType],a=r.sparse.indices.byteOffset||0,c=r.sparse.values.byteOffset||0,d=new n(e[1],a,r.sparse.count*t),h=new u(e[2],c,r.sparse.count*l);null!==s&&(o=new i.TlE(o.array.slice(),o.itemSize,o.normalized));for(let e=0,t=d.length;e<t;e++){let t=d[e];if(o.setX(t,h[e*l]),l>=2&&o.setY(t,h[e*l+1]),l>=3&&o.setZ(t,h[e*l+2]),l>=4&&o.setW(t,h[e*l+3]),l>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})}loadTexture(e){let t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){let e=n.manager.getHandler(i.uri);null!==e&&(a=e)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,n){let r=this,a=this.json,o=a.textures[e],s=a.images[t],l=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=o.name||s.name||"",""===t.name&&"string"==typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);let n=(a.samplers||{})[o.sampler]||{};return t.magFilter=X[n.magFilter]||i.wem,t.minFilter=X[n.minFilter]||i.D1R,t.wrapS=J[n.wrapS]||i.rpg,t.wrapT=J[n.wrapT]||i.rpg,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){let n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let a=n.images[e],o=self.URL||self.webkitURL,s=a.uri||"",l=!1;if(void 0!==a.bufferView)s=this.getDependency("bufferView",a.bufferView).then(function(e){l=!0;let t=new Blob([e],{type:a.mimeType});return s=o.createObjectURL(t)});else if(void 0===a.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(s).then(function(e){return new Promise(function(n,a){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){let t=new i.xEZ(e);t.needsUpdate=!0,n(t)}),t.load(i.Zp0.resolveURL(e,r.path),o,void 0,a)})}).then(function(e){var t;return!0===l&&o.revokeObjectURL(s),ee(e,a),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e});return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){let i=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[g.KHR_TEXTURE_TRANSFORM]){let e=void 0!==n.extensions?n.extensions[g.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=i.associations.get(a);a=i.extensions[g.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),i.associations.set(a,t)}}return void 0!==r&&("number"==typeof r&&(r=3001===r?h:f),"colorSpace"in a?a.colorSpace=r:a.encoding=r===h?3001:3e3),e[t]=a,a})}assignFinalMaterial(e){let t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+n.uuid,t=this.cache.get(e);t||(t=new i.UY4,i.F5T.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){let e="LineBasicMaterial:"+n.uuid,t=this.cache.get(e);t||(t=new i.nls,i.F5T.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||a||o){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),a&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),a&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return i.Wid}loadMaterial(e){let t;let n=this,r=this.json,a=this.extensions,o=r.materials[e],s={},l=o.extensions||{},u=[];if(l[g.KHR_MATERIALS_UNLIT]){let e=a[g.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),u.push(e.extendParams(s,o,n))}else{let r=o.pbrMetallicRoughness||{};if(s.color=new i.Ilk(1,1,1),s.opacity=1,Array.isArray(r.baseColorFactor)){let e=r.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],f),s.opacity=e[3]}void 0!==r.baseColorTexture&&u.push(n.assignTexture(s,"map",r.baseColorTexture,h)),s.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,s.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(u.push(n.assignTexture(s,"metalnessMap",r.metallicRoughnessTexture)),u.push(n.assignTexture(s,"roughnessMap",r.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)})))}!0===o.doubleSided&&(s.side=i.ehD);let c=o.alphaMode||Z.OPAQUE;if(c===Z.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,c===Z.MASK&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==i.vBJ&&(u.push(n.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new i.FM8(1,1),void 0!==o.normalTexture.scale)){let e=o.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==o.occlusionTexture&&t!==i.vBJ&&(u.push(n.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==i.vBJ){let e=o.emissiveFactor;s.emissive=new i.Ilk().setRGB(e[0],e[1],e[2],f)}return void 0!==o.emissiveTexture&&t!==i.vBJ&&u.push(n.assignTexture(s,"emissiveMap",o.emissiveTexture,h)),Promise.all(u).then(function(){let r=new t(s);return o.name&&(r.name=o.name),ee(r,o),n.associations.set(r,{materials:e}),o.extensions&&$(a,r,o),r})}createUniqueName(e){let t=i.iUV.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,n=this.extensions,r=this.primitiveCache,a=[];for(let o=0,s=e.length;o<s;o++){let s=e[o],l=function(e){let t;let n=e.extensions&&e.extensions[g.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+et(n.attributes):e.indices+":"+et(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+et(e.targets[n]);return t}(s),u=r[l];if(u)a.push(u.promise);else{let e;e=s.extensions&&s.extensions[g.KHR_DRACO_MESH_COMPRESSION]?function(e){return n[g.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return ea(n,e,t)})}(s):ea(new i.u9r,s,t),r[l]={primitive:s,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){let t=this,n=this.json,r=this.extensions,a=n.meshes[e],o=a.primitives,s=[];for(let e=0,t=o.length;e<t;e++){var l;let t=void 0===o[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new i.Wid({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.Wl3})),l.DefaultMaterial):this.getDependency("material",o[e].material);s.push(t)}return s.push(t.loadGeometries(o)),Promise.all(s).then(function(n){let s=n.slice(0,n.length-1),l=n[n.length-1],c=[];for(let n=0,d=l.length;n<d;n++){let d;let h=l[n],f=o[n],p=s[n];if(f.mode===j.TRIANGLES||f.mode===j.TRIANGLE_STRIP||f.mode===j.TRIANGLE_FAN||void 0===f.mode)!0===(d=!0===a.isSkinnedMesh?new i.TUv(h,p):new i.Kj0(h,p)).isSkinnedMesh&&d.normalizeSkinWeights(),f.mode===j.TRIANGLE_STRIP?d.geometry=u(d.geometry,i.UlW):f.mode===j.TRIANGLE_FAN&&(d.geometry=u(d.geometry,i.z$h));else if(f.mode===j.LINES)d=new i.ejS(h,p);else if(f.mode===j.LINE_STRIP)d=new i.x12(h,p);else if(f.mode===j.LINE_LOOP)d=new i.blk(h,p);else if(f.mode===j.POINTS)d=new i.woe(h,p);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);Object.keys(d.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){let n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(d,a),d.name=t.createUniqueName(a.name||"mesh_"+e),ee(d,a),f.extensions&&$(r,d,f),t.assignFinalMaterial(d),c.push(d)}for(let n=0,r=c.length;n<r;n++)t.associations.set(c[n],{meshes:e,primitives:n});if(1===c.length)return a.extensions&&$(r,c[0],a),c[0];let d=new i.ZAu;a.extensions&&$(r,d,a),t.associations.set(d,{meshes:e});for(let e=0,t=c.length;e<t;e++)d.add(c[e]);return d})}loadCamera(e){let t;let n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===n.type?t=new i.cPb(i.M8C.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new i.iKG(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ee(t,n),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){let n=e.pop(),r=[],a=[];for(let o=0,s=e.length;o<s;o++){let s=e[o];if(s){r.push(s);let e=new i.yGw;null!==n&&e.fromArray(n.array,16*o),a.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new i.OdW(r,a)})}loadAnimation(e){let t=this.json,n=this,r=t.animations[e],a=r.name?r.name:"animation_"+e,o=[],s=[],l=[],u=[],c=[];for(let e=0,t=r.channels.length;e<t;e++){let t=r.channels[e],n=r.samplers[t.sampler],i=t.target,a=i.node,d=void 0!==r.parameters?r.parameters[n.input]:n.input,h=void 0!==r.parameters?r.parameters[n.output]:n.output;void 0!==i.node&&(o.push(this.getDependency("node",a)),s.push(this.getDependency("accessor",d)),l.push(this.getDependency("accessor",h)),u.push(n),c.push(i))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(e){let t=e[0],r=e[1],o=e[2],s=e[3],l=e[4],u=[];for(let e=0,i=t.length;e<i;e++){let i=t[e],a=r[e],c=o[e],d=s[e],h=l[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();let f=n._createAnimationTracks(i,a,c,d,h);if(f)for(let e=0;e<f.length;e++)u.push(f[e])}return new i.m7l(a,void 0,u)})}createNodeMesh(e){let t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){let t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){let t=this.json.nodes[e],n=this._loadNodeShallow(e),r=[],i=t.children||[];for(let e=0,t=i.length;e<t;e++)r.push(this.getDependency("node",i[e]));let a=void 0===t.skin?Promise.resolve(null):this.getDependency("skin",t.skin);return Promise.all([n,Promise.all(r),a]).then(function(e){let t=e[0],n=e[1],r=e[2];null!==r&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(r,er)});for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t})}_loadNodeShallow(e){let t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let a=t.nodes[e],o=a.name?r.createUniqueName(a.name):"",s=[],l=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return l&&s.push(l),void 0!==a.camera&&s.push(r.getDependency("camera",a.camera).then(function(e){return r._getNodeRef(r.cameraCache,a.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){s.push(e)}),this.nodeCache[e]=Promise.all(s).then(function(t){let s;if((s=!0===a.isBone?new i.N$j:t.length>1?new i.ZAu:1===t.length?t[0]:new i.Tme)!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(a.name&&(s.userData.name=a.name,s.name=o),ee(s,a),a.extensions&&$(n,s,a),void 0!==a.matrix){let e=new i.yGw;e.fromArray(a.matrix),s.applyMatrix4(e)}else void 0!==a.translation&&s.position.fromArray(a.translation),void 0!==a.rotation&&s.quaternion.fromArray(a.rotation),void 0!==a.scale&&s.scale.fromArray(a.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=e,s}),this.nodeCache[e]}loadScene(e){let t=this.extensions,n=this.json.scenes[e],r=this,a=new i.ZAu;n.name&&(a.name=r.createUniqueName(n.name)),ee(a,n),n.extensions&&$(t,a,n);let o=n.nodes||[],s=[];for(let e=0,t=o.length;e<t;e++)s.push(r.getDependency("node",o[e]));return Promise.all(s).then(function(e){for(let t=0,n=e.length;t<n;t++)a.add(e[t]);return r.associations=(e=>{let t=new Map;for(let[e,n]of r.associations)(e instanceof i.F5T||e instanceof i.xEZ)&&t.set(e,n);return e.traverse(e=>{let n=r.associations.get(e);null!=n&&t.set(e,n)}),t})(a),a})}_createAnimationTracks(e,t,n,r,a){let o;let s=[],l=e.name?e.name:e.uuid,u=[];switch(q[a.path]===q.weights?e.traverse(function(e){e.morphTargetInfluences&&u.push(e.name?e.name:e.uuid)}):u.push(l),q[a.path]){case q.weights:o=i.dUE;break;case q.rotation:o=i.iLg;break;case q.position:case q.scale:o=i.yC1;break;default:o=1===n.itemSize?i.dUE:i.yC1}let c=void 0!==r.interpolation?Q[r.interpolation]:i.NMF,d=this._getArrayFromAccessor(n);for(let e=0,n=u.length;e<n;e++){let n=new o(u[e]+"."+q[a.path],t.array,d,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(n),s.push(n)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=en(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof i.iLg?V:H)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ea(e,t,n){let r=t.attributes,a=[];for(let t in r){let i=K[t]||t.toLowerCase();i in e.attributes||a.push(function(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}(r[t],i))}if(void 0!==t.indices&&!e.index){let r=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});a.push(r)}return ee(e,t),!function(e,t,n){let r=t.attributes,a=new i.ZzF;if(void 0===r.POSITION)return;{let e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0!==t&&void 0!==o){if(a.set(new i.Pa4(t[0],t[1],t[2]),new i.Pa4(o[0],o[1],o[2])),e.normalized){let t=en(W[e.componentType]);a.min.multiplyScalar(t),a.max.multiplyScalar(t)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let o=t.targets;if(void 0!==o){let e=new i.Pa4,t=new i.Pa4;for(let r=0,i=o.length;r<i;r++){let i=o[r];if(void 0!==i.POSITION){let r=n.json.accessors[i.POSITION],a=r.min,o=r.max;if(void 0!==a&&void 0!==o){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(o[2]))),r.normalized){let e=en(W[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(e)}e.boundingBox=a;let s=new i.aLr;a.getCenter(s.center),s.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(a).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,a=!1;for(let e=0,n=t.length;e<n;e++){let n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);let o=[],s=[],l=[];for(let u=0,c=t.length;u<c;u++){let c=t[u];if(r){let t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;o.push(t)}if(i){let t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;s.push(t)}if(a){let t=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l)]).then(function(t){let n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}var eo=n(3975);let es=null,el="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function eu(e=!0,t=!0,n){return r=>{n&&n(r),e&&(es||(es=new o),es.setDecoderPath("string"==typeof e?e:el),r.setDRACOLoader(es)),t&&r.setMeshoptDecoder("function"==typeof l?l():l)}}let ec=(e,t,n,r)=>(0,eo.F)(p,e,eu(t,n,r));ec.preload=(e,t,n,r)=>eo.F.preload(p,e,eu(t,n,r)),ec.clear=e=>eo.F.clear(p,e),ec.setDecoderPath=e=>{el=e}},5592:function(e,t,n){"use strict";n.d(t,{mE:()=>s});var r=n(5263),i=n(5300),a=n(3975);let o=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function s(e,t){let n=(0,a.A)(e=>e.gl),s=(0,a.F)(i.dpR,o(e)?Object.values(e):e);return(0,r.useLayoutEffect)(()=>{null==t||t(s)},[t]),(0,r.useEffect)(()=>{if("initTexture"in n){let e=[];Array.isArray(s)?e=s:s instanceof i.xEZ?e=[s]:o(s)&&(e=Object.values(s)),e.forEach(e=>{e instanceof i.xEZ&&n.initTexture(e)})}},[n,s]),(0,r.useMemo)(()=>{if(!o(e))return s;{let t={},n=0;for(let r in e)t[r]=s[n++];return t}},[e,s])}s.preload=e=>a.F.preload(i.dpR,e),s.clear=e=>a.F.clear(i.dpR,e)},3975:function(e,t,n){"use strict";let r,i,a,o,s,l,u,c;n.d(t,{u:()=>z,E:()=>G,C:()=>ef,q:()=>en,A:()=>eh,d:()=>ez,o:()=>eH,b:()=>O,f:()=>e1,F:()=>ev,i:()=>N,B:()=>H,e:()=>eS,c:()=>eO,a:()=>U});var d=n(5300),h=n(9708),f=n(5263),p=n(8332),m=n(7786);let g=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},v=e=>e?g(e):g,{useSyncExternalStoreWithSelector:y}=m,b=e=>e,x=(e,t)=>{let n=v(e),r=(e,r=t)=>(function(e,t=b,n){let r=y(e.subscribe,e.getState,e.getInitialState,t,n);return f.useDebugValue(r),r})(n,e,r);return Object.assign(r,n),r},_=(e,t)=>e?x(e,t):x;var w=n(9545),S=n.n(w),A=n(1653);let M=e=>"object"==typeof e&&"function"==typeof e.then,E=[];function C(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function T(e,t=null,n=!1,r={}){for(let i of(null===t&&(t=[e]),E))if(C(t,i.keys,i.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return r.lifespan&&r.lifespan>0&&(i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(i.remove,r.lifespan)),i.response;if(!n)throw i.promise}let i={keys:t,equal:r.equal,remove:()=>{let e=E.indexOf(i);-1!==e&&E.splice(e,1)},promise:(M(e)?e:e(...t)).then(e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(e=>i.error=e)};if(E.push(i),!n)throw i.promise}let R=(e,t,n)=>T(e,t,!1,n),P=(e,t,n)=>void T(e,t,!0,n),I=e=>{if(void 0===e||0===e.length)E.splice(0,E.length);else{let t=E.find(t=>C(e,t.keys,t.equal));t&&t.remove()}};var B=n(4271),L=n(3191);function k(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}f.act;let D=e=>e&&e.isOrthographicCamera,N=e=>e&&e.hasOwnProperty("current"),F=e=>null!=e&&("string"==typeof e||"number"==typeof e||e.isColor),O="undefined"!=typeof window&&((null==(l=window.document)?void 0:l.createElement)||(null==(u=window.navigator)?void 0:u.product)==="ReactNative")?f.useLayoutEffect:f.useEffect;function U(e){let t=f.useRef(e);return O(()=>void(t.current=e),[e]),t}function z(){let e=(0,L.NN)(),t=(0,L.jn)();return f.useMemo(()=>({children:n})=>{let r=(0,L.pc)(e,!0,e=>e.type===f.StrictMode)?f.StrictMode:f.Fragment;return(0,B.jsx)(r,{children:(0,B.jsx)(t,{children:n})})},[e,t])}function H({set:e}){return O(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}let G=((c=class extends f.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),c);function V(e){var t;let n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function j(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}let W={obj:e=>e===Object(e)&&!W.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){let a;if(typeof e!=typeof t||!!e!=!!t)return!1;if(W.str(e)||W.num(e)||W.boo(e))return e===t;let o=W.obj(e);if(o&&"reference"===r)return e===t;let s=W.arr(e);if(s&&"reference"===n)return e===t;if((s||o)&&e===t)return!0;for(a in e)if(!(a in t))return!1;if(o&&"shallow"===n&&"shallow"===r){for(a in i?t:e)if(!W.equ(e[a],t[a],{strict:i,objects:"reference"}))return!1}else for(a in i?t:e)if(e[a]!==t[a])return!1;if(W.und(a)){if(s&&0===e.length&&0===t.length||o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}},X=["children","key","ref"];function J(e,t,n,r){let i=null==e?void 0:e.__r3f;return!i&&(i={root:t,type:n,parent:null,children:[],props:function(e){let t={};for(let n in e)X.includes(n)||(t[n]=e[n]);return t}(r),object:e,eventCount:0,handlers:{},isHidden:!1},e&&(e.__r3f=i)),i}function Y(e,t){var n;let r=e[t];if(!t.includes("-"))return{root:e,key:t,target:r};let i=t.split("-");return r=i.reduce((e,t)=>e[t],e),t=i.pop(),null!=(n=r)&&n.set||(e=i.reduce((e,t)=>e[t],e)),{root:e,key:t,target:r}}let K=/-\d+$/;function q(e,t){if(W.str(t.props.attach)){if(K.test(t.props.attach)){let n=t.props.attach.replace(K,""),{root:r,key:i}=Y(e.object,n);Array.isArray(r[i])||(r[i]=[])}let{root:n,key:r}=Y(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else W.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function Q(e,t){if(W.str(t.props.attach)){let{root:n,key:r}=Y(e.object,t.props.attach),i=t.previousAttach;void 0===i?delete n[r]:n[r]=i}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}let Z=[...X,"args","dispose","attach","object","onUpdate","dispose"],$=new Map,ee=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],et=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function en(e,t){var n,r;let i=e.__r3f,a=i&&k(i).getState(),o=null==i?void 0:i.eventCount;for(let n in t){let o=t[n];if(Z.includes(n))continue;if(i&&et.test(n)){"function"==typeof o?i.handlers[n]=o:delete i.handlers[n],i.eventCount=Object.keys(i.handlers).length;continue}if(void 0===o)continue;let{root:s,key:l,target:u}=Y(e,n);u instanceof d.S9g&&o instanceof d.S9g?u.mask=o.mask:u instanceof d.Ilk&&F(o)?u.set(o):null!==u&&"object"==typeof u&&"function"==typeof u.set&&"function"==typeof u.copy&&null!=o&&o.constructor&&u.constructor===o.constructor?u.copy(o):null!==u&&"object"==typeof u&&"function"==typeof u.set&&Array.isArray(o)?"function"==typeof u.fromArray?u.fromArray(o):u.set(...o):null!==u&&"object"==typeof u&&"function"==typeof u.set&&"number"==typeof o?"function"==typeof u.setScalar?u.setScalar(o):u.set(o):(s[l]=o,a&&!a.linear&&ee.includes(l)&&null!=(r=s[l])&&r.isTexture&&s[l].format===d.wk1&&s[l].type===d.ywz&&(s[l].colorSpace=d.KI_))}if(null!=i&&i.parent&&null!=a&&a.internal&&null!=(n=i.object)&&n.isObject3D&&o!==i.eventCount){let e=i.object,t=a.internal.interaction.indexOf(e);t>-1&&a.internal.interaction.splice(t,1),i.eventCount&&null!==e.raycast&&a.internal.interaction.push(e)}return i&&void 0===i.props.attach&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&er(i),e}function er(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);let n=null==(t=e.root)?void 0:null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}function ei(e,t){e.manual||(D(e)?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix())}let ea=e=>null==e?void 0:e.isObject3D;function eo(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function es(e,t,n,r){let i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}let el=e=>!!(null!=e&&e.render),eu=f.createContext(null),ec=(e,t)=>{let n=_((n,r)=>{let i;let a=new d.Pa4,o=new d.Pa4,s=new d.Pa4;function l(e=r().camera,t=o,n=r().size){let{width:i,height:u,top:c,left:d}=n,h=i/u;t.isVector3?s.copy(t):s.set(...t);let f=e.getWorldPosition(a).distanceTo(s);if(D(e))return{width:i/e.zoom,height:u/e.zoom,top:c,left:d,factor:1,distance:f,aspect:h};{let t=2*Math.tan(e.fov*Math.PI/180/2)*f,n=i/u*t;return{width:n,height:t,top:c,left:d,factor:i/n,distance:f,aspect:h}}}let u=e=>n(t=>({performance:{...t.performance,current:e}})),c=new d.FM8;return{set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new d.SUY,pointer:c,mouse:c,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=r();i&&clearTimeout(i),e.performance.current!==e.performance.min&&u(e.performance.min),i=setTimeout(()=>u(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i=0,a=0)=>{let s=r().camera,u={width:e,height:t,top:i,left:a};n(e=>({size:u,viewport:{...e.viewport,...l(s,o,u)}}))},setDpr:e=>n(t=>{let n=V(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{let t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:f.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{let i=r().internal;return i.priority=i.priority+ +(t>0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-+(t>0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}}}),r=n.getState(),i=r.size,a=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:s,set:l}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==a){i=t,a=r.dpr,ei(e,t),r.dpr>0&&s.setPixelRatio(r.dpr);let n="undefined"!=typeof HTMLCanvasElement&&s.domElement instanceof HTMLCanvasElement;s.setSize(t.width,t.height,n)}e!==o&&(o=e,l(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n};function ed(){let e=f.useContext(eu);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function eh(e=e=>e,t){return ed()(e,t)}function ef(e,t=0){let n=ed(),r=n.getState().internal.subscribe,i=U(e);return O(()=>r(i,t,n),[t,r,n]),null}let ep=new WeakMap,em=e=>{var t;return"function"==typeof e&&(null==e?void 0:null==(t=e.prototype)?void 0:t.constructor)===e};function eg(e,t){return function(n,...r){let i;return em(n)?(i=ep.get(n))||(i=new n,ep.set(n,i)):i=n,e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{ea(null==e?void 0:e.scene)&&Object.assign(e,function(e){let t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}(e.scene)),n(e)},t,t=>r(Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function ev(e,t,n,r){let i=Array.isArray(t)?t:[t],a=R(eg(n,r),[e,...i],{equal:W.equ});return Array.isArray(t)?a:a[0]}ev.preload=function(e,t,n){let r=Array.isArray(t)?t:[t];return P(eg(n),[e,...r])},ev.clear=function(e,t){return I([e,...Array.isArray(t)?t:[t]])};let ey={},eb=/^three(?=[A-Z])/,ex=e=>`${e[0].toUpperCase()}${e.slice(1)}`,e_=0,ew=e=>"function"==typeof e;function eS(e){if(ew(e)){let t=`${e_++}`;return ey[t]=e,t}Object.assign(ey,e)}function eA(e,t){let n=ex(e),r=ey[n];if("primitive"!==e&&!r)throw Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===e&&!t.object)throw Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw Error("R3F: The args prop must be an array!")}function eM(e){if(e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?q(e.parent,e):ea(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,er(e)}}function eE(e,t,n){let r=t.root.getState();if(e.parent||e.object===r.scene){if(!t.object){var i,a;let e=ey[ex(t.type)];t.object=null!=(i=t.props.object)?i:new e(...null!=(a=t.props.args)?a:[]),t.object.__r3f=t}if(en(t.object,t.props),t.props.attach)q(e,t);else if(ea(t.object)&&ea(e.object)){let r=e.object.children.indexOf(null==n?void 0:n.object);n&&-1!==r?(t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})):e.object.add(t.object)}for(let e of t.children)eE(t,e);er(t)}}function eC(e,t){t&&(t.parent=e,e.children.push(t),eE(e,t))}function eT(e,t,n){if(!t||!n)return;t.parent=e;let r=e.children.indexOf(n);-1!==r?e.children.splice(r,0,t):e.children.push(t),eE(e,t,n)}function eR(e){if("function"==typeof e.dispose){let t=()=>{try{e.dispose()}catch{}};"undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?t():(0,A.unstable_scheduleCallback)(A.unstable_IdlePriority,t)}}function eP(e,t,n){if(!t)return;t.parent=null;let r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1),t.props.attach?Q(e,t):ea(t.object)&&ea(e.object)&&(e.object.remove(t.object),function(e,t){let{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{(e.eventObject===t||e.object===t)&&n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{es(n.capturedMap,t,e,r)})}(k(t),t.object));let i=null!==t.props.dispose&&!1!==n;for(let e=t.children.length-1;e>=0;e--){let n=t.children[e];eP(t,n,i)}t.children.length=0,delete t.object.__r3f,i&&"primitive"!==t.type&&"Scene"!==t.object.type&&eR(t.object),void 0===n&&er(t)}let eI=[],eB=()=>{},eL={},ek=0,eD=function(e){let t=S()(e);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:f.version}),t}({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var r;return eA(e=ex(e)in ey?e:e.replace(eb,""),t),"primitive"===e&&null!=(r=t.object)&&r.__r3f&&delete t.object.__r3f,J(t.object,n,e,t)},removeChild:eP,appendChild:eC,appendInitialChild:eC,insertBefore:eT,appendChildToContainer(e,t){let n=e.getState().scene.__r3f;t&&n&&eC(n,t)},removeChildFromContainer(e,t){let n=e.getState().scene.__r3f;t&&n&&eP(n,t)},insertInContainerBefore(e,t,n){let r=e.getState().scene.__r3f;t&&n&&r&&eT(r,t,n)},getRootHostContext:()=>eL,getChildHostContext:()=>eL,commitUpdate(e,t,n,r,i){var a,o,s;eA(t,r);let l=!1;if("primitive"===e.type&&n.object!==r.object?l=!0:(null==(a=r.args)?void 0:a.length)!==(null==(o=n.args)?void 0:o.length)?l=!0:null!=(s=r.args)&&s.some((e,t)=>{var r;return e!==(null==(r=n.args)?void 0:r[t])})&&(l=!0),l)eI.push([e,{...r},i]);else{let t=function(e,t){let n={};for(let r in t)if(!Z.includes(r)&&!W.equ(t[r],e.props[r]))for(let e in n[r]=t[r],t)e.startsWith(`${r}-`)&&(n[e]=t[e]);for(let r in e.props){if(Z.includes(r)||t.hasOwnProperty(r))continue;let{root:i,key:a}=Y(e.object,r);if(i.constructor&&0===i.constructor.length){let e=function(e){let t=$.get(e.constructor);try{t||(t=new e.constructor,$.set(e.constructor,t))}catch(e){}return t}(i);W.und(e)||(n[a]=e[a])}else n[a]=0}return n}(e,r);Object.keys(t).length&&(Object.assign(e.props,t),en(e.object,t))}(null===i.sibling||(4&i.flags)==0)&&function(){for(let[e]of eI){let t=e.parent;if(t)for(let n of(e.props.attach?Q(t,e):ea(e.object)&&ea(t.object)&&t.object.remove(e.object),e.children))n.props.attach?Q(e,n):ea(n.object)&&ea(e.object)&&e.object.remove(n.object);e.isHidden&&eM(e),e.object.__r3f&&delete e.object.__r3f,"primitive"!==e.type&&eR(e.object)}for(let[n,r,i]of eI){n.props=r;let a=n.parent;if(a){var e,t;let r=ey[ex(n.type)];for(let o of(n.object=null!=(e=n.props.object)?e:new r(...null!=(t=n.props.args)?t:[]),n.object.__r3f=n,!function(e,t){for(let n of[e,e.alternate])if(null!==n){if("function"==typeof n.ref){null==n.refCleanup||n.refCleanup();let e=n.ref(t);"function"==typeof e&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}}(i,n.object),en(n.object,n.props),n.props.attach?q(a,n):ea(n.object)&&ea(a.object)&&a.object.add(n.object),n.children))o.props.attach?q(n,o):ea(o.object)&&ea(n.object)&&n.object.add(o.object);er(n)}}eI.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>J(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){if(!e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?Q(e.parent,e):ea(e.object)&&(e.object.visible=!1),e.isHidden=!0,er(e)}},unhideInstance:eM,createTextInstance:eB,hideTextInstance:eB,unhideTextInstance:eB,scheduleTimeout:"function"==typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"==typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:f.createContext(null),setCurrentUpdatePriority(e){ek=e},getCurrentUpdatePriority:()=>ek,resolveUpdatePriority(){var e;if(0!==ek)return ek;switch("undefined"!=typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return p.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return p.ContinuousEventPriority;default:return p.DefaultEventPriority}},resetFormInstance(){}}),eN=new Map,eF={objects:"shallow",strict:!1};function eO(e){let t,n;let r=eN.get(e),i=null==r?void 0:r.fiber,a=null==r?void 0:r.store;r&&console.warn("R3F.createRoot should only be called once!");let o="function"==typeof reportError?reportError:console.error,s=a||ec(eZ,e$),l=i||eD.createContainer(s,p.ConcurrentRoot,null,!1,null,"",o,o,o,null);r||eN.set(e,{fiber:l,store:s});let u=!1,c=null;return{async configure(r={}){var i,a;let o;c=new Promise(e=>o=e);let{gl:l,size:f,scene:p,events:m,onCreated:g,shadows:v=!1,linear:y=!1,flat:b=!1,legacy:x=!1,orthographic:_=!1,frameloop:w="always",dpr:S=[1,2],performance:A,raycaster:M,camera:E,onPointerMissed:C}=r,T=s.getState(),R=T.gl;if(!T.gl){let t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"==typeof l?await l(t):l;R=el(n)?n:new h.WebGLRenderer({...t,...l}),T.set({gl:R})}let P=T.raycaster;P||T.set({raycaster:P=new d.iMs});let{params:I,...B}=M||{};if(W.equ(B,P,eF)||en(P,{...B}),W.equ(I,P.params,eF)||en(P,{params:{...P.params,...I}}),!T.camera||T.camera===n&&!W.equ(n,E,eF)){n=E;let e=null==E?void 0:E.isCamera,t=e?E:_?new d.iKG(0,0,0,0,.1,1e3):new d.cPb(75,0,.1,1e3);e||(t.position.z=5,E&&(en(t,E),!t.manual&&("aspect"in E||"left"in E||"right"in E||"bottom"in E||"top"in E)&&(t.manual=!0,t.updateProjectionMatrix())),T.camera||null!=E&&E.rotation||t.lookAt(0,0,0)),T.set({camera:t}),P.camera=t}if(!T.scene){let e;null!=p&&p.isScene?J(e=p,s,"",{}):(J(e=new d.xsS,s,"",{}),p&&en(e,p)),T.set({scene:e})}m&&!T.events.handlers&&T.set({events:m(s)});let L=function(e,t){if(!t&&"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return!t&&"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...t}}(e,f);if(W.equ(L,T.size,eF)||T.setSize(L.width,L.height,L.top,L.left),S&&T.viewport.dpr!==V(S)&&T.setDpr(S),T.frameloop!==w&&T.setFrameloop(w),T.onPointerMissed||T.set({onPointerMissed:C}),A&&!W.equ(A,T.performance,eF)&&T.set(e=>({performance:{...e.performance,...A}})),!T.xr){let e=(e,t)=>{let n=s.getState();"never"!==n.frameloop&&e$(e,!0,n,t)},t=()=>{let t=s.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||eZ(t)},n={connect(){let e=s.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=s.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(i=R.xr)?void 0:i.addEventListener)&&n.connect(),T.set({xr:n})}if(R.shadowMap){let e=R.shadowMap.enabled,t=R.shadowMap.type;if(R.shadowMap.enabled=!!v,W.boo(v))R.shadowMap.type=d.ntZ;else if(W.str(v)){let e={basic:d._MY,percentage:d._iA,soft:d.ntZ,variance:d.dwk};R.shadowMap.type=null!=(a=e[v])?a:d.ntZ}else W.obj(v)&&Object.assign(R.shadowMap,v);(e!==R.shadowMap.enabled||t!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}return d.epp.enabled=!x,u||(R.outputColorSpace=y?d.GUF:d.KI_,R.toneMapping=b?d.uL9:d.LY2),T.legacy!==x&&T.set(()=>({legacy:x})),T.linear!==y&&T.set(()=>({linear:y})),T.flat!==b&&T.set(()=>({flat:b})),!l||W.fun(l)||el(l)||W.equ(l,R,eF)||en(R,l),t=g,u=!0,o(),this},render(n){return u||c||this.configure(),c.then(()=>{eD.updateContainer((0,B.jsx)(eU,{store:s,children:n,onCreated:t,rootElement:e}),l,null,()=>void 0)}),s},unmount(){ez(e)}}}function eU({store:e,children:t,onCreated:n,rootElement:r}){return O(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),(0,B.jsx)(eu.Provider,{value:e,children:t})}function ez(e,t){let n=eN.get(e),r=null==n?void 0:n.fiber;if(r){let i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),eD.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){for(let t in"Scene"!==e.type&&(null==e.dispose||e.dispose()),e){let n=e[t];(null==n?void 0:n.type)!=="Scene"&&(null==n||null==n.dispose||n.dispose())}}(i.scene),eN.delete(e),t&&t(e)}catch(e){}},500)})}}function eH(e,t,n){return(0,B.jsx)(eG,{children:e,container:t,state:n})}function eG({state:e={},children:t,container:n}){let{events:r,size:i,...a}=e,o=ed(),[s]=f.useState(()=>new d.iMs),[l]=f.useState(()=>new d.FM8),u=U((e,t)=>{let a;if(t.camera&&i){let n=t.camera;a=e.viewport.getCurrentViewport(n,new d.Pa4,i),n!==e.camera&&ei(n,i)}return{...e,...t,scene:n,raycaster:s,pointer:l,mouse:l,previousRoot:o,events:{...e.events,...t.events,...r},size:{...e.size,...i},viewport:{...e.viewport,...a},setEvents:e=>t.set(t=>({...t,events:{...t.events,...e}}))}}),c=f.useMemo(()=>{let e=_((e,t)=>({...a,set:e,get:t})),t=t=>e.setState(e=>u.current(t,e));return t(o.getState()),o.subscribe(t),e},[o,n]);return(0,B.jsx)(B.Fragment,{children:eD.createPortal((0,B.jsx)(eu.Provider,{value:c,children:t}),c,null)})}let eV=new Set,ej=new Set,eW=new Set;function eX(e,t){if(e.size)for(let{callback:n}of e.values())n(t)}function eJ(e,t){switch(e){case"before":return eX(eV,t);case"after":return eX(ej,t);case"tail":return eX(eW,t)}}function eY(e,t,n){let a=t.clock.getDelta();"never"===t.frameloop&&"number"==typeof e&&(a=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),r=t.internal.subscribers;for(let e=0;e<r.length;e++)(i=r[e]).ref.current(i.store.getState(),a,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let eK=!1,eq=!1;function eQ(e){for(let n of(o=requestAnimationFrame(eQ),eK=!0,a=0,eJ("before",e),eq=!0,eN.values())){var t;(s=n.store.getState()).internal.active&&("always"===s.frameloop||s.internal.frames>0)&&!(null!=(t=s.gl.xr)&&t.isPresenting)&&(a+=eY(e,s))}if(eq=!1,eJ("after",e),0===a)return eJ("tail",e),eK=!1,cancelAnimationFrame(o)}function eZ(e,t=1){var n;if(!e)return eN.forEach(e=>eZ(e.store.getState(),t));null!=(n=e.gl.xr)&&n.isPresenting||!e.internal.active||"never"===e.frameloop||(t>1?e.internal.frames=Math.min(60,e.internal.frames+t):eq?e.internal.frames=2:e.internal.frames=1,eK||(eK=!0,requestAnimationFrame(eQ)))}function e$(e,t=!0,n,r){if(t&&eJ("before",e),n)eY(e,n,r);else for(let t of eN.values())eY(e,t.store.getState());t&&eJ("after",e)}let e0={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function e1(e){let{handlePointer:t}=function(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){let{internal:n}=e.getState();for(let e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let r=e.eventObject.__r3f;if(n.hovered.delete(eo(e)),null!=r&&r.eventCount){let n=r.handlers,i={...e,intersections:t};null==n.onPointerOut||n.onPointerOut(i),null==n.onPointerLeave||n.onPointerLeave(i)}}}function r(e,t){for(let n=0;n<t.length;n++){let r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{let{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(a){let{onPointerMissed:o,internal:s}=e.getState();s.lastEvent.current=a;let l="onPointerMove"===i,u="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,c=function(t,n){let r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<o.length;e++){let t=j(o[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=o.flatMap(function(e){let n=j(e);if(!n||!n.events.enabled||null===n.raycaster.camera)return[];if(void 0===n.raycaster.camera){var r;null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)}return n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let n=j(e.object),r=j(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{let t=eo(e);return!i.has(t)&&(i.add(t),!0)});for(let e of(r.events.filter&&(s=r.events.filter(s,r)),s)){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(eo(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),h=u?function(t){let{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(s.initialClick=[a.offsetX,a.offsetY],s.initialHits=c.map(e=>e.eventObject)),u&&!c.length&&h<=2&&(r(a,s.interaction),o&&o(a)),l&&n(c),!function(e,t,r,i){if(e.length){let a={stopped:!1};for(let o of e){let s=j(o.object);if(s||o.object.traverseAncestors(e=>{let t=j(e);if(t)return s=t,!1}),s){let{raycaster:l,pointer:u,camera:c,internal:h}=s,f=new d.Pa4(u.x,u.y,0).unproject(c),p=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},m=e=>{let n={intersection:o,target:t.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(o.eventObject,n):h.capturedMap.set(e,new Map([[o.eventObject,n]])),t.target.setPointerCapture(e)},g=e=>{let t=h.capturedMap.get(e);t&&es(h.capturedMap,o.eventObject,t,e)},v={};for(let e in t){let n=t[e];"function"!=typeof n&&(v[e]=n)}let y={...o,...v,pointer:u,intersections:e,stopped:a.stopped,delta:r,unprojectedPoint:f,ray:l.ray,camera:c,stopPropagation(){let r="pointerId"in t&&h.capturedMap.get(t.pointerId);(!r||r.has(o.eventObject))&&(y.stopped=a.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(e=>e.eventObject===o.eventObject)&&n([...e.slice(0,e.indexOf(o)),o]))},target:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},nativeEvent:t};if(i(y),!0===a.stopped)break}}}}(c,a,h,function(e){let t=e.eventObject,n=t.__r3f;if(!(null!=n&&n.eventCount))return;let o=n.handlers;if(l){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){let t=eo(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{let n=o[i];n?(!u||s.initialHits.includes(t))&&(r(a,s.interaction.filter(e=>!s.initialHits.includes(e))),n(e)):u&&s.initialHits.includes(t)&&r(a,s.interaction.filter(e=>!s.initialHits.includes(e)))}})}}}}(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(e0).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;let{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{let{set:n,events:r}=e.getState();if(null==r.disconnect||r.disconnect(),n(e=>({events:{...e.events,connected:t}})),r.handlers)for(let e in r.handlers){let n=r.handlers[e],[i,a]=e0[e];t.addEventListener(i,n,{passive:a})}},disconnect:()=>{let{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(let e in n.handlers){let t=n.handlers[e],[r]=e0[e];n.connected.removeEventListener(r,t)}t(e=>({events:{...e.events,connected:void 0}}))}}}}},2464:function(e,t,n){"use strict";n.d(t,{Xz:()=>h});var r=n(3975),i=n(5263),a=n(9708);function o(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}let s=["x","y","top","bottom","left","right","width","height"],l=(e,t)=>s.every(n=>e[n]===t[n]);var u=n(3191),c=n(4271);function d({ref:e,children:t,fallback:n,resize:s,style:u,gl:d,events:h=r.f,eventSource:f,eventPrefix:p,shadows:m,linear:g,flat:v,legacy:y,orthographic:b,frameloop:x,dpr:_,performance:w,raycaster:S,camera:A,scene:M,onPointerMissed:E,onCreated:C,...T}){i.useMemo(()=>(0,r.e)(a),[]);let R=(0,r.u)(),[P,I]=function({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){var a,s,u;let c=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!c)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[d,h]=(0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),f=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:d,orientationHandler:null}),p=e?"number"==typeof e?e:e.scroll:null,m=e?"number"==typeof e?e:e.resize:null,g=(0,i.useRef)(!1);(0,i.useEffect)(()=>(g.current=!0,()=>void(g.current=!1)));let[v,y,b]=(0,i.useMemo)(()=>{let e=()=>{if(!f.current.element)return;let{left:e,top:t,width:n,height:i,bottom:a,right:o,x:s,y:u}=f.current.element.getBoundingClientRect(),c={left:e,top:t,width:n,height:i,bottom:a,right:o,x:s,y:u};f.current.element instanceof HTMLElement&&r&&(c.height=f.current.element.offsetHeight,c.width=f.current.element.offsetWidth),Object.freeze(c),g.current&&!l(f.current.lastBounds,c)&&h(f.current.lastBounds=c)};return[e,m?o(e,m):e,p?o(e,p):e]},[h,r,p,m]);function x(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",b,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function _(){f.current.element&&(f.current.resizeObserver=new c(b),f.current.resizeObserver.observe(f.current.element),t&&f.current.scrollContainers&&f.current.scrollContainers.forEach(e=>e.addEventListener("scroll",b,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}return a=b,s=!!t,(0,i.useEffect)(()=>{if(s)return window.addEventListener("scroll",a,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",a,!0)},[a,s]),u=y,(0,i.useEffect)(()=>(window.addEventListener("resize",u),()=>void window.removeEventListener("resize",u)),[u]),(0,i.useEffect)(()=>{x(),_()},[t,b,y]),(0,i.useEffect)(()=>x,[]),[e=>{e&&e!==f.current.element&&(x(),f.current.element=e,f.current.scrollContainers=function e(t){let n=[];if(!t||t===document.body)return n;let{overflow:r,overflowX:i,overflowY:a}=window.getComputedStyle(t);return[r,i,a].some(e=>"auto"===e||"scroll"===e)&&n.push(t),[...n,...e(t.parentElement)]}(e),_())},d,v]}({scroll:!0,debounce:{scroll:50,resize:0},...s}),B=i.useRef(null),L=i.useRef(null);i.useImperativeHandle(e,()=>B.current);let k=(0,r.a)(E),[D,N]=i.useState(!1),[F,O]=i.useState(!1);if(D)throw D;if(F)throw F;let U=i.useRef(null);(0,r.b)(()=>{let e=B.current;I.width>0&&I.height>0&&e&&(U.current||(U.current=(0,r.c)(e)),async function(){await U.current.configure({gl:d,scene:M,events:h,shadows:m,linear:g,flat:v,legacy:y,orthographic:b,frameloop:x,dpr:_,performance:w,raycaster:S,camera:A,size:I,onPointerMissed:(...e)=>null==k.current?void 0:k.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(f?(0,r.i)(f)?f.current:f:L.current),p&&e.setEvents({compute:(e,t)=>{let n=e[p+"X"],r=e[p+"Y"];t.pointer.set(n/t.size.width*2-1,-(2*(r/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==C||C(e)}}),U.current.render((0,c.jsx)(R,{children:(0,c.jsx)(r.E,{set:O,children:(0,c.jsx)(i.Suspense,{fallback:(0,c.jsx)(r.B,{set:N}),children:null!=t?t:null})})}))}())}),i.useEffect(()=>{let e=B.current;if(e)return()=>(0,r.d)(e)},[]);let z=f?"none":"auto";return(0,c.jsx)("div",{ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:z,...u},...T,children:(0,c.jsx)("div",{ref:P,style:{width:"100%",height:"100%"},children:(0,c.jsx)("canvas",{ref:B,style:{display:"block"},children:n})})})}function h(e){return(0,c.jsx)(u.Hn,{children:(0,c.jsx)(d,{...e})})}n(8332),n(9545),n(1653)},560:function(){},5463:function(e,t,n){!function(e,t){"use strict";var n=function(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}(t);let r=e=>[...e].map(Number).sort((e,t)=>e-t),i={getPercentageForValue:(e,t,n)=>Math.max(0,Math.min(100,(e-t)/(n-t)*100)),getValueForClientX:(e,t,n,r)=>{let{left:i,width:a}=t;return(e-i)/a*(r-n)+n}};class a{sortedValues=[];rangerElement=null;constructor(e){this.setOptions(e)}setOptions(e){Object.entries(e).forEach(([t,n])=>{void 0===n&&delete e[t]}),this.options={debug:!1,tickSize:10,interpolator:i,onChange:()=>{},...e}}_willUpdate=()=>{let e=this.options.getRangerElement();this.rangerElement!==e&&(this.rangerElement=e)};getValueForClientX=e=>{let t=(e=>{let t=e.getBoundingClientRect();return{left:Math.ceil(t.left),width:Math.ceil(t.width)}})(this.rangerElement);return this.options.interpolator.getValueForClientX(e,t,this.options.min,this.options.max)};getNextStep=(e,t)=>{let{min:n,max:r}=this.options;if("steps"in this.options){let{steps:n}=this.options,r=n.indexOf(e)+t;return r>=0&&r<n.length?n[r]:e}{let i=e+this.options.stepSize*t;return i>=n&&i<=r?i:e}};roundToStep=e=>{let{min:t,max:n}=this.options,r=t,i=n;if("steps"in this.options)this.options.steps.forEach(t=>{t<=e&&t>r&&(r=t),t>=e&&t<i&&(i=t)});else{let{stepSize:t}=this.options;for(;r<e&&r+t<e;)r+=t;i=Math.min(r+t,n)}return e-r<i-e?r:i};handleDrag=e=>{if(void 0===this.activeHandleIndex)return;let t="touchmove"===e.type?e.changedTouches[0].clientX:e.clientX,n=this.getValueForClientX(t),r=this.roundToStep(n);this.sortedValues=[...this.options.values.slice(0,this.activeHandleIndex),r,...this.options.values.slice(this.activeHandleIndex+1)],this.options.onDrag?this.options.onDrag(this):(this.tempValues=this.sortedValues,this.options.rerender())};handleKeyDown=(e,t)=>{let{values:n}=this.options;if(37===e.keyCode||39===e.keyCode){this.activeHandleIndex=t;let i=37===e.keyCode?-1:1,a=this.getNextStep(n[t],i),o=[...n.slice(0,t),a,...n.slice(t+1)];this.sortedValues=r(o),this.options.onChange&&this.options.onChange(this)}};handlePress=(e,t)=>{this.activeHandleIndex=t,this.options.rerender();let n=()=>{let{tempValues:e,handleDrag:t}=this;document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",t),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",n),this.sortedValues=r(e||this.options.values),this.options.onChange&&this.options.onChange(this),this.options.onDrag&&this.options.onDrag(this),this.activeHandleIndex=void 0,this.tempValues=void 0,this.options.rerender()},{handleDrag:i}=this;document.addEventListener("mousemove",i),document.addEventListener("touchmove",i),document.addEventListener("mouseup",n),document.addEventListener("touchend",n)};getPercentageForValue=e=>this.options.interpolator.getPercentageForValue(e,this.options.min,this.options.max);getTicks=()=>{let e=[];if(this.options.ticks)e=[...this.options.ticks];else if("steps"in this.options)e=[...this.options.steps];else{for(e=[this.options.min];e[e.length-1]<this.options.max-this.options.tickSize;)e.push(e[e.length-1]+this.options.tickSize);e.push(this.options.max)}return e.map((e,t)=>({value:e,key:t,percentage:this.getPercentageForValue(e)}))};getSteps=()=>{let e=r(this.tempValues||this.options.values);return[...e,this.options.max].map((t,n)=>{let r=e[n-1],i=void 0!==r?r:this.options.min,a=this.getPercentageForValue(i);return{left:a,width:this.getPercentageForValue(t)-a}})};handles=()=>(this.tempValues||this.options.values).map((e,t)=>({value:e,isActive:t===this.activeHandleIndex,onKeyDownHandler:e=>{this.handleKeyDown(e,t)},onMouseDownHandler:e=>{this.handlePress(e,t)},onTouchStart:e=>{this.handlePress(e,t)}}))}let o="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;e.Ranger=a,e.useRanger=function(e){let t=n.useReducer(()=>({}),{})[1],r={...e,rerender:t,onChange:n=>{t(),e.onChange?.(n)}},[i]=n.useState(()=>new a(r));return i.setOptions(r),o(()=>i._willUpdate()),i},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(5263))},7652:function(e,t,n){"use strict";n.d(t,{ZX:()=>tQ,x$:()=>tN,Fb:()=>$,Aq:()=>tG,HH:()=>ek,yn:()=>ee});var r,i,a=n(4271),o=n(5263);function s(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=s(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var l=n(9997),u=n(7786);let c=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=t=e(r,i,a);return a},d=e=>e?c(e):c,{useDebugValue:h}=o,{useSyncExternalStoreWithSelector:f}=u,p=e=>e;function m(e,t=p,n){let r=f(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return h(r),r}let g=(e,t)=>{let n=d(e),r=(e,r=t)=>m(n,e,r);return Object.assign(r,n),r},v=(e,t)=>e?g(e,t):g;function y(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(7061);let b=(0,o.createContext)(null),x=b.Provider,_=l.Qj.error001();function w(e,t){let n=(0,o.useContext)(b);if(null===n)throw Error(_);return m(n,e,t)}function S(){let e=(0,o.useContext)(b);if(null===e)throw Error(_);return(0,o.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let A={display:"none"},M={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},E="react-flow__node-desc",C="react-flow__edge-desc",T=e=>e.ariaLiveMessage;function R({rfId:e}){let t=w(T);return(0,a.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:M,children:t})}function P({rfId:e,disableKeyboardA11y:t}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{id:`${E}-${e}`,style:A,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,a.jsx)("div",{id:`${C}-${e}`,style:A,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&(0,a.jsx)(R,{rfId:e})]})}let I=e=>e.userSelectionActive?"none":"all",B=(0,o.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...i},o)=>{let l=w(I),u=`${e}`.split("-");return(0,a.jsx)("div",{className:s(["react-flow__panel",n,...u]),style:{...r,pointerEvents:l},ref:o,...i,children:t})});function L({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,a.jsx)(B,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,a.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}B.displayName="Panel";let k=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},D=e=>e.id;function N(e,t){return y(e.selectedNodes.map(D),t.selectedNodes.map(D))&&y(e.selectedEdges.map(D),t.selectedEdges.map(D))}function F({onSelectionChange:e}){let t=S(),{selectedNodes:n,selectedEdges:r}=w(k,N);return(0,o.useEffect)(()=>{let i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(e=>e(i))},[n,r,e]),null}let O=e=>!!e.onSelectionChangeHandlers;function U({onSelectionChange:e}){let t=w(O);return e||t?(0,a.jsx)(F,{onSelectionChange:e}):null}let z=[0,0],H={x:0,y:0,zoom:1},G=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],V=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),j={translateExtent:l.k5,nodeOrigin:z,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function W(e){let{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:c}=w(V,y),d=S();(0,o.useEffect)(()=>(u(e.defaultNodes,e.defaultEdges),()=>{h.current=j,l()}),[]);let h=(0,o.useRef)(j);return(0,o.useEffect)(()=>{for(let o of G){let l=e[o];l!==h.current[o]&&void 0!==e[o]&&("nodes"===o?t(l):"edges"===o?n(l):"minZoom"===o?r(l):"maxZoom"===o?i(l):"translateExtent"===o?a(l):"nodeExtent"===o?s(l):"paneClickDistance"===o?c(l):"fitView"===o?d.setState({fitViewOnInit:l}):"fitViewOptions"===o?d.setState({fitViewOnInitOptions:l}):d.setState({[o]:l}))}h.current=e},G.map(t=>e[t])),null}function X(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}let J="undefined"!=typeof document?document:null;function Y(e=null,t={target:J,actInsideInputWithModifier:!0}){let[n,r]=(0,o.useState)(!1),i=(0,o.useRef)(!1),a=(0,o.useRef)(new Set([])),[s,u]=(0,o.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,o.useEffect)(()=>{let n=t?.target||J;if(null!==e){let e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&(0,l.s$)(e))return!1;let n=q(e.code,u);a.current.add(e[n]),K(s,a.current,!1)&&(e.preventDefault(),r(!0))},o=e=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&(0,l.s$)(e))return!1;let n=q(e.code,u);K(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[n]),"Meta"===e.key&&a.current.clear(),i.current=!1},c=()=>{a.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",o),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",o),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}},[e,r]),n}function K(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function q(e,t){return t.includes(e)?"code":"key"}let Q=()=>{let e=S();return(0,o.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[r,i,a],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??a},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{let{nodeLookup:n,minZoom:r,maxZoom:i,panZoom:a,domNode:o}=e.getState();if(!a||!o)return Promise.resolve(!1);let s=(0,l.J6)(n,t),{width:u,height:c}=(0,l.t_)(o);return(0,l.Qu)({nodes:s,width:u,height:c,minZoom:r,maxZoom:i,panZoom:a},t)},setCenter:async(t,n,r)=>{let{width:i,height:a,maxZoom:o,panZoom:s}=e.getState(),l=void 0!==r?.zoom?r.zoom:o;return s?(await s.setViewport({x:i/2-t*l,y:a/2-n*l,zoom:l},{duration:r?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{let{width:r,height:i,minZoom:a,maxZoom:o,panZoom:s}=e.getState(),u=(0,l.$i)(t,r,i,a,o,n?.padding??.1);return s?(await s.setViewport(u,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:r,snapGrid:i,snapToGrid:a,domNode:o}=e.getState();if(!o)return t;let{x:s,y:u}=o.getBoundingClientRect(),c={x:t.x-s,y:t.y-u},d=n.snapGrid??i,h=n.snapToGrid??a;return(0,l.m)(c,r,h,d)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:i,y:a}=r.getBoundingClientRect(),o=(0,l.oj)(t,n);return{x:o.x+i,y:o.y+a}}}),[])};function Z(e,t){let n=[],r=new Map,i=[];for(let t of e){if("add"===t.type){i.push(t);continue}if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{let e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}}for(let e of t){let t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let i={...e};for(let e of t)!function(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}(e,i);n.push(i)}return i.length&&i.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function $(e,t){return Z(e,t)}function ee(e,t){return Z(e,t)}function et(e,t){return{id:e,type:"select",selected:t}}function en(e,t=new Set,n=!1){let r=[];for(let[i,a]of e){let e=t.has(i);void 0===a.selected&&!e||a.selected===e||(n&&(a.selected=e),r.push(et(a.id,e)))}return r}function er({items:e=[],lookup:t}){let n=[],r=new Map(e.map(e=>[e.id,e]));for(let[r,i]of e.entries()){let e=t.get(i.id),a=e?.internals?.userNode??e;void 0!==a&&a!==i&&n.push({id:i.id,item:i,type:"replace"}),void 0===a&&n.push({item:i,type:"add",index:r})}for(let[e]of t)void 0===r.get(e)&&n.push({id:e,type:"remove"});return n}function ei(e){return{id:e.id,type:"remove"}}let ea=e=>(0,l.Vt)(e),eo=e=>(0,l.J3)(e);function es(e){return(0,o.forwardRef)(e)}let el="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;function eu(e){let[t,n]=(0,o.useState)(BigInt(0)),[r]=(0,o.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return el(()=>{let t=r.get();t.length&&(e(t),r.reset())},[t]),r}let ec=(0,o.createContext)(null);function ed({children:e}){let t=S(),n=eu((0,o.useCallback)(e=>{let{nodes:n=[],setNodes:r,hasDefaultNodes:i,onNodesChange:a,nodeLookup:o}=t.getState(),s=n;for(let t of e)s="function"==typeof t?t(s):t;i?r(s):a&&a(er({items:s,lookup:o}))},[])),r=eu((0,o.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:a,edgeLookup:o}=t.getState(),s=n;for(let t of e)s="function"==typeof t?t(s):t;i?r(s):a&&a(er({items:s,lookup:o}))},[])),i=(0,o.useMemo)(()=>({nodeQueue:n,edgeQueue:r}),[]);return(0,a.jsx)(ec.Provider,{value:i,children:e})}let eh=e=>!!e.panZoom;function ef(){let e=Q(),t=S(),n=function(){let e=(0,o.useContext)(ec);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),r=w(eh),i=(0,o.useMemo)(()=>{let e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},i=e=>{n.edgeQueue.push(e)},a=e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState(),i=ea(e)?e:n.get(e.id),a=i.parentId?(0,l.ZB)(i.position,i.measured,i.parentId,n,r):i.position,o={...i,position:a,width:i.measured?.width??i.width,height:i.measured?.height??i.height};return(0,l.PS)(o)},o=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&ea(e)?e:{...r,...e}}return r}))},s=(e,t,n={replace:!1})=>{i(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&eo(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:i,addNodes:e=>{let t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:n=[],transform:r}=t.getState(),[i,a,o]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:i,y:a,zoom:o}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{let{nodes:r,edges:i,onNodesDelete:a,onEdgesDelete:o,triggerNodeChanges:s,triggerEdgeChanges:u,onDelete:c,onBeforeDelete:d}=t.getState(),{nodes:h,edges:f}=await (0,l.WD)({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:i,onBeforeDelete:d}),p=f.length>0,m=h.length>0;if(p){let e=f.map(ei);o?.(f),u(e)}if(m){let e=h.map(ei);a?.(h),s(e)}return(m||p)&&c?.({nodes:h,edges:f}),{deletedNodes:h,deletedEdges:f}},getIntersectingNodes:(e,n=!0,r)=>{let i=(0,l.J$)(e),o=i?e:a(e),s=void 0!==r;return o?(r||t.getState().nodes).filter(r=>{let a=t.getState().nodeLookup.get(r.id);if(a&&!i&&(r.id===e.id||!a.internals.positionAbsolute))return!1;let u=(0,l.PS)(s?r:a),c=(0,l.lp)(u,o);return n&&c>0||c>=o.width*o.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{let r=(0,l.J$)(e)?e:a(e);if(!r)return!1;let i=(0,l.lp)(r,t);return n&&i>0||i>=r.width*r.height},updateNode:o,updateNodeData:(e,t,n={replace:!1})=>{o(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState();return(0,l.RX)(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[])}},[]);return(0,o.useMemo)(()=>({...i,...e,viewportInitialized:r}),[r])}let ep=e=>e.selected,em={actInsideInputWithModifier:!1},eg="undefined"!=typeof window?window:void 0,ev={position:"absolute",width:"100%",height:"100%",top:0,left:0},ey=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function eb({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=l.IY.Free,zoomOnDoubleClick:u=!0,panOnDrag:c=!0,defaultViewport:d,translateExtent:h,minZoom:f,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:g=!0,children:v,noWheelClassName:b,noPanClassName:x,onViewportChange:_,isControlledViewport:A,paneClickDistance:M}){let E=S(),C=(0,o.useRef)(null),{userSelectionActive:T,lib:R}=w(ey,y),P=Y(m),I=(0,o.useRef)();!function(e){let t=S();(0,o.useEffect)(()=>{let n=()=>{if(!e.current)return!1;let n=(0,l.t_)(e.current);(0===n.height||0===n.width)&&t.getState().onError?.("004",l.Qj.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);let t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(C);let B=(0,o.useCallback)(e=>{_?.({x:e[0],y:e[1],zoom:e[2]}),A||E.setState({transform:e})},[_,A]);return(0,o.useEffect)(()=>{if(C.current){I.current=(0,l.X6)({domNode:C.current,minZoom:f,maxZoom:p,translateExtent:h,viewport:d,paneClickDistance:M,onDraggingChange:e=>E.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:r}=E.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:r}=E.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:r}=E.getState();r?.(e,t),n?.(t)}});let{x:e,y:t,zoom:n}=I.current.getViewport();return E.setState({panZoom:I.current,transform:[e,t,n],domNode:C.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),(0,o.useEffect)(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:c,zoomActivationKeyPressed:P,preventScrolling:g,noPanClassName:x,userSelectionActive:T,noWheelClassName:b,lib:R,onTransformChange:B})},[e,t,n,r,i,s,u,c,P,g,x,T,b,R,B]),(0,a.jsx)("div",{className:"react-flow__renderer",ref:C,style:ev,children:v})}let ex=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function e_(){let{userSelectionActive:e,userSelectionRect:t}=w(ex,y);return e&&t?(0,a.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}let ew=(e,t)=>n=>{n.target===t.current&&e?.(n)},eS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function eA({isSelecting:e,selectionKeyPressed:t,selectionMode:n=l.oW.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:u,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:m,onPaneMouseLeave:g,children:v}){let b=S(),{userSelectionActive:x,elementsSelectable:_,dragging:A}=w(eS,y),M=_&&(e||x),E=(0,o.useRef)(null),C=(0,o.useRef)(),T=(0,o.useRef)(new Set),R=(0,o.useRef)(new Set),P=(0,o.useRef)(!1),I=(0,o.useRef)(!1),B=e=>{if(P.current){P.current=!1;return}d?.(e),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},L=!0===r||Array.isArray(r)&&r.includes(0);return(0,a.jsxs)("div",{className:s(["react-flow__pane",{draggable:L,dragging:A,selection:e}]),onClick:M?void 0:ew(B,E),onContextMenu:ew(e=>{if(Array.isArray(r)&&r?.includes(2)){e.preventDefault();return}h?.(e)},E),onWheel:ew(f?e=>f(e):void 0,E),onPointerEnter:M?void 0:p,onPointerDown:M?t=>{let{resetSelectedElements:n,domNode:r}=b.getState();if(C.current=r?.getBoundingClientRect(),!_||!e||0!==t.button||t.target!==E.current||!C.current)return;t.target?.setPointerCapture?.(t.pointerId),I.current=!0,P.current=!1;let{x:i,y:a}=(0,l.wv)(t.nativeEvent,C.current);n(),b.setState({userSelectionRect:{width:0,height:0,startX:i,startY:a,x:i,y:a}}),u?.(t)}:m,onPointerMove:M?e=>{let{userSelectionRect:t,transform:r,nodeLookup:i,edgeLookup:a,connectionLookup:o,triggerNodeChanges:s,triggerEdgeChanges:u,defaultEdgeOptions:c}=b.getState();if(!C.current||!t)return;P.current=!0;let{x:d,y:h}=(0,l.wv)(e.nativeEvent,C.current),{startX:f,startY:p}=t,m={startX:f,startY:p,x:d<f?d:f,y:h<p?h:p,width:Math.abs(d-f),height:Math.abs(h-p)},g=T.current,v=R.current;T.current=new Set((0,l.f5)(i,m,r,n===l.oW.Partial,!0).map(e=>e.id)),R.current=new Set;let y=c?.selectable??!0;for(let e of T.current){let t=o.get(e);if(t)for(let{edgeId:e}of t.values()){let t=a.get(e);t&&(t.selectable??y)&&R.current.add(e)}}(0,l.OL)(g,T.current)||s(en(i,T.current,!0)),(0,l.OL)(v,R.current)||u(en(a,R.current)),b.setState({userSelectionRect:m,userSelectionActive:!0,nodesSelectionActive:!1})}:m,onPointerUp:M?e=>{if(0!==e.button||!I.current)return;e.target?.releasePointerCapture?.(e.pointerId);let{userSelectionRect:n}=b.getState();!x&&n&&e.target===E.current&&B?.(e),b.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:T.current.size>0}),c?.(e),(t||i)&&(P.current=!1),I.current=!1}:void 0,onPointerLeave:g,ref:E,style:ev,children:[v,(0,a.jsx)(e_,{})]})}function eM({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:o,nodeLookup:s,onError:u}=t.getState(),c=s.get(e);if(!c){u?.("012",l.Qj.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&o)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function eE({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,nodeClickDistance:s}){let u=S(),[c,d]=(0,o.useState)(!1),h=(0,o.useRef)();return(0,o.useEffect)(()=>{h.current=(0,l.oC)({getStoreItems:()=>u.getState(),onNodeMouseDown:t=>{eM({id:t,store:u,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),(0,o.useEffect)(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{h.current?.destroy()}},[n,r,t,a,e,i]),c}let eC=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function eT(){let e=S();return(0,o.useCallback)(t=>{let{nodeExtent:n,snapToGrid:r,snapGrid:i,nodesDraggable:a,onError:o,updateNodePositions:s,nodeLookup:u,nodeOrigin:c}=e.getState(),d=new Map,h=eC(a),f=r?i[0]:5,p=r?i[1]:5,m=t.direction.x*f*t.factor,g=t.direction.y*p*t.factor;for(let[,e]of u){if(!h(e))continue;let t={x:e.internals.positionAbsolute.x+m,y:e.internals.positionAbsolute.y+g};r&&(t=(0,l._2)(t,i));let{position:a,positionAbsolute:s}=(0,l.q7)({nodeId:e.id,nextPosition:t,nodeLookup:u,nodeExtent:n,nodeOrigin:c,onError:o});e.position=a,e.internals.positionAbsolute=s,d.set(e.id,e)}s(d)},[])}let eR=(0,o.createContext)(null),eP=eR.Provider;eR.Consumer;let eI=()=>(0,o.useContext)(eR),eB=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),eL=(e,t,n)=>r=>{let{connectionClickStartHandle:i,connectionMode:a,connection:o}=r,{fromHandle:s,toHandle:u,isValid:c}=o,d=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:s?.nodeId===e&&s?.id===t&&s?.type===n,connectingTo:d,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:a===l.jD.Strict?s?.type!==n:e!==s?.nodeId||t!==s?.id,connectionInProcess:!!s,clickConnectionInProcess:!!i,valid:d&&c}},ek=(0,o.memo)(es(function({type:e="source",position:t=l.Ly.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:u,onConnect:c,children:d,className:h,onMouseDown:f,onTouchStart:p,...m},g){let v=u||null,b="target"===e,x=S(),_=eI(),{connectOnClick:A,noPanClassName:M,rfId:E}=w(eB,y),{connectingFrom:C,connectingTo:T,clickConnecting:R,isPossibleEndHandle:P,connectionInProcess:I,clickConnectionInProcess:B,valid:L}=w(eL(_,v,e),y);_||x.getState().onError?.("010",l.Qj.error010());let k=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=x.getState(),i={...t,...e};if(r){let{edges:e,setEdges:t}=x.getState();t((0,l.Z_)(i,e))}n?.(i),c?.(i)},D=e=>{if(!_)return;let t=(0,l.N5)(e.nativeEvent);if(i&&(t&&0===e.button||!t)){let t=x.getState();l.Ql.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:b,handleId:v,nodeId:_,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:k,isValidConnection:n||t.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?f?.(e):p?.(e)};return(0,a.jsx)("div",{"data-handleid":v,"data-nodeid":_,"data-handlepos":t,"data-id":`${E}-${_}-${v}-${e}`,className:s(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",M,h,{source:!b,target:b,connectable:r,connectablestart:i,connectableend:o,clickconnecting:R,connectingfrom:C,connectingto:T,valid:L,connectionindicator:r&&(!I||P)&&(I||B?o:i)}]),onMouseDown:D,onTouchStart:D,onClick:A?t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:o,connectionMode:s,isValidConnection:u,lib:c,rfId:d,nodeLookup:h,connection:f}=x.getState();if(!_||!o&&!i)return;if(!o){r?.(t.nativeEvent,{nodeId:_,handleId:v,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:_,type:e,id:v}});return}let p=(0,l.S2)(t.target),m=n||u,{connection:g,isValid:y}=l.Ql.isValid(t.nativeEvent,{handle:{nodeId:_,id:v,type:e},connectionMode:s,fromNodeId:o.nodeId,fromHandleId:o.id||null,fromType:o.type,isValidConnection:m,flowId:d,doc:p,lib:c,nodeLookup:h});y&&g&&k(g);let b=structuredClone(f);delete b.inProgress,b.toPosition=b.toHandle?b.toHandle.position:null,a?.(t,b),x.setState({connectionClickStartHandle:null})}:void 0,ref:g,...m,children:d})})),eD={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},eN={input:function({data:e,isConnectable:t,sourcePosition:n=l.Ly.Bottom}){return(0,a.jsxs)(a.Fragment,{children:[e?.label,(0,a.jsx)(ek,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=l.Ly.Top,sourcePosition:r=l.Ly.Bottom}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek,{type:"target",position:n,isConnectable:t}),e?.label,(0,a.jsx)(ek,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=l.Ly.Top}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ek,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},eF=e=>{let{width:t,height:n,x:r,y:i}=(0,l.W0)(e.nodeLookup,{filter:e=>!!e.selected});return{width:(0,l.kE)(t)?t:null,height:(0,l.kE)(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function eO({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=S(),{width:i,height:l,transformString:u,userSelectionActive:c}=w(eF,y),d=eT(),h=(0,o.useRef)(null);if((0,o.useEffect)(()=>{n||h.current?.focus({preventScroll:!0})},[n]),eE({nodeRef:h}),c||!i||!l)return null;let f=e?t=>{e(t,r.getState().nodes.filter(e=>e.selected))}:void 0;return(0,a.jsx)("div",{className:s(["react-flow__nodesselection","react-flow__container",t]),style:{transform:u},children:(0,a.jsx)("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(eD,e.key)&&(e.preventDefault(),d({direction:eD[e.key],factor:e.shiftKey?4:1}))},style:{width:i,height:l}})})}let eU="undefined"!=typeof window?window:void 0,ez=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function eH({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:l,paneClickDistance:u,deleteKeyCode:c,selectionKeyCode:d,selectionOnDrag:h,selectionMode:f,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:g,panActivationKeyCode:v,zoomActivationKeyCode:y,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:A,panOnScrollSpeed:M,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:T,defaultViewport:R,translateExtent:P,minZoom:I,maxZoom:B,preventScrolling:L,onSelectionContextMenu:k,noWheelClassName:D,noPanClassName:N,disableKeyboardA11y:F,onViewportChange:O,isControlledViewport:U}){let{nodesSelectionActive:z,userSelectionActive:H}=w(ez),G=Y(d,{target:eU}),V=Y(v,{target:eU}),j=V||T,W=V||A,X=h&&!0!==j,J=G||H||X;return!function({deleteKeyCode:e,multiSelectionKeyCode:t}){let n=S(),{deleteElements:r}=ef(),i=Y(e,em),a=Y(t,{target:eg});(0,o.useEffect)(()=>{if(i){let{edges:e,nodes:t}=n.getState();r({nodes:t.filter(ep),edges:e.filter(ep)}),n.setState({nodesSelectionActive:!1})}},[i]),(0,o.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])}({deleteKeyCode:c,multiSelectionKeyCode:g}),(0,a.jsx)(eb,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:W,panOnScrollSpeed:M,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:!G&&j,defaultViewport:R,translateExtent:P,minZoom:I,maxZoom:B,zoomActivationKeyCode:y,preventScrolling:L,noWheelClassName:D,noPanClassName:N,onViewportChange:O,isControlledViewport:U,paneClickDistance:u,children:(0,a.jsxs)(eA,{onSelectionStart:p,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:j,isSelecting:!!J,selectionMode:f,selectionKeyPressed:G,selectionOnDrag:X,children:[e,z&&(0,a.jsx)(eO,{onSelectionContextMenu:k,noPanClassName:N,disableKeyboardA11y:F})]})})}eH.displayName="FlowRenderer";let eG=(0,o.memo)(eH),eV=e=>t=>e?(0,l.f5)(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()),ej=e=>e.updateNodeInternals;function eW({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:u,onDoubleClick:c,nodesDraggable:d,elementsSelectable:h,nodesConnectable:f,nodesFocusable:p,resizeObserver:m,noDragClassName:g,noPanClassName:v,disableKeyboardA11y:b,rfId:x,nodeTypes:_,nodeClickDistance:A,onError:M}){let{node:C,internals:T,isParent:R}=w(t=>{let n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},y),P=C.type||"default",I=_?.[P]||eN[P];void 0===I&&(M?.("003",l.Qj.error003(P)),P="default",I=eN.default);let B=!!(C.draggable||d&&void 0===C.draggable),L=!!(C.selectable||h&&void 0===C.selectable),k=!!(C.connectable||f&&void 0===C.connectable),D=!!(C.focusable||p&&void 0===C.focusable),N=S(),F=(0,l.nb)(C),O=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){let i=S(),a=(0,o.useRef)(null),s=(0,o.useRef)(null),l=(0,o.useRef)(e.sourcePosition),u=(0,o.useRef)(e.targetPosition),c=(0,o.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,o.useEffect)(()=>{!a.current||e.hidden||d&&s.current===a.current||(s.current&&r?.unobserve(s.current),r?.observe(a.current),s.current=a.current)},[d,e.hidden]),(0,o.useEffect)(()=>()=>{s.current&&(r?.unobserve(s.current),s.current=null)},[]),(0,o.useEffect)(()=>{if(a.current){let n=c.current!==t,r=l.current!==e.sourcePosition,o=u.current!==e.targetPosition;(n||r||o)&&(c.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}({node:C,nodeType:P,hasDimensions:F,resizeObserver:m}),U=eE({nodeRef:O,disabled:C.hidden||!B,noDragClassName:g,handleSelector:C.dragHandle,nodeId:e,isSelectable:L,nodeClickDistance:A}),z=eT();if(C.hidden)return null;let H=(0,l.Rf)(C),G=void 0===C.internals.handleBounds?{width:C.width??C.initialWidth??C.style?.width,height:C.height??C.initialHeight??C.style?.height}:{width:C.width??C.style?.width,height:C.height??C.style?.height},V=L||B||t||n||r||i,j=n?e=>n(e,{...T.userNode}):void 0,W=r?e=>r(e,{...T.userNode}):void 0,X=i?e=>i(e,{...T.userNode}):void 0,J=u?e=>u(e,{...T.userNode}):void 0,Y=c?e=>c(e,{...T.userNode}):void 0;return(0,a.jsx)("div",{className:s(["react-flow__node",`react-flow__node-${P}`,{[v]:B},C.className,{selected:C.selected,selectable:L,parent:R,draggable:B,dragging:U}]),ref:O,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:V?"all":"none",visibility:F?"visible":"hidden",...C.style,...G},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:j,onMouseMove:W,onMouseLeave:X,onContextMenu:J,onClick:n=>{let{selectNodesOnDrag:r,nodeDragThreshold:i}=N.getState();L&&(!r||!B||i>0)&&eM({id:e,store:N,nodeRef:O}),t&&t(n,{...T.userNode})},onDoubleClick:Y,onKeyDown:D?t=>{!(0,l.s$)(t.nativeEvent)&&!b&&(l.wQ.includes(t.key)&&L?eM({id:e,store:N,unselect:"Escape"===t.key,nodeRef:O}):B&&C.selected&&Object.prototype.hasOwnProperty.call(eD,t.key)&&(t.preventDefault(),N.setState({ariaLiveMessage:`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~T.positionAbsolute.x}, y: ${~~T.positionAbsolute.y}`}),z({direction:eD[t.key],factor:t.shiftKey?4:1})))}:void 0,tabIndex:D?0:void 0,role:D?"button":void 0,"aria-describedby":b?void 0:`${E}-${x}`,"aria-label":C.ariaLabel,children:(0,a.jsx)(eP,{value:e,children:(0,a.jsx)(I,{id:e,data:C.data,type:P,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:C.selected??!1,selectable:L,draggable:B,deletable:C.deletable??!0,isConnectable:k,sourcePosition:C.sourcePosition,targetPosition:C.targetPosition,dragging:U,dragHandle:C.dragHandle,zIndex:T.z,parentId:C.parentId,...H})})})}let eX=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function eJ(e){var t;let{nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,onError:l}=w(eX,y),u=(t=e.onlyRenderVisibleElements,w((0,o.useCallback)(eV(t),[t]),y)),c=function(){let e=w(ej),[t]=(0,o.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,o.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,a.jsx)("div",{className:"react-flow__nodes",style:ev,children:u.map(t=>(0,a.jsx)(eW,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:l},t))})}eJ.displayName="NodeRenderer";let eY=(0,o.memo)(eJ),eK={[l.QZ.Arrow]:({color:e="none",strokeWidth:t=1})=>(0,a.jsx)("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[l.QZ.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>(0,a.jsx)("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},eq=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{let d=function(e){let t=S();return(0,o.useMemo)(()=>Object.prototype.hasOwnProperty.call(eK,e)?eK[e]:(t.getState().onError?.("009",l.Qj.error009(e)),null),[e])}(t);return d?(0,a.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0",children:(0,a.jsx)(d,{color:n,strokeWidth:u})}):null},eQ=({defaultColor:e,rfId:t})=>{let n=w(e=>e.edges),r=w(e=>e.defaultEdgeOptions),i=(0,o.useMemo)(()=>(0,l.n3)(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?(0,a.jsx)("svg",{className:"react-flow__marker",children:(0,a.jsx)("defs",{children:i.map(e=>(0,a.jsx)(eq,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};eQ.displayName="MarkerDefinitions";var eZ=(0,o.memo)(eQ);function e$({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:l={},labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:d,className:h,...f}){let[p,m]=(0,o.useState)({x:1,y:0,width:0,height:0}),g=s(["react-flow__edge-textwrapper",h]),v=(0,o.useRef)(null);return((0,o.useEffect)(()=>{if(v.current){let e=v.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),void 0!==n&&n)?(0,a.jsxs)("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:g,visibility:p.width?"visible":"hidden",...f,children:[i&&(0,a.jsx)("rect",{width:p.width+2*u[0],x:-u[0],y:-u[1],height:p.height+2*u[1],className:"react-flow__edge-textbg",style:l,rx:c,ry:c}),(0,a.jsx)("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:v,style:r,children:n}),d]}):null}e$.displayName="EdgeText";let e0=(0,o.memo)(e$);function e1({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,interactionWidth:h=20,...f}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{...f,d:e,fill:"none",className:s(["react-flow__edge-path",f.className])}),h&&(0,a.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&(0,l.kE)(t)&&(0,l.kE)(n)?(0,a.jsx)(e0,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d}):null]})}function e2({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===l.Ly.Left||e===l.Ly.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function e3({sourceX:e,sourceY:t,sourcePosition:n=l.Ly.Bottom,targetX:r,targetY:i,targetPosition:a=l.Ly.Top}){let[o,s]=e2({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,c]=e2({pos:a,x1:r,y1:i,x2:e,y2:t}),[d,h,f,p]=(0,l.lM)({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${e},${t} C${o},${s} ${u},${c} ${r},${i}`,d,h,f,p]}function e4(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s=l.Ly.Bottom,targetPosition:u=l.Ly.Top,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:y,interactionWidth:b})=>{let[x,_,w]=e3({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:u}),S=e.isInternal?void 0:t;return(0,a.jsx)(e1,{id:S,path:x,labelX:_,labelY:w,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:y,interactionWidth:b})})}let e5=e4({isInternal:!1}),e6=e4({isInternal:!0});function e9(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,sourcePosition:m=l.Ly.Bottom,targetPosition:g=l.Ly.Top,markerEnd:v,markerStart:y,pathOptions:b,interactionWidth:x})=>{let[_,w,S]=(0,l.OW)({sourceX:n,sourceY:r,sourcePosition:m,targetX:i,targetY:o,targetPosition:g,borderRadius:b?.borderRadius,offset:b?.offset}),A=e.isInternal?void 0:t;return(0,a.jsx)(e1,{id:A,path:_,labelX:w,labelY:S,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:v,markerStart:y,interactionWidth:x})})}e5.displayName="SimpleBezierEdge",e6.displayName="SimpleBezierEdgeInternal";let e8=e9({isInternal:!1}),e7=e9({isInternal:!0});function te(e){return(0,o.memo)(({id:t,...n})=>{let r=e.isInternal?void 0:t;return(0,a.jsx)(e8,{...n,id:r,pathOptions:(0,o.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}e8.displayName="SmoothStepEdge",e7.displayName="SmoothStepEdgeInternal";let tt=te({isInternal:!1}),tn=te({isInternal:!0});function tr(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:v})=>{let[y,b,x]=(0,l.Hm)({sourceX:n,sourceY:r,targetX:i,targetY:o}),_=e.isInternal?void 0:t;return(0,a.jsx)(e1,{id:_,path:y,labelX:b,labelY:x,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:v})})}tt.displayName="StepEdge",tn.displayName="StepEdgeInternal";let ti=tr({isInternal:!1}),ta=tr({isInternal:!0});function to(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:o,sourcePosition:s=l.Ly.Bottom,targetPosition:u=l.Ly.Top,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:y,pathOptions:b,interactionWidth:x})=>{let[_,w,S]=(0,l.OQ)({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:o,targetPosition:u,curvature:b?.curvature}),A=e.isInternal?void 0:t;return(0,a.jsx)(e1,{id:A,path:_,labelX:w,labelY:S,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:y,interactionWidth:x})})}ti.displayName="StraightEdge",ta.displayName="StraightEdgeInternal";let ts=to({isInternal:!1}),tl=to({isInternal:!0});ts.displayName="BezierEdge",tl.displayName="BezierEdgeInternal";let tu={default:tl,straight:ta,step:tn,smoothstep:e7,simplebezier:e6},tc={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},td=(e,t,n)=>n===l.Ly.Left?e-t:n===l.Ly.Right?e+t:e,th=(e,t,n)=>n===l.Ly.Top?e-t:n===l.Ly.Bottom?e+t:e,tf="react-flow__edgeupdater";function tp({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:l,type:u}){return(0,a.jsx)("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:l,className:s([tf,`${tf}-${u}`]),cx:td(t,r,e),cy:th(n,r,e),r:r,stroke:"transparent",fill:"transparent"})}function tm({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:o,targetY:s,sourcePosition:u,targetPosition:c,onReconnect:d,onReconnectStart:h,onReconnectEnd:f,setReconnecting:p,setUpdateHover:m}){let g=S(),v=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:r,domNode:i,isValidConnection:a,connectionMode:o,connectionRadius:s,lib:u,onConnectStart:c,onConnectEnd:m,cancelConnection:v,nodeLookup:y,rfId:b,panBy:x,updateConnection:_}=g.getState(),w="target"===t.type;p(!0),h?.(e,n,t.type),l.Ql.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:o,connectionRadius:s,domNode:i,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:w,edgeUpdaterType:t.type,lib:u,flowId:b,cancelConnection:v,panBy:x,isValidConnection:a,onConnect:e=>d?.(n,e),onConnectStart:c,onConnectEnd:m,onReconnectEnd:(e,r)=>{p(!1),f?.(e,n,t.type,r)},updateConnection:_,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},y=()=>m(!0),b=()=>m(!1);return(0,a.jsxs)(a.Fragment,{children:[(!0===e||"source"===e)&&(0,a.jsx)(tp,{position:u,centerX:r,centerY:i,radius:t,onMouseDown:e=>v(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:y,onMouseOut:b,type:"source"}),(!0===e||"target"===e)&&(0,a.jsx)(tp,{position:c,centerX:o,centerY:s,radius:t,onMouseDown:e=>v(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:y,onMouseOut:b,type:"target"})]})}function tg({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:u,onContextMenu:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:f,reconnectRadius:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,rfId:b,edgeTypes:x,noPanClassName:_,onError:A,disableKeyboardA11y:M}){let E=w(t=>t.edgeLookup.get(e)),T=w(e=>e.defaultEdgeOptions),R=(E=T?{...T,...E}:E).type||"default",P=x?.[R]||tu[R];void 0===P&&(A?.("011",l.Qj.error011(R)),R="default",P=tu.default);let I=!!(E.focusable||t&&void 0===E.focusable),B=void 0!==m&&(E.reconnectable||n&&void 0===E.reconnectable),L=!!(E.selectable||r&&void 0===E.selectable),k=(0,o.useRef)(null),[D,N]=(0,o.useState)(!1),[F,O]=(0,o.useState)(!1),U=S(),{zIndex:z,sourceX:H,sourceY:G,targetX:V,targetY:j,sourcePosition:W,targetPosition:X}=w((0,o.useCallback)(t=>{let n=t.nodeLookup.get(E.source),r=t.nodeLookup.get(E.target);if(!n||!r)return{zIndex:E.zIndex,...tc};let i=(0,l.JU)({id:e,sourceNode:n,targetNode:r,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:t.connectionMode,onError:A});return{zIndex:(0,l.xx)({selected:E.selected,zIndex:E.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect}),...i||tc}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),y),J=(0,o.useMemo)(()=>E.markerStart?`url('#${(0,l.dW)(E.markerStart,b)}')`:void 0,[E.markerStart,b]),Y=(0,o.useMemo)(()=>E.markerEnd?`url('#${(0,l.dW)(E.markerEnd,b)}')`:void 0,[E.markerEnd,b]);if(E.hidden||null===H||null===G||null===V||null===j)return null;let K=u?e=>{u(e,{...E})}:void 0,q=c?e=>{c(e,{...E})}:void 0,Q=d?e=>{d(e,{...E})}:void 0,Z=h?e=>{h(e,{...E})}:void 0,$=f?e=>{f(e,{...E})}:void 0;return(0,a.jsx)("svg",{style:{zIndex:z},children:(0,a.jsxs)("g",{className:s(["react-flow__edge",`react-flow__edge-${R}`,E.className,_,{selected:E.selected,animated:E.animated,inactive:!L&&!i,updating:D,selectable:L}]),onClick:t=>{let{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:a}=U.getState();L&&(U.setState({nodesSelectionActive:!1}),E.selected&&a?(r({nodes:[],edges:[E]}),k.current?.blur()):n([e])),i&&i(t,E)},onDoubleClick:K,onContextMenu:q,onMouseEnter:Q,onMouseMove:Z,onMouseLeave:$,onKeyDown:I?t=>{if(!M&&l.wQ.includes(t.key)&&L){let{unselectNodesAndEdges:n,addSelectedEdges:r}=U.getState();"Escape"===t.key?(k.current?.blur(),n({edges:[E]})):r([e])}}:void 0,tabIndex:I?0:void 0,role:I?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===E.ariaLabel?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":I?`${C}-${b}`:void 0,ref:k,children:[!F&&(0,a.jsx)(P,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:L,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:H,sourceY:G,targetX:V,targetY:j,sourcePosition:W,targetPosition:X,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:J,markerEnd:Y,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),B&&(0,a.jsx)(tm,{edge:E,isReconnectable:B,reconnectRadius:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,sourceX:H,sourceY:G,targetX:V,targetY:j,sourcePosition:W,targetPosition:X,setUpdateHover:N,setReconnecting:O})]})})}let tv=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ty({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,disableKeyboardA11y:b}){let{edgesFocusable:x,edgesReconnectable:_,elementsSelectable:S,onError:A}=w(tv,y),M=w((0,o.useCallback)(e=>{if(!t)return e.edges.map(e=>e.id);let n=[];if(e.width&&e.height)for(let t of e.edges){let r=e.nodeLookup.get(t.source),i=e.nodeLookup.get(t.target);r&&i&&(0,l.RY)({sourceNode:r,targetNode:i,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n},[t]),y);return(0,a.jsxs)("div",{className:"react-flow__edges",children:[(0,a.jsx)(eZ,{defaultColor:e,rfId:n}),M.map(e=>(0,a.jsx)(tg,{id:e,edgesFocusable:x,edgesReconnectable:_,elementsSelectable:S,noPanClassName:i,onReconnect:s,onContextMenu:u,onMouseEnter:c,onMouseMove:d,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,rfId:n,onError:A,edgeTypes:r,disableKeyboardA11y:b},e))]})}ty.displayName="EdgeRenderer";let tb=(0,o.memo)(ty),tx=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function t_({children:e}){let t=w(tx);return(0,a.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}let tw=e=>e.panZoom?.syncViewport;function tS(e){return e.connection.inProgress?{...e.connection,to:(0,l.m)(e.connection.to,e.transform)}:{...e.connection}}let tA=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function tM({containerStyle:e,style:t,type:n,component:r}){let{nodesConnectable:i,width:o,height:u,isValid:c,inProgress:d}=w(tA,y);return o&&i&&d?(0,a.jsx)("svg",{style:e,width:o,height:u,className:"react-flow__connectionline react-flow__container",children:(0,a.jsx)("g",{className:s(["react-flow__connection",(0,l.Zp)(c)]),children:(0,a.jsx)(tE,{style:t,type:n,CustomComponent:r,isValid:c})})}):null}let tE=({style:e,type:t=l.t8.Bezier,CustomComponent:n,isValid:r})=>{let{inProgress:i,from:o,fromNode:s,fromHandle:u,fromPosition:c,to:d,toNode:h,toHandle:f,toPosition:p}=w(tS,y);if(!i)return;if(n)return(0,a.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:u,fromX:o.x,fromY:o.y,toX:d.x,toY:d.y,fromPosition:c,toPosition:p,connectionStatus:(0,l.Zp)(r),toNode:h,toHandle:f});let m="",g={sourceX:o.x,sourceY:o.y,sourcePosition:c,targetX:d.x,targetY:d.y,targetPosition:p};switch(t){case l.t8.Bezier:[m]=(0,l.OQ)(g);break;case l.t8.SimpleBezier:[m]=e3(g);break;case l.t8.Step:[m]=(0,l.OW)({...g,borderRadius:0});break;case l.t8.SmoothStep:[m]=(0,l.OW)(g);break;default:[m]=(0,l.Hm)(g)}return(0,a.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};tE.displayName="ConnectionLine";let tC={};function tT(e=tC){(0,o.useRef)(e),S(),(0,o.useEffect)(()=>{},[e])}function tR({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:f,onSelectionStart:p,onSelectionEnd:m,connectionLineType:g,connectionLineStyle:v,connectionLineComponent:y,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:_,selectionMode:A,multiSelectionKeyCode:M,panActivationKeyCode:E,zoomActivationKeyCode:C,deleteKeyCode:T,onlyRenderVisibleElements:R,elementsSelectable:P,defaultViewport:I,translateExtent:B,minZoom:L,maxZoom:k,preventScrolling:D,defaultMarkerColor:N,zoomOnScroll:F,zoomOnPinch:O,panOnScroll:U,panOnScrollSpeed:z,panOnScrollMode:H,zoomOnDoubleClick:G,panOnDrag:V,onPaneClick:j,onPaneMouseEnter:W,onPaneMouseMove:X,onPaneMouseLeave:J,onPaneScroll:Y,onPaneContextMenu:K,paneClickDistance:q,nodeClickDistance:Q,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:ee,onEdgeMouseLeave:et,reconnectRadius:en,onReconnect:er,onReconnectStart:ei,onReconnectEnd:ea,noDragClassName:eo,noWheelClassName:es,noPanClassName:el,disableKeyboardA11y:eu,nodeExtent:ec,rfId:ed,viewport:eh,onViewportChange:ep}){return tT(e),tT(t),S(),(0,o.useRef)(!1),(0,o.useEffect)(()=>{},[]),!function(e){let t=ef(),n=(0,o.useRef)(!1);(0,o.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(n),!function(e){let t=w(tw),n=S();(0,o.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(eh),(0,a.jsx)(eG,{onPaneClick:j,onPaneMouseEnter:W,onPaneMouseMove:X,onPaneMouseLeave:J,onPaneContextMenu:K,onPaneScroll:Y,paneClickDistance:q,deleteKeyCode:T,selectionKeyCode:x,selectionOnDrag:_,selectionMode:A,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:M,panActivationKeyCode:E,zoomActivationKeyCode:C,elementsSelectable:P,zoomOnScroll:F,zoomOnPinch:O,zoomOnDoubleClick:G,panOnScroll:U,panOnScrollSpeed:z,panOnScrollMode:H,panOnDrag:V,defaultViewport:I,translateExtent:B,minZoom:L,maxZoom:k,onSelectionContextMenu:f,preventScrolling:D,noDragClassName:eo,noWheelClassName:es,noPanClassName:el,disableKeyboardA11y:eu,onViewportChange:ep,isControlledViewport:!!eh,children:(0,a.jsxs)(t_,{children:[(0,a.jsx)(tb,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:l,onReconnect:er,onReconnectStart:ei,onReconnectEnd:ea,onlyRenderVisibleElements:R,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:ee,onEdgeMouseLeave:et,reconnectRadius:en,defaultMarkerColor:N,noPanClassName:el,disableKeyboardA11y:eu,rfId:ed}),(0,a.jsx)(tM,{style:v,type:g,component:y,containerStyle:b}),(0,a.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,a.jsx)(eY,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:u,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:Q,onlyRenderVisibleElements:R,noPanClassName:el,noDragClassName:eo,disableKeyboardA11y:eu,nodeExtent:ec,rfId:ed}),(0,a.jsx)("div",{className:"react-flow__viewport-portal"})]})})}tR.displayName="GraphView";let tP=(0,o.memo)(tR),tI=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:o,nodeOrigin:s,nodeExtent:u}={})=>{let c=new Map,d=new Map,h=new Map,f=new Map,p=r??t??[],m=n??e??[],g=s??[0,0],v=u??l.k5;(0,l.be)(h,f,p),(0,l.yF)(m,c,d,{nodeOrigin:g,nodeExtent:v,elevateNodesOnSelect:!1});let y=[0,0,1];if(o&&i&&a){let e=(0,l.W0)(c,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),{x:t,y:n,zoom:r}=(0,l.$i)(e,i,a,.5,2,.1);y=[t,n,r]}return{rfId:"1",width:0,height:0,transform:y,nodes:m,nodeLookup:c,parentLookup:d,edges:p,edgeLookup:f,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:l.k5,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:l.jD.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:g,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...l.Ky},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:l.Ki,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},tB=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:o,nodeOrigin:s,nodeExtent:u})=>v((c,d)=>({...tI({nodes:e,edges:t,width:i,height:a,fitView:o,nodeOrigin:s,nodeExtent:u,defaultNodes:n,defaultEdges:r}),setNodes:e=>{let{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:i}=d();(0,l.yF)(e,t,n,{nodeOrigin:r,nodeExtent:u,elevateNodesOnSelect:i,checkEquality:!0}),c({nodes:e})},setEdges:e=>{let{connectionLookup:t,edgeLookup:n}=d();(0,l.be)(t,n,e),c({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){let{setNodes:t}=d();t(e),c({hasDefaultNodes:!0})}if(t){let{setEdges:e}=d();e(t),c({hasDefaultEdges:!0})}},updateNodeInternals:(e,t={triggerFitView:!0})=>{let{triggerNodeChanges:n,nodeLookup:r,parentLookup:i,fitViewOnInit:a,fitViewDone:o,fitViewOnInitOptions:s,domNode:u,nodeOrigin:h,nodeExtent:f,debug:p,fitViewSync:m}=d(),{changes:g,updatedInternals:v}=(0,l.B1)(e,r,i,u,h,f);if(v){if((0,l.VV)(r,i,{nodeOrigin:h,nodeExtent:f}),t.triggerFitView){let e=o;!o&&a&&(e=m({...s,nodes:s?.nodes})),c({fitViewDone:e})}else c({});g?.length>0&&(p&&console.log("React Flow: trigger node changes",g),n?.(g))}},updateNodePositions:(e,t=!1)=>{let n=[],r=[],{nodeLookup:i,triggerNodeChanges:a}=d();for(let[a,o]of e){let e=i.get(a),s=!!(e?.expandParent&&e?.parentId&&o?.position),l={id:a,type:"position",position:s?{x:Math.max(0,o.position.x),y:Math.max(0,o.position.y)}:o.position,dragging:t};s&&e.parentId&&n.push({id:a,parentId:e.parentId,rect:{...o.internals.positionAbsolute,width:o.measured.width??0,height:o.measured.height??0}}),r.push(l)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=d(),a=(0,l.so)(n,i,e,t);r.push(...a)}a(r)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:i,debug:a}=d();e?.length&&(i&&n(Z(e,r)),a&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:i,debug:a}=d();e?.length&&(i&&n(Z(e,r)),a&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:a}=d();if(t){i(e.map(e=>et(e,!0)));return}i(en(r,new Set([...e]),!0)),a(en(n))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:a}=d();if(t){a(e.map(e=>et(e,!0)));return}a(en(n,new Set([...e]))),i(en(r,new Set,!0))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{let{edges:n,nodes:r,nodeLookup:i,triggerNodeChanges:a,triggerEdgeChanges:o}=d(),s=(e||r).map(e=>{let t=i.get(e.id);return t&&(t.selected=!1),et(e.id,!1)}),l=(t||n).map(e=>et(e.id,!1));a(s),o(l)},setMinZoom:e=>{let{panZoom:t,maxZoom:n}=d();t?.setScaleExtent([e,n]),c({minZoom:e})},setMaxZoom:e=>{let{panZoom:t,minZoom:n}=d();t?.setScaleExtent([n,e]),c({maxZoom:e})},setTranslateExtent:e=>{d().panZoom?.setTranslateExtent(e),c({translateExtent:e})},setPaneClickDistance:e=>{d().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r}=d(),i=t.reduce((e,t)=>t.selected?[...e,et(t.id,!1)]:e,[]),a=e.reduce((e,t)=>t.selected?[...e,et(t.id,!1)]:e,[]);n(i),r(a)},setNodeExtent:e=>{let{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:i,elevateNodesOnSelect:a,nodeExtent:o}=d();(e[0][0]!==o[0][0]||e[0][1]!==o[0][1]||e[1][0]!==o[1][0]||e[1][1]!==o[1][1])&&((0,l.yF)(t,n,r,{nodeOrigin:i,nodeExtent:e,elevateNodesOnSelect:a,checkEquality:!1}),c({nodeExtent:e}))},panBy:e=>{let{transform:t,width:n,height:r,panZoom:i,translateExtent:a}=d();return(0,l.hO)({delta:e,panZoom:i,transform:t,translateExtent:a,width:n,height:r})},fitView:e=>{let{panZoom:t,width:n,height:r,minZoom:i,maxZoom:a,nodeLookup:o}=d();if(!t)return Promise.resolve(!1);let s=(0,l.J6)(o,e);return(0,l.Qu)({nodes:s,width:n,height:r,panZoom:t,minZoom:i,maxZoom:a},e)},fitViewSync:e=>{let{panZoom:t,width:n,height:r,minZoom:i,maxZoom:a,nodeLookup:o}=d();if(!t)return!1;let s=(0,l.J6)(o,e);return(0,l.Qu)({nodes:s,width:n,height:r,panZoom:t,minZoom:i,maxZoom:a},e),s.size>0},cancelConnection:()=>{c({connection:{...l.Ky}})},updateConnection:e=>{c({connection:e})},reset:()=>c({...tI()})}),Object.is);function tL({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,fitView:l,nodeOrigin:u,nodeExtent:c,children:d}){let[h]=(0,o.useState)(()=>tB({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:l,nodeOrigin:u,nodeExtent:c}));return(0,a.jsx)(x,{value:h,children:(0,a.jsx)(ed,{children:d})})}function tk({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:l,fitView:u,nodeOrigin:c,nodeExtent:d}){return(0,o.useContext)(b)?(0,a.jsx)(a.Fragment,{children:e}):(0,a.jsx)(tL,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:l,fitView:u,nodeOrigin:c,nodeExtent:d,children:e})}let tD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var tN=es(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:u,edgeTypes:c,onNodeClick:d,onEdgeClick:h,onInit:f,onMove:p,onMoveStart:m,onMoveEnd:g,onConnect:v,onConnectStart:y,onConnectEnd:b,onClickConnectStart:x,onClickConnectEnd:_,onNodeMouseEnter:w,onNodeMouseMove:S,onNodeMouseLeave:A,onNodeContextMenu:M,onNodeDoubleClick:E,onNodeDragStart:C,onNodeDrag:T,onNodeDragStop:R,onNodesDelete:I,onEdgesDelete:B,onDelete:k,onSelectionChange:D,onSelectionDragStart:N,onSelectionDrag:F,onSelectionDragStop:O,onSelectionContextMenu:G,onSelectionStart:V,onSelectionEnd:j,onBeforeDelete:J,connectionMode:Y,connectionLineType:K=l.t8.Bezier,connectionLineStyle:q,connectionLineComponent:Q,connectionLineContainerStyle:Z,deleteKeyCode:$="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:et=!1,selectionMode:en=l.oW.Full,panActivationKeyCode:er="Space",multiSelectionKeyCode:ei=(0,l.Q5)()?"Meta":"Control",zoomActivationKeyCode:ea=(0,l.Q5)()?"Meta":"Control",snapToGrid:eo,snapGrid:es,onlyRenderVisibleElements:el=!1,selectNodesOnDrag:eu,nodesDraggable:ec,nodesConnectable:ed,nodesFocusable:eh,nodeOrigin:ef=z,edgesFocusable:ep,edgesReconnectable:em,elementsSelectable:eg=!0,defaultViewport:ev=H,minZoom:ey=.5,maxZoom:eb=2,translateExtent:ex=l.k5,preventScrolling:e_=!0,nodeExtent:ew,defaultMarkerColor:eS="#b1b1b7",zoomOnScroll:eA=!0,zoomOnPinch:eM=!0,panOnScroll:eE=!1,panOnScrollSpeed:eC=.5,panOnScrollMode:eT=l.IY.Free,zoomOnDoubleClick:eR=!0,panOnDrag:eP=!0,onPaneClick:eI,onPaneMouseEnter:eB,onPaneMouseMove:eL,onPaneMouseLeave:ek,onPaneScroll:eD,onPaneContextMenu:eN,paneClickDistance:eF=0,nodeClickDistance:eO=0,children:eU,onReconnect:ez,onReconnectStart:eH,onReconnectEnd:eG,onEdgeContextMenu:eV,onEdgeDoubleClick:ej,onEdgeMouseEnter:eW,onEdgeMouseMove:eX,onEdgeMouseLeave:eJ,reconnectRadius:eY=10,onNodesChange:eK,onEdgesChange:eq,noDragClassName:eQ="nodrag",noWheelClassName:eZ="nowheel",noPanClassName:e$="nopan",fitView:e0,fitViewOptions:e1,connectOnClick:e2,attributionPosition:e3,proOptions:e4,defaultEdgeOptions:e5,elevateNodesOnSelect:e6,elevateEdgesOnSelect:e9,disableKeyboardA11y:e8=!1,autoPanOnConnect:e7,autoPanOnNodeDrag:te,autoPanSpeed:tt,connectionRadius:tn,isValidConnection:tr,onError:ti,style:ta,id:to,nodeDragThreshold:ts,viewport:tl,onViewportChange:tu,width:tc,height:td,colorMode:th="light",debug:tf,onScroll:tp,...tm},tg){let tv=to||"1",ty=function(e){let[t,n]=(0,o.useState)("system"===e?null:e);return(0,o.useEffect)(()=>{if("system"!==e){n(e);return}let t=X(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}},[e]),null!==t?t:X()?.matches?"dark":"light"}(th),tb=(0,o.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),tp?.(e)},[tp]);return(0,a.jsx)("div",{"data-testid":"rf__wrapper",...tm,onScroll:tb,style:{...ta,...tD},ref:tg,className:s(["react-flow",i,ty]),id:to,children:(0,a.jsxs)(tk,{nodes:e,edges:t,width:tc,height:td,fitView:e0,nodeOrigin:ef,nodeExtent:ew,children:[(0,a.jsx)(tP,{onInit:f,onNodeClick:d,onEdgeClick:h,onNodeMouseEnter:w,onNodeMouseMove:S,onNodeMouseLeave:A,onNodeContextMenu:M,onNodeDoubleClick:E,nodeTypes:u,edgeTypes:c,connectionLineType:K,connectionLineStyle:q,connectionLineComponent:Q,connectionLineContainerStyle:Z,selectionKeyCode:ee,selectionOnDrag:et,selectionMode:en,deleteKeyCode:$,multiSelectionKeyCode:ei,panActivationKeyCode:er,zoomActivationKeyCode:ea,onlyRenderVisibleElements:el,defaultViewport:ev,translateExtent:ex,minZoom:ey,maxZoom:eb,preventScrolling:e_,zoomOnScroll:eA,zoomOnPinch:eM,zoomOnDoubleClick:eR,panOnScroll:eE,panOnScrollSpeed:eC,panOnScrollMode:eT,panOnDrag:eP,onPaneClick:eI,onPaneMouseEnter:eB,onPaneMouseMove:eL,onPaneMouseLeave:ek,onPaneScroll:eD,onPaneContextMenu:eN,paneClickDistance:eF,nodeClickDistance:eO,onSelectionContextMenu:G,onSelectionStart:V,onSelectionEnd:j,onReconnect:ez,onReconnectStart:eH,onReconnectEnd:eG,onEdgeContextMenu:eV,onEdgeDoubleClick:ej,onEdgeMouseEnter:eW,onEdgeMouseMove:eX,onEdgeMouseLeave:eJ,reconnectRadius:eY,defaultMarkerColor:eS,noDragClassName:eQ,noWheelClassName:eZ,noPanClassName:e$,rfId:tv,disableKeyboardA11y:e8,nodeExtent:ew,viewport:tl,onViewportChange:tu}),(0,a.jsx)(W,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:v,onConnectStart:y,onConnectEnd:b,onClickConnectStart:x,onClickConnectEnd:_,nodesDraggable:ec,nodesConnectable:ed,nodesFocusable:eh,edgesFocusable:ep,edgesReconnectable:em,elementsSelectable:eg,elevateNodesOnSelect:e6,elevateEdgesOnSelect:e9,minZoom:ey,maxZoom:eb,nodeExtent:ew,onNodesChange:eK,onEdgesChange:eq,snapToGrid:eo,snapGrid:es,connectionMode:Y,translateExtent:ex,connectOnClick:e2,defaultEdgeOptions:e5,fitView:e0,fitViewOptions:e1,onNodesDelete:I,onEdgesDelete:B,onDelete:k,onNodeDragStart:C,onNodeDrag:T,onNodeDragStop:R,onSelectionDrag:F,onSelectionDragStart:N,onSelectionDragStop:O,onMove:p,onMoveStart:m,onMoveEnd:g,noPanClassName:e$,nodeOrigin:ef,rfId:tv,autoPanOnConnect:e7,autoPanOnNodeDrag:te,autoPanSpeed:tt,onError:ti,connectionRadius:tn,isValidConnection:tr,selectNodesOnDrag:eu,nodeDragThreshold:ts,onBeforeDelete:J,paneClickDistance:eF,debug:tf}),(0,a.jsx)(U,{onSelectionChange:D}),eU,(0,a.jsx)(L,{proOptions:e4,position:e3}),(0,a.jsx)(P,{rfId:tv,disableKeyboardA11y:e8})]})})});function tF({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,a.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:s(["react-flow__background-pattern",n,r])})}function tO({radius:e,className:t}){return(0,a.jsx)("circle",{cx:e,cy:e,r:e,className:s(["react-flow__background-pattern","dots",t])})}l.Qj.error014(),(r=i||(i={})).Lines="lines",r.Dots="dots",r.Cross="cross";let tU={[i.Dots]:1,[i.Lines]:1,[i.Cross]:6},tz=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function tH({id:e,variant:t=i.Dots,gap:n=20,size:r,lineWidth:l=1,offset:u=0,color:c,bgColor:d,style:h,className:f,patternClassName:p}){let m=(0,o.useRef)(null),{transform:g,patternId:v}=w(tz,y),b=r||tU[t],x=t===i.Dots,_=t===i.Cross,S=Array.isArray(n)?n:[n,n],A=[S[0]*g[2]||1,S[1]*g[2]||1],M=b*g[2],E=Array.isArray(u)?u:[u,u],C=_?[M,M]:A,T=[E[0]*g[2]||1+C[0]/2,E[1]*g[2]||1+C[1]/2],R=`${v}${e||""}`;return(0,a.jsxs)("svg",{className:s(["react-flow__background",f]),style:{...h,...ev,"--xy-background-color-props":d,"--xy-background-pattern-color-props":c},ref:m,"data-testid":"rf__background",children:[(0,a.jsx)("pattern",{id:R,x:g[0]%A[0],y:g[1]%A[1],width:A[0],height:A[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:x?(0,a.jsx)(tO,{radius:M/2,className:p}):(0,a.jsx)(tF,{dimensions:C,lineWidth:l,variant:t,className:p})}),(0,a.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}tH.displayName="Background";let tG=(0,o.memo)(tH);function tV(){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,a.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function tj(){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,a.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function tW(){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,a.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function tX(){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,a.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function tJ(){return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,a.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function tY({children:e,className:t,...n}){return(0,a.jsx)("button",{type:"button",className:s(["react-flow__controls-button",t]),...n,children:e})}let tK=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function tq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:l,onFitView:u,onInteractiveChange:c,className:d,children:h,position:f="bottom-left",orientation:p="vertical","aria-label":m="React Flow controls"}){let g=S(),{isInteractive:v,minZoomReached:b,maxZoomReached:x}=w(tK,y),{zoomIn:_,zoomOut:A,fitView:M}=ef();return(0,a.jsxs)(B,{className:s(["react-flow__controls","horizontal"===p?"horizontal":"vertical",d]),position:f,style:e,"data-testid":"rf__controls","aria-label":m,children:[t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tY,{onClick:()=>{_(),o?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x,children:(0,a.jsx)(tV,{})}),(0,a.jsx)(tY,{onClick:()=>{A(),l?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:(0,a.jsx)(tj,{})})]}),n&&(0,a.jsx)(tY,{className:"react-flow__controls-fitview",onClick:()=>{M(i),u?.()},title:"fit view","aria-label":"fit view",children:(0,a.jsx)(tW,{})}),r&&(0,a.jsx)(tY,{className:"react-flow__controls-interactive",onClick:()=>{g.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c?.(!v)},title:"toggle interactivity","aria-label":"toggle interactivity",children:v?(0,a.jsx)(tJ,{}):(0,a.jsx)(tX,{})}),h]})}tq.displayName="Controls";let tQ=(0,o.memo)(tq),tZ=(0,o.memo)(function({id:e,x:t,y:n,width:r,height:i,style:o,color:l,strokeColor:u,strokeWidth:c,className:d,borderRadius:h,shapeRendering:f,selected:p,onClick:m}){let{background:g,backgroundColor:v}=o||{};return(0,a.jsx)("rect",{className:s(["react-flow__minimap-node",{selected:p},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:l||g||v,stroke:u,strokeWidth:c},shapeRendering:f,onClick:m?t=>m(t,e):void 0})}),t$=e=>e.nodes.map(e=>e.id),t0=e=>e instanceof Function?e:()=>e,t1=(0,o.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:s,NodeComponent:u,onClick:c}){let{node:d,x:h,y:f,width:p,height:m}=w(t=>{let n=t.nodeLookup.get(e),{x:r,y:i}=n.internals.positionAbsolute,{width:a,height:o}=(0,l.Rf)(n);return{node:n,x:r,y:i,width:a,height:o}},y);return d&&!d.hidden&&(0,l.nb)(d)?(0,a.jsx)(u,{x:h,y:f,width:p,height:m,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:o,shapeRendering:s,onClick:c,id:d.id}):null});var t2=(0,o.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:o=tZ,onClick:s}){let l=w(t$,y),u=t0(t),c=t0(e),d=t0(n),h="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(t1,{id:e,nodeColorFunc:u,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:o,onClick:s,shapeRendering:h},e))})});let t3=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?(0,l.oI)((0,l.W0)(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function t4({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:u=5,nodeStrokeWidth:c,nodeComponent:d,bgColor:h,maskColor:f,maskStrokeColor:p,maskStrokeWidth:m,position:g="bottom-right",onClick:v,onNodeClick:b,pannable:x=!1,zoomable:_=!1,ariaLabel:A="React Flow mini map",inversePan:M,zoomStep:E=10,offsetScale:C=5}){let T=S(),R=(0,o.useRef)(null),{boundingRect:P,viewBB:I,rfId:L,panZoom:k,translateExtent:D,flowWidth:N,flowHeight:F}=w(t3,y),O=e?.width??200,U=e?.height??150,z=Math.max(P.width/O,P.height/U),H=z*O,G=z*U,V=C*z,j=P.x-(H-P.width)/2-V,W=P.y-(G-P.height)/2-V,X=H+2*V,J=G+2*V,Y=`react-flow__minimap-desc-${L}`,K=(0,o.useRef)(0),q=(0,o.useRef)();K.current=z,(0,o.useEffect)(()=>{if(R.current&&k)return q.current=(0,l.FD)({domNode:R.current,panZoom:k,getTransform:()=>T.getState().transform,getViewScale:()=>K.current}),()=>{q.current?.destroy()}},[k]),(0,o.useEffect)(()=>{q.current?.update({translateExtent:D,width:N,height:F,inversePan:M,pannable:x,zoomStep:E,zoomable:_})},[x,_,M,E,D,N,F]);let Q=v?e=>{let[t,n]=q.current?.pointer(e)||[0,0];v(e,{x:t,y:n})}:void 0,Z=b?(0,o.useCallback)((e,t)=>{b(e,T.getState().nodeLookup.get(t))},[]):void 0;return(0,a.jsx)(B,{position:g,style:{...e,"--xy-minimap-background-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof f?f:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof p?p:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof m?m*z:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"string"==typeof c?c:void 0},className:s(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,a.jsxs)("svg",{width:O,height:U,viewBox:`${j} ${W} ${X} ${J}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Y,ref:R,onClick:Q,children:[A&&(0,a.jsx)("title",{id:Y,children:A}),(0,a.jsx)(t2,{onClick:Z,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:u,nodeClassName:i,nodeStrokeWidth:c,nodeComponent:d}),(0,a.jsx)("path",{className:"react-flow__minimap-mask",d:`M${j-V},${W-V}h${X+2*V}v${J+2*V}h${-X-2*V}z
        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}t4.displayName="MiniMap",(0,o.memo)(t4),(0,o.memo)(function({nodeId:e,position:t,variant:n=l.pB.Handle,className:r,style:i={},children:u,color:c,minWidth:d=10,minHeight:h=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:m=!1,shouldResize:g,onResizeStart:v,onResize:y,onResizeEnd:b}){let x=eI(),_="string"==typeof e?e:x,w=S(),A=(0,o.useRef)(null),M=n===l.pB.Line?"right":"bottom-right",E=t??M,C=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(A.current&&_)return C.current||(C.current=(0,l.Cz)({domNode:A.current,nodeId:_,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,domNode:a}=w.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:i,paneDomNode:a}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:r,parentLookup:i,nodeOrigin:a}=w.getState(),o=[],s={x:e.x,y:e.y},u=r.get(_);if(u&&u.expandParent&&u.parentId){let t=u.origin??a,n=e.width??u.measured.width??0,c=e.height??u.measured.height??0,d={id:u.id,parentId:u.parentId,rect:{width:n,height:c,...(0,l.ZB)({x:e.x??u.position.x,y:e.y??u.position.y},{width:n,height:c},u.parentId,r,t)}},h=(0,l.so)([d],r,i,a);o.push(...h),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){let e={id:_,type:"position",position:{...s}};o.push(e)}if(void 0!==e.width&&void 0!==e.height){let t={id:_,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};o.push(t)}for(let e of t){let t={...e,type:"position"};o.push(t)}n(o)},onEnd:()=>{w.getState().triggerNodeChanges([{id:_,type:"dimensions",resizing:!1}])}})),C.current.update({controlPosition:E,boundaries:{minWidth:d,minHeight:h,maxWidth:f,maxHeight:p},keepAspectRatio:m,onResizeStart:v,onResize:y,onResizeEnd:b,shouldResize:g}),()=>{C.current?.destroy()}},[E,d,h,f,p,m,v,y,b,g]);let T=E.split("-"),R=n===l.pB.Line?"borderColor":"backgroundColor",P=c?{...i,[R]:c}:i;return(0,a.jsx)("div",{className:s(["react-flow__resize-control","nodrag",...T,n,r]),ref:A,style:P,children:u})})},9997:function(e,t,n){"use strict";n.d(t,{B1:()=>rl,Qj:()=>t1,Qu:()=>no,hO:()=>ru,xx:()=>nJ,wQ:()=>t3,k5:()=>t2,OL:()=>nL,OW:()=>n2,t8:()=>p,wv:()=>nz,f5:()=>nr,Cz:()=>rk,Ly:()=>g,J6:()=>na,Z_:()=>nQ,Rf:()=>nP,oC:()=>rp,s$:()=>nO,$i:()=>nC,m:()=>nM,J$:()=>n_,PS:()=>nv,X6:()=>rT,nb:()=>nI,ZB:()=>nB,pB:()=>v,W0:()=>nn,kE:()=>nw,VV:()=>rr,IY:()=>h,J3:()=>t9,N5:()=>nU,OQ:()=>nW,S2:()=>nN,RX:()=>nt,lp:()=>nx,Ki:()=>nS,Ql:()=>rb,Hm:()=>nZ,Q5:()=>nT,n3:()=>n7,Vt:()=>t8,QZ:()=>m,FD:()=>rx,JU:()=>n4,RY:()=>nY,dW:()=>n8,jD:()=>d,oW:()=>f,yF:()=>ri,q7:()=>ns,t_:()=>nD,so:()=>rs,WD:()=>nl,_2:()=>nA,be:()=>rd,Ky:()=>t4,Zp:()=>t6,lM:()=>nG,oI:()=>nb,oj:()=>nE});var r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,y={value:()=>{}};function b(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new x(r)}function x(e){this._=e}function _(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=y,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function w(){}function S(e){return null==e?w:function(){return this.querySelector(e)}}function A(){return[]}function M(e){return null==e?A:function(){return this.querySelectorAll(e)}}function E(e){return function(){return this.matches(e)}}function C(e){return function(t){return t.matches(e)}}x.prototype=b.prototype={constructor:x,on:function(e,t){var n,r=this._,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((n=(e=i[a]).type)&&(n=function(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=_(r[n],e.name,t);else if(null==t)for(n in r)r[n]=_(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new x(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var T=Array.prototype.find;function R(){return this.firstElementChild}var P=Array.prototype.filter;function I(){return Array.from(this.children)}function B(e){return Array(e.length)}function L(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function k(e,t,n,r,i,a){for(var o,s=0,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new L(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function D(e,t,n,r,i,a,o){var s,l,u,c=new Map,d=t.length,h=a.length,f=Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=u=o.call(l,l.__data__,s,t)+"",c.has(u)?i[s]=l:c.set(u,l));for(s=0;s<h;++s)u=o.call(e,a[s],s,a)+"",(l=c.get(u))?(r[s]=l,l.__data__=a[s],c.delete(u)):n[s]=new L(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(f[s])===l&&(i[s]=l)}function N(e){return e.__data__}function F(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}L.prototype={constructor:L,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var O="http://www.w3.org/1999/xhtml";let U={svg:"http://www.w3.org/2000/svg",xhtml:O,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function z(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),U.hasOwnProperty(t)?{space:U[t],local:e}:e}function H(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function G(e,t){return e.style.getPropertyValue(t)||H(e).getComputedStyle(e,null).getPropertyValue(t)}function V(e){return e.trim().split(/^|\s+/)}function j(e){return e.classList||new W(e)}function W(e){this._node=e,this._names=V(e.getAttribute("class")||"")}function X(e,t){for(var n=j(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function J(e,t){for(var n=j(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Y(){this.textContent=""}function K(){this.innerHTML=""}function q(){this.nextSibling&&this.parentNode.appendChild(this)}function Q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z(e){var t=z(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===O&&t.documentElement.namespaceURI===O?t.createElement(e):t.createElementNS(n,e)}})(t)}function $(){return null}function ee(){var e=this.parentNode;e&&e.removeChild(this)}function et(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function en(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function er(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function ei(e,t,n){return function(){var r,i=this.__on,a=function(e){t.call(this,e,this.__data__)};if(i){for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function ea(e,t,n){var r=H(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}W.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var eo=[null];function es(e,t){this._groups=e,this._parents=t}function el(){return new es([[document.documentElement]],eo)}function eu(e){return"string"==typeof e?new es([[document.querySelector(e)]],[document.documentElement]):new es([[e]],eo)}function ec(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}es.prototype=el.prototype={constructor:es,select:function(e){"function"!=typeof e&&(e=S(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a,o,s=t[i],l=s.length,u=r[i]=Array(l),c=0;c<l;++c)(a=s[c])&&(o=e.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),u[c]=o);return new es(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=M(e);for(var n=this._groups,r=n.length,i=[],a=[],o=0;o<r;++o)for(var s,l=n[o],u=l.length,c=0;c<u;++c)(s=l[c])&&(i.push(e.call(s,s.__data__,c,l)),a.push(s));return new es(i,a)},selectChild:function(e){var t;return this.select(null==e?R:(t="function"==typeof e?e:C(e),function(){return T.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?I:(t="function"==typeof e?e:C(e),function(){return P.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=E(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new es(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,N);var n=t?D:k,r=this._parents,i=this._groups;"function"!=typeof e&&(y=e,e=function(){return y});for(var a=i.length,o=Array(a),s=Array(a),l=Array(a),u=0;u<a;++u){var c=r[u],d=i[u],h=d.length,f="object"==typeof(v=e.call(c,c&&c.__data__,u,r))&&"length"in v?v:Array.from(v),p=f.length,m=s[u]=Array(p),g=o[u]=Array(p);n(c,d,m,g,l[u]=Array(h),f,t);for(var v,y,b,x,_=0,w=0;_<p;++_)if(b=m[_]){for(_>=w&&(w=_+1);!(x=g[w])&&++w<p;);b._next=x||null}}return(o=new es(o,r))._enter=s,o._exit=l,o},enter:function(){return new es(this._enter||this._groups.map(B),this._parents)},exit:function(){return new es(this._exit||this._groups.map(B),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),l=0;l<o;++l)for(var u,c=n[l],d=r[l],h=c.length,f=s[l]=Array(h),p=0;p<h;++p)(u=c[p]||d[p])&&(f[p]=u);for(;l<i;++l)s[l]=n[l];return new es(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=F);for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,u=i[a]=Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(t)}return new es(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=z(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):G(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=V(e+"");if(arguments.length<2){for(var r=j(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?X:J)(this,e)}}:t?function(e){return function(){X(this,e)}}:function(e){return function(){J(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?K:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(q)},lower:function(){return this.each(Q)},append:function(e){var t="function"==typeof e?e:Z(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Z(e),r=null==t?$:"function"==typeof t?t:S(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(ee)},clone:function(e){return this.select(e?en:et)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),o=a.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value}return}for(r=0,s=t?ei:er;r<o;++r)this.each(s(a[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return ea(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return ea(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};let ed={passive:!1},eh={capture:!0,passive:!1};function ef(e){e.stopImmediatePropagation()}function ep(e){e.preventDefault(),e.stopImmediatePropagation()}function em(e){var t=e.document.documentElement,n=eu(e).on("dragstart.drag",ep,eh);"onselectstart"in t?n.on("selectstart.drag",ep,eh):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function eg(e,t){var n=e.document.documentElement,r=eu(e).on("dragstart.drag",null);t&&(r.on("click.drag",ep,eh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let ev=e=>()=>e;function ey(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function eb(e){return!e.ctrlKey&&!e.button}function ex(){return this.parentNode}function e_(e,t){return null==t?{x:e.x,y:e.y}:t}function ew(){return navigator.maxTouchPoints||"ontouchstart"in this}function eS(){var e,t,n,r,i=eb,a=ex,o=e_,s=ew,l={},u=b("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,ed).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(o,s){if(!r&&i.call(this,o,s)){var l=x(this,a.call(this,o,s),o,s,"mouse");l&&(eu(o.view).on("mousemove.drag",p,eh).on("mouseup.drag",m,eh),em(o.view),ef(o),n=!1,e=o.clientX,t=o.clientY,l("start",o))}}function p(r){if(ep(r),!n){var i=r.clientX-e,a=r.clientY-t;n=i*i+a*a>d}l.mouse("drag",r)}function m(e){eu(e.view).on("mousemove.drag mouseup.drag",null),eg(e.view,n),ep(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,o=e.changedTouches,s=a.call(this,e,t),l=o.length;for(n=0;n<l;++n)(r=x(this,s,e,t,o[n].identifier,o[n]))&&(ef(e),r("start",e,o[n]))}}function v(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(ep(e),n("drag",e,r[t]))}function y(e){var t,n,i=e.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<a;++t)(n=l[i[t].identifier])&&(ef(e),n("end",e,i[t]))}function x(e,t,n,r,i,a){var s,d,f,p=u.copy(),m=ec(a||n,t);if(null!=(f=o.call(e,new ey("beforestart",{sourceEvent:n,target:h,identifier:i,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=f.x-m[0]||0,d=f.y-m[1]||0,function n(a,o,u){var g,v=m;switch(a){case"start":l[i]=n,g=c++;break;case"end":delete l[i],--c;case"drag":m=ec(u||o,t),g=c}p.call(a,e,new ey(a,{sourceEvent:o,subject:f,target:h,identifier:i,active:g,x:m[0]+s,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(i="function"==typeof e?e:ev(!!e),h):i},h.container=function(e){return arguments.length?(a="function"==typeof e?e:ev(e),h):a},h.subject=function(e){return arguments.length?(o="function"==typeof e?e:ev(e),h):o},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:ev(!!e),h):s},h.on=function(){var e=u.on.apply(u,arguments);return e===u?h:e},h.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,h):Math.sqrt(d)},h}function eA(e){return((e=Math.exp(e))+1/e)/2}ey.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let eM=function e(t,n,r){function i(e,i){var a,o,s=e[0],l=e[1],u=e[2],c=i[0],d=i[1],h=i[2],f=c-s,p=d-l,m=f*f+p*p;if(m<1e-12)o=Math.log(h/u)/t,a=function(e){return[s+e*f,l+e*p,u*Math.exp(t*e*o)]};else{var g=Math.sqrt(m),v=(h*h-u*u+r*m)/(2*u*n*g),y=(h*h-u*u-r*m)/(2*h*n*g),b=Math.log(Math.sqrt(v*v+1)-v);o=(Math.log(Math.sqrt(y*y+1)-y)-b)/t,a=function(e){var r,i,a=e*o,c=eA(b),d=u/(n*g)*(c*(((r=Math.exp(2*(r=t*a+b)))-1)/(r+1))-((i=Math.exp(i=b))-1/i)/2);return[s+d*f,l+d*p,u*c/eA(t*a+b)]}}return a.duration=1e3*o*t/Math.SQRT2,a}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);var eE,eC,eT=0,eR=0,eP=0,eI=0,eB=0,eL=0,ek="object"==typeof performance&&performance.now?performance:Date,eD="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eN(){return eB||(eD(eF),eB=ek.now()+eL)}function eF(){eB=0}function eO(){this._call=this._time=this._next=null}function eU(e,t,n){var r=new eO;return r.restart(e,t,n),r}function ez(){eB=(eI=ek.now())+eL,eT=eR=0;try{!function(){eN(),++eT;for(var e,t=eE;t;)(e=eB-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eT}()}finally{eT=0,function(){for(var e,t,n=eE,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:eE=t);eC=e,eG(r)}(),eB=0}}function eH(){var e=ek.now(),t=e-eI;t>1e3&&(eL-=t,eI=e)}function eG(e){!eT&&(eR&&(eR=clearTimeout(eR)),e-eB>24?(e<1/0&&(eR=setTimeout(ez,e-ek.now()-eL)),eP&&(eP=clearInterval(eP))):(eP||(eI=ek.now(),eP=setInterval(eH,1e3)),eT=1,eD(ez)))}function eV(e,t,n){var r=new eO;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eO.prototype=eU.prototype={constructor:eO,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?eN():+n)+(null==t?0:+t),this._next||eC===this||(eC?eC._next=this:eE=this,eC=this),this._call=e,this._time=n,eG()},stop:function(){this._call&&(this._call=null,this._time=1/0,eG())}};var ej=b("start","end","cancel","interrupt"),eW=[];function eX(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(l){var u,c,d,h;if(1!==n.state)return s();for(u in i)if((h=i[u]).name===n.name){if(3===h.state)return eV(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[u]):+u<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[u])}if(eV(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(u=0,n.state=3,r=Array(d=n.tween.length),c=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function o(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=eU(function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:i,on:ej,tween:eW,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function eJ(e,t){var n=eK(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eY(e,t){var n=eK(e,t);if(n.state>3)throw Error("too late; already running");return n}function eK(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function eq(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a){if((n=a[i]).name!==t){o=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]}o&&delete e.__transition}}function eQ(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var eZ=180/Math.PI,e$={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function e0(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*eZ,skewX:Math.atan(l)*eZ,scaleX:o,scaleY:s}}function e1(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s,l,u,c,d=[],h=[];return a=e(a),o=e(o),!function(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:eQ(e,i)},{i:l-2,x:eQ(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,d,h),s=a.rotate,s!==(l=o.rotate)?(s-l>180?l+=360:l-s>180&&(s+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:eQ(s,l)})):l&&d.push(i(d)+"rotate("+l+r),u=a.skewX,u!==(c=o.skewX)?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:eQ(u,c)}):c&&d.push(i(d)+"skewX("+c+r),!function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:eQ(e,n)},{i:s-2,x:eQ(t,r)})}else(1!==n||1!==r)&&a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,d,h),a=o=null,function(e){for(var t,n=-1,r=h.length;++n<r;)d[(t=h[n]).i]=t.x(e);return d.join("")}}}var e2=e1(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?e$:e0(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),e3=e1(function(e){return null==e?e$:(c||(c=document.createElementNS("http://www.w3.org/2000/svg","g")),c.setAttribute("transform",e),e=c.transform.baseVal.consolidate())?e0((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):e$},", ",")",")");function e4(e,t,n){var r=e._id;return e.each(function(){var e=eY(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return eK(e,r).value[t]}}function e5(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function e6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function e9(){}var e8="\\s*([+-]?\\d+)\\s*",e7="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",te="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tt=/^#([0-9a-f]{3,8})$/,tn=RegExp(`^rgb\\(${e8},${e8},${e8}\\)$`),tr=RegExp(`^rgb\\(${te},${te},${te}\\)$`),ti=RegExp(`^rgba\\(${e8},${e8},${e8},${e7}\\)$`),ta=RegExp(`^rgba\\(${te},${te},${te},${e7}\\)$`),to=RegExp(`^hsl\\(${e7},${te},${te}\\)$`),ts=RegExp(`^hsla\\(${e7},${te},${te},${e7}\\)$`),tl={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function tu(){return this.rgb().formatHex()}function tc(){return this.rgb().formatRgb()}function td(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?th(t):3===n?new tm(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?tf(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?tf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=tn.exec(e))?new tm(t[1],t[2],t[3],1):(t=tr.exec(e))?new tm(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ti.exec(e))?tf(t[1],t[2],t[3],t[4]):(t=ta.exec(e))?tf(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=to.exec(e))?t_(t[1],t[2]/100,t[3]/100,1):(t=ts.exec(e))?t_(t[1],t[2]/100,t[3]/100,t[4]):tl.hasOwnProperty(e)?th(tl[e]):"transparent"===e?new tm(NaN,NaN,NaN,0):null}function th(e){return new tm(e>>16&255,e>>8&255,255&e,1)}function tf(e,t,n,r){return r<=0&&(e=t=n=NaN),new tm(e,t,n,r)}function tp(e,t,n,r){var i;return 1==arguments.length?((i=e)instanceof e9||(i=td(i)),i)?new tm((i=i.rgb()).r,i.g,i.b,i.opacity):new tm:new tm(e,t,n,null==r?1:r)}function tm(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function tg(){return`#${tx(this.r)}${tx(this.g)}${tx(this.b)}`}function tv(){let e=ty(this.opacity);return`${1===e?"rgb(":"rgba("}${tb(this.r)}, ${tb(this.g)}, ${tb(this.b)}${1===e?")":`, ${e})`}`}function ty(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tb(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tx(e){return((e=tb(e))<16?"0":"")+e.toString(16)}function t_(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tS(e,t,n,r)}function tw(e){if(e instanceof tS)return new tS(e.h,e.s,e.l,e.opacity);if(e instanceof e9||(e=td(e)),!e)return new tS;if(e instanceof tS)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new tS(o,s,l,e.opacity)}function tS(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function tA(e){return(e=(e||0)%360)<0?e+360:e}function tM(e){return Math.max(0,Math.min(1,e||0))}function tE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function tC(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}e5(e9,td,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tu,formatHex:tu,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tw(this).formatHsl()},formatRgb:tc,toString:tc}),e5(tm,tp,e6(e9,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tm(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tm(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tm(tb(this.r),tb(this.g),tb(this.b),ty(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tg,formatHex:tg,formatHex8:function(){return`#${tx(this.r)}${tx(this.g)}${tx(this.b)}${tx((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:tv,toString:tv})),e5(tS,function(e,t,n,r){return 1==arguments.length?tw(e):new tS(e,t,n,null==r?1:r)},e6(e9,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tS(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tS(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new tm(tE(e>=240?e-240:e+120,i,r),tE(e,i,r),tE(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new tS(tA(this.h),tM(this.s),tM(this.l),ty(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=ty(this.opacity);return`${1===e?"hsl(":"hsla("}${tA(this.h)}, ${100*tM(this.s)}%, ${100*tM(this.l)}%${1===e?")":`, ${e})`}`}}));let tT=e=>()=>e;function tR(e,t){var n=t-e;return n?function(t){return e+t*n}:tT(isNaN(e)?t:e)}let tP=function e(t){var n,r=1==(n=+t)?tR:function(e,t){var r,i,a;return t-e?(r=e,i=t,r=Math.pow(r,a=n),i=Math.pow(i,a)-r,a=1/a,function(e){return Math.pow(r+e*i,a)}):tT(isNaN(e)?t:e)};function i(e,t){var n=r((e=tp(e)).r,(t=tp(t)).r),i=r(e.g,t.g),a=r(e.b,t.b),o=tR(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return i.gamma=e,i}(1);function tI(e){return function(t){var n,r,i=t.length,a=Array(i),o=Array(i),s=Array(i);for(n=0;n<i;++n)r=tp(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}tI(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return tC((n-r/t)*t,o,i,a,s)}}),tI(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return tC((n-r/t)*t,i,a,o,s)}});var tB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tL=RegExp(tB.source,"g");function tk(e,t){var n;return("number"==typeof t?eQ:t instanceof td?tP:(n=td(t))?(t=n,tP):function(e,t){var n,r,i,a,o,s=tB.lastIndex=tL.lastIndex=0,l=-1,u=[],c=[];for(e+="",t+="";(i=tB.exec(e))&&(a=tL.exec(t));)(o=a.index)>s&&(o=t.slice(s,o),u[l]?u[l]+=o:u[++l]=o),(i=i[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,c.push({i:l,x:eQ(i,a)})),s=tL.lastIndex;return s<t.length&&(o=t.slice(s),u[l]?u[l]+=o:u[++l]=o),u.length<2?c[0]?(n=c[0].x,function(e){return n(e)+""}):(r=t,function(){return r}):(t=c.length,function(e){for(var n,r=0;r<t;++r)u[(n=c[r]).i]=n.x(e);return u.join("")})})(e,t)}var tD=el.prototype.constructor;function tN(e){return function(){this.style.removeProperty(e)}}var tF=0;function tO(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var tU=el.prototype;tO.prototype=(function(e){return el().transition(e)}).prototype={constructor:tO,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=S(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s,l,u=r[o],c=u.length,d=a[o]=Array(c),h=0;h<c;++h)(s=u[h])&&(l=e.call(s,s.__data__,h,u))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,eX(d[h],t,n,h,d,eK(s,n)));return new tO(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=M(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var h,f=e.call(l,l.__data__,d,u),p=eK(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&eX(h,t,n,m,f,p);a.push(f),o.push(l)}return new tO(a,o,t,n)},selectChild:tU.selectChild,selectChildren:tU.selectChildren,filter:function(e){"function"!=typeof e&&(e=E(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],u=0;u<s;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&l.push(a);return new tO(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var l,u=t[s],c=n[s],d=u.length,h=o[s]=Array(d),f=0;f<d;++f)(l=u[f]||c[f])&&(h[f]=l);for(;s<r;++s)o[s]=t[s];return new tO(o,this._parents,this._name,this._id)},selection:function(){return new tD(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++tF,r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=eK(o,t);eX(o,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tO(r,this._parents,e,n)},call:tU.call,nodes:tU.nodes,node:tU.node,size:tU.size,empty:tU.empty,each:tU.each,on:function(e,t){var n,r,i,a=this._id;return arguments.length<2?eK(this.node(),a).on.on(e):this.each((i=(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eJ:eY,function(){var o=i(this,a),s=o.on;s!==n&&(r=(n=s).copy()).on(e,t),o.on=r}))},attr:function(e,t){var n=z(e),r="transform"===n?e3:tk;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,i,a;return function(){var o,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l))}}:function(e,t,n){var r,i,a;return function(){var o,s,l=n(this);return null==l?void this.removeAttribute(e):(o=this.getAttribute(e))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l))}})(n,r,e4(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}:function(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=z(e);return this.tween(n,(r.local?function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t){this.setAttributeNS(e.space,e.local,i.call(this,t))}),n}return i._value=t,i}:function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t){this.setAttribute(e,i.call(this,t))}),n}return i._value=t,i})(r,t))},style:function(e,t,n){var r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,y,b,x,_,w,S,A="transform"==(e+="")?e2:tk;return null==t?this.styleTween(e,(r=e,function(){var e=G(this,r),t=(this.style.removeProperty(r),G(this,r));return e===t?null:e===i&&t===a?o:o=A(i=e,a=t)})).on("end.style."+e,tN(e)):"function"==typeof t?this.styleTween(e,(s=e,l=e4(this,"style."+e,t),function(){var e=G(this,s),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=G(this,s)),e===n?null:e===u&&n===c?d:(c=n,d=A(u=e,t))})).each((h=this._id,b="end."+(y="style."+(f=e)),function(){var e=eY(this,h),t=e.on,n=null==e.value[y]?v||(v=tN(f)):void 0;(t!==p||g!==n)&&(m=(p=t).copy()).on(b,g=n),e.on=m})):this.styleTween(e,(x=e,S=t+"",function(){var e=G(this,x);return e===S?null:e===_?w:w=A(_=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t){this.style.setProperty(e,a.call(this,t),n)}),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=e4(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=eK(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var i=eY(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}}i.tween=r}}:function(e,t,n){var r,i;if("function"!=typeof n)throw Error();return function(){var a=eY(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eJ(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eJ(this,e).delay=t}})(t,e)):eK(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eY(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eY(this,e).duration=t}})(t,e)):eK(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eY(this,e).ease=t}}(t,e)):eK(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eY(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each(function(){var n=eY(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===i&&a()})},[Symbol.iterator]:tU[Symbol.iterator]};var tz={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};el.prototype.interrupt=function(e){return this.each(function(){eq(this,e)})},el.prototype.transition=function(e){var t,n;e instanceof tO?(t=e._id,e=e._name):(t=++tF,(n=tz).time=eN(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)(o=s[u])&&eX(o,e,t,u,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(o,t));return new tO(r,this._parents,e,t)};let tH=e=>()=>e;function tG(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function tV(e,t,n){this.k=e,this.x=t,this.y=n}tV.prototype={constructor:tV,scale:function(e){return 1===e?this:new tV(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tV(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tj=new tV(1,0,0);function tW(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tj;return e.__zoom}function tX(e){e.stopImmediatePropagation()}function tJ(e){e.preventDefault(),e.stopImmediatePropagation()}function tY(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tK(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tq(){return this.__zoom||tj}function tQ(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function t$(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function t0(){var e,t,n,r=tY,i=tK,a=t$,o=tQ,s=tZ,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=eM,h=b("start","zoom","end"),f=0,p=10;function m(e){e.property("__zoom",tq).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",M).filter(s).on("touchstart.zoom",E).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new tV(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new tV(e.k,r,i)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,r){e.on("start.zoom",function(){_(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,a=_(this,e).event(r),o=i.apply(this,e),s=null==n?y(o):"function"==typeof n?n.apply(this,e):n,l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=this.__zoom,c="function"==typeof t?t.apply(this,e):t,h=d(u.invert(s).concat(l/u.k),c.invert(s).concat(l/c.k));return function(e){if(1===e)e=c;else{var t=h(e),n=l/t[2];e=new tV(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}})}function _(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var n=_(this,t).event(e),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,o.apply(this,arguments)))),c=ec(e);if(n.wheel)(n.mouse[0][0]!==c[0]||n.mouse[0][1]!==c[1])&&(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],eq(this),n.start()}tJ(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",a(v(g(i,s),n.mouse[0],n.mouse[1]),n.extent,u))}}function A(e,...t){if(!n&&r.apply(this,arguments)){var i=e.currentTarget,o=_(this,t,!0).event(e),s=eu(e.view).on("mousemove.zoom",function(e){if(tJ(e),!o.moved){var t=e.clientX-c,n=e.clientY-d;o.moved=t*t+n*n>f}o.event(e).zoom("mouse",a(v(o.that.__zoom,o.mouse[0]=ec(e,i),o.mouse[1]),o.extent,u))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),eg(e.view,o.moved),tJ(e),o.event(e).end()},!0),l=ec(e,i),c=e.clientX,d=e.clientY;em(e.view),tX(e),o.mouse=[l,this.__zoom.invert(l)],eq(this),o.start()}}function M(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,o=ec(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(o),l=n.k*(e.shiftKey?.5:2),d=a(v(g(n,l),o,s),i.apply(this,t),u);tJ(e),c>0?eu(this).transition().duration(c).call(x,d,o,e):eu(this).call(m.transform,d,o,e)}}function E(n,...i){if(r.apply(this,arguments)){var a,o,s,l,u=n.touches,c=u.length,d=_(this,i,n.changedTouches.length===c).event(n);for(tX(n),o=0;o<c;++o)l=[l=ec(s=u[o],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,a=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),eq(this),d.start())}}function C(e,...t){if(this.__zooming){var n,r,i,o,s=_(this,t).event(e),l=e.changedTouches,c=l.length;for(tJ(e),n=0;n<c;++n)i=ec(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var d=s.touch0[0],h=s.touch0[1],f=s.touch1[0],p=s.touch1[1],m=(m=f[0]-d[0])*m+(m=f[1]-d[1])*m,y=(y=p[0]-h[0])*y+(y=p[1]-h[1])*y;r=g(r,Math.sqrt(m/y)),i=[(d[0]+f[0])/2,(d[1]+f[1])/2],o=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(v(r,i,o),s.extent,u))}}function T(e,...r){if(this.__zooming){var i,a,o=_(this,r).event(e),s=e.changedTouches,l=s.length;for(tX(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),i=0;i<l;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=ec(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<p)){var u=eu(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",tq),e!==i?x(e,t,n,r):i.interrupt().each(function(){_(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=i.apply(this,arguments),r=this.__zoom,o=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(o),l="function"==typeof t?t.apply(this,arguments):t;return a(v(g(r,l),o,s),e,u)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),u)},null,r)},m.translateTo=function(e,t,n,r,o){m.transform(e,function(){var e=i.apply(this,arguments),o=this.__zoom,s=null==r?y(e):"function"==typeof r?r.apply(this,arguments):r;return a(tj.translate(s[0],s[1]).scale(o.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,u)},r,o)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=eu(this.that).datum();h.call(e,this.that,new tG(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:tH(+e),m):o},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:tH(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:tH(!!e),m):s},m.extent=function(e){return arguments.length?(i="function"==typeof e?e:tH([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],m):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},m.constrain=function(e){return arguments.length?(a=e,m):a},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(f=(e*=1)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}tW.prototype=tV.prototype;let t1={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},t2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],t3=["Enter"," ","Escape"];(r=d||(d={})).Strict="strict",r.Loose="loose",(i=h||(h={})).Free="free",i.Vertical="vertical",i.Horizontal="horizontal",(a=f||(f={})).Partial="partial",a.Full="full";let t4={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};(o=p||(p={})).Bezier="default",o.Straight="straight",o.Step="step",o.SmoothStep="smoothstep",o.SimpleBezier="simplebezier",(s=m||(m={})).Arrow="arrow",s.ArrowClosed="arrowclosed",(l=g||(g={})).Left="left",l.Top="top",l.Right="right",l.Bottom="bottom";let t5={[g.Left]:g.Right,[g.Right]:g.Left,[g.Top]:g.Bottom,[g.Bottom]:g.Top};function t6(e){return null===e?null:e?"valid":"invalid"}let t9=e=>"id"in e&&"source"in e&&"target"in e,t8=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),t7=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ne=(e,t=[0,0])=>{let{width:n,height:r}=nP(e),i=e.origin??t,a=n*i[0],o=r*i[1];return{x:e.position.x-a,y:e.position.y-o}},nt=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>0===e.length?{x:0,y:0,width:0,height:0}:ng(e.reduce((e,n)=>{let r="string"==typeof n,i=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(i=r?t.nodeLookup.get(n):t7(n)?n:t.nodeLookup.get(n.id)),np(e,i?ny(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),nn=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){let t=ny(e);n=np(n,t)}}),ng(n)},nr=(e,t,[n,r,i]=[0,0,1],a=!1,o=!1)=>{let s={...nM(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(o&&!n||r)continue;let i=e.width??t.width??t.initialWidth??null,u=e.height??t.height??t.initialHeight??null,c=nx(s,nv(t)),d=(i??0)*(u??0),h=a&&c>0;(!t.internals.handleBounds||h||c>=d||t.dragging)&&l.push(t)}return l},ni=(e,t)=>{let n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))};function na(e,t){let n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden)&&(!r||r.has(e.id))&&n.set(e.id,e)}),n}async function no({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:a},o){if(0===e.size)return Promise.resolve(!1);let s=nC(nn(e),t,n,o?.minZoom??i,o?.maxZoom??a,o?.padding??.1);return await r.setViewport(s,{duration:o?.duration}),Promise.resolve(!0)}function ns({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:a}){let o=n.get(e),s=o.parentId?n.get(o.parentId):void 0,{x:l,y:u}=s?s.internals.positionAbsolute:{x:0,y:0},c=o.origin??r,d=i;if("parent"!==o.extent||o.expandParent)s&&nR(o.extent)&&(d=[[o.extent[0][0]+l,o.extent[0][1]+u],[o.extent[1][0]+l,o.extent[1][1]+u]]);else if(s){let e=s.measured.width,t=s.measured.height;e&&t&&(d=[[l,u],[l+e,u+t]])}else a?.("005",t1.error005());let h=nR(d)?nc(t,d,o.measured):t;return(void 0===o.measured.width||void 0===o.measured.height)&&a?.("015",t1.error015()),{position:{x:h.x-l+(o.measured.width??0)*c[0],y:h.y-u+(o.measured.height??0)*c[1]},positionAbsolute:h}}async function nl({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){let a=new Set(e.map(e=>e.id)),o=[];for(let e of n){if(!1===e.deletable)continue;let t=a.has(e.id),n=!t&&e.parentId&&o.find(t=>t.id===e.parentId);(t||n)&&o.push(e)}let s=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),u=ni(o,l);for(let e of l)s.has(e.id)&&!u.find(t=>t.id===e.id)&&u.push(e);if(!i)return{edges:u,nodes:o};let c=await i({nodes:o,edges:u});return"boolean"==typeof c?c?{edges:u,nodes:o}:{edges:[],nodes:[]}:c}let nu=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),nc=(e={x:0,y:0},t,n)=>({x:nu(e.x,t[0][0],t[1][0]-(n?.width??0)),y:nu(e.y,t[0][1],t[1][1]-(n?.height??0))});function nd(e,t,n){let{width:r,height:i}=nP(n),{x:a,y:o}=n.internals.positionAbsolute;return nc(e,[[a,o],[a+r,o+i]],t)}let nh=(e,t,n)=>e<t?nu(Math.abs(e-t),1,t)/t:e>n?-nu(Math.abs(e-n),1,t)/t:0,nf=(e,t,n=15,r=40)=>[nh(e.x,r,t.width-r)*n,nh(e.y,r,t.height-r)*n],np=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),nm=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ng=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),nv=(e,t=[0,0])=>{let{x:n,y:r}=t7(e)?e.internals.positionAbsolute:ne(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ny=(e,t=[0,0])=>{let{x:n,y:r}=t7(e)?e.internals.positionAbsolute:ne(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},nb=(e,t)=>ng(np(nm(e),nm(t))),nx=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),n_=e=>nw(e.width)&&nw(e.height)&&nw(e.x)&&nw(e.y),nw=e=>!isNaN(e)&&isFinite(e),nS=(e,t)=>{},nA=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),nM=({x:e,y:t},[n,r,i],a=!1,o=[1,1])=>{let s={x:(e-n)/i,y:(t-r)/i};return a?nA(s,o):s},nE=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),nC=(e,t,n,r,i,a)=>{let o=nu(Math.min(t/(e.width*(1+a)),n/(e.height*(1+a))),r,i),s=e.x+e.width/2;return{x:t/2-s*o,y:n/2-(e.y+e.height/2)*o,zoom:o}},nT=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function nR(e){return void 0!==e&&"parent"!==e}function nP(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function nI(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function nB(e,t={width:0,height:0},n,r,i){let a={...e},o=r.get(n);if(o){let e=o.origin||i;a.x+=o.internals.positionAbsolute.x-(t.width??0)*e[0],a.y+=o.internals.positionAbsolute.y-(t.height??0)*e[1]}return a}function nL(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function nk(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){let{x:a,y:o}=nz(e),s=nM({x:a-(i?.left??0),y:o-(i?.top??0)},r),{x:l,y:u}=n?nA(s,t):s;return{xSnapped:l,ySnapped:u,...s}}let nD=e=>({width:e.offsetWidth,height:e.offsetHeight}),nN=e=>e?.getRootNode?.()||window?.document,nF=["INPUT","SELECT","TEXTAREA"];function nO(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(nF.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let nU=e=>"clientX"in e,nz=(e,t)=>{let n=nU(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},nH=(e,t,n,r,i)=>{let a=t.querySelectorAll(`.${e}`);return a&&a.length?Array.from(a).map(t=>{let a=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:i,position:t.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...nD(t)}}):null};function nG({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:o,targetControlY:s}){let l=.125*e+.375*i+.375*o+.125*n,u=.125*t+.375*a+.375*s+.125*r,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function nV(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nj({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case g.Left:return[t-nV(t-r,a),n];case g.Right:return[t+nV(r-t,a),n];case g.Top:return[t,n-nV(n-i,a)];case g.Bottom:return[t,n+nV(i-n,a)]}}function nW({sourceX:e,sourceY:t,sourcePosition:n=g.Bottom,targetX:r,targetY:i,targetPosition:a=g.Top,curvature:o=.25}){let[s,l]=nj({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[u,c]=nj({pos:a,x1:r,y1:i,x2:e,y2:t,c:o}),[d,h,f,p]=nG({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${s},${l} ${u},${c} ${r},${i}`,d,h,f,p]}function nX({sourceX:e,sourceY:t,targetX:n,targetY:r}){let i=Math.abs(n-e)/2,a=Math.abs(r-t)/2;return[n<e?n+i:n-i,r<t?r+a:r-a,i,a]}function nJ({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;let a=n||t.selected||e.selected,o=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?o:0)}function nY({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){let a=np(ny(e),ny(t));return a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1),nx({x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]},ng(a))>0}let nK=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,nq=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),nQ=(e,t)=>{let n;return e.source&&e.target?nq(n=t9(e)?{...e}:{...e,id:nK(e)},t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n)):(nS("006",t1.error006()),t)};function nZ({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[i,a,o,s]=nX({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,o,s]}let n$={[g.Left]:{x:-1,y:0},[g.Right]:{x:1,y:0},[g.Top]:{x:0,y:-1},[g.Bottom]:{x:0,y:1}},n0=({source:e,sourcePosition:t=g.Bottom,target:n})=>t===g.Left||t===g.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},n1=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function n2({sourceX:e,sourceY:t,sourcePosition:n=g.Bottom,targetX:r,targetY:i,targetPosition:a=g.Top,borderRadius:o=5,centerX:s,centerY:l,offset:u=20}){let[c,d,h,f,p]=function({source:e,sourcePosition:t=g.Bottom,target:n,targetPosition:r=g.Top,center:i,offset:a}){let o,s;let l=n$[t],u=n$[r],c={x:e.x+l.x*a,y:e.y+l.y*a},d={x:n.x+u.x*a,y:n.y+u.y*a},h=n0({source:c,sourcePosition:t,target:d}),f=0!==h.x?"x":"y",p=h[f],m=[],v={x:0,y:0},y={x:0,y:0},[b,x,_,w]=nX({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[f]*u[f]==-1){o=i.x??b,s=i.y??x;let e=[{x:o,y:c.y},{x:o,y:d.y}],t=[{x:c.x,y:s},{x:d.x,y:s}];m=l[f]===p?"x"===f?e:t:"x"===f?t:e}else{let i=[{x:c.x,y:d.y}],h=[{x:d.x,y:c.y}];if(m="x"===f?l.x===p?h:i:l.y===p?i:h,t===r){let t=Math.abs(e[f]-n[f]);if(t<=a){let r=Math.min(a-1,a-t);l[f]===p?v[f]=(c[f]>e[f]?-1:1)*r:y[f]=(d[f]>n[f]?-1:1)*r}}if(t!==r){let e="x"===f?"y":"x",t=l[f]===u[e],n=c[e]>d[e],r=c[e]<d[e];(1===l[f]&&(!t&&n||t&&r)||1!==l[f]&&(!t&&r||t&&n))&&(m="x"===f?i:h)}let g={x:c.x+v.x,y:c.y+v.y},b={x:d.x+y.x,y:d.y+y.y};Math.max(Math.abs(g.x-m[0].x),Math.abs(b.x-m[0].x))>=Math.max(Math.abs(g.y-m[0].y),Math.abs(b.y-m[0].y))?(o=(g.x+b.x)/2,s=m[0].y):(o=m[0].x,s=(g.y+b.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...m,{x:d.x+y.x,y:d.y+y.y},n],o,s,_,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:s,y:l},offset:u});return[c.reduce((e,t,n)=>{let r="";return e+(n>0&&n<c.length-1?function(e,t,n,r){let i=Math.min(n1(e,t)/2,n1(t,n)/2,r),{x:a,y:o}=t;if(e.x===a&&a===n.x||e.y===o&&o===n.y)return`L${a} ${o}`;if(e.y===o){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+i*t},${o}Q ${a},${o} ${a},${o+i*r}`}let s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${o+i*l}Q ${a},${o} ${a+i*s},${o}`}(c[n-1],t,c[n+1],o):`${0===n?"M":"L"}${t.x} ${t.y}`)},""),d,h,f,p]}function n3(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function n4(e){let{sourceNode:t,targetNode:n}=e;if(!n3(t)||!n3(n))return null;let r=t.internals.handleBounds||n5(t.handles),i=n.internals.handleBounds||n5(n.handles),a=n9(r?.source??[],e.sourceHandle),o=n9(e.connectionMode===d.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!a||!o)return e.onError?.("008",t1.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let s=a?.position||g.Bottom,l=o?.position||g.Top,u=n6(t,a,s),c=n6(n,o,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:s,targetPosition:l}}function n5(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function n6(e,t,n=g.Left,r=!1){let i=(t?.x??0)+e.internals.positionAbsolute.x,a=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:s}=t??nP(e);if(r)return{x:i+o/2,y:a+s/2};switch(t?.position??n){case g.Top:return{x:i+o/2,y:a};case g.Right:return{x:i+o,y:a+s/2};case g.Bottom:return{x:i+o/2,y:a+s};case g.Left:return{x:i,y:a+s/2}}}function n9(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function n8(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}function n7(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){let a=new Set;return e.reduce((e,o)=>([o.markerStart||r,o.markerEnd||i].forEach(r=>{if(r&&"object"==typeof r){let i=n8(r,t);a.has(i)||(e.push({id:i,color:r.color||n,...r}),a.add(i))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}let re={nodeOrigin:[0,0],nodeExtent:t2,elevateNodesOnSelect:!0,defaults:{}},rt={...re,checkEquality:!0};function rn(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function rr(e,t,n){let r=rn(re,n);for(let n of e.values())if(n.parentId)ra(n,e,t,r);else{let e=nc(ne(n,r.nodeOrigin),nR(n.extent)?n.extent:r.nodeExtent,nP(n));n.internals.positionAbsolute=e}}function ri(e,t,n,r){let i=rn(rt,r),a=new Map(t),o=1e3*!!i?.elevateNodesOnSelect;for(let s of(t.clear(),n.clear(),e)){let e=a.get(s.id);if(i.checkEquality&&s===e?.internals.userNode)t.set(s.id,e);else{let n=nc(ne(s,i.nodeOrigin),nR(s.extent)?s.extent:i.nodeExtent,nP(s));e={...i.defaults,...s,measured:{width:s.measured?.width,height:s.measured?.height},internals:{positionAbsolute:n,handleBounds:s.measured?e?.internals.handleBounds:void 0,z:ro(s,o),userNode:s}},t.set(s.id,e)}s.parentId&&ra(e,t,n,r)}}function ra(e,t,n,r){let{elevateNodesOnSelect:i,nodeOrigin:a,nodeExtent:o}=rn(re,r),s=e.parentId,l=t.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);let{x:u,y:c,z:d}=function(e,t,n,r,i){let{x:a,y:o}=t.internals.positionAbsolute,s=nP(e),l=ne(e,n),u=nR(e.extent)?nc(l,e.extent,s):l,c=nc({x:a+u.x,y:o+u.y},r,s);"parent"===e.extent&&(c=nd(c,s,t));let d=ro(e,i),h=t.internals.z??0;return{x:c.x,y:c.y,z:h>d?h:d}}(e,l,a,o,1e3*!!i),{positionAbsolute:h}=e.internals,f=u!==h.x||c!==h.y;(f||d!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:f?{x:u,y:c}:h,z:d}})}function ro(e,t){return(nw(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function rs(e,t,n,r=[0,0]){let i=[],a=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=nb(a.get(n.parentId)?.expandedRect??nv(e),n.rect);a.set(n.parentId,{expandedRect:r,parent:e})}return a.size>0&&a.forEach(({expandedRect:t,parent:a},o)=>{let s=a.internals.positionAbsolute,l=nP(a),u=a.origin??r,c=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,d=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),f=Math.max(l.height,Math.round(t.height)),p=(h-l.width)*u[0],m=(f-l.height)*u[1];(c>0||d>0||p||m)&&(i.push({id:o,type:"position",position:{x:a.position.x-c+p,y:a.position.y-d+m}}),n.get(o)?.forEach(t=>{e.some(e=>e.id===t.id)||i.push({id:t.id,type:"position",position:{x:t.position.x+c,y:t.position.y+d}})})),(l.width<t.width||l.height<t.height||c||d)&&i.push({id:o,type:"dimensions",setAttributes:!0,dimensions:{width:h+(c?u[0]*c-p:0),height:f+(d?u[1]*d-m:0)}})}),i}function rl(e,t,n,r,i,a){let o=r?.querySelector(".xyflow__viewport"),s=!1;if(!o)return{changes:[],updatedInternals:s};let l=[],u=window.getComputedStyle(o),{m22:c}=new window.DOMMatrixReadOnly(u.transform),d=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),s=!0;continue}let o=nD(r.nodeElement),u=e.measured.width!==o.width||e.measured.height!==o.height;if(o.width&&o.height&&(u||!e.internals.handleBounds||r.force)){let h=r.nodeElement.getBoundingClientRect(),f=nR(e.extent)?e.extent:a,{positionAbsolute:p}=e.internals;e.parentId&&"parent"===e.extent?p=nd(p,o,t.get(e.parentId)):f&&(p=nc(p,f,o));let m={...e,measured:o,internals:{...e.internals,positionAbsolute:p,handleBounds:{source:nH("source",r.nodeElement,h,c,e.id),target:nH("target",r.nodeElement,h,c,e.id)}}};t.set(e.id,m),e.parentId&&ra(m,t,n,{nodeOrigin:i}),s=!0,u&&(l.push({id:e.id,type:"dimensions",dimensions:o}),e.expandParent&&e.parentId&&d.push({id:e.id,parentId:e.parentId,rect:nv(m,i)}))}}if(d.length>0){let e=rs(d,t,n,i);l.push(...e)}return{changes:l,updatedInternals:s}}async function ru({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,a]],r);return Promise.resolve(!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]))}function rc(e,t,n,r,i,a){let o=i,s=r.get(o)||new Map;r.set(o,s.set(n,t)),o=`${i}-${e}`;let l=r.get(o)||new Map;if(r.set(o,l.set(n,t)),a){o=`${i}-${e}-${a}`;let s=r.get(o)||new Map;r.set(o,s.set(n,t))}}function rd(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:i,sourceHandle:a=null,targetHandle:o=null}=r,s={edgeId:r.id,source:n,target:i,sourceHandle:a,targetHandle:o},l=`${n}-${a}--${i}-${o}`;rc("source",s,`${i}-${o}--${n}-${a}`,e,n,a),rc("target",s,l,e,i,o),t.set(r.id,r)}}function rh(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)break;r=r?.parentElement}while(r);return!1}function rf({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let i=[];for(let[e,a]of t){let t=n.get(e)?.internals.userNode;t&&i.push({...t,position:a.position,dragging:r})}if(!e)return[i[0],i];let a=n.get(e)?.internals.userNode;return[a?{...a,position:t.get(e)?.position||a.position,dragging:r}:i[0],i]}function rp({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let a={x:null,y:null},o=0,s=new Map,l=!1,u={x:0,y:0},c=null,d=!1,h=null,f=!1;return{update:function({noDragClassName:p,handleSelector:m,domNode:g,isSelectable:v,nodeId:y,nodeClickDistance:b=0}){function x({x:e,y:n},i){let{nodeLookup:o,nodeExtent:l,snapGrid:u,snapToGrid:c,nodeOrigin:d,onNodeDrag:h,onSelectionDrag:f,onError:p,updateNodePositions:m}=t();a={x:e,y:n};let g=!1,v={x:0,y:0,x2:0,y2:0};for(let[t,r]of(s.size>1&&l&&(v=nm(nn(s))),s)){if(!o.has(t))continue;let i={x:e-r.distance.x,y:n-r.distance.y};c&&(i=nA(i,u));let a=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(s.size>1&&l&&!r.extent){let{positionAbsolute:e}=r.internals,t=e.x-v.x+l[0][0],n=e.x+r.measured.width-v.x2+l[1][0];a=[[t,e.y-v.y+l[0][1]],[n,e.y+r.measured.height-v.y2+l[1][1]]]}let{position:h,positionAbsolute:f}=ns({nodeId:t,nextPosition:i,nodeLookup:o,nodeExtent:a,nodeOrigin:d,onError:p});g=g||r.position.x!==h.x||r.position.y!==h.y,r.position=h,r.internals.positionAbsolute=f}if(g&&(m(s,!0),i&&(r||h||!y&&f))){let[e,t]=rf({nodeId:y,dragItems:s,nodeLookup:o});r?.(i,s,e,t),h?.(i,e,t),y||f?.(i,t)}}async function _(){if(!c)return;let{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:i}=t();if(!i){l=!1,cancelAnimationFrame(o);return}let[s,d]=nf(u,c,r);(0!==s||0!==d)&&(a.x=(a.x??0)-s/e[2],a.y=(a.y??0)-d/e[2],await n({x:s,y:d})&&x(a,null)),o=requestAnimationFrame(_)}function w(r){let{nodeLookup:i,multiSelectionActive:o,nodesDraggable:l,transform:u,snapGrid:h,snapToGrid:f,selectNodesOnDrag:p,onNodeDragStart:m,onSelectionDragStart:g,unselectNodesAndEdges:b}=t();d=!0,p&&v||o||!y||i.get(y)?.selected||b(),v&&p&&y&&e?.(y);let x=nk(r.sourceEvent,{transform:u,snapGrid:h,snapToGrid:f,containerBounds:c});if(a=x,(s=function(e,t,n,r){let i=new Map;for(let[a,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!function e(t,n){if(!t.parentId)return!1;let r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(o,e))&&(o.draggable||t&&void 0===o.draggable)){let t=e.get(a);t&&i.set(a,{id:a,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return i}(i,l,x,y)).size>0&&(n||m||!y&&g)){let[e,t]=rf({nodeId:y,dragItems:s,nodeLookup:i});n?.(r.sourceEvent,s,e,t),m?.(r.sourceEvent,e,t),y||g?.(r.sourceEvent,t)}}h=eu(g);let S=eS().clickDistance(b).on("start",e=>{let{domNode:n,nodeDragThreshold:r,transform:i,snapGrid:o,snapToGrid:s}=t();c=n?.getBoundingClientRect()||null,f=!1,0===r&&w(e),a=nk(e.sourceEvent,{transform:i,snapGrid:o,snapToGrid:s,containerBounds:c}),u=nz(e.sourceEvent,c)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:i,snapToGrid:o,nodeDragThreshold:h,nodeLookup:p}=t(),m=nk(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:o,containerBounds:c});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||y&&!p.has(y))&&(f=!0),!f){if(!l&&n&&d&&(l=!0,_()),!d){let t=m.xSnapped-(a.x??0),n=m.ySnapped-(a.y??0);Math.sqrt(t*t+n*n)>h&&w(e)}(a.x!==m.xSnapped||a.y!==m.ySnapped)&&s&&d&&(u=nz(e.sourceEvent,c),x(m,e.sourceEvent))}}).on("end",e=>{if(d&&!f&&(l=!1,d=!1,cancelAnimationFrame(o),s.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:a,onSelectionDragStop:o}=t();if(r(s,!1),i||a||!y&&o){let[t,r]=rf({nodeId:y,dragItems:s,nodeLookup:n,dragging:!1});i?.(e.sourceEvent,s,t,r),a?.(e.sourceEvent,t,r),y||o?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!p||!rh(t,`.${p}`,g))&&(!m||rh(t,m,g))});h.call(S)},destroy:function(){h?.on(".drag",null)}}}function rm(e,t,n,r,i,a=!1){let o=r.get(e);if(!o)return null;let s="strict"===i?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],l=(n?s?.find(e=>e.id===n):s?.[0])??null;return l&&a?{...l,...n6(o,l,l.position,!0)}:l}function rg(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}let rv=()=>!0;function ry(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:a,doc:o,lib:s,flowId:l,isValidConnection:u=rv,nodeLookup:c}){let h="target"===a,f=t?o.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:p,y:m}=nz(e),g=o.elementFromPoint(p,m),v=g?.classList.contains(`${s}-flow__handle`)?g:f,y={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){let e=rg(void 0,v),t=v.getAttribute("data-nodeid"),a=v.getAttribute("data-handleid"),o=v.classList.contains("connectable"),s=v.classList.contains("connectableend");if(!t||!e)return y;let l={source:h?t:r,sourceHandle:h?a:i,target:h?r:t,targetHandle:h?i:a};y.connection=l;let f=o&&s&&(n===d.Strict?h&&"source"===e||!h&&"target"===e:t!==r||a!==i);y.isValid=f&&u(l),y.toHandle=rm(t,e,a,c,n,!1)}return y}let rb={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:a,isTarget:o,domNode:s,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:h,cancelConnection:f,onConnectStart:p,onConnect:m,onConnectEnd:v,isValidConnection:y=rv,onReconnectEnd:b,updateConnection:x,getTransform:_,getFromHandle:w,autoPanSpeed:S}){let A;let M=nN(e.target),E=0,{x:C,y:T}=nz(e),R=rg(a,M?.elementFromPoint(C,T)),P=s?.getBoundingClientRect();if(!P||!R)return;let I=rm(i,R,r,l,t);if(!I)return;let B=nz(e,P),L=!1,k=null,D=!1,N=null,F={...I,nodeId:i,type:R,position:I.position},O=l.get(i),U={inProgress:!0,isValid:null,from:n6(O,F,g.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:O,to:B,toHandle:null,toPosition:t5[F.position],toNode:null};x(U);let z=U;function H(e){var a,s;let f;if(!w()||!F){G(e);return}let p=_();A=function(e,t,n,r){let i=[],a=1/0;for(let o of function(e,t,n){let r=[],i={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())nx(i,nv(e))>0&&r.push(e);return r}(e,n,t+250))for(let n of[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]]){if(r.nodeId===n.nodeId&&r.type===n.type&&r.id===n.id)continue;let{x:s,y:l}=n6(o,n,n.position,!0),u=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(l-e.y,2));!(u>t)&&(u<a?(i=[{...n,x:s,y:l}],a=u):u===a&&i.push({...n,x:s,y:l}))}if(!i.length)return null;if(i.length>1){let e="source"===r.type?"target":"source";return i.find(t=>t.type===e)??i[0]}return i[0]}(nM(B=nz(e,P),p,!1,[1,1]),n,l,F),L||(function e(){if(!c||!P)return;let[t,n]=nf(B,P,S);h({x:t,y:n}),E=requestAnimationFrame(e)}(),L=!0);let m=ry(e,{handle:A,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:y,doc:M,lib:u,flowId:d,nodeLookup:l});N=m.handleDomNode,k=m.connection,a=!!A,s=m.isValid,f=null,s?f=!0:a&&!s&&(f=!1),D=f;let g={...z,isValid:D,to:A&&D?nE({x:A.x,y:A.y},p):B,toHandle:m.toHandle,toPosition:D&&m.toHandle?m.toHandle.position:t5[F.position],toNode:m.toHandle?l.get(m.toHandle.nodeId):null};(!D||!A||!z.toHandle||!g.toHandle||z.toHandle.type!==g.toHandle.type||z.toHandle.nodeId!==g.toHandle.nodeId||z.toHandle.id!==g.toHandle.id||z.to.x!==g.to.x||z.to.y!==g.to.y)&&(x(g),z=g)}function G(e){(A||N)&&k&&D&&m?.(k);let{inProgress:t,...n}=z,r={...n,toPosition:z.toHandle?z.toPosition:null};v?.(e,r),a&&b?.(e,r),f(),cancelAnimationFrame(E),L=!1,D=!1,k=null,N=null,M.removeEventListener("mousemove",H),M.removeEventListener("mouseup",G),M.removeEventListener("touchmove",H),M.removeEventListener("touchend",G)}p?.(e,{nodeId:i,handleId:r,handleType:R}),M.addEventListener("mousemove",H),M.addEventListener("mouseup",G),M.addEventListener("touchmove",H),M.addEventListener("touchend",G)},isValid:ry};function rx({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let i=eu(e);return{update:function({translateExtent:e,width:a,height:o,zoomStep:s=10,pannable:l=!0,zoomable:u=!0,inversePan:c=!1}){let d=[0,0],h=t0().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?i=>{let s=n();if("mousemove"!==i.sourceEvent.type&&"touchmove"!==i.sourceEvent.type||!t)return;let l=[i.sourceEvent.clientX??i.sourceEvent.touches[0].clientX,i.sourceEvent.clientY??i.sourceEvent.touches[0].clientY],u=[l[0]-d[0],l[1]-d[1]];d=l;let h=r()*Math.max(s[2],Math.log(s[2]))*(c?-1:1),f={x:s[0]-u[0]*h,y:s[1]-u[1]*h};t.setViewportConstrained({x:f.x,y:f.y,zoom:s[2]},[[0,0],[a,o]],e)}:null).on("zoom.wheel",u?e=>{let r=n();if("wheel"!==e.sourceEvent.type||!t)return;let i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,a=r[2]*Math.pow(2,i);t.scaleTo(a)}:null);i.call(h,{})},destroy:function(){i.on("zoom",null)},pointer:ec}}let r_=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,rw=e=>({x:e.x,y:e.y,zoom:e.k}),rS=({x:e,y:t,zoom:n})=>tj.translate(e,t).scale(n),rA=(e,t)=>e.target.closest(`.${t}`),rM=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),rE=(e,t=0,n=()=>{})=>{let r="number"==typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},rC=e=>{let t=e.ctrlKey&&nT()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function rT({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:a,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:u}){let c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=t0().clickDistance(!nw(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),p=eu(e).call(f);b({x:a.x,y:a.y,zoom:nu(a.zoom,t,n)},[[0,0],[d.width,d.height]],i);let m=p.on("wheel.zoom"),g=p.on("dblclick.zoom");function v(e,t){return p?new Promise(n=>{f?.transform(rE(p,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)}function y(){f.on("zoom",null)}async function b(e,t,n){let r=rS(e),i=f?.constrain()(r,t,n);return i&&await v(i),new Promise(e=>e(i))}return f.wheelDelta(rC),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:i,panOnDrag:a,panOnScrollMode:d,panOnScrollSpeed:v,preventScrolling:b,zoomOnPinch:x,zoomOnScroll:_,zoomOnDoubleClick:w,zoomActivationKeyPressed:S,lib:A,onTransformChange:M}){r&&!c.isZoomingOrPanning&&y();let E=!i||S||r?function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){if(!t&&"wheel"===r.type&&!r.ctrlKey||rA(r,e))return null;r.preventDefault(),n.call(this,r,i)}}({noWheelClassName:e,preventScrolling:b,d3ZoomHandler:m}):function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:o,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(rA(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();let d=n.property("__zoom").k||1;if(c.ctrlKey&&o){let e=ec(c),t=d*Math.pow(2,rC(c));r.scaleTo(n,t,e,c);return}let f=1===c.deltaMode?20:1,p=i===h.Vertical?0:c.deltaX*f,m=i===h.Horizontal?0:c.deltaY*f;!nT()&&c.shiftKey&&i!==h.Vertical&&(p=c.deltaY*f,m=0),r.translateBy(n,-(p/d)*a,-(m/d)*a,{internal:!0});let g=rw(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s?.(c,g)),e.isPanScrolling&&(l?.(c,g),e.panScrollTimeout=setTimeout(()=>{u?.(c,g),e.isPanScrolling=!1},150))}}({zoomPanValues:c,noWheelClassName:e,d3Selection:p,d3Zoom:f,panOnScrollMode:d,panOnScrollSpeed:v,zoomOnPinch:x,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:l});if(p.on("wheel.zoom",E,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let i=rw(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:s});f.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return a=>{e.usedRightMouseButton=!!(n&&rM(t,e.mouseButton??0)),a.sourceEvent?.sync||r([a.transform.x,a.transform.y,a.transform.k]),i&&!a.sourceEvent?.internal&&i?.(a.sourceEvent,rw(a.transform))}}({zoomPanValues:c,panOnDrag:a,onPaneContextMenu:!!n,onPanZoom:o,onTransformChange:M});f.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:a}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&rM(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&a(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&r_(e.prevViewport,o.transform))){let t=rw(o.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,t)},150*!!n)}}}({zoomPanValues:c,panOnDrag:a,panOnScroll:i,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:u});f.on("end",r)}let C=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:o,noWheelClassName:s,noPanClassName:l,lib:u}){return c=>{let d=e||t,h=n&&c.ctrlKey;if(1===c.button&&"mousedown"===c.type&&(rA(c,`${u}-flow__node`)||rA(c,`${u}-flow__edge`)))return!0;if(!r&&!d&&!i&&!a&&!n||o||rA(c,s)&&"wheel"===c.type||rA(c,l)&&("wheel"!==c.type||i&&"wheel"===c.type&&!e)||!n&&c.ctrlKey&&"wheel"===c.type)return!1;if(!n&&"touchstart"===c.type&&c.touches?.length>1)return c.preventDefault(),!1;if(!d&&!i&&!h&&"wheel"===c.type||!r&&("mousedown"===c.type||"touchstart"===c.type)||Array.isArray(r)&&!r.includes(c.button)&&"mousedown"===c.type)return!1;let f=Array.isArray(r)&&r.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||"wheel"===c.type)&&f}}({zoomActivationKeyPressed:S,panOnDrag:a,zoomOnScroll:_,panOnScroll:i,zoomOnDoubleClick:w,zoomOnPinch:x,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:A});f.filter(C),w?p.on("dblclick.zoom",g):p.on("dblclick.zoom",null)},destroy:y,setViewport:async function e(e,t){let n=rS(e);return await v(n,t),new Promise(e=>e(n))},setViewportConstrained:b,getViewport:function(){let e=p?tW(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise(n=>{f?.scaleTo(rE(p,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise(n=>{f?.scaleBy(rE(p,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(p){let t=rS(e),n=p.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&f?.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){let t=!nw(e)||e<0?0:e;f?.clickDistance(t)}}}function rR(e,t){return Math.max(0,t-e)}function rP(e,t){return Math.max(0,e-t)}function rI(e,t,n){return Math.max(0,t-e,e-n)}(u=v||(v={})).Line="line",u.Handle="handle";let rB={width:0,height:0,x:0,y:0},rL={...rB,pointerX:0,pointerY:0,aspectRatio:1};function rk({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){let a=eu(e);return{update:function({controlPosition:e,boundaries:o,keepAspectRatio:s,onResizeStart:l,onResize:u,onResizeEnd:c,shouldResize:d}){let h,f,p,m,g={...rB},v={...rL},y=function(e){let t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:e.includes("left"),affectsY:e.includes("top")}}(e),b=null,x=[],_=eS().on("start",e=>{let{nodeLookup:r,transform:i,snapGrid:a,snapToGrid:o,nodeOrigin:s,paneDomNode:u}=n();if(!(h=r.get(t)))return;b=u?.getBoundingClientRect()??null;let{xSnapped:c,ySnapped:d}=nk(e.sourceEvent,{transform:i,snapGrid:a,snapToGrid:o,containerBounds:b});if(v={...g={width:h.measured.width??0,height:h.measured.height??0,x:h.position.x??0,y:h.position.y??0},pointerX:c,pointerY:d,aspectRatio:g.width/g.height},f=void 0,h.parentId&&("parent"===h.extent||h.expandParent)){var y;p=(f=r.get(h.parentId))&&"parent"===h.extent?[[0,0],[(y=f).measured.width,y.measured.height]]:void 0}for(let[e,n]of(x=[],m=void 0,r))if(n.parentId===t&&(x.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){let e=function(e,t,n){let r=t.position.x+e.position.x,i=t.position.y+e.position.y,a=e.measured.width??0,o=e.measured.height??0,s=n[0]*a,l=n[1]*o;return[[r-s,i-l],[r+a-s,i+o-l]]}(n,h,n.origin??s);m=m?[[Math.min(e[0][0],m[0][0]),Math.min(e[0][1],m[0][1])],[Math.max(e[1][0],m[1][0]),Math.max(e[1][1],m[1][1])]]:e}l?.(e,{...g})}).on("drag",e=>{let{transform:t,snapGrid:i,snapToGrid:a,nodeOrigin:l}=n(),c=nk(e.sourceEvent,{transform:t,snapGrid:i,snapToGrid:a,containerBounds:b}),_=[];if(!h)return;let{x:w,y:S,width:A,height:M}=g,E={},C=h.origin??l,{width:T,height:R,x:P,y:I}=function(e,t,n,r,i,a,o,s){let{affectsX:l,affectsY:u}=t,{isHorizontal:c,isVertical:d}=t,h=c&&d,{xSnapped:f,ySnapped:p}=n,{minWidth:m,maxWidth:g,minHeight:v,maxHeight:y}=r,{x:b,y:x,width:_,height:w,aspectRatio:S}=e,A=Math.floor(c?f-e.pointerX:0),M=Math.floor(d?p-e.pointerY:0),E=_+(l?-A:A),C=w+(u?-M:M),T=-a[0]*_,R=-a[1]*w,P=rI(E,m,g),I=rI(C,v,y);if(o){let e=0,t=0;l&&A<0?e=rR(b+A+T,o[0][0]):!l&&A>0&&(e=rP(b+E+T,o[1][0])),u&&M<0?t=rR(x+M+R,o[0][1]):!u&&M>0&&(t=rP(x+C+R,o[1][1])),P=Math.max(P,e),I=Math.max(I,t)}if(s){let e=0,t=0;l&&A>0?e=rP(b+A,s[0][0]):!l&&A<0&&(e=rR(b+E,s[1][0])),u&&M>0?t=rP(x+M,s[0][1]):!u&&M<0&&(t=rR(x+C,s[1][1])),P=Math.max(P,e),I=Math.max(I,t)}if(i){if(c){if(P=Math.max(P,rI(E/S,v,y)*S),o){let e=0;P=Math.max(P,(l||u)&&(!l||u||!h)?rR(x+R+(l?A:-A)/S,o[0][1])*S:rP(x+R+E/S,o[1][1])*S)}if(s){let e=0;P=Math.max(P,(l||u)&&(!l||u||!h)?rP(x+(l?A:-A)/S,s[0][1])*S:rR(x+E/S,s[1][1])*S)}}if(d){if(I=Math.max(I,rI(C*S,m,g)/S),o){let e=0;I=Math.max(I,(l||u)&&(!u||l||!h)?rR(b+(u?M:-M)*S+T,o[0][0])/S:rP(b+C*S+T,o[1][0])/S)}if(s){let e=0;I=Math.max(I,(l||u)&&(!u||l||!h)?rP(b+(u?M:-M)*S,s[0][0])/S:rR(b+C*S,s[1][0])/S)}}}if(M+=M<0?I:-I,A+=A<0?P:-P,i){if(h){var B,L,k,D;E>C*S?M=((B=l,L=u,B?!L:L)?-A:A)/S:A=((k=l,D=u,k?!D:D)?-M:M)*S}else c?(M=A/S,u=l):(A=M*S,l=u)}let N=l?b+A:b,F=u?x+M:x;return{width:_+(l?-A:A),height:w+(u?-M:M),x:a[0]*A*(l?-1:1)+N,y:a[1]*M*(u?-1:1)+F}}(v,y,c,o,s,C,p,m),B=T!==A,L=R!==M,k=P!==w&&B,D=I!==S&&L;if(!k&&!D&&!B&&!L)return;if((k||D||1===C[0]||1===C[1])&&(E.x=k?P:g.x,E.y=D?I:g.y,g.x=E.x,g.y=E.y,x.length>0)){let e=P-w,t=I-S;for(let n of x)n.position={x:n.position.x-e+C[0]*(T-A),y:n.position.y-t+C[1]*(R-M)},_.push(n)}if((B||L)&&(E.width=B?T:g.width,E.height=L?R:g.height,g.width=E.width,g.height=E.height),f&&h.expandParent){let e=C[0]*(E.width??0);E.x&&E.x<e&&(g.x=e,v.x=v.x-(E.x-e));let t=C[1]*(E.height??0);E.y&&E.y<t&&(g.y=t,v.y=v.y-(E.y-t))}let N=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:a}){let o=e-t,s=n-r,l=[o>0?1:o<0?-1:0,s>0?1:s<0?-1:0];return o&&i&&(l[0]=-1*l[0]),s&&a&&(l[1]=-1*l[1]),l}({width:g.width,prevWidth:A,height:g.height,prevHeight:M,affectsX:y.affectsX,affectsY:y.affectsY}),F={...g,direction:N};!1!==d?.(e,F)&&(u?.(e,F),r(E,_))}).on("end",e=>{c?.(e,{...g}),i?.()});a.call(_)},destroy:function(){a.on(".drag",null)}}}},4710:function(e,t,n){"use strict";n.d(t,{Ui:()=>el});var r,i,a,o,s,l,u,c,d,h,f,p,m,g,v,y,b,x,_,w,S,A,M,E,C,T=n(5300);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}new T.FM8,new T.FM8;var B=function e(t,n,r){var i=this;I(this,e),P(this,"dot2",function(e,t){return i.x*e+i.y*t}),P(this,"dot3",function(e,t,n){return i.x*e+i.y*t+i.z*n}),this.x=t,this.y=n,this.z=r},L=[new B(1,1,0),new B(-1,1,0),new B(1,-1,0),new B(-1,-1,0),new B(1,0,1),new B(-1,0,1),new B(1,0,-1),new B(-1,0,-1),new B(0,1,1),new B(0,-1,1),new B(0,1,-1),new B(0,-1,-1)],k=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],D=Array(512),N=Array(512);function F(e){var t=function(e){if("number"==typeof e)e=Math.abs(e);else if("string"==typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%0x7fffffff}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%0x7fffffff;return t=e,e/0x7fffffff}}!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t,n=0;n<256;n++)t=1&n?k[n]^255&e:k[n]^e>>8&255,D[n]=D[n+256]=t,N[n]=N[n+256]=L[t%12]}(0),new function e(t){var n=this;I(this,e),P(this,"seed",0),P(this,"init",function(e){n.seed=e,n.value=F(e)}),P(this,"value",F(this.seed)),this.init(t)}(Math.random());var O=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function U(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:O,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001,l="velocity_"+t;if(void 0===e.__damp&&(e.__damp={}),void 0===e.__damp[l]&&(e.__damp[l]=0),Math.abs(e[t]-n)<=s)return e[t]=n,!1;var u=2/(r=Math.max(1e-4,r)),c=o(u*i),d=e[t]-n,h=n,f=a*r;d=Math.min(Math.max(d,-f),f),n=e[t]-d;var p=(e.__damp[l]+u*d)*i;e.__damp[l]=(e.__damp[l]-u*p)*c;var m=n+(d+p)*c;return h-e[t]>0==m>h&&(m=h,e.__damp[l]=(m-h)/i),e[t]=m,!0}var z=new T.Pa4,H=new T._fP,G=new T._fP,V=new T.yGw,j=new T.Pa4;function W(e,t,n,r,i,a,o,s){var l,u,c,d;return U(e,t,e[t]+(c=(l=n-e[t])-Math.floor(l/(u=2*Math.PI))*u,(d=Math.max(0,Math.min(u,c)))>Math.PI&&(d-=2*Math.PI),d),r,i,a,o,s)}var X=new T.FM8,J=new T.Pa4;function Y(e,t,n,r,i,l,u){return"number"==typeof t?J.setScalar(t):Array.isArray(t)?J.set(t[0],t[1],t[2]):J.copy(t),a=U(e,"x",J.x,n,r,i,l,u),o=U(e,"y",J.y,n,r,i,l,u),s=U(e,"z",J.z,n,r,i,l,u),a||o||s}var K=new T.Ltg,q=new T.USm,Q=new T.Ilk,Z=new T._fP,$=new T.Ltg,ee=new T.Ltg,et=new T.Ltg;function en(e,t,n,r,i,a,o){Array.isArray(t)?Z.set(t[0],t[1],t[2],t[3]):Z.copy(t);var s=e.dot(Z)>0?1:-1;return Z.x*=s,Z.y*=s,Z.z*=s,Z.w*=s,y=U(e,"x",Z.x,n,r,i,a,o),b=U(e,"y",Z.y,n,r,i,a,o),x=U(e,"z",Z.z,n,r,i,a,o),_=U(e,"w",Z.w,n,r,i,a,o),$.set(e.x,e.y,e.z,e.w).normalize(),ee.set(e.__damp.velocity_x,e.__damp.velocity_y,e.__damp.velocity_z,e.__damp.velocity_w),et.copy($).multiplyScalar(ee.dot($)/$.dot($)),e.__damp.velocity_x-=et.x,e.__damp.velocity_y-=et.y,e.__damp.velocity_z-=et.z,e.__damp.velocity_w-=et.w,e.set($.x,$.y,$.z,$.w),y||b||x||_}var er=new T.$V,ei=new T.yGw,ea=new T.Pa4,eo=new T._fP,es=new T.Pa4,el=Object.freeze({__proto__:null,rsqw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},exp:O,linear:function(e){return e},sine:{in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},quint:{in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},circ:{in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},quart:{in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},expo:{in:function(e){return 0===e?0:Math.pow(2,10*e-10)},out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},inOut:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}},damp:U,dampLookAt:function(e,t,n,r,i,a,o){"number"==typeof t?z.setScalar(t):Array.isArray(t)?z.set(t[0],t[1],t[2]):z.copy(t);var s=e.parent;(e.updateWorldMatrix(!0,!1),j.setFromMatrixPosition(e.matrixWorld),e&&e.isCamera||e&&e.isLight)?V.lookAt(j,z,e.up):V.lookAt(z,j,e.up),en(e.quaternion,G.setFromRotationMatrix(V),n,r,i,a,o),s&&(V.extractRotation(s.matrixWorld),H.setFromRotationMatrix(V),en(e.quaternion,G.copy(e.quaternion).premultiply(H.invert()),n,r,i,a,o))},dampAngle:W,damp2:function(e,t,n,a,o,s,l){return"number"==typeof t?X.setScalar(t):Array.isArray(t)?X.set(t[0],t[1]):X.copy(t),r=U(e,"x",X.x,n,a,o,s,l),i=U(e,"y",X.y,n,a,o,s,l),r||i},damp3:Y,damp4:function(e,t,n,r,i,a,o){return"number"==typeof t?K.setScalar(t):Array.isArray(t)?K.set(t[0],t[1],t[2],t[3]):K.copy(t),l=U(e,"x",K.x,n,r,i,a,o),u=U(e,"y",K.y,n,r,i,a,o),c=U(e,"z",K.z,n,r,i,a,o),d=U(e,"w",K.w,n,r,i,a,o),l||u||c||d},dampE:function(e,t,n,r,i,a,o){return Array.isArray(t)?q.set(t[0],t[1],t[2],t[3]):q.copy(t),h=W(e,"x",q.x,n,r,i,a,o),f=W(e,"y",q.y,n,r,i,a,o),p=W(e,"z",q.z,n,r,i,a,o),h||f||p},dampC:function(e,t,n,r,i,a,o){return t instanceof T.Ilk?Q.copy(t):Array.isArray(t)?Q.setRGB(t[0],t[1],t[2]):Q.set(t),m=U(e,"r",Q.r,n,r,i,a,o),g=U(e,"g",Q.g,n,r,i,a,o),v=U(e,"b",Q.b,n,r,i,a,o),m||g||v},dampQ:en,dampS:function(e,t,n,r,i,a,o){return Array.isArray(t)?er.set(t[0],t[1],t[2]):er.copy(t),w=U(e,"radius",er.radius,n,r,i,a,o),S=W(e,"phi",er.phi,n,r,i,a,o),A=W(e,"theta",er.theta,n,r,i,a,o),w||S||A},dampM:function(e,t,n,r,i,a,o){if(void 0===e.__damp&&(e.__damp={position:new T.Pa4,rotation:new T._fP,scale:new T.Pa4},e.decompose(e.__damp.position,e.__damp.rotation,e.__damp.scale)),Array.isArray(t))ei.set.apply(ei,function(e){if(Array.isArray(e))return R(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return R(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());else ei.copy(t);return ei.decompose(ea,eo,es),M=Y(e.__damp.position,ea,n,r,i,a,o),E=en(e.__damp.rotation,eo,n,r,i,a,o),C=Y(e.__damp.scale,es,n,r,i,a,o),e.compose(e.__damp.position,e.__damp.rotation,e.__damp.scale),M||E||C}});T.u9r},32:function(e,t,n){"use strict";var r,i,a=n(1653),o=n(5263),s=n(7061);function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),y=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var M=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}var T,R,P=Symbol.for("react.client.reference"),I=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=Object.assign;function L(e){if(void 0===T)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||"",R=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+T+e+R}var k=!1;function D(e,t){if(!e||k)return"";k=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var l=o.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do if(r--,i--,0>i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=r&&0<=i);break}}}finally{k=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?L(n):""}function N(e){try{var t="";do t+=function(e){switch(e.tag){case 26:case 27:case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 15:return e=D(e.type,!1);case 11:return e=D(e.type.render,!1);case 1:return e=D(e.type,!0);default:return""}}(e),e=e.return;while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function F(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function O(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function U(e){if(F(e)!==e)throw Error(l(188))}var z=Array.isArray,H=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},V=[],j=-1;function W(e){return{current:e}}function X(e){0>j||(e.current=V[j],V[j]=null,j--)}function J(e,t){V[++j]=e.current,e.current=t}var Y=W(null),K=W(null),q=W(null),Q=W(null);function Z(e,t){switch(J(q,t),J(K,e),J(Y,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?l6(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=l9(e=l6(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(Y),J(Y,t)}function $(){X(Y),X(K),X(q)}function ee(e){null!==e.memoizedState&&J(Q,e);var t=Y.current,n=l9(t,e.type);t!==n&&(J(K,e),J(Y,n))}function et(e){K.current===e&&(X(Y),X(K)),Q.current===e&&(X(Q),uN._currentValue=G)}var en=Object.prototype.hasOwnProperty,er=a.unstable_scheduleCallback,ei=a.unstable_cancelCallback,ea=a.unstable_shouldYield,eo=a.unstable_requestPaint,es=a.unstable_now,el=a.unstable_getCurrentPriorityLevel,eu=a.unstable_ImmediatePriority,ec=a.unstable_UserBlockingPriority,ed=a.unstable_NormalPriority,eh=a.unstable_LowPriority,ef=a.unstable_IdlePriority,ep=a.log,em=a.unstable_setDisableYieldValue,eg=null,ev=null;function ey(e){if("function"==typeof ep&&em(e),ev&&"function"==typeof ev.setStrictMode)try{ev.setStrictMode(eg,e)}catch(e){}}var eb=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(ex(e)/e_|0)|0},ex=Math.log,e_=Math.LN2,ew=128,eS=4194304;function eA(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function eM(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var s=0x7ffffff&n;return 0!==s?0!=(n=s&~i)?r=eA(n):0!=(a&=s)?r=eA(a):e||0!=(o=s&~o)&&(r=eA(o)):0!=(s=n&~i)?r=eA(s):0!==a?r=eA(a):e||0!=(o=n&~o)&&(r=eA(o)),0===r?0:0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||32===i&&0!=(4194176&o))?t:r}function eE(e,t){return 0==(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function eC(){var e=ew;return 0==(4194176&(ew<<=1))&&(ew=128),e}function eT(){var e=eS;return 0==(0x3c00000&(eS<<=1))&&(eS=4194304),e}function eR(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function eP(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function eI(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-eb(t);e.entangledLanes|=t,e.entanglements[r]=0x40000000|e.entanglements[r]|4194218&n}function eB(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-eb(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function eL(e){return 2<(e&=-e)?8<e?0!=(0x7ffffff&e)?32:0x10000000:8:2}function ek(){var e=H.p;return 0!==e?e:void 0===(e=window.event)?32:uQ(e.type)}var eD=Math.random().toString(36).slice(2),eN="__reactFiber$"+eD,eF="__reactProps$"+eD,eO="__reactContainer$"+eD,eU="__reactEvents$"+eD,ez="__reactListeners$"+eD,eH="__reactHandles$"+eD,eG="__reactResources$"+eD,eV="__reactMarker$"+eD;function ej(e){delete e[eN],delete e[eF],delete e[eU],delete e[ez],delete e[eH]}function eW(e){var t=e[eN];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eO]||n[eN]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ul(e);null!==e;){if(n=e[eN])return n;e=ul(e)}return t}n=(e=n).parentNode}return null}function eX(e){if(e=e[eN]||e[eO]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function eJ(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(l(33))}function eY(e){var t=e[eG];return t||(t=e[eG]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function eK(e){e[eV]=!0}var eq=new Set,eQ={};function eZ(e,t){e$(e,t),e$(e+"Capture",t)}function e$(e,t){for(eQ[e]=t,e=0;e<t.length;e++)eq.add(t[e])}var e0="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,e1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),e2={},e3={};function e4(e,t,n){if(en.call(e3,t)||!en.call(e2,t)&&(e1.test(t)?e3[t]=!0:(e2[t]=!0,!1))){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}}function e5(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function e6(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function e9(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function e8(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function e7(e){e._valueTracker||(e._valueTracker=function(e){var t=e8(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function te(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=e8(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function tt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var tn=/[\n"\\]/g;function tr(e){return e.replace(tn,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ti(e,t,n,r,i,a,o,s){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+e9(t)):e.value!==""+e9(t)&&(e.value=""+e9(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?to(e,o,e9(t)):null!=n?to(e,o,e9(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+e9(s):e.removeAttribute("name")}function ta(e,t,n,r,i,a,o,s){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=n){if(("submit"===a||"reset"===a)&&null==t)return;n=null!=n?""+e9(n):"",t=null!=t?""+e9(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o)}function to(e,t,n){"number"===t&&tt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ts(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(i=0,n=""+e9(n),t=null;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function tl(e,t,n){if(null!=t&&((t=""+e9(t))!==e.value&&(e.value=t),null==n)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=null!=n?""+e9(n):""}function tu(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(l(92));if(z(r)){if(1<r.length)throw Error(l(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=e9(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function tc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var td=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function th(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||td.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function tf(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(l(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&th(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&th(e,a,t[a])}function tp(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tv(e){return tg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ty=null;function tb(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var tx=null,t_=null;function tw(e){var t=eX(e);if(t&&(e=t.stateNode)){var n=e[eF]||null;switch(e=t.stateNode,t.type){case"input":if(ti(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+tr(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[eF]||null;if(!i)throw Error(l(90));ti(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&te(r)}break;case"textarea":tl(e,n.value,n.defaultValue);break;case"select":null!=(t=n.value)&&ts(e,!!n.multiple,t,!1)}}}var tS=!1;function tA(e,t,n){if(tS)return e(t,n);tS=!0;try{return e(t)}finally{if(tS=!1,(null!==tx||null!==t_)&&(s6(),tx&&(t=tx,e=t_,t_=tx=null,tw(t),e)))for(t=0;t<e.length;t++)tw(e[t])}}function tM(e,t){var n=e.stateNode;if(null===n)return null;var r=n[eF]||null;if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r="button"!==(e=e.type)&&"input"!==e&&"select"!==e&&"textarea"!==e),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(l(231,t,typeof n));return n}var tE=!1;if(e0)try{var tC={};Object.defineProperty(tC,"passive",{get:function(){tE=!0}}),window.addEventListener("test",tC,tC),window.removeEventListener("test",tC,tC)}catch(e){tE=!1}var tT=null,tR=null,tP=null;function tI(){if(tP)return tP;var e,t,n=tR,r=n.length,i="value"in tT?tT.value:tT.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return tP=i.slice(e,1<t?1-t:void 0)}function tB(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tL(){return!0}function tk(){return!1}function tD(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tL:tk,this.isPropagationStopped=tk,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tL)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tL)},persist:function(){},isPersistent:tL}),t}var tN,tF,tO,tU={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tz=tD(tU),tH=B({},tU,{view:0,detail:0}),tG=tD(tH),tV=B({},tH,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tO&&(tO&&"mousemove"===e.type?(tN=e.screenX-tO.screenX,tF=e.screenY-tO.screenY):tF=tN=0,tO=e),tN)},movementY:function(e){return"movementY"in e?e.movementY:tF}}),tj=tD(tV),tW=tD(B({},tV,{dataTransfer:0})),tX=tD(B({},tH,{relatedTarget:0})),tJ=tD(B({},tU,{animationName:0,elapsedTime:0,pseudoElement:0})),tY=tD(B({},tU,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),tK=tD(B({},tU,{data:0})),tq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=tZ[e])&&!!t[e]}function t0(){return t$}var t1=tD(B({},tH,{key:function(e){if(e.key){var t=tq[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tB(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?tQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(e){return"keypress"===e.type?tB(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tB(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),t2=tD(B({},tV,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),t3=tD(B({},tH,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0})),t4=tD(B({},tU,{propertyName:0,elapsedTime:0,pseudoElement:0})),t5=tD(B({},tV,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),t6=tD(B({},tU,{newState:0,oldState:0})),t9=[9,13,27,32],t8=e0&&"CompositionEvent"in window,t7=null;e0&&"documentMode"in document&&(t7=document.documentMode);var ne=e0&&"TextEvent"in window&&!t7,nt=e0&&(!t8||t7&&8<t7&&11>=t7),nn=!1;function nr(e,t){switch(e){case"keyup":return -1!==t9.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ni(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var na=!1,no={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ns(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!no[e.type]:"textarea"===t}function nl(e,t,n,r){tx?t_?t_.push(r):t_=[r]:tx=r,0<(t=lX(t,"onChange")).length&&(n=new tz("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nu=null,nc=null;function nd(e){lO(e,0)}function nh(e){if(te(eJ(e)))return e}function nf(e,t){if("change"===e)return t}var np=!1;if(e0){if(e0){var nm="oninput"in document;if(!nm){var ng=document.createElement("div");ng.setAttribute("oninput","return;"),nm="function"==typeof ng.oninput}r=nm}else r=!1;np=r&&(!document.documentMode||9<document.documentMode)}function nv(){nu&&(nu.detachEvent("onpropertychange",ny),nc=nu=null)}function ny(e){if("value"===e.propertyName&&nh(nc)){var t=[];nl(t,nc,e,tb(e)),tA(nd,t)}}function nb(e,t,n){"focusin"===e?(nv(),nu=t,nc=n,nu.attachEvent("onpropertychange",ny)):"focusout"===e&&nv()}function nx(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nh(nc)}function n_(e,t){if("click"===e)return nh(t)}function nw(e,t){if("input"===e||"change"===e)return nh(t)}var nS="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nA(e,t){if(nS(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!en.call(t,i)||!nS(e[i],t[i]))return!1}return!0}function nM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nE(e,t){var n,r=nM(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=nM(r)}}function nC(e){e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;for(var t=tt(e.document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=tt(e.document)}return t}function nT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nR=e0&&"documentMode"in document&&11>=document.documentMode,nP=null,nI=null,nB=null,nL=!1;function nk(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;nL||null==nP||nP!==tt(r)||(r="selectionStart"in(r=nP)&&nT(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nB&&nA(nB,r)||(nB=r,0<(r=lX(nI,"onSelect")).length&&(t=new tz("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nP)))}function nD(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nN={animationend:nD("Animation","AnimationEnd"),animationiteration:nD("Animation","AnimationIteration"),animationstart:nD("Animation","AnimationStart"),transitionrun:nD("Transition","TransitionRun"),transitionstart:nD("Transition","TransitionStart"),transitioncancel:nD("Transition","TransitionCancel"),transitionend:nD("Transition","TransitionEnd")},nF={},nO={};function nU(e){if(nF[e])return nF[e];if(!nN[e])return e;var t,n=nN[e];for(t in n)if(n.hasOwnProperty(t)&&t in nO)return nF[e]=n[t];return e}e0&&(nO=document.createElement("div").style,"AnimationEvent"in window||(delete nN.animationend.animation,delete nN.animationiteration.animation,delete nN.animationstart.animation),"TransitionEvent"in window||delete nN.transitionend.transition);var nz=nU("animationend"),nH=nU("animationiteration"),nG=nU("animationstart"),nV=nU("transitionrun"),nj=nU("transitionstart"),nW=nU("transitioncancel"),nX=nU("transitionend"),nJ=new Map,nY="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function nK(e,t){nJ.set(e,t),eZ(t,[e])}var nq=[],nQ=0,nZ=0;function n$(){for(var e=nQ,t=nZ=nQ=0;t<e;){var n=nq[t];nq[t++]=null;var r=nq[t];nq[t++]=null;var i=nq[t];nq[t++]=null;var a=nq[t];if(nq[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&n3(n,i,a)}}function n0(e,t,n,r){nq[nQ++]=e,nq[nQ++]=t,nq[nQ++]=n,nq[nQ++]=r,nZ|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function n1(e,t,n,r){return n0(e,t,n,r),n4(e)}function n2(e,t){return n0(e,null,null,t),n4(e)}function n3(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-eb(n),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=0x20000000|n)}function n4(e){if(50<sQ)throw sQ=0,sZ=null,Error(l(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var n5={},n6=new WeakMap;function n9(e,t){if("object"==typeof e&&null!==e){var n=n6.get(e);return void 0!==n?n:(t={value:e,source:t,stack:N(t)},n6.set(e,t),t)}return{value:e,source:t,stack:N(t)}}var n8=[],n7=0,re=null,rt=0,rn=[],rr=0,ri=null,ra=1,ro="";function rs(e,t){n8[n7++]=rt,n8[n7++]=re,re=e,rt=t}function rl(e,t,n){rn[rr++]=ra,rn[rr++]=ro,rn[rr++]=ri,ri=e;var r=ra;e=ro;var i=32-eb(r)-1;r&=~(1<<i),n+=1;var a=32-eb(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ra=1<<32-eb(t)+i|n<<i|r,ro=a+e}else ra=1<<a|n<<i|r,ro=e}function ru(e){null!==e.return&&(rs(e,1),rl(e,1,0))}function rc(e){for(;e===re;)re=n8[--n7],n8[n7]=null,rt=n8[--n7],n8[n7]=null;for(;e===ri;)ri=rn[--rr],rn[rr]=null,ro=rn[--rr],rn[rr]=null,ra=rn[--rr],rn[rr]=null}var rd=null,rh=null,rf=!1,rp=null,rm=!1,rg=Error(l(519));function rv(e){throw rw(n9(Error(l(418,"")),e)),rg}function ry(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[eN]=e,t[eF]=r,n){case"dialog":lU("cancel",t),lU("close",t);break;case"iframe":case"object":case"embed":lU("load",t);break;case"video":case"audio":for(n=0;n<lN.length;n++)lU(lN[n],t);break;case"source":lU("error",t);break;case"img":case"image":case"link":lU("error",t),lU("load",t);break;case"details":lU("toggle",t);break;case"input":lU("invalid",t),ta(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),e7(t);break;case"select":lU("invalid",t);break;case"textarea":lU("invalid",t),tu(t,r.value,r.defaultValue,r.children),e7(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||lZ(t.textContent,n)?(null!=r.popover&&(lU("beforetoggle",t),lU("toggle",t)),null!=r.onScroll&&lU("scroll",t),null!=r.onScrollEnd&&lU("scrollend",t),null!=r.onClick&&(t.onclick=l$),t=!0):t=!1,t||rv(e)}function rb(e){for(rd=e.return;rd;)switch(rd.tag){case 3:case 27:rm=!0;return;case 5:case 13:rm=!1;return;default:rd=rd.return}}function rx(e){if(e!==rd)return!1;if(!rf)return rb(e),rf=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t="form"===(t=e.type)||"button"===t||l8(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&rh&&rv(e),rb(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));t:{for(n=0,e=e.nextSibling;e;){if(8===e.nodeType){if("/$"===(t=e.data)){if(0===n){rh=us(e.nextSibling);break t}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}rh=null}}else rh=rd?us(e.stateNode.nextSibling):null;return!0}function r_(){rh=rd=null,rf=!1}function rw(e){null===rp?rp=[e]:rp.push(e)}var rS=Error(l(460)),rA=Error(l(474)),rM={then:function(){}};function rE(e){return"fulfilled"===(e=e.status)||"rejected"===e}function rC(){}function rT(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(rC,rC),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===rS)throw Error(l(483));throw e;default:if("string"==typeof t.status)t.then(rC,rC);else{if(null!==(e=sA)&&100<e.shellSuspendCounter)throw Error(l(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===rS)throw Error(l(483));throw e}throw rR=t,rS}}var rR=null;function rP(){if(null===rR)throw Error(l(459));var e=rR;return rR=null,e}var rI=null,rB=0;function rL(e){var t=rB;return rB+=1,null===rI&&(rI=[]),rT(rI,e,t)}function rk(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function rD(e,t){if(t.$$typeof===c)throw Error(l(525));throw Error(l(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rN(e){return(0,e._init)(e._payload)}function rF(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=sl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=0x2000002,n):r:(t.flags|=0x2000002,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=0x2000002),t}function s(e,t,n,r){return null===t||6!==t.tag?(t=sf(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function u(e,t,n,r){var a=n.type;return a===f?p(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===S&&rN(a)===t.type)?rk(t=i(t,n.props),n):rk(t=sc(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=sp(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function p(e,t,n,r,a){return null===t||7!==t.tag?(t=sd(n,e.mode,r,a)).return=e:(t=i(t,n)).return=e,t}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=sf(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return rk(n=sc(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=sp(t,e.mode,n)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),n)}if(z(t)||C(t))return(t=sd(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,rL(t),n);if(t.$$typeof===y)return m(e,op(e,t),n);rD(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===i?u(e,t,n,r):null;case h:return n.key===i?c(e,t,n,r):null;case S:return g(e,t,n=(i=n._init)(n._payload),r)}if(z(n)||C(n))return null!==i?null:p(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,rL(n),r);if(n.$$typeof===y)return g(e,t,op(e,n),r);rD(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case h:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(z(r)||C(r))return p(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return v(e,t,n,rL(r),i);if(r.$$typeof===y)return v(e,t,n,op(t,r),i);rD(t,r)}return null}return function(s,u,c,p){try{rB=0;var b=function s(u,c,p,b){if("object"==typeof p&&null!==p&&p.type===f&&null===p.key&&(p=p.props.children),"object"==typeof p&&null!==p){switch(p.$$typeof){case d:t:{for(var x=p.key;null!==c;){if(c.key===x){if((x=p.type)===f){if(7===c.tag){n(u,c.sibling),(b=i(c,p.props.children)).return=u,u=b;break t}}else if(c.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===S&&rN(x)===c.type){n(u,c.sibling),rk(b=i(c,p.props),p),b.return=u,u=b;break t}n(u,c);break}t(u,c),c=c.sibling}p.type===f?(b=sd(p.props.children,u.mode,b,p.key)).return=u:(rk(b=sc(p.type,p.key,p.props,null,u.mode,b),p),b.return=u),u=b}return o(u);case h:t:{for(x=p.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===p.containerInfo&&c.stateNode.implementation===p.implementation){n(u,c.sibling),(b=i(c,p.children||[])).return=u,u=b;break t}n(u,c);break}t(u,c),c=c.sibling}(b=sp(p,u.mode,b)).return=u,u=b}return o(u);case S:return s(u,c,p=(x=p._init)(p._payload),b)}if(z(p))return function(i,o,s,l){for(var u=null,c=null,d=o,h=o=0,f=null;null!==d&&h<s.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=g(i,d,s[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(i,d),o=a(p,o,h),null===c?u=p:c.sibling=p,c=p,d=f}if(h===s.length)return n(i,d),rf&&rs(i,h),u;if(null===d){for(;h<s.length;h++)null!==(d=m(i,s[h],l))&&(o=a(d,o,h),null===c?u=d:c.sibling=d,c=d);return rf&&rs(i,h),u}for(d=r(d);h<s.length;h++)null!==(f=v(d,i,h,s[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),o=a(f,o,h),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach(function(e){return t(i,e)}),rf&&rs(i,h),u}(u,c,p,b);if(C(p)){if("function"!=typeof(x=C(p)))throw Error(l(150));return function(i,o,s,u){if(null==s)throw Error(l(151));for(var c=null,d=null,h=o,f=o=0,p=null,y=s.next();null!==h&&!y.done;f++,y=s.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=g(i,h,y.value,u);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(i,h),o=a(b,o,f),null===d?c=b:d.sibling=b,d=b,h=p}if(y.done)return n(i,h),rf&&rs(i,f),c;if(null===h){for(;!y.done;f++,y=s.next())null!==(y=m(i,y.value,u))&&(o=a(y,o,f),null===d?c=y:d.sibling=y,d=y);return rf&&rs(i,f),c}for(h=r(h);!y.done;f++,y=s.next())null!==(y=v(h,i,f,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),o=a(y,o,f),null===d?c=y:d.sibling=y,d=y);return e&&h.forEach(function(e){return t(i,e)}),rf&&rs(i,f),c}(u,c,p=x.call(p),b)}if("function"==typeof p.then)return s(u,c,rL(p),b);if(p.$$typeof===y)return s(u,c,op(u,p),b);rD(u,p)}return"string"==typeof p&&""!==p||"number"==typeof p||"bigint"==typeof p?(p=""+p,null!==c&&6===c.tag?(n(u,c.sibling),(b=i(c,p)).return=u):(n(u,c),(b=sf(p,u.mode,b)).return=u),o(u=b)):n(u,c)}(s,u,c,p);return rI=null,b}catch(e){if(e===rS)throw e;var x=so(29,e,null,s.mode);return x.lanes=p,x.return=s,x}finally{}}}var rO=rF(!0),rU=rF(!1),rz=W(null),rH=W(0);function rG(e,t){J(rH,e=sB),J(rz,t),sB=e|t.baseLanes}function rV(){J(rH,sB),J(rz,rz.current)}function rj(){sB=rH.current,X(rz),X(rH)}var rW=W(null),rX=null;function rJ(e){var t=e.alternate;J(rQ,1&rQ.current),J(rW,e),null===rX&&(null===t||null!==rz.current?rX=e:null!==t.memoizedState&&(rX=e))}function rY(e){if(22===e.tag){if(J(rQ,rQ.current),J(rW,e),null===rX){var t=e.alternate;null!==t&&null!==t.memoizedState&&(rX=e)}}else rK(e)}function rK(){J(rQ,rQ.current),J(rW,rW.current)}function rq(e){X(rW),rX===e&&(rX=null),X(rQ)}var rQ=W(0);function rZ(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var r$="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},r0=a.unstable_scheduleCallback,r1=a.unstable_NormalPriority,r2={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r3(){return{controller:new r$,data:new Map,refCount:0}}function r4(e){e.refCount--,0===e.refCount&&r0(r1,function(){e.controller.abort()})}var r5=null,r6=0,r9=0,r8=null;function r7(){if(0==--r6&&null!==r5){null!==r8&&(r8.status="fulfilled");var e=r5;r5=null,r9=0,r8=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var ie=I.S;I.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===r5){var n=r5=[];r6=0,r9=lI(),r8={status:"pending",value:void 0,then:function(e){n.push(e)}}}r6++,t.then(r7,r7)}(0,t),null!==ie&&ie(e,t)};var it=W(null);function ir(){var e=it.current;return null!==e?e:sA.pooledCache}function ii(e,t){null===t?J(it,it.current):J(it,t.pool)}function ia(){var e=ir();return null===e?null:{parent:r2._currentValue,pool:e}}var io=0,is=null,il=null,iu=null,ic=!1,id=!1,ih=!1,ip=0,im=0,ig=null,iv=0;function iy(){throw Error(l(321))}function ib(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nS(e[n],t[n]))return!1;return!0}function ix(e,t,n,r,i,a){return io=a,is=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?aA:aM,ih=!1,a=n(r,i),ih=!1,id&&(a=iw(t,n,r,i)),i_(e),a}function i_(e){I.H=aS;var t=null!==il&&null!==il.next;if(io=0,iu=il=is=null,ic=!1,im=0,ig=null,t)throw Error(l(300));null===e||aG||null!==(e=e.dependencies)&&od(e)&&(aG=!0)}function iw(e,t,n,r){is=e;var i=0;do{if(id&&(ig=null),im=0,id=!1,25<=i)throw Error(l(301));if(i+=1,iu=il=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}I.H=aE,a=t(n,r)}while(id);return a}function iS(){var e=I.H,t=e.useState()[0];return t="function"==typeof t.then?iR(t):t,e=e.useState()[0],(null!==il?il.memoizedState:null)!==e&&(is.flags|=1024),t}function iA(){var e=0!==ip;return ip=0,e}function iM(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function iE(e){if(ic){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ic=!1}io=0,iu=il=is=null,id=!1,im=ip=0,ig=null}function iC(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===iu?is.memoizedState=iu=e:iu=iu.next=e,iu}function iT(){if(null===il){var e=is.alternate;e=null!==e?e.memoizedState:null}else e=il.next;var t=null===iu?is.memoizedState:iu.next;if(null!==t)iu=t,il=e;else{if(null===e){if(null===is.alternate)throw Error(l(467));throw Error(l(310))}e={memoizedState:(il=e).memoizedState,baseState:il.baseState,baseQueue:il.baseQueue,queue:il.queue,next:null},null===iu?is.memoizedState=iu=e:iu=iu.next=e}return iu}function iR(e){var t=im;return im+=1,null===ig&&(ig=[]),e=rT(ig,e,t),t=is,null===(null===iu?t.memoizedState:iu.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?aA:aM),e}function iP(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return iR(e);if(e.$$typeof===y)return of(e)}throw Error(l(438,String(e)))}function iI(e){var t=null,n=is.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=is.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n=i(),is.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=M;return t.index++,n}function iB(e,t){return"function"==typeof t?t(e):t}function iL(e){return ik(iT(),il,e)}function ik(e,t,n){var r=e.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{t=i.next;var s=o=null,u=null,c=t,d=!1;do{var h=-0x20000001&c.lane;if(h!==c.lane?(sE&h)===h:(io&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===r9&&(d=!0);else if((io&f)===f){c=c.next,f===r9&&(d=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=h,o=a):u=u.next=h,is.lanes|=f,sk|=f;h=c.action,ih&&n(a,h),a=c.hasEagerState?c.eagerState:n(a,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=f,o=a):u=u.next=f,is.lanes|=h,sk|=h;c=c.next}while(null!==c&&c!==t);if(null===u?o=a:u.next=s,!nS(a,e.memoizedState)&&(aG=!0,d&&null!==(n=r8)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=u,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function iD(e){var t=iT(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);nS(a,t.memoizedState)||(aG=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function iN(e,t,n){var r=is,i=iT(),a=rf;if(a){if(void 0===n)throw Error(l(407));n=n()}else n=t();var o=!nS((il||i).memoizedState,n);if(o&&(i.memoizedState=n,aG=!0),i=i.queue,i9(iU.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==iu&&1&iu.memoizedState.tag){if(r.flags|=2048,i2(9,iO.bind(null,r,i,n,t),{destroy:void 0},null),null===sA)throw Error(l(349));a||0!=(60&io)||iF(r,t,n)}return n}function iF(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=is.updateQueue)?(t=i(),is.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function iO(e,t,n,r){t.value=n,t.getSnapshot=r,iz(t)&&iH(e)}function iU(e,t,n){return n(function(){iz(t)&&iH(e)})}function iz(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nS(e,n)}catch(e){return!0}}function iH(e){var t=n2(e,2);null!==t&&s1(t,e,2)}function iG(e){var t=iC();if("function"==typeof e){var n=e;if(e=n(),ih){ey(!0);try{n()}finally{ey(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iB,lastRenderedState:e},t}function iV(e,t,n,r){return e.baseState=n,ik(e,il,"function"==typeof r?r:iB)}function ij(e,t,n,r,i){if(ax(e))throw Error(l(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==I.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,iW(t,a)):(a.next=n.next,t.pending=n.next=a)}}function iW(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=I.T,o={};I.T=o;try{var s=n(i,r),l=I.S;null!==l&&l(o,s),iX(e,t,s)}catch(n){iY(e,t,n)}finally{I.T=a}}else try{a=n(i,r),iX(e,t,a)}catch(n){iY(e,t,n)}}function iX(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){iJ(e,t,n)},function(n){return iY(e,t,n)}):iJ(e,t,n)}function iJ(e,t,n){t.status="fulfilled",t.value=n,iK(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,iW(e,n)))}function iY(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do t.status="rejected",t.reason=n,iK(t),t=t.next;while(t!==r)}e.action=null}function iK(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function iq(e,t){return t}function iQ(e,t){if(rf){var n=sA.formState;if(null!==n){t:{var r=is;if(rf){if(rh){n:{for(var i=rh,a=rm;8!==i.nodeType;)if(!a||null===(i=us(i.nextSibling))){i=null;break n}i="F!"===(a=i.data)||"F"===a?i:null}if(i){rh=us(i.nextSibling),r="F!"===i.data;break t}}rv(r)}r=!1}r&&(t=n[0])}}return(n=iC()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iq,lastRenderedState:t},n.queue=r,n=av.bind(null,is,r),r.dispatch=n,r=iG(!1),a=ab.bind(null,is,!1,r.queue),r=iC(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=ij.bind(null,is,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function iZ(e){return i$(iT(),il,e)}function i$(e,t,n){t=ik(e,t,iq)[0],e=iL(iB)[0],t="object"==typeof t&&null!==t&&"function"==typeof t.then?iR(t):t;var r=iT(),i=r.queue,a=i.dispatch;return n!==r.memoizedState&&(is.flags|=2048,i2(9,i0.bind(null,i,n),{destroy:void 0},null)),[t,a,e]}function i0(e,t){e.action=t}function i1(e){var t=iT(),n=il;if(null!==n)return i$(t,n,e);iT(),t=t.memoizedState;var r=(n=iT()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function i2(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=is.updateQueue)&&(t=i(),is.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function i3(){return iT().memoizedState}function i4(e,t,n,r){var i=iC();is.flags|=e,i.memoizedState=i2(1|t,n,{destroy:void 0},void 0===r?null:r)}function i5(e,t,n,r){var i=iT();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==il&&null!==r&&ib(r,il.memoizedState.deps)?i.memoizedState=i2(t,n,a,r):(is.flags|=e,i.memoizedState=i2(1|t,n,a,r))}function i6(e,t){i4(8390656,8,e,t)}function i9(e,t){i5(2048,8,e,t)}function i8(e,t){return i5(4,2,e,t)}function i7(e,t){return i5(4,4,e,t)}function ae(e,t){if("function"==typeof t){var n=t(e=e());return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function at(e,t,n){n=null!=n?n.concat([e]):null,i5(4,4,ae.bind(null,t,e),n)}function an(){}function ar(e,t){var n=iT();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ib(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ai(e,t){var n=iT();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ib(t,r[1]))return r[0];if(r=e(),ih){ey(!0);try{e()}finally{ey(!1)}}return n.memoizedState=[r,t],r}function aa(e,t,n){return void 0===n||0!=(0x40000000&io)?e.memoizedState=t:(e.memoizedState=n,e=s0(),is.lanes|=e,sk|=e,n)}function ao(e,t,n,r){return nS(n,t)?n:null!==rz.current?(nS(e=aa(e,n,r),t)||(aG=!0),e):0==(42&io)?(aG=!0,e.memoizedState=n):(e=s0(),is.lanes|=e,sk|=e,t)}function as(e,t,n,r,i){var a=H.p;H.p=0!==a&&8>a?a:8;var o=I.T,s={};I.T=s,ab(e,!1,t,n);try{var l=i(),u=I.S;if(null!==u&&u(s,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,d,h=(c=[],d={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){d.status="fulfilled",d.value=r;for(var e=0;e<c.length;e++)(0,c[e])(r)},function(e){for(d.status="rejected",d.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),d);ay(e,t,h,s$(e))}else ay(e,t,r,s$(e))}catch(n){ay(e,t,{then:function(){},status:"rejected",reason:n},s$())}finally{H.p=a,I.T=o}}function al(){}function au(e,t,n,r){if(5!==e.tag)throw Error(l(476));var i=ac(e).queue;as(e,i,t,G,null===n?al:function(){return ad(e),n(r)})}function ac(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:iB,lastRenderedState:G},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:iB,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ad(e){var t=ac(e).next.queue;ay(e,t,{},s$())}function ah(){return of(uN)}function af(){return iT().memoizedState}function ap(){return iT().memoizedState}function am(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=s$(),r=ox(t,e=ob(n),n);null!==r&&(s1(r,t,n),o_(r,t,n)),t={cache:r3()},e.payload=t;return}t=t.return}}function ag(e,t,n){var r=s$();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ax(e)?a_(t,n):null!==(n=n1(e,t,n,r))&&(s1(n,e,r),aw(n,t,r))}function av(e,t,n){ay(e,t,n,s$())}function ay(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ax(e))a_(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,nS(s,o))return n0(e,t,i,0),null===sA&&n$(),!1}catch(e){}finally{}if(null!==(n=n1(e,t,i,r)))return s1(n,e,r),aw(n,t,r),!0}return!1}function ab(e,t,n,r){if(r={lane:2,revertLane:lI(),action:r,hasEagerState:!1,eagerState:null,next:null},ax(e)){if(t)throw Error(l(479))}else null!==(t=n1(e,n,r,2))&&s1(t,e,2)}function ax(e){var t=e.alternate;return e===is||null!==t&&t===is}function a_(e,t){id=ic=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aw(e,t,n){if(0!=(4194176&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eB(e,n)}}i=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};var aS={readContext:of,use:iP,useCallback:iy,useContext:iy,useEffect:iy,useImperativeHandle:iy,useLayoutEffect:iy,useInsertionEffect:iy,useMemo:iy,useReducer:iy,useRef:iy,useState:iy,useDebugValue:iy,useDeferredValue:iy,useTransition:iy,useSyncExternalStore:iy,useId:iy};aS.useCacheRefresh=iy,aS.useMemoCache=iy,aS.useHostTransitionStatus=iy,aS.useFormState=iy,aS.useActionState=iy,aS.useOptimistic=iy;var aA={readContext:of,use:iP,useCallback:function(e,t){return iC().memoizedState=[e,void 0===t?null:t],e},useContext:of,useEffect:i6,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,i4(4194308,4,ae.bind(null,t,e),n)},useLayoutEffect:function(e,t){return i4(4194308,4,e,t)},useInsertionEffect:function(e,t){i4(4,2,e,t)},useMemo:function(e,t){var n=iC();t=void 0===t?null:t;var r=e();if(ih){ey(!0);try{e()}finally{ey(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=iC();if(void 0!==n){var i=n(t);if(ih){ey(!0);try{n(t)}finally{ey(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ag.bind(null,is,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},iC().memoizedState=e},useState:function(e){var t=(e=iG(e)).queue,n=av.bind(null,is,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:an,useDeferredValue:function(e,t){return aa(iC(),e,t)},useTransition:function(){var e=iG(!1);return e=as.bind(null,is,e.queue,!0,!1),iC().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=is,i=iC();if(rf){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===sA)throw Error(l(349));0!=(60&sE)||iF(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,i6(iU.bind(null,r,a,e),[e]),r.flags|=2048,i2(9,iO.bind(null,r,a,n,t),{destroy:void 0},null),n},useId:function(){var e=iC(),t=sA.identifierPrefix;if(rf){var n=ro,r=ra;t=":"+t+"R"+(n=(r&~(1<<32-eb(r)-1)).toString(32)+n),0<(n=ip++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=iv++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return iC().memoizedState=am.bind(null,is)}};aA.useMemoCache=iI,aA.useHostTransitionStatus=ah,aA.useFormState=iQ,aA.useActionState=iQ,aA.useOptimistic=function(e){var t=iC();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ab.bind(null,is,!0,n),n.dispatch=t,[e,t]};var aM={readContext:of,use:iP,useCallback:ar,useContext:of,useEffect:i9,useImperativeHandle:at,useInsertionEffect:i8,useLayoutEffect:i7,useMemo:ai,useReducer:iL,useRef:i3,useState:function(){return iL(iB)},useDebugValue:an,useDeferredValue:function(e,t){return ao(iT(),il.memoizedState,e,t)},useTransition:function(){var e=iL(iB)[0],t=iT().memoizedState;return["boolean"==typeof e?e:iR(e),t]},useSyncExternalStore:iN,useId:af};aM.useCacheRefresh=ap,aM.useMemoCache=iI,aM.useHostTransitionStatus=ah,aM.useFormState=iZ,aM.useActionState=iZ,aM.useOptimistic=function(e,t){return iV(iT(),il,e,t)};var aE={readContext:of,use:iP,useCallback:ar,useContext:of,useEffect:i9,useImperativeHandle:at,useInsertionEffect:i8,useLayoutEffect:i7,useMemo:ai,useReducer:iD,useRef:i3,useState:function(){return iD(iB)},useDebugValue:an,useDeferredValue:function(e,t){var n=iT();return null===il?aa(n,e,t):ao(n,il.memoizedState,e,t)},useTransition:function(){var e=iD(iB)[0],t=iT().memoizedState;return["boolean"==typeof e?e:iR(e),t]},useSyncExternalStore:iN,useId:af};function aC(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}aE.useCacheRefresh=ap,aE.useMemoCache=iI,aE.useHostTransitionStatus=ah,aE.useFormState=i1,aE.useActionState=i1,aE.useOptimistic=function(e,t){var n=iT();return null!==il?iV(n,il,e,t):(n.baseState=e,[e,n.queue.dispatch])};var aT={isMounted:function(e){return!!(e=e._reactInternals)&&F(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=s$(),i=ob(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=ox(e,i,r))&&(s1(t,e,r),o_(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=s$(),i=ob(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ox(e,i,r))&&(s1(t,e,r),o_(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=s$(),r=ob(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ox(e,r,n))&&(s1(t,e,n),o_(t,e,n))}};function aR(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||!nA(n,r)||!nA(i,a)}function aP(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&aT.enqueueReplaceState(t,t.state,null)}function aI(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=B({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var aB="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit){process.emit("uncaughtException",e);return}console.error(e)};function aL(e){aB(e)}function ak(e){console.error(e)}function aD(e){aB(e)}function aN(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function aF(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function aO(e,t,n){return(n=ob(n)).tag=3,n.payload={element:null},n.callback=function(){aN(e,t)},n}function aU(e){return(e=ob(e)).tag=3,e}function az(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){aF(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){aF(t,n,r),"function"!=typeof i&&(null===sW?sW=new Set([this]):sW.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var aH=Error(l(461)),aG=!1;function aV(e,t,n,r){t.child=null===e?rU(t,null,n,r):rO(t,e.child,n,r)}function aj(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return(oh(t),r=ix(e,t,n,o,a,i),s=iA(),null===e||aG)?(rf&&s&&ru(t),t.flags|=1,aV(e,t,r,i),t.child):(iM(e,t,i),oe(e,t,i))}function aW(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||ss(a)||void 0!==a.defaultProps||null!==n.compare?((e=sc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,aX(e,t,a,r,i))}if(a=e.child,!ot(e,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:nA)(o,r)&&e.ref===t.ref)return oe(e,t,i)}return t.flags|=1,(e=sl(a,r)).ref=t.ref,e.return=t,t.child=e}function aX(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(nA(a,r)&&e.ref===t.ref){if(aG=!1,t.pendingProps=r=a,!ot(e,i))return t.lanes=e.lanes,oe(e,t,i);0!=(131072&e.flags)&&(aG=!0)}}return aq(e,t,n,r,i)}function aJ(e,t,n){var r=t.pendingProps,i=r.children,a=0!=(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(aK(e,t),"hidden"===r.mode||a){if(0!=(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=0,i=t.child=e.child;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return aY(e,t,r,n)}if(0==(0x20000000&n))return t.lanes=t.childLanes=0x20000000,aY(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ii(t,null!==o?o.cachePool:null),null!==o?rG(t,o):rV(),rY(t)}else null!==o?(ii(t,o.cachePool),rG(t,o),rK(t),t.memoizedState=null):(null!==e&&ii(t,null),rV(),rK(t));return aV(e,t,i,n),t.child}function aY(e,t,n,r){var i=ir();return i=null===i?null:{parent:r2._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&ii(t,null),rV(),rY(t),null!==e&&oc(e,t,r,!0),null}function aK(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(l(284));(null===e||e.ref!==n)&&(t.flags|=2097664)}}function aq(e,t,n,r,i){return(oh(t),n=ix(e,t,n,r,void 0,i),r=iA(),null===e||aG)?(rf&&r&&ru(t),t.flags|=1,aV(e,t,n,i),t.child):(iM(e,t,i),oe(e,t,i))}function aQ(e,t,n,r,i,a){return(oh(t),t.updateQueue=null,n=iw(t,r,n,i),i_(e),r=iA(),null===e||aG)?(rf&&r&&ru(t),t.flags|=1,aV(e,t,n,a),t.child):(iM(e,t,a),oe(e,t,a))}function aZ(e,t,n,r,i){if(oh(t),null===t.stateNode){var a=n5,o=n.contextType;"object"==typeof o&&null!==o&&(a=of(o)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=aT,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ov(t),o=n.contextType,a.context="object"==typeof o&&null!==o?of(o):n5,a.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(aC(t,n,o,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(o=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&aT.enqueueReplaceState(a,a.state,null),oM(t,r,a,i),oA(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=aI(n,s);a.props=l;var u=a.context,c=n.contextType;o=n5,"object"==typeof c&&null!==c&&(o=of(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s||u!==o)&&aP(t,a,r,o),og=!1;var h=t.memoizedState;a.state=h,oM(t,r,a,i),oA(),u=t.memoizedState,s||h!==u||og?("function"==typeof d&&(aC(t,n,d,r),u=t.memoizedState),(l=og||aR(t,n,l,r,h,u,o))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=o,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,oy(e,t),c=aI(n,o=t.memoizedProps),a.props=c,d=t.pendingProps,h=a.context,u=n.contextType,l=n5,"object"==typeof u&&null!==u&&(l=of(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&aP(t,a,r,l),og=!1,h=t.memoizedState,a.state=h,oM(t,r,a,i),oA();var f=t.memoizedState;o!==d||h!==f||og||null!==e&&null!==e.dependencies&&od(e.dependencies)?("function"==typeof s&&(aC(t,n,s,r),f=t.memoizedState),(c=og||aR(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&od(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,aK(e,t),r=0!=(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=rO(t,e.child,null,i),t.child=rO(t,null,n,i)):aV(e,t,n,i),t.memoizedState=a.state,e=t.child):e=oe(e,t,i),e}function a$(e,t,n,r){return r_(),t.flags|=256,aV(e,t,n,r),t.child}var a0={dehydrated:null,treeContext:null,retryLane:0};function a1(e){return{baseLanes:e,cachePool:ia()}}function a2(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=sF),e}function a3(e,t,n){var r,i=t.pendingProps,a=!1,o=0!=(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!=(2&rQ.current)),r&&(a=!0,t.flags&=-129),r=0!=(32&t.flags),t.flags&=-33,null===e){if(rf){if(a?rJ(t):rK(t),rf){var s,u=rh;if(s=u){r:{for(s=u,u=rm;8!==s.nodeType;)if(!u||null===(s=us(s.nextSibling))){u=null;break r}u=s}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==ri?{id:ra,overflow:ro}:null,retryLane:0x20000000},(s=so(18,null,null,0)).stateNode=u,s.return=t,t.child=s,rd=t,rh=null,s=!0):s=!1}s||rv(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return"$!"===u.data?t.lanes=16:t.lanes=0x20000000,null;rq(t)}return(u=i.children,i=i.fallback,a)?(rK(t),u=a5({mode:"hidden",children:u},a=t.mode),i=sd(i,a,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(a=t.child).memoizedState=a1(n),a.childLanes=a2(e,r,n),t.memoizedState=a0,i):(rJ(t),a4(t,u))}if(null!==(s=e.memoizedState)&&null!==(u=s.dehydrated)){if(o)256&t.flags?(rJ(t),t.flags&=-257,t=a6(e,t,n)):null!==t.memoizedState?(rK(t),t.child=e.child,t.flags|=128,t=null):(rK(t),a=i.fallback,u=t.mode,i=a5({mode:"visible",children:i.children},u),a=sd(a,u,n,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,rO(t,e.child,null,n),(i=t.child).memoizedState=a1(n),i.childLanes=a2(e,r,n),t.memoizedState=a0,t=a);else if(rJ(t),"$!"===u.data){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(l(419))).stack="",i.digest=r,rw({value:i,source:null,stack:null}),t=a6(e,t,n)}else if(aG||oc(e,t,n,!1),r=0!=(n&e.childLanes),aG||r){if(null!==(r=sA)){if(0!=(42&(i=n&-n)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:i=64;break;case 0x10000000:i=0x8000000;break;default:i=0}if(0!==(i=0!=(i&(r.suspendedLanes|n))?0:i)&&i!==s.retryLane)throw s.retryLane=i,n2(e,i),s1(r,e,i),aH}"$?"===u.data||ln(),t=a6(e,t,n)}else"$?"===u.data?(t.flags|=128,t.child=e.child,t=lv.bind(null,e),u._reactRetry=t,t=null):(e=s.treeContext,rh=us(u.nextSibling),rd=t,rf=!0,rp=null,rm=!1,null!==e&&(rn[rr++]=ra,rn[rr++]=ro,rn[rr++]=ri,ra=e.id,ro=e.overflow,ri=t),t=a4(t,i.children),t.flags|=4096);return t}return a?(rK(t),a=i.fallback,u=t.mode,c=(s=e.child).sibling,(i=sl(s,{mode:"hidden",children:i.children})).subtreeFlags=0x1e00000&s.subtreeFlags,null!==c?a=sl(c,a):(a=sd(a,u,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,null===(u=e.child.memoizedState)?u=a1(n):(null!==(s=u.cachePool)?(c=r2._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=ia(),u={baseLanes:u.baseLanes|n,cachePool:s}),a.memoizedState=u,a.childLanes=a2(e,r,n),t.memoizedState=a0,i):(rJ(t),e=(n=e.child).sibling,(n=sl(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function a4(e,t){return(t=a5({mode:"visible",children:t},e.mode)).return=e,e.child=t}function a5(e,t){return sh(e,t,0,null)}function a6(e,t,n){return rO(t,e.child,null,n),e=a4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function a9(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ol(e.return,t,n)}function a8(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function a7(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(aV(e,t,r.children,n),0!=(2&(r=rQ.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))t:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&a9(e,n,t);else if(19===e.tag)a9(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(J(rQ,r),i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===rZ(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),a8(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===rZ(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}a8(t,!0,n,null,a);break;case"together":a8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function oe(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),sk|=t.lanes,0==(n&t.childLanes)){if(null===e)return null;if(oc(e,t,n,!1),0==(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=sl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=sl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ot(e,t){return 0!=(e.lanes&t)||!!(null!==(e=e.dependencies)&&od(e))}function on(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps)aG=!0;else{if(!ot(e,n)&&0==(128&t.flags))return aG=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),oo(t,r2,e.memoizedState.cache),r_();break;case 27:case 5:ee(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:oo(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r){if(null!==r.dehydrated)return rJ(t),t.flags|=128,null;if(0!=(n&t.child.childLanes))return a3(e,t,n);return rJ(t),null!==(e=oe(e,t,n))?e.sibling:null}rJ(t);break;case 19:var i=0!=(128&e.flags);if((r=0!=(n&t.childLanes))||(oc(e,t,n,!1),r=0!=(n&t.childLanes)),i){if(r)return a7(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(rQ,rQ.current),!r)return null;break;case 22:case 23:return t.lanes=0,aJ(e,t,n);case 24:oo(t,r2,e.memoizedState.cache)}return oe(e,t,n)}(e,t,n);aG=0!=(131072&e.flags)}}else aG=!1,rf&&0!=(1048576&t.flags)&&rl(t,rt,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"==typeof r)ss(r)?(e=aI(r,e),t.tag=1,t=aZ(null,t,r,e,n)):(t.tag=0,t=aq(null,t,r,e,n));else{if(null!=r){if((i=r.$$typeof)===b){t.tag=11,t=aj(null,t,r,e,n);break t}if(i===w){t.tag=14,t=aW(null,t,r,e,n);break t}}throw Error(l(306,t=function e(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===P?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case f:return"Fragment";case h:return"Portal";case m:return"Profiler";case p:return"StrictMode";case x:return"Suspense";case _:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case y:return(t.displayName||"Context")+".Provider";case v:return(t._context.displayName||"Context")+".Consumer";case b:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case w:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case S:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(r)||r,""))}}return t;case 0:return aq(e,t,t.type,t.pendingProps,n);case 1:return i=aI(r=t.type,t.pendingProps),aZ(e,t,r,i,n);case 3:t:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(l(387));var a=t.pendingProps;r=(i=t.memoizedState).element,oy(e,t),oM(t,a,null,n);var o=t.memoizedState;if(oo(t,r2,a=o.cache),a!==i.cache&&ou(t,[r2],n,!0),oA(),a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=a$(e,t,a,n);break t}if(a!==r){rw(r=n9(Error(l(424)),t)),t=a$(e,t,a,n);break t}else for(rh=us(t.stateNode.containerInfo.firstChild),rd=t,rf=!0,rp=null,rm=!0,n=rU(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(r_(),a===r){t=oe(e,t,n);break t}aV(e,t,a,n)}t=t.child}return t;case 26:return aK(e,t),null===e?(n=ug(t.type,null,t.pendingProps,null))?t.memoizedState=n:rf||(n=t.type,e=t.pendingProps,(r=l5(q.current).createElement(n))[eN]=t,r[eF]=e,l2(r,n,e),eK(r),t.stateNode=r):t.memoizedState=ug(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ee(t),null===e&&rf&&(r=t.stateNode=uu(t.type,t.pendingProps,q.current),rd=t,rm=!0,rh=us(r.firstChild)),r=t.pendingProps.children,null!==e||rf?aV(e,t,r,n):t.child=rO(t,null,r,n),aK(e,t),t.child;case 5:return null===e&&rf&&((i=r=rh)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[eV])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence")||i!==n.rel||e.getAttribute("href")!==(null==n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===i)return e}if(null===(e=us(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,rm))?(t.stateNode=r,rd=t,rh=us(r.firstChild),rm=!1,i=!0):i=!1),i||rv(t)),ee(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,l8(i,a)?r=null:null!==o&&l8(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ix(e,t,iS,null,null,n),uN._currentValue=i),aK(e,t),aV(e,t,r,n),t.child;case 6:return null===e&&rf&&((e=n=rh)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;)if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n||null===(e=us(e.nextSibling)))return null;return e}(n,t.pendingProps,rm))?(t.stateNode=n,rd=t,rh=null,e=!0):e=!1),e||rv(t)),null;case 13:return a3(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=rO(t,null,r,n):aV(e,t,r,n),t.child;case 11:return aj(e,t,t.type,t.pendingProps,n);case 7:return aV(e,t,t.pendingProps,n),t.child;case 8:case 12:return aV(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,oo(t,t.type,r.value),aV(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,oh(t),r=r(i=of(i)),t.flags|=1,aV(e,t,r,n),t.child;case 14:return aW(e,t,t.type,t.pendingProps,n);case 15:return aX(e,t,t.type,t.pendingProps,n);case 19:return a7(e,t,n);case 22:return aJ(e,t,n);case 24:return oh(t),r=of(r2),null===e?(null===(i=ir())&&(i=sA,a=r3(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},ov(t),oo(t,r2,i)):(0!=(e.lanes&n)&&(oy(e,t),oM(t,null,null,n),oA()),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),oo(t,r2,r)):(oo(t,r2,r=a.cache),r!==i.cache&&ou(t,[r2],n,!0))),aV(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}var or=W(null),oi=null,oa=null;function oo(e,t,n){J(or,t._currentValue),t._currentValue=n}function os(e){e._currentValue=or.current,X(or)}function ol(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ou(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;t:for(;null!==a;){var s=a;a=i;for(var u=0;u<t.length;u++)if(s.context===t[u]){a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),ol(a.return,n,e),r||(o=null);break t}a=s.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(l(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),ol(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function oc(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a){if(0!=(524288&i.flags))a=!0;else if(0!=(262144&i.flags))break}if(10===i.tag){var o=i.alternate;if(null===o)throw Error(l(387));if(null!==(o=o.memoizedProps)){var s=i.type;nS(i.pendingProps.value,o.value)||(null!==e?e.push(s):e=[s])}}else if(i===Q.current){if(null===(o=i.alternate))throw Error(l(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(uN):e=[uN])}i=i.return}null!==e&&ou(t,e,n,r),t.flags|=262144}function od(e){for(e=e.firstContext;null!==e;){if(!nS(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function oh(e){oi=e,oa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function of(e){return om(oi,e)}function op(e,t){return null===oi&&oh(e),om(e,t)}function om(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===oa){if(null===e)throw Error(l(308));oa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else oa=oa.next=t;return n}var og=!1;function ov(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ob(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ox(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&sS)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=n4(e),n3(e,null,n),t}return n0(e,r,t,n),n4(e)}function o_(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194176&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eB(e,n)}}function ow(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var oS=!1;function oA(){if(oS){var e=r8;if(null!==e)throw e}}function oM(e,t,n,r){oS=!1;var i=e.updateQueue;og=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var h=-0x20000001&s.lane,f=h!==s.lane;if(f?(sE&h)===h:(r&h)===h){0!==h&&h===r9&&(oS=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});t:{var p=e,m=s;switch(h=t,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(n,d,h);break t}d=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(n,d,h):p))break t;d=B({},d,h);break t;case 2:og=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===a&&(i.shared.lanes=0),sk|=o,e.lanes=o,e.memoizedState=d}}function oE(e,t){if("function"!=typeof e)throw Error(l(191,e));e.call(t)}function oC(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)oE(n[e],t)}function oT(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){lf(t,t.return,e)}}function oR(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=t;try{s()}catch(e){lf(i,n,e)}}}r=r.next}while(r!==a)}}catch(e){lf(t,t.return,e)}}function oP(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{oC(t,n)}catch(t){lf(e,e.return,t)}}}function oI(e,t,n){n.props=aI(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){lf(e,t,n)}}function oB(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(n){lf(e,t,n)}}function oL(e,t){var n=e.ref,r=e.refCleanup;if(null!==n){if("function"==typeof r)try{r()}catch(n){lf(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){lf(e,t,n)}else n.current=null}}function ok(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){lf(e,e.return,t)}}function oD(e,t,n){try{var r=e.stateNode;(function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,s=null,u=null,c=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(p)||l0(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":s=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(l(137,t));break;default:p!==h&&l0(e,t,f,p,r,h)}}ti(e,o,s,u,c,d,a,i);return;case"select":for(a in p=o=s=f=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(a)||l0(e,t,a,null,r,u)}for(i in r)if(a=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=a||null!=u))switch(i){case"value":f=a;break;case"defaultValue":s=a;break;case"multiple":o=a;default:a!==u&&l0(e,t,i,a,r,u)}t=s,n=o,r=p,null!=f?ts(e,!!n,f,!1):!!r!=!!n&&(null!=t?ts(e,!!n,t,!0):ts(e,!!n,n?[]:"",!1));return;case"textarea":for(s in p=f=null,n)if(i=n[s],n.hasOwnProperty(s)&&null!=i&&!r.hasOwnProperty(s))switch(s){case"value":case"children":break;default:l0(e,t,s,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(l(91));break;default:i!==a&&l0(e,t,o,i,r,a)}tl(e,f,p);return;case"option":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&("selected"===m?e.selected=!1:l0(e,t,m,null,r,f));for(u in r)f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p)&&("selected"===u?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:l0(e,t,u,f,r,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&l0(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(l(137,t));break;default:l0(e,t,c,f,r,p)}return;default:if(tp(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&l1(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],r.hasOwnProperty(d)&&f!==p&&(void 0!==f||void 0!==p)&&l1(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&l0(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],r.hasOwnProperty(h)&&f!==p&&(null!=f||null!=p)&&l0(e,t,h,f,r,p)})(r,e.type,n,t),r[eF]=t}catch(t){lf(e,e.return,t)}}function oN(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function oF(e){t:for(;;){for(;null===e.sibling;){if(null===e.return||oN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue t;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oO(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(oO(e,t,n),e=e.sibling;null!==e;)oO(e,t,n),e=e.sibling}var oU=!1,oz=!1,oH=!1,oG="function"==typeof WeakSet?WeakSet:Set,oV=null,oj=!1;function oW(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:o2(e,n),4&r&&oT(5,n);break;case 1:if(o2(e,n),4&r){if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){lf(n,n.return,e)}else{var i=aI(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){lf(n,n.return,e)}}}64&r&&oP(n),512&r&&oB(n,n.return);break;case 3:if(o2(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{oC(r,e)}catch(e){lf(n,n.return,e)}}break;case 26:o2(e,n),512&r&&oB(n,n.return);break;case 27:case 5:o2(e,n),null===t&&4&r&&ok(n),512&r&&oB(n,n.return);break;case 12:default:o2(e,n);break;case 13:o2(e,n),4&r&&oq(e,n);break;case 22:if(!(i=null!==n.memoizedState||oU)){t=null!==t&&null!==t.memoizedState||oz;var a=oU,o=oz;oU=i,(oz=t)&&!o?function e(t,n,r){for(r=r&&0!=(8772&n.subtreeFlags),n=n.child;null!==n;){var i=n.alternate,a=t,o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(a,o,r),oT(4,o);break;case 1:if(e(a,o,r),"function"==typeof(a=(i=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){lf(i,i.return,e)}if(null!==(a=(i=o).updateQueue)){var l=i.stateNode;try{var u=a.shared.hiddenCallbacks;if(null!==u)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)oE(u[a],l)}catch(e){lf(i,i.return,e)}}r&&64&s&&oP(o),oB(o,o.return);break;case 26:case 27:case 5:e(a,o,r),r&&null===i&&4&s&&ok(o),oB(o,o.return);break;case 12:default:e(a,o,r);break;case 13:e(a,o,r),r&&4&s&&oq(a,o);break;case 22:null===o.memoizedState&&e(a,o,r),oB(o,o.return)}n=n.sibling}}(e,n,0!=(8772&n.subtreeFlags)):o2(e,n),oU=a,oz=o}512&r&&("manual"===n.memoizedProps.mode?oB(n,n.return):oL(n,n.return))}}var oX=null,oJ=!1;function oY(e,t,n){for(n=n.child;null!==n;)oK(e,t,n),n=n.sibling}function oK(e,t,n){if(ev&&"function"==typeof ev.onCommitFiberUnmount)try{ev.onCommitFiberUnmount(eg,n)}catch(e){}switch(n.tag){case 26:oz||oL(n,t),oY(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:oz||oL(n,t);var r=oX,i=oJ;for(oX=n.stateNode,oY(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);ej(n),oX=r,oJ=i;break;case 5:oz||oL(n,t);case 6:i=oX;var a=oJ;if(oX=null,oY(e,t,n),oX=i,oJ=a,null!==oX){if(oJ)try{e=oX,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(e){lf(n,t,e)}else try{oX.removeChild(n.stateNode)}catch(e){lf(n,t,e)}}break;case 18:null!==oX&&(oJ?(t=oX,n=n.stateNode,8===t.nodeType?ua(t.parentNode,n):1===t.nodeType&&ua(t,n),ca(t)):ua(oX,n.stateNode));break;case 4:r=oX,i=oJ,oX=n.stateNode.containerInfo,oJ=!0,oY(e,t,n),oX=r,oJ=i;break;case 0:case 11:case 14:case 15:oz||oR(2,n,t),oz||oR(4,n,t),oY(e,t,n);break;case 1:oz||(oL(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&oI(n,t,r)),oY(e,t,n);break;case 21:default:oY(e,t,n);break;case 22:oz||oL(n,t),oz=(r=oz)||null!==n.memoizedState,oY(e,t,n),oz=r}}function oq(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{ca(e)}catch(e){lf(t,t.return,e)}}function oQ(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new oG),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new oG),t;default:throw Error(l(435,e.tag))}}(e);t.forEach(function(t){var r=ly.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function oZ(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,s=o;t:for(;null!==s;){switch(s.tag){case 27:case 5:oX=s.stateNode,oJ=!1;break t;case 3:case 4:oX=s.stateNode.containerInfo,oJ=!0;break t}s=s.return}if(null===oX)throw Error(l(160));oK(a,o,i),oX=null,oJ=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)o0(t,e),t=t.sibling}var o$=null;function o0(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:oZ(t,e),o1(e),4&r&&(oR(3,e,e.return),oT(3,e),oR(5,e,e.return));break;case 1:oZ(t,e),o1(e),512&r&&(oz||null===n||oL(n,n.return)),64&r&&oU&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var i=o$;if(oZ(t,e),o1(e),512&r&&(oz||null===n||oL(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n){if(null===r){if(null===e.stateNode){t:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;n:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[eV]||a[eN]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),l2(a,r,n),a[eN]=e,eK(a),r=a;break t;case"link":var o=uC("link","href",i).get(r+(n.href||""));if(o){for(var s=0;s<o.length;s++)if((a=o[s]).getAttribute("href")===(null==n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(s,1);break n}}l2(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(o=uC("meta","content",i).get(r+(n.content||""))){for(s=0;s<o.length;s++)if((a=o[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(s,1);break n}}l2(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(l(468,r))}a[eN]=e,eK(a),r=a}e.stateNode=r}else uT(i,e.type,e.stateNode)}else e.stateNode=uw(i,r,e.memoizedProps)}else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?uT(i,e.type,e.stateNode):uw(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&oD(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){i=e.stateNode,a=e.memoizedProps;try{for(var u=i.firstChild;u;){var c=u.nextSibling,d=u.nodeName;u[eV]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===u.rel.toLowerCase()||i.removeChild(u),u=c}for(var h=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);l2(i,h,a),i[eN]=e,i[eF]=a}catch(t){lf(e,e.return,t)}}case 5:if(oZ(t,e),o1(e),512&r&&(oz||null===n||oL(n,n.return)),32&e.flags){i=e.stateNode;try{tc(i,"")}catch(t){lf(e,e.return,t)}}4&r&&null!=e.stateNode&&(i=e.memoizedProps,oD(e,i,null!==n?n.memoizedProps:i)),1024&r&&(oH=!0);break;case 6:if(oZ(t,e),o1(e),4&r){if(null===e.stateNode)throw Error(l(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){lf(e,e.return,t)}}break;case 3:if(uE=null,i=o$,o$=uh(t.containerInfo),oZ(t,e),o$=i,o1(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{ca(t.containerInfo)}catch(t){lf(e,e.return,t)}oH&&(oH=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var n=t;e(n),5===n.tag&&1024&n.flags&&n.stateNode.reset(),t=t.sibling}}(e));break;case 4:r=o$,o$=uh(e.stateNode.containerInfo),oZ(t,e),o1(e),o$=r;break;case 12:default:oZ(t,e),o1(e);break;case 13:oZ(t,e),o1(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(sG=es()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,oQ(e,r));break;case 22:if(512&r&&(oz||null===n||oL(n,n.return)),u=null!==e.memoizedState,c=null!==n&&null!==n.memoizedState,d=oU,h=oz,oU=d||u,oz=h||c,oZ(t,e),oz=h,oU=d,o1(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=u?-2&t._visibility:1|t._visibility,u&&(t=oU||oz,null===n||c||t||function e(t){for(t=t.child;null!==t;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:oR(4,n,n.return),e(n);break;case 1:oL(n,n.return);var r=n.stateNode;"function"==typeof r.componentWillUnmount&&oI(n,n.return,r),e(n);break;case 26:case 27:case 5:oL(n,n.return),e(n);break;case 22:oL(n,n.return),null===n.memoizedState&&e(n);break;default:e(n)}t=t.sibling}}(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))t:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,u)a=i.style,"function"==typeof a.setProperty?a.setProperty("display","none","important"):a.display="none";else{o=c.stateNode;var p=null!=(s=c.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null;o.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(e){lf(c,c.return,e)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(e){lf(c,c.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,oQ(e,n));break;case 19:oZ(t,e),o1(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,oQ(e,r));case 21:}}function o1(e){var t=e.flags;if(2&t){try{if(27!==e.tag){t:{for(var n=e.return;null!==n;){if(oN(n)){var r=n;break t}n=n.return}throw Error(l(160))}switch(r.tag){case 27:var i=r.stateNode,a=oF(e);oO(e,a,i);break;case 5:var o=r.stateNode;32&r.flags&&(tc(o,""),r.flags&=-33);var s=oF(e);oO(e,s,o);break;case 3:case 4:var u=r.stateNode.containerInfo,c=oF(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=l$));else if(4!==i&&27!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,c,u);break;default:throw Error(l(161))}}}catch(t){lf(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function o2(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)oW(e,t.alternate,t),t=t.sibling}function o3(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&r4(n))}function o4(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&r4(e))}function o5(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)o6(e,t,n,r),t=t.sibling}function o6(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:o5(e,t,n,r),2048&i&&oT(9,t);break;case 3:o5(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&r4(e)));break;case 12:if(2048&i){o5(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"==typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){lf(t,t.return,e)}}else o5(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?o5(e,t,n,r):o9(e,t):4&a._visibility?o5(e,t,n,r):(a._visibility|=4,function e(t,n,r,i,a){for(a=a&&0!=(10256&n.subtreeFlags),n=n.child;null!==n;){var o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(t,o,r,i,a),oT(8,o);break;case 23:break;case 22:var l=o.stateNode;null!==o.memoizedState?4&l._visibility?e(t,o,r,i,a):o9(t,o):(l._visibility|=4,e(t,o,r,i,a)),a&&2048&s&&o3(o.alternate,o);break;case 24:e(t,o,r,i,a),a&&2048&s&&o4(o.alternate,o);break;default:e(t,o,r,i,a)}n=n.sibling}}(e,t,n,r,0!=(10256&t.subtreeFlags))),2048&i&&o3(t.alternate,t);break;case 24:o5(e,t,n,r),2048&i&&o4(t.alternate,t);break;default:o5(e,t,n,r)}}function o9(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=t,r=n.flags;switch(n.tag){case 22:o9(e,n),2048&r&&o3(n.alternate,n);break;case 24:o9(e,n),2048&r&&o4(n.alternate,n);break;default:o9(e,n)}t=t.sibling}}var o8=8192;function o7(e){if(e.subtreeFlags&o8)for(e=e.child;null!==e;)se(e),e=e.sibling}function se(e){switch(e.tag){case 26:o7(e),e.flags&o8&&null!==e.memoizedState&&function(e,t,n){if(null===uP)throw Error(l(475));var r=uP;if("stylesheet"===t.type&&("string"!=typeof n.media||!1!==matchMedia(n.media).matches)&&0==(4&t.state.loading)){if(null===t.instance){var i=uv(n.href),a=e.querySelector(uy(i));if(a){null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=uB.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=a,eK(a);return}a=e.ownerDocument||e,n=ub(n),(i=uc.get(i))&&uA(n,i),eK(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),l2(a,"link",n),t.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0==(3&t.state.loading)&&(r.count++,t=uB.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(o$,e.memoizedState,e.memoizedProps);break;case 5:default:o7(e);break;case 3:case 4:var t=o$;o$=uh(e.stateNode.containerInfo),o7(e),o$=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=o8,o8=0x1000000,o7(e),o8=t):o7(e))}}function st(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function sn(e){var t=e.deletions;if(0!=(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];oV=r,si(r,e)}st(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)sr(e),e=e.sibling}function sr(e){switch(e.tag){case 0:case 11:case 15:sn(e),2048&e.flags&&oR(9,e,e.return);break;case 3:case 12:default:sn(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,function e(t){var n=t.deletions;if(0!=(16&t.flags)){if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];oV=i,si(i,t)}st(t)}for(t=t.child;null!==t;){switch((n=t).tag){case 0:case 11:case 15:oR(8,n,n.return),e(n);break;case 22:4&(r=n.stateNode)._visibility&&(r._visibility&=-5,e(n));break;default:e(n)}t=t.sibling}}(e)):sn(e)}}function si(e,t){for(;null!==oV;){var n=oV;switch(n.tag){case 0:case 11:case 15:oR(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:r4(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,oV=r;else for(n=e;null!==oV;){var i=(r=oV).sibling,a=r.return;if(!function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&ej(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(r),r===n){oV=null;break}if(null!==i){i.return=a,oV=i;break}oV=a}}}function sa(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function so(e,t,n,r){return new sa(e,t,n,r)}function ss(e){return!(!(e=e.prototype)||!e.isReactComponent)}function sl(e,t){var n=e.alternate;return null===n?((n=so(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=0x1e00000&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function su(e,t){e.flags&=0x1e00002;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function sc(e,t,n,r,i,a){var o=0;if(r=e,"function"==typeof e)ss(e)&&(o=1);else if("string"==typeof e)o=!function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;if("stylesheet"===t.rel)return e=t.disabled,"string"==typeof t.precedence&&null==e;return!0;case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,Y.current)?"html"===e||"head"===e||"body"===e?27:5:26;else t:switch(e){case f:return sd(n.children,i,a,t);case p:o=8,i|=24;break;case m:return(e=so(12,n,t,2|i)).elementType=m,e.lanes=a,e;case x:return(e=so(13,n,t,i)).elementType=x,e.lanes=a,e;case _:return(e=so(19,n,t,i)).elementType=_,e.lanes=a,e;case A:return sh(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case g:case y:o=10;break t;case v:o=9;break t;case b:o=11;break t;case w:o=14;break t;case S:o=16,r=null;break t}o=29,n=Error(l(130,null===e?"null":typeof e,"")),r=null}return(t=so(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function sd(e,t,n,r){return(e=so(7,e,r,t)).lanes=n,e}function sh(e,t,n,r){(e=so(22,e,r,t)).elementType=A,e.lanes=n;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(l(456));if(0==(2&i._pendingVisibility)){var t=n2(e,2);null!==t&&(i._pendingVisibility|=2,s1(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(l(456));if(0!=(2&i._pendingVisibility)){var t=n2(e,2);null!==t&&(i._pendingVisibility&=-3,s1(t,e,2))}}};return e.stateNode=i,e}function sf(e,t,n){return(e=so(6,e,null,t)).lanes=n,e}function sp(e,t,n){return(t=so(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sm(e){e.flags|=4}function sg(e,t){if("stylesheet"!==t.type||0!=(4&t.state.loading))e.flags&=-0x1000001;else if(e.flags|=0x1000000,!uR(t)){if(null!==(t=rW.current)&&((4194176&sE)===sE?null!==rX:(0x3c00000&sE)!==sE&&0==(0x20000000&sE)||t!==rX))throw rR=rM,rA;e.flags|=8192}}function sv(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?eT():0x20000000,e.lanes|=t,sO|=t)}function sy(e,t){if(!rf)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sb(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0x1e00000&i.subtreeFlags,r|=0x1e00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sx(e,t){switch(rc(t),t.tag){case 3:os(r2),$();break;case 26:case 27:case 5:et(t);break;case 4:$();break;case 13:rq(t);break;case 19:X(rQ);break;case 10:os(t.type);break;case 22:case 23:rq(t),rj(),null!==e&&X(it);break;case 24:os(r2)}}var s_={getCacheForType:function(e){var t=of(r2),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},sw="function"==typeof WeakMap?WeakMap:Map,sS=0,sA=null,sM=null,sE=0,sC=0,sT=null,sR=!1,sP=!1,sI=!1,sB=0,sL=0,sk=0,sD=0,sN=0,sF=0,sO=0,sU=null,sz=null,sH=!1,sG=0,sV=1/0,sj=null,sW=null,sX=!1,sJ=null,sY=0,sK=0,sq=null,sQ=0,sZ=null;function s$(){if(0!=(2&sS)&&0!==sE)return sE&-sE;if(null!==I.T){var e=r9;return 0!==e?e:lI()}return ek()}function s0(){0===sF&&(sF=0==(0x20000000&sE)||rf?eC():0x20000000);var e=rW.current;return null!==e&&(e.flags|=32),sF}function s1(e,t,n){(e===sA&&2===sC||null!==e.cancelPendingCommit)&&(s8(e,0),s5(e,sE,sF,!1)),eP(e,n),(0==(2&sS)||e!==sA)&&(e===sA&&(0==(2&sS)&&(sD|=n),4===sL&&s5(e,sE,sF,!1)),lM(e))}function s2(e,t,n){if(0!=(6&sS))throw Error(l(327));for(var r=!n&&0==(60&t)&&0==(t&e.expiredLanes)||eE(e,t),i=r?function(e,t){var n=sS;sS|=2;var r=le(),i=lt();sA!==e||sE!==t?(sj=null,sV=es()+500,s8(e,t)):sP=eE(e,t);t:for(;;)try{if(0!==sC&&null!==sM){t=sM;var a=sT;n:switch(sC){case 1:sC=0,sT=null,lo(e,t,a,1);break;case 2:if(rE(a)){sC=0,sT=null,la(t);break}t=function(){2===sC&&sA===e&&(sC=7),lM(e)},a.then(t,t);break t;case 3:sC=7;break t;case 4:sC=5;break t;case 7:rE(a)?(sC=0,sT=null,la(t)):(sC=0,sT=null,lo(e,t,a,7));break;case 5:var o=null;switch(sM.tag){case 26:o=sM.memoizedState;case 5:case 27:var s=sM;if(o?uR(o):1){sC=0,sT=null;var u=s.sibling;if(null!==u)sM=u;else{var c=s.return;null!==c?(sM=c,ls(c)):sM=null}break n}}sC=0,sT=null,lo(e,t,a,5);break;case 6:sC=0,sT=null,lo(e,t,a,6);break;case 8:s9(),sL=6;break t;default:throw Error(l(462))}}!function(){for(;null!==sM&&!ea();)li(sM)}();break}catch(t){s7(e,t)}return(oa=oi=null,I.H=r,I.A=i,sS=n,null!==sM)?0:(sA=null,sE=0,n$(),sL)}(e,t):lr(e,t,!0),a=r;;){if(0===i)sP&&!r&&s5(e,t,0,!1);else if(6===i)s5(e,t,0,!sR);else{if(n=e.current.alternate,a&&!function(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!nS(a(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)){i=lr(e,t,!1),a=!1;continue}if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!=(o=-0x20000001&e.pendingLanes)?o:0x20000000&o?0x20000000:0;if(0!==o){t=o;t:{i=sU;var s=e.current.memoizedState.isDehydrated;if(s&&(s8(e,o).flags|=256),2!==(o=lr(e,o,!1))){if(sI&&!s){e.errorRecoveryDisabledLanes|=a,sD|=a,i=4;break t}a=sz,sz=i,null!==a&&s3(a)}i=o}if(a=!1,2!==i)continue}}if(1===i){s8(e,0),s5(e,t,0,!0);break}t:{switch(r=e,i){case 0:case 1:throw Error(l(345));case 4:if((4194176&t)===t){s5(r,t,sF,!sR);break t}break;case 2:sz=null;break;case 3:case 5:break;default:throw Error(l(329))}if(r.finishedWork=n,r.finishedLanes=t,(0x3c00000&t)===t&&10<(a=sG+300-es())){if(s5(r,t,sF,!sR),0!==eM(r,0))break t;r.timeoutHandle=ue(s4.bind(null,r,n,sz,sj,sH,t,sF,sD,sO,sR,2,-0,0),a);break t}s4(r,n,sz,sj,sH,t,sF,sD,sO,sR,0,-0,0)}}break}lM(e)}function s3(e){null===sz?sz=e:sz.push.apply(sz,e)}function s4(e,t,n,r,i,a,o,s,u,c,d,h,f){var p=t.subtreeFlags;if((8192&p||0x1002000==(0x1002000&p))&&(uP={stylesheets:null,count:0,unsuspend:uI},se(t),null!==(t=function(){if(null===uP)throw Error(l(475));var e=uP;return e.stylesheets&&0===e.count&&uk(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&uk(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}()))){e.cancelPendingCommit=t(lu.bind(null,e,n,r,i,o,s,u,1,h,f)),s5(e,a,o,!c);return}lu(e,n,r,i,o,s,u,d,h,f)}function s5(e,t,n,r){t&=~sN,t&=~sD,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-eb(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&eI(e,n,t)}function s6(){return 0!=(6&sS)||(lE(0,!1),!1)}function s9(){if(null!==sM){if(0===sC)var e=sM.return;else e=sM,oa=oi=null,iE(e),rI=null,rB=0,e=sM;for(;null!==e;)sx(e.alternate,e),e=e.return;sM=null}}function s8(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ut(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),s9(),sA=e,sM=n=sl(e.current,null),sE=t,sC=0,sT=null,sR=!1,sP=eE(e,t),sI=!1,sO=sF=sN=sD=sk=sL=0,sz=sU=null,sH=!1,0!=(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-eb(r),a=1<<i;t|=e[i],r&=~a}return sB=t,n$(),n}function s7(e,t){is=null,I.H=aS,t===rS?(t=rP(),sC=3):t===rA?(t=rP(),sC=4):sC=t===aH?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,sT=t,null===sM&&(sL=1,aN(e,n9(t,e.current)))}function le(){var e=I.H;return I.H=aS,null===e?aS:e}function lt(){var e=I.A;return I.A=s_,e}function ln(){sL=4,sR||(4194176&sE)!==sE&&null!==rW.current||(sP=!0),0==(0x7ffffff&sk)&&0==(0x7ffffff&sD)||null===sA||s5(sA,sE,sF,!1)}function lr(e,t,n){var r=sS;sS|=2;var i=le(),a=lt();(sA!==e||sE!==t)&&(sj=null,s8(e,t)),t=!1;var o=sL;t:for(;;)try{if(0!==sC&&null!==sM){var s=sM,l=sT;switch(sC){case 8:s9(),o=6;break t;case 3:case 2:case 6:null===rW.current&&(t=!0);var u=sC;if(sC=0,sT=null,lo(e,s,l,u),n&&sP){o=0;break t}break;default:u=sC,sC=0,sT=null,lo(e,s,l,u)}}(function(){for(;null!==sM;)li(sM)})(),o=sL;break}catch(t){s7(e,t)}return t&&e.shellSuspendCounter++,oa=oi=null,sS=r,I.H=i,I.A=a,null===sM&&(sA=null,sE=0,n$()),o}function li(e){var t=on(e.alternate,e,sB);e.memoizedProps=e.pendingProps,null===t?ls(e):sM=t}function la(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=aQ(n,t,t.pendingProps,t.type,void 0,sE);break;case 11:t=aQ(n,t,t.pendingProps,t.type.render,t.ref,sE);break;case 5:iE(t);default:sx(n,t),t=on(n,t=sM=su(t,sB),sB)}e.memoizedProps=e.pendingProps,null===t?ls(e):sM=t}function lo(e,t,n,r){oa=oi=null,iE(t),rI=null,rB=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&oc(t,n,i,!0),null!==(n=rW.current)){switch(n.tag){case 13:return null===rX?ln():null===n.alternate&&0===sL&&(sL=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===rM?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),lp(e,r,i)),!1;case 22:return n.flags|=65536,r===rM?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),lp(e,r,i)),!1}throw Error(l(435,n.tag))}return lp(e,r,i),ln(),!1}if(rf)return null!==(t=rW.current)?(0==(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==rg&&rw(n9(e=Error(l(422),{cause:r}),n))):(r!==rg&&rw(n9(t=Error(l(423),{cause:r}),n)),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,r=n9(r,n),i=aO(e.stateNode,r,i),ow(e,i),4!==sL&&(sL=2)),!1;var a=Error(l(520),{cause:r});if(a=n9(a,n),null===sU?sU=[a]:sU.push(a),4!==sL&&(sL=2),null===t)return!0;r=n9(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=aO(n.stateNode,r,e),ow(n,e),!1;case 1:if(t=n.type,a=n.stateNode,0==(128&n.flags)&&("function"==typeof t.getDerivedStateFromError||null!==a&&"function"==typeof a.componentDidCatch&&(null===sW||!sW.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,az(i=aU(i),e,n,r),ow(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sE)){sL=1,aN(e,n9(n,e.current)),sM=null;return}}catch(t){if(null!==i)throw sM=i,t;sL=1,aN(e,n9(n,e.current)),sM=null;return}32768&t.flags?(rf||1===r?e=!0:sP||0!=(0x20000000&sE)?e=!1:(sR=e=!0,(2===r||3===r||6===r)&&null!==(r=rW.current)&&13===r.tag&&(r.flags|=16384)),ll(t,e)):ls(t)}function ls(e){var t=e;do{if(0!=(32768&t.flags)){ll(t,sR);return}e=t.return;var n=function(e,t,n){var r=t.pendingProps;switch(rc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sb(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),os(r2),$(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(rx(t)?sm(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==rp&&(s3(rp),rp=null))),sb(t),null;case 26:return n=t.memoizedState,null===e?(sm(t),null!==n?(sb(t),sg(t,n)):(sb(t),t.flags&=-0x1000001)):n?n!==e.memoizedState?(sm(t),sb(t),sg(t,n)):(sb(t),t.flags&=-0x1000001):(e.memoizedProps!==r&&sm(t),sb(t),t.flags&=-0x1000001),null;case 27:et(t),n=q.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sm(t);else{if(!r){if(null===t.stateNode)throw Error(l(166));return sb(t),null}e=Y.current,rx(t)?ry(t,e):(e=uu(i,r,n),t.stateNode=e,sm(t))}return sb(t),null;case 5:if(et(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sm(t);else{if(!r){if(null===t.stateNode)throw Error(l(166));return sb(t),null}if(e=Y.current,rx(t))ry(t,e);else{switch(i=l5(q.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[eN]=t,e[eF]=r;t:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(t.stateNode=e,l2(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break;case"img":e=!0;break;default:e=!1}e&&sm(t)}}return sb(t),t.flags&=-0x1000001,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sm(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(l(166));if(e=q.current,rx(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=rd))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[eN]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||lZ(e.nodeValue,n)))||rv(t)}else(e=l5(e).createTextNode(r))[eN]=t,t.stateNode=e}return sb(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=rx(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(l(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(l(317));i[eN]=t}else r_(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sb(t),i=!1}else null!==rp&&(s3(rp),rp=null),i=!0;if(!i){if(256&t.flags)return rq(t),t;return rq(t),null}}if(rq(t),0!=(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){r=t.child,i=null,null!==r.alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),sv(t,t.updateQueue),sb(t),null;case 4:return $(),null===e&&lG(t.stateNode.containerInfo),sb(t),null;case 10:return os(t.type),sb(t),null;case 19:if(X(rQ),null===(i=t.memoizedState))return sb(t),null;if(r=0!=(128&t.flags),null===(a=i.rendering)){if(r)sy(i,!1);else{if(0!==sL||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=rZ(e))){for(t.flags|=128,sy(i,!1),e=a.updateQueue,t.updateQueue=e,sv(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)su(n,e),n=n.sibling;return J(rQ,1&rQ.current|2),t.child}e=e.sibling}null!==i.tail&&es()>sV&&(t.flags|=128,r=!0,sy(i,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=rZ(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,sv(t,e),sy(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!rf)return sb(t),null}else 2*es()-i.renderingStartTime>sV&&0x20000000!==n&&(t.flags|=128,r=!0,sy(i,!1),t.lanes=4194304)}i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}if(null!==i.tail)return t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=es(),t.sibling=null,e=rQ.current,J(rQ,r?1&e|2:1&e),t;return sb(t),null;case 22:case 23:return rq(t),rj(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!=(0x20000000&n)&&0==(128&t.flags)&&(sb(t),6&t.subtreeFlags&&(t.flags|=8192)):sb(t),null!==(n=t.updateQueue)&&sv(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&X(it),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),os(r2),sb(t),null;case 25:return null}throw Error(l(156,t.tag))}(t.alternate,t,sB);if(null!==n){sM=n;return}if(null!==(t=t.sibling)){sM=t;return}sM=t=e}while(null!==t);0===sL&&(sL=5)}function ll(e,t){do{var n=function(e,t){switch(rc(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(r2),$(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return et(t),null;case 13:if(rq(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));r_()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return X(rQ),null;case 4:return $(),null;case 10:return os(t.type),null;case 22:case 23:return rq(t),rj(),null!==e&&X(it),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return os(r2),null;default:return null}}(e.alternate,e);if(null!==n){n.flags&=32767,sM=n;return}if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling)){sM=e;return}sM=e=n}while(null!==e);sL=6,sM=null}function lu(e,t,n,r,i,a,o,s,u,c){var d=I.T,h=H.p;try{H.p=2,I.T=null,function(e,t,n,r,i,a,o,s){do ld();while(null!==sJ);if(0!=(6&sS))throw Error(l(327));var u,c,d=e.finishedWork;if(r=e.finishedLanes,null!==d){if(e.finishedWork=null,e.finishedLanes=0,d===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var h=d.lanes|d.childLanes;if(function(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-eb(n),d=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-0x20000001)}n&=~d}0!==r&&eI(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,r,h|=nZ,a,o,s),e===sA&&(sM=sA=null,sE=0),0==(10256&d.subtreeFlags)&&0==(10256&d.flags)||sX||(sX=!0,sK=h,sq=n,u=ed,c=function(){return ld(!0),null},er(u,c)),n=0!=(15990&d.flags),0!=(15990&d.subtreeFlags)||n?(n=I.T,I.T=null,a=H.p,H.p=2,o=sS,sS|=4,function(e,t){if(e=e.containerInfo,l3=uj,nT(e=nC(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i,a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break t}var s=0,u=-1,c=-1,d=0,h=0,f=e,p=null;n:for(;;){for(;f!==n||0!==a&&3!==f.nodeType||(u=s+a),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(i=f.firstChild);)p=f,f=i;for(;;){if(f===e)break n;if(p===n&&++d===a&&(u=s),p===o&&++h===r&&(c=s),null!==(i=f.nextSibling))break;p=(f=p).parentNode}f=i}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(l4={focusedElem:e,selectionRange:n},uj=!1,oV=t;null!==oV;)if(e=(t=oV).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,oV=e;else for(;null!==oV;){switch(o=(t=oV).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!=(1024&e)&&null!==o){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=aI(n.type,a,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){lf(n,n.return,e)}}break;case 3:if(0!=(1024&e)){if(9===(n=(e=t.stateNode.containerInfo).nodeType))uo(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":uo(e);break;default:e.textContent=""}}break;default:if(0!=(1024&e))throw Error(l(163))}if(null!==(e=t.sibling)){e.return=t.return,oV=e;break}oV=t.return}m=oj,oj=!1}(e,d),o0(d,e),function(e,t){var n=nC(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(t.ownerDocument.documentElement,t)){if(null!==r&&nT(t)){if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=nE(t,a);var o=nE(t,r);i&&o&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}(l4,e.containerInfo),uj=!!l3,l4=l3=null,e.current=d,oW(e,d.alternate,d),eo(),sS=o,H.p=a,I.T=n):e.current=d,sX?(sX=!1,sJ=e,sY=r):lc(e,h),0===(h=e.pendingLanes)&&(sW=null),function(e){if(ev&&"function"==typeof ev.onCommitFiberRoot)try{ev.onCommitFiberRoot(eg,e,void 0,128==(128&e.current.flags))}catch(e){}}(d.stateNode,i),lM(e),null!==t)for(i=e.onRecoverableError,d=0;d<t.length;d++)i((h=t[d]).value,{componentStack:h.stack});0!=(3&sY)&&ld(),h=e.pendingLanes,0!=(4194218&r)&&0!=(42&h)?e===sZ?sQ++:(sQ=0,sZ=e):sQ=0,lE(0,!1)}}(e,t,n,r,h,i,a,o,s,u,c)}finally{I.T=d,H.p=h}}function lc(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,r4(t))}function ld(){if(null!==sJ){var e=sJ,t=sK;sK=0;var n=eL(sY),r=I.T,i=H.p;try{if(H.p=32>n?32:n,I.T=null,null===sJ)var a=!1;else{n=sq,sq=null;var o=sJ,s=sY;if(sJ=null,sY=0,0!=(6&sS))throw Error(l(331));var u=sS;if(sS|=4,sr(o.current),o6(o,o.current,s,n),sS=u,lE(0,!1),ev&&"function"==typeof ev.onPostCommitFiberRoot)try{ev.onPostCommitFiberRoot(eg,o)}catch(e){}a=!0}return a}finally{H.p=i,I.T=r,lc(e,t)}}return!1}function lh(e,t,n){t=n9(n,t),t=aO(e.stateNode,t,2),null!==(e=ox(e,t,2))&&(eP(e,2),lM(e))}function lf(e,t,n){if(3===e.tag)lh(e,e,n);else for(;null!==t;){if(3===t.tag){lh(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===sW||!sW.has(r))){e=n9(n,e),null!==(r=ox(t,n=aU(2),2))&&(az(n,r,t,e),eP(r,2),lM(r));break}}t=t.return}}function lp(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new sw;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(sI=!0,i.add(n),e=lm.bind(null,e,t,n),t.then(e,e))}function lm(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sA===e&&(sE&n)===n&&(4===sL||3===sL&&(0x3c00000&sE)===sE&&300>es()-sG?0==(2&sS)&&s8(e,0):sN|=n,sO===sE&&(sO=0)),lM(e)}function lg(e,t){0===t&&(t=eT()),null!==(e=n2(e,t))&&(eP(e,t),lM(e))}function lv(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),lg(e,n)}function ly(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}null!==r&&r.delete(t),lg(e,n)}var lb=null,lx=null,l_=!1,lw=!1,lS=!1,lA=0;function lM(e){var t;e!==lx&&null===e.next&&(null===lx?lb=lx=e:lx=lx.next=e),lw=!0,l_||(l_=!0,t=lC,ur(function(){0!=(6&sS)?er(eu,t):t()}))}function lE(e,t){if(!lS&&lw){lS=!0;do for(var n=!1,r=lb;null!==r;){if(!t){if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=0xc000055&(a=(1<<31-eb(42|e)+1)-1&(i&~(o&~s)))?0xc000055&a|1:a?2|a:0}0!==a&&(n=!0,lP(r,a))}else a=sE,0==(3&(a=eM(r,r===sA?a:0)))||eE(r,a)||(n=!0,lP(r,a))}r=r.next}while(n);lS=!1}}function lC(){lw=l_=!1;var e,t=0;0!==lA&&(((e=window.event)&&"popstate"===e.type?e===l7||(l7=e,0):(l7=null,1))||(t=lA),lA=0);for(var n=es(),r=null,i=lb;null!==i;){var a=i.next,o=lT(i,n);0===o?(i.next=null,null===r?lb=a:r.next=a,null===a&&(lx=r)):(r=i,(0!==t||0!=(3&o))&&(lw=!0)),i=a}lE(t,!1)}function lT(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-0x3c00001&e.pendingLanes;0<a;){var o=31-eb(a),s=1<<o,l=i[o];-1===l?(0==(s&n)||0!=(s&r))&&(i[o]=function(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(t=sA,n=sE,n=eM(e,e===t?n:0),r=e.callbackNode,0===n||e===t&&2===sC||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ei(r),e.callbackNode=null,e.callbackPriority=0;if(0==(3&n)||eE(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ei(r),eL(n)){case 2:case 8:n=ec;break;case 32:default:n=ed;break;case 0x10000000:n=ef}return n=er(n,r=lR.bind(null,e)),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ei(r),e.callbackPriority=2,e.callbackNode=null,2}function lR(e,t){var n=e.callbackNode;if(ld()&&e.callbackNode!==n)return null;var r=sE;return 0===(r=eM(e,e===sA?r:0))?null:(s2(e,r,t),lT(e,es()),null!=e.callbackNode&&e.callbackNode===n?lR.bind(null,e):null)}function lP(e,t){if(ld())return null;s2(e,t,!0)}function lI(){return 0===lA&&(lA=eC()),lA}function lB(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:tv(""+e)}function lL(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var lk=0;lk<nY.length;lk++){var lD=nY[lk];nK(lD.toLowerCase(),"on"+(lD[0].toUpperCase()+lD.slice(1)))}nK(nz,"onAnimationEnd"),nK(nH,"onAnimationIteration"),nK(nG,"onAnimationStart"),nK("dblclick","onDoubleClick"),nK("focusin","onFocus"),nK("focusout","onBlur"),nK(nV,"onTransitionRun"),nK(nj,"onTransitionStart"),nK(nW,"onTransitionCancel"),nK(nX,"onTransitionEnd"),e$("onMouseEnter",["mouseout","mouseover"]),e$("onMouseLeave",["mouseout","mouseover"]),e$("onPointerEnter",["pointerout","pointerover"]),e$("onPointerLeave",["pointerout","pointerover"]),eZ("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eZ("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eZ("onBeforeInput",["compositionend","keypress","textInput","paste"]),eZ("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eZ("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eZ("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lN="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lN));function lO(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break t;a=s,i.currentTarget=u;try{a(i)}catch(e){aB(e)}i.currentTarget=null,a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break t;a=s,i.currentTarget=u;try{a(i)}catch(e){aB(e)}i.currentTarget=null,a=l}}}}function lU(e,t){var n=t[eU];void 0===n&&(n=t[eU]=new Set);var r=e+"__bubble";n.has(r)||(lV(t,e,2,!1),n.add(r))}function lz(e,t,n){var r=0;t&&(r|=4),lV(n,e,r,t)}var lH="_reactListening"+Math.random().toString(36).slice(2);function lG(e){if(!e[lH]){e[lH]=!0,eq.forEach(function(t){"selectionchange"!==t&&(lF.has(t)||lz(t,!1,e),lz(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[lH]||(t[lH]=!0,lz("selectionchange",!1,t))}}function lV(e,t,n,r){switch(uQ(t)){case 2:var i=uW;break;case 8:i=uX;break;default:i=uJ}n=i.bind(null,t,n,e),i=void 0,tE&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function lj(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=eW(s)))return;if(5===(l=o.tag)||6===l||26===l||27===l){r=a=o;continue t}s=s.parentNode}}r=r.return}tA(function(){var r=a,i=tb(n),o=[];t:{var s=nJ.get(e);if(void 0!==s){var l=tz,u=e;switch(e){case"keypress":if(0===tB(n))break t;case"keydown":case"keyup":l=t1;break;case"focusin":u="focus",l=tX;break;case"focusout":u="blur",l=tX;break;case"beforeblur":case"afterblur":l=tX;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=tj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=tW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=t3;break;case nz:case nH:case nG:l=tJ;break;case nX:l=t4;break;case"scroll":case"scrollend":l=tG;break;case"wheel":l=t5;break;case"copy":case"cut":case"paste":l=tY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=t2;break;case"toggle":case"beforetoggle":l=t6}var c=0!=(4&t),d=!c&&("scroll"===e||"scrollend"===e),h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===h||null!=(m=tM(p,h))&&c.push(lW(p,m,f)),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0==(7&t)){if(s="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(s&&n!==ty&&(u=n.relatedTarget||n.fromElement)&&(eW(u)||u[eO]))&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,null!==(u=u?eW(u):null)&&(d=F(u),c=u.tag,u!==d||5!==c&&27!==c&&6!==c)&&(u=null)):(l=null,u=r),l!==u)){if(c=tj,m="onMouseLeave",h="onMouseEnter",p="mouse",("pointerout"===e||"pointerover"===e)&&(c=t2,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:eJ(l),f=null==u?s:eJ(u),(s=new c(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,eW(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)n:{for(c=l,h=u,p=0,f=c;f;f=lJ(f))p++;for(f=0,m=h;m;m=lJ(m))f++;for(;0<p-f;)c=lJ(c),p--;for(;0<f-p;)h=lJ(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break n;c=lJ(c),h=lJ(h)}c=null}else c=null;null!==l&&lY(o,s,l,c,!1),null!==u&&null!==d&&lY(o,d,u,c,!0)}t:{if("select"===(l=(s=r?eJ(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g,v=nf;else if(ns(s)){if(np)v=nw;else{v=nx;var y=nb}}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)?v=n_:r&&tp(r.elementType)&&(v=nf);if(v&&(v=v(e,r))){nl(o,v,n,i);break t}y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&to(s,"number",s.value)}switch(y=r?eJ(r):window,e){case"focusin":(ns(y)||"true"===y.contentEditable)&&(nP=y,nI=r,nB=null);break;case"focusout":nB=nI=nP=null;break;case"mousedown":nL=!0;break;case"contextmenu":case"mouseup":case"dragend":nL=!1,nk(o,n,i);break;case"selectionchange":if(nR)break;case"keydown":case"keyup":nk(o,n,i)}if(t8)n:{switch(e){case"compositionstart":var b="onCompositionStart";break n;case"compositionend":b="onCompositionEnd";break n;case"compositionupdate":b="onCompositionUpdate";break n}b=void 0}else na?nr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(nt&&"ko"!==n.locale&&(na||"onCompositionStart"!==b?"onCompositionEnd"===b&&na&&(g=tI()):(tR="value"in(tT=i)?tT.value:tT.textContent,na=!0)),0<(y=lX(r,b)).length&&(b=new tK(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=ni(n))&&(b.data=g))),(g=ne?function(e,t){switch(e){case"compositionend":return ni(t);case"keypress":if(32!==t.which)return null;return nn=!0," ";case"textInput":return" "===(e=t.data)&&nn?null:e;default:return null}}(e,n):function(e,t){if(na)return"compositionend"===e||!t8&&nr(e,t)?(e=tI(),tP=tR=tT=null,na=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nt&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(b=lX(r,"onBeforeInput")).length&&(y=new tK("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:b}),y.data=g),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var a=lB((i[eF]||null).action),o=r.submitter;o&&null!==(t=(t=o[eF]||null)?lB(t.formAction):o.getAttribute("formAction"))&&(a=t,o=null);var s=new tz("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==lA){var e=o?lL(i,o):new FormData(i);au(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"==typeof a&&(s.preventDefault(),au(n,{pending:!0,data:e=o?lL(i,o):new FormData(i),method:i.method,action:a},a,e))},currentTarget:i}]})}}(o,e,r,n,i)}lO(o,t)})}function lW(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lX(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=tM(e,n))&&r.unshift(lW(e,i,a)),null!=(i=tM(e,t))&&r.push(lW(e,i,a))),e=e.return}return r}function lJ(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag&&27!==e.tag);return e||null}function lY(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=tM(n,a))&&o.unshift(lW(n,u,l)):i||null!=(u=tM(n,a))&&o.push(lW(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var lK=/\r\n?/g,lq=/\u0000|\uFFFD/g;function lQ(e){return("string"==typeof e?e:""+e).replace(lK,"\n").replace(lq,"")}function lZ(e,t){return t=lQ(t),lQ(e)===t}function l$(){}function l0(e,t,n,r,i,a){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||tc(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&tc(e,""+r);break;case"className":e5(e,"class",r);break;case"tabIndex":e5(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":e5(e,n,r);break;case"style":tf(e,r,a);break;case"data":if("object"!==t){e5(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)||null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=tv(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&l0(e,t,"name",i.name,i,null),l0(e,t,"formEncType",i.formEncType,i,null),l0(e,t,"formMethod",i.formMethod,i,null),l0(e,t,"formTarget",i.formTarget,i,null)):(l0(e,t,"encType",i.encType,i,null),l0(e,t,"method",i.method,i,null),l0(e,t,"target",i.target,i,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=tv(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=l$);break;case"onScroll":null!=r&&lU("scroll",e);break;case"onScrollEnd":null!=r&&lU("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(l(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":case"innerText":case"textContent":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=tv(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":lU("beforetoggle",e),lU("toggle",e),e4(e,"popover",r);break;case"xlinkActuate":e6(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":e6(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":e6(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":e6(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":e6(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":e6(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":e6(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":e6(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":e6(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":e4(e,"is",r);break;default:2<n.length&&("o"===n[0]||"O"===n[0])&&("n"===n[1]||"N"===n[1])||e4(e,n=tm.get(n)||n,r)}}function l1(e,t,n,r,i,a){switch(n){case"style":tf(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(l(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(l(60));e.innerHTML=n}}break;case"children":"string"==typeof r?tc(e,r):("number"==typeof r||"bigint"==typeof r)&&tc(e,""+r);break;case"onScroll":null!=r&&lU("scroll",e);break;case"onScrollEnd":null!=r&&lU("scrollend",e);break;case"onClick":null!=r&&(e.onclick=l$);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:if(!eQ.hasOwnProperty(n))t:{if("o"===n[0]&&"n"===n[1]&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(a=null!=(a=e[eF]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"==typeof r)){"function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i);break t}n in e?e[n]=r:!0===r?e.setAttribute(n,""):e4(e,n,r)}}}function l2(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lU("error",e),lU("load",e);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:l0(e,t,r,o,n,null)}}a&&l0(e,t,"srcSet",n.srcSet,n,null),i&&l0(e,t,"src",n.src,n,null);return;case"input":lU("invalid",e);var s=r=o=a=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(l(137,t));break;default:l0(e,t,i,d,n,null)}}ta(e,r,s,u,c,o,a,!1),e7(e);return;case"select":for(a in lU("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(s=n[a]))switch(a){case"value":r=s;break;case"defaultValue":o=s;break;case"multiple":i=s;default:l0(e,t,a,s,n,null)}t=r,n=o,e.multiple=!!i,null!=t?ts(e,!!i,t,!1):null!=n&&ts(e,!!i,n,!0);return;case"textarea":for(o in lU("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(s=n[o]))switch(o){case"value":i=s;break;case"defaultValue":a=s;break;case"children":r=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(l(91));break;default:l0(e,t,o,s,n,null)}tu(e,i,a,r),e7(e);return;case"option":for(u in n)n.hasOwnProperty(u)&&null!=(i=n[u])&&("selected"===u?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:l0(e,t,u,i,n,null));return;case"dialog":lU("cancel",e),lU("close",e);break;case"iframe":case"object":lU("load",e);break;case"video":case"audio":for(i=0;i<lN.length;i++)lU(lN[i],e);break;case"image":lU("error",e),lU("load",e);break;case"details":lU("toggle",e);break;case"embed":case"source":case"link":lU("error",e),lU("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:l0(e,t,c,i,n,null)}return;default:if(tp(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(i=n[d])&&l1(e,t,d,i,n,void 0);return}}for(s in n)n.hasOwnProperty(s)&&null!=(i=n[s])&&l0(e,t,s,i,n,null)}var l3=null,l4=null;function l5(e){return 9===e.nodeType?e:e.ownerDocument}function l6(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l9(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function l8(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var l7=null,ue="function"==typeof setTimeout?setTimeout:void 0,ut="function"==typeof clearTimeout?clearTimeout:void 0,un="function"==typeof Promise?Promise:void 0,ur="function"==typeof queueMicrotask?queueMicrotask:void 0!==un?function(e){return un.resolve(null).then(e).catch(ui)}:ue;function ui(e){setTimeout(function(){throw e})}function ua(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType){if("/$"===(n=i.data)){if(0===r){e.removeChild(i),ca(t);return}r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=i}while(n);ca(t)}function uo(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":uo(n),ej(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function us(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ul(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function uu(e,t,n){switch(t=l5(n),e){case"html":if(!(e=t.documentElement))throw Error(l(452));return e;case"head":if(!(e=t.head))throw Error(l(453));return e;case"body":if(!(e=t.body))throw Error(l(454));return e;default:throw Error(l(451))}}var uc=new Map,ud=new Set;function uh(e){return"function"==typeof e.getRootNode?e.getRootNode():e.ownerDocument}var uf=H.d;H.d={f:function(){var e=uf.f(),t=s6();return e||t},r:function(e){var t=eX(e);null!==t&&5===t.tag&&"form"===t.type?ad(t):uf.r(e)},D:function(e){uf.D(e),um("dns-prefetch",e,null)},C:function(e,t){uf.C(e,t),um("preconnect",e,t)},L:function(e,t,n){if(uf.L(e,t,n),up&&e&&t){var r='link[rel="preload"][as="'+tr(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+tr(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+tr(n.imageSizes)+'"]')):r+='[href="'+tr(e)+'"]';var i=r;switch(t){case"style":i=uv(e);break;case"script":i=ux(e)}uc.has(i)||(e=B({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),uc.set(i,e),null!==up.querySelector(r)||"style"===t&&up.querySelector(uy(i))||"script"===t&&up.querySelector(u_(i))||(l2(t=up.createElement("link"),"link",e),eK(t),up.head.appendChild(t)))}},m:function(e,t){if(uf.m(e,t),up&&e){var n=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+tr(n)+'"][href="'+tr(e)+'"]',i=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ux(e)}if(!uc.has(i)&&(e=B({rel:"modulepreload",href:e},t),uc.set(i,e),null===up.querySelector(r))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(up.querySelector(u_(i)))return}l2(n=up.createElement("link"),"link",e),eK(n),up.head.appendChild(n)}}},X:function(e,t){if(uf.X(e,t),up&&e){var n=eY(up).hoistableScripts,r=ux(e),i=n.get(r);i||((i=up.querySelector(u_(r)))||(e=B({src:e,async:!0},t),(t=uc.get(r))&&uM(e,t),eK(i=up.createElement("script")),l2(i,"link",e),up.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}},S:function(e,t,n){if(uf.S(e,t,n),up&&e){var r=eY(up).hoistableStyles,i=uv(e);t=t||"default";var a=r.get(i);if(!a){var o={loading:0,preload:null};if(a=up.querySelector(uy(i)))o.loading=5;else{e=B({rel:"stylesheet",href:e,"data-precedence":t},n),(n=uc.get(i))&&uA(e,n);var s=a=up.createElement("link");eK(s),l2(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){o.loading|=1}),s.addEventListener("error",function(){o.loading|=2}),o.loading|=4,uS(a,t,up)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(i,a)}}},M:function(e,t){if(uf.M(e,t),up&&e){var n=eY(up).hoistableScripts,r=ux(e),i=n.get(r);i||((i=up.querySelector(u_(r)))||(e=B({src:e,async:!0,type:"module"},t),(t=uc.get(r))&&uM(e,t),eK(i=up.createElement("script")),l2(i,"link",e),up.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}}};var up="undefined"==typeof document?null:document;function um(e,t,n){if(up&&"string"==typeof t&&t){var r=tr(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),ud.has(r)||(ud.add(r),e={rel:e,crossOrigin:n,href:t},null===up.querySelector(r)&&(l2(t=up.createElement("link"),"link",e),eK(t),up.head.appendChild(t)))}}function ug(e,t,n,r){var i=(i=q.current)?uh(i):null;if(!i)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=uv(n.href),(r=(n=eY(i).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=uv(n.href);var a,o,s,u,c=eY(i).hoistableStyles,d=c.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=i.querySelector(uy(e)))&&!c._p&&(d.instance=c,d.state.loading=5),uc.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},uc.set(e,n),c||(a=i,o=e,s=n,u=d.state,a.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=a.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),l2(o,"link",s),eK(o),a.head.appendChild(o))))),t&&null===r)throw Error(l(528,""));return d}if(t&&null!==r)throw Error(l(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=ux(n),(r=(n=eY(i).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function uv(e){return'href="'+tr(e)+'"'}function uy(e){return'link[rel="stylesheet"]['+e+"]"}function ub(e){return B({},e,{"data-precedence":e.precedence,precedence:null})}function ux(e){return'[src="'+tr(e)+'"]'}function u_(e){return"script[async]"+e}function uw(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+tr(n.href)+'"]');if(r)return t.instance=r,eK(r),r;var i=B({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return eK(r=(e.ownerDocument||e).createElement("style")),l2(r,"style",i),uS(r,n.precedence,e),t.instance=r;case"stylesheet":i=uv(n.href);var a=e.querySelector(uy(i));if(a)return t.state.loading|=4,t.instance=a,eK(a),a;r=ub(n),(i=uc.get(i))&&uA(r,i),eK(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),l2(a,"link",r),t.state.loading|=4,uS(a,n.precedence,e),t.instance=a;case"script":if(a=ux(n.src),i=e.querySelector(u_(a)))return t.instance=i,eK(i),i;return r=n,(i=uc.get(a))&&uM(r=B({},n),i),eK(i=(e=e.ownerDocument||e).createElement("script")),l2(i,"link",r),e.head.appendChild(i),t.instance=i;case"void":return null;default:throw Error(l(443,t.type))}else"stylesheet"===t.type&&0==(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,uS(r,n.precedence,e));return t.instance}function uS(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function uA(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function uM(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var uE=null;function uC(e,t,n){if(null===uE){var r=new Map,i=uE=new Map;i.set(n,r)}else(r=(i=uE).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[eV]||a[eN]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var o=a.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function uT(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function uR(e){return"stylesheet"!==e.type||0!=(3&e.state.loading)}var uP=null;function uI(){}function uB(){if(this.count--,0===this.count){if(this.stylesheets)uk(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uL=null;function uk(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,uL=new Map,t.forEach(uD,e),uL=null,uB.call(e))}function uD(e,t){if(!(4&t.state.loading)){var n=uL.get(e);if(n)var r=n.get(null);else{n=new Map,uL.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var o=i[a];("LINK"===o.nodeName||"not all"!==o.getAttribute("media"))&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(a=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=uB.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var uN={$$typeof:y,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function uF(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eR(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eR(0),this.hiddenUpdates=eR(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function uO(e,t,n,r,i,a,o,s,l,u,c,d){return e=new uF(e,t,n,o,s,l,u,d),t=1,!0===a&&(t|=24),a=so(3,null,null,t),e.current=a,a.stateNode=e,t=r3(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ov(a),e}function uU(e){return e?e=n5:n5}function uz(e,t,n,r,i,a){var o;i=(o=i)?o=n5:n5,null===r.context?r.context=i:r.pendingContext=i,(r=ob(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ox(e,r,t))&&(s1(n,e,t),o_(n,e,t))}function uH(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uG(e,t){uH(e,t),(e=e.alternate)&&uH(e,t)}function uV(e){if(13===e.tag){var t=n2(e,0x4000000);null!==t&&s1(t,e,0x4000000),uG(e,0x4000000)}}var uj=!0;function uW(e,t,n,r){var i=I.T;I.T=null;var a=H.p;try{H.p=2,uJ(e,t,n,r)}finally{H.p=a,I.T=i}}function uX(e,t,n,r){var i=I.T;I.T=null;var a=H.p;try{H.p=8,uJ(e,t,n,r)}finally{H.p=a,I.T=i}}function uJ(e,t,n,r){if(uj){var i=uY(r);if(null===i)lj(e,t,r,uK,n),u6(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return u$=u9(u$,e,t,n,r,i),!0;case"dragenter":return u0=u9(u0,e,t,n,r,i),!0;case"mouseover":return u1=u9(u1,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return u2.set(a,u9(u2.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,u3.set(a,u9(u3.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(u6(e,r),4&t&&-1<u5.indexOf(e)){for(;null!==i;){var a=eX(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var o=eA(a.pendingLanes);if(0!==o){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-eb(o);s.entanglements[1]|=l,o&=~l}lM(a),0==(6&sS)&&(sV=es()+500,lE(0,!1))}}break;case 13:null!==(s=n2(a,2))&&s1(s,a,2),s6(),uG(a,2)}if(null===(a=uY(r))&&lj(e,t,r,uK,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else lj(e,t,r,null,n)}}function uY(e){return uq(e=tb(e))}var uK=null;function uq(e){if(uK=null,null!==(e=eW(e))){var t=F(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=O(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return uK=e,null}function uQ(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(el()){case eu:return 2;case ec:return 8;case ed:case eh:return 32;case ef:return 0x10000000;default:return 32}default:return 32}}var uZ=!1,u$=null,u0=null,u1=null,u2=new Map,u3=new Map,u4=[],u5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u6(e,t){switch(e){case"focusin":case"focusout":u$=null;break;case"dragenter":case"dragleave":u0=null;break;case"mouseover":case"mouseout":u1=null;break;case"pointerover":case"pointerout":u2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":u3.delete(t.pointerId)}}function u9(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=eX(t))&&uV(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i)),e}function u8(e){var t=eW(e.target);if(null!==t){var n=F(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=O(n))){e.blockedOn=t,function(e,t){var n=H.p;try{return H.p=e,t()}finally{H.p=n}}(e.priority,function(){if(13===n.tag){var e=s$(),t=n2(n,e);null!==t&&s1(t,n,e),uG(n,e)}});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function u7(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=uY(e.nativeEvent);if(null!==n)return null!==(t=eX(n))&&uV(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ty=r,n.target.dispatchEvent(r),ty=null,t.shift()}return!0}function ce(e,t,n){u7(e)&&n.delete(t)}function ct(){uZ=!1,null!==u$&&u7(u$)&&(u$=null),null!==u0&&u7(u0)&&(u0=null),null!==u1&&u7(u1)&&(u1=null),u2.forEach(ce),u3.forEach(ce)}function cn(e,t){e.blockedOn===t&&(e.blockedOn=null,uZ||(uZ=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,ct)))}var cr=null;function ci(e){cr!==e&&(cr=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){cr===e&&(cr=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===uq(r||n))continue;break}var a=eX(n);null!==a&&(e.splice(t,3),t-=3,au(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function ca(e){function t(t){return cn(t,e)}null!==u$&&cn(u$,e),null!==u0&&cn(u0,e),null!==u1&&cn(u1,e),u2.forEach(t),u3.forEach(t);for(var n=0;n<u4.length;n++){var r=u4[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<u4.length&&null===(n=u4[0]).blockedOn;)u8(n),null===n.blockedOn&&u4.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[eF]||null;if("function"==typeof a)o||ci(n);else if(o){var s=null;if(a&&a.hasAttribute("formAction")){if(i=a,o=a[eF]||null)s=o.formAction;else if(null!==uq(i))continue}else s=o.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),ci(n)}}}function co(e){this._internalRoot=e}function cs(e){this._internalRoot=e}cs.prototype.render=co.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));uz(t.current,s$(),e,t,null,null)},cs.prototype.unmount=co.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&ld(),uz(e.current,2,null,e,null,null),s6(),t[eO]=null}},cs.prototype.unstable_scheduleHydration=function(e){if(e){var t=ek();e={blockedOn:null,target:e,priority:t};for(var n=0;n<u4.length&&0!==t&&t<u4[n].priority;n++);u4.splice(n,0,e),0===n&&u8(e)}};var cl=o.version;if("19.0.0"!==cl)throw Error(l(527,cl,"19.0.0"));if(H.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(l(188));throw Error(l(268,e=Object.keys(e).join(",")))}return e=null===(e=null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=F(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return U(i),e;if(a===r)return U(i),t;a=a.sibling}throw Error(l(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(t))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:e.stateNode},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{eg=cu.inject({bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:I,findFiberByHostInstance:eW,reconcilerVersion:"19.0.0"}),ev=cu}catch(e){}}t.createRoot=function(e,t){if(!u(e))throw Error(l(299));var n=!1,r="",i=aL,a=ak,o=aD,s=null;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&(s=t.unstable_transitionCallbacks)),t=uO(e,1,!1,null,null,n,r,i,a,o,s,null),e[eO]=t.current,lG(8===e.nodeType?e.parentNode:e),new co(t)},t.hydrateRoot=function(e,t,n){if(!u(e))throw Error(l(299));var r,i=!1,a="",o=aL,s=ak,c=aD,d=null,h=null;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&(d=n.unstable_transitionCallbacks),void 0!==n.formState&&(h=n.formState)),(t=uO(e,1,!0,t,null!=n?n:null,i,a,o,s,c,d,h)).context=(r=null,n5),n=t.current,(a=ob(i=s$())).callback=null,ox(n,a,i),t.current.lanes=i,eP(t,i),lM(t),e[eO]=t.current,lG(e),new cs(t)},t.version="19.0.0"},9718:function(e,t,n){"use strict";var r=n(5263);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal"),l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e){if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)}},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e){if(t){var n=u(t.as,t.crossOrigin);o.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else o.d.m(e)}},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},13:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(32)},7061:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(9718)},5972:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},4879:function(e,t,n){"use strict";e.exports=function(e){function t(e,t,n,r){return new rP(e,t,n,r)}function r(){}function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ia&&e[ia]||e["@@iterator"])?e:null}function o(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===io?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case r$:return"Fragment";case rZ:return"Portal";case r1:return"Profiler";case r0:return"StrictMode";case r6:return"Suspense";case r9:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case r4:return(e.displayName||"Context")+".Provider";case r3:return(e._context.displayName||"Context")+".Consumer";case r5:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case r8:return null!==(t=e.displayName||null)?t:o(e.type)||"Memo";case r7:t=e._payload,e=e._init;try{return o(e(t))}catch(e){}}return null}function s(e){if(void 0===it)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);it=t&&t[1]||"",ir=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+it+e+ir}function l(e,t){if(!e||il)return"";il=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],l=a[1];if(o&&l){var u=o.split("\n"),c=l.split("\n");for(i=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===u.length||i===c.length)for(r=u.length-1,i=c.length-1;1<=r&&0<=i&&u[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(u[r]!==c[i]){if(1!==r||1!==i)do if(r--,i--,0>i||u[r]!==c[i]){var d="\n"+u[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=r&&0<=i);break}}}finally{il=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?s(n):""}function u(e){try{var t="";do t+=function(e){switch(e.tag){case 26:case 27:case 5:return s(e.type);case 16:return s("Lazy");case 13:return s("Suspense");case 19:return s("SuspenseList");case 0:case 15:return e=l(e.type,!1);case 11:return e=l(e.type.render,!1);case 1:return e=l(e.type,!0);default:return""}}(e),e=e.return;while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function c(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function d(e){if(c(e)!==e)throw Error(i(188))}function h(e){var t=e.alternate;if(!t){if(null===(t=c(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return d(a),e;if(o===r)return d(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}function f(e){return{current:e}}function p(e){0>a5||(e.current=a4[a5],a4[a5]=null,a5--)}function m(e,t){a4[++a5]=e.current,e.current=t}function g(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function v(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var s=0x7ffffff&n;return 0!==s?0!=(n=s&~i)?r=g(n):0!=(a&=s)?r=g(a):e||0!=(o=s&~o)&&(r=g(o)):0!=(s=n&~i)?r=g(s):0!==a?r=g(a):e||0!=(o=n&~o)&&(r=g(o)),0===r?0:0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||32===i&&0!=(4194176&o))?t:r}function y(e,t){return 0==(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function b(){var e=oe;return 0==(4194176&(oe<<=1))&&(oe=128),e}function x(){var e=ot;return 0==(0x3c00000&(ot<<=1))&&(ot=4194304),e}function _(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function w(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function S(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-a9(t);e.entangledLanes|=t,e.entanglements[r]=0x40000000|e.entanglements[r]|4194218&n}function A(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-a9(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function M(e){return 2<(e&=-e)?8<e?0!=(0x7ffffff&e)?32:0x10000000:8:2}function E(e){if("function"==typeof od&&oh(e),op&&"function"==typeof op.setStrictMode)try{op.setStrictMode(of,e)}catch(e){}}function C(e,t){if("object"==typeof e&&null!==e){var n=og.get(e);return void 0!==n?n:(t={value:e,source:t,stack:u(t)},og.set(e,t),t)}return{value:e,source:t,stack:u(t)}}function T(e,t){ov[oy++]=ox,ov[oy++]=ob,ob=e,ox=t}function R(e,t,n){o_[ow++]=oA,o_[ow++]=oM,o_[ow++]=oS,oS=e;var r=oA;e=oM;var i=32-a9(r)-1;r&=~(1<<i),n+=1;var a=32-a9(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,oA=1<<32-a9(t)+i|n<<i|r,oM=a+e}else oA=1<<a|n<<i|r,oM=e}function P(e){null!==e.return&&(T(e,1),R(e,1,0))}function I(e){for(;e===ob;)ob=ov[--oy],ov[oy]=null,ox=ov[--oy],ov[oy]=null;for(;e===oS;)oS=o_[--ow],o_[ow]=null,oM=o_[--ow],o_[ow]=null,oA=o_[--ow],o_[ow]=null}function B(e,t){m(oT,t),m(oC,e),m(oE,null),e=im(t),p(oE),m(oE,e)}function L(){p(oE),p(oC),p(oT)}function k(e){null!==e.memoizedState&&m(oR,e);var t=oE.current,n=ig(t,e.type);t!==n&&(m(oC,e),m(oE,n))}function D(e){oC.current===e&&(p(oE),p(oC)),oR.current===e&&(p(oR),iC?ij._currentValue=iV:ij._currentValue2=iV)}function N(e){throw H(C(Error(i(418,"")),e)),oD}function F(e,t){if(!iP)throw Error(i(175));aC(e.stateNode,e.type,e.memoizedProps,t,e)||N(e)}function O(e){for(oP=e.return;oP;)switch(oP.tag){case 3:case 27:ok=!0;return;case 5:case 13:ok=!1;return;default:oP=oP.return}}function U(e){if(!iP||e!==oP)return!1;if(!oB)return O(e),oB=!0,!1;var t=!1;if(aZ?3!==e.tag&&27!==e.tag&&(5!==e.tag||aD(e.type)&&!iw(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||aD(e.type)&&!iw(e.type,e.memoizedProps))&&(t=!0),t&&oI&&N(e),O(e),13===e.tag){if(!iP)throw Error(i(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));oI=aP(e)}else oI=oP?ax(e.stateNode):null;return!0}function z(){iP&&(oI=oP=null,oB=!1)}function H(e){null===oL?oL=[e]:oL.push(e)}function G(){for(var e=oF,t=oO=oF=0;t<e;){var n=oN[t];oN[t++]=null;var r=oN[t];oN[t++]=null;var i=oN[t];oN[t++]=null;var a=oN[t];if(oN[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&X(n,i,a)}}function V(e,t,n,r){oN[oF++]=e,oN[oF++]=t,oN[oF++]=n,oN[oF++]=r,oO|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function j(e,t,n,r){return V(e,t,n,r),J(e)}function W(e,t){return V(e,null,null,t),J(e)}function X(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-a9(n),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=0x20000000|n)}function J(e){if(50<lf)throw lf=0,lp=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function Y(e){var t;e!==oz&&null===e.next&&(null===oz?oU=oz=e:oz=oz.next=e),oG=!0,oH||(oH=!0,t=q,iX?iJ(function(){0!=(6&sK)?on(os,t):t()}):on(os,t))}function K(e,t){if(!oV&&oG){oV=!0;do for(var n=!1,r=oU;null!==r;){if(!t){if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=0xc000055&(a=(1<<31-a9(42|e)+1)-1&(i&~(o&~s)))?0xc000055&a|1:a?2|a:0}0!==a&&(n=!0,$(r,a))}else a=sZ,0==(3&(a=v(r,r===sq?a:0)))||y(r,a)||(n=!0,$(r,a))}r=r.next}while(n);oV=!1}}function q(){oG=oH=!1;var e=0;0!==oj&&(iN()&&(e=oj),oj=0);for(var t=oo(),n=null,r=oU;null!==r;){var i=r.next,a=Q(r,t);0===a?(r.next=null,null===n?oU=i:n.next=i,null===i&&(oz=n)):(n=r,(0!==e||0!=(3&a))&&(oG=!0)),r=i}K(e,!1)}function Q(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-0x3c00001&e.pendingLanes;0<a;){var o=31-a9(a),s=1<<o,l=i[o];-1===l?(0==(s&n)||0!=(s&r))&&(i[o]=function(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(t=sq,n=sZ,n=v(e,e===t?n:0),r=e.callbackNode,0===n||e===t&&2===s$||null!==e.cancelPendingCommit)return null!==r&&null!==r&&or(r),e.callbackNode=null,e.callbackPriority=0;if(0==(3&n)||y(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&or(r),M(n)){case 2:case 8:n=ol;break;case 32:default:n=ou;break;case 0x10000000:n=oc}return n=on(n,r=Z.bind(null,e)),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&or(r),e.callbackPriority=2,e.callbackNode=null,2}function Z(e,t){var n=e.callbackNode;if(rw()&&e.callbackNode!==n)return null;var r=sZ;return 0===(r=v(e,e===sq?r:0))?null:(rn(e,r,t),Q(e,oo()),null!=e.callbackNode&&e.callbackNode===n?Z.bind(null,e):null)}function $(e,t){if(rw())return null;rn(e,t,!0)}function ee(){return 0===oj&&(oj=b()),oj}function et(){if(0==--oX&&null!==oW){null!==oY&&(oY.status="fulfilled");var e=oW;oW=null,oJ=0,oY=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function en(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function er(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ea(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&sK)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=J(e),X(e,null,n),t}return V(e,r,t,n),J(e)}function eo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194176&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,A(e,n)}}function es(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function el(){if(oq){var e=oY;if(null!==e)throw e}}function eu(e,t,n,r){oq=!1;var i=e.updateQueue;oK=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var h=-0x20000001&s.lane,f=h!==s.lane;if(f?(sZ&h)===h:(r&h)===h){0!==h&&h===oJ&&(oq=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});t:{var p=e,m=s;switch(h=t,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(n,d,h);break t}d=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(n,d,h):p))break t;d=rK({},d,h);break t;case 2:oK=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===a&&(i.shared.lanes=0),s6|=o,e.lanes=o,e.memoizedState=d}}function ec(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function ed(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ec(n[e],t)}function eh(e,t){if(om(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!oQ.call(t,i)||!om(e[i],t[i]))return!1}return!0}function ef(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ep(){}function em(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ep,ep),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===oZ)throw Error(i(483));throw e;default:if("string"==typeof t.status)t.then(ep,ep);else{if(null!==(e=sq)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===oZ)throw Error(i(483));throw e}throw o1=t,oZ}}function eg(){if(null===o1)throw Error(i(459));var e=o1;return o1=null,e}function ev(e){var t=o3;return o3+=1,null===o2&&(o2=[]),em(o2,e,t)}function ey(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function eb(e,t){if(t.$$typeof===rq)throw Error(i(525));throw Error(i(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ex(e){return(0,e._init)(e._payload)}function e_(e){function n(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=rB(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=0x2000002,n):r:(t.flags|=0x2000002,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=0x2000002),t}function c(e,t,n,r){return null===t||6!==t.tag?(t=rF(n,e.mode,r)).return=e:(t=s(t,n)).return=e,t}function d(e,t,n,r){var i=n.type;return i===r$?f(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===r7&&ex(i)===t.type)?ey(t=s(t,n.props),n):ey(t=rk(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=rO(n,e.mode,r)).return=e:(t=s(t,n.children||[])).return=e,t}function f(e,t,n,r,i){return null===t||7!==t.tag?(t=rD(n,e.mode,r,i)).return=e:(t=s(t,n)).return=e,t}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=rF(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case rQ:return ey(n=rk(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case rZ:return(t=rO(t,e.mode,n)).return=e,t;case r7:return p(e,t=(0,t._init)(t._payload),n)}if(iu(t)||a(t))return(t=rD(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,ev(t),n);if(t.$$typeof===r4)return p(e,nl(e,t),n);eb(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case rQ:return n.key===i?d(e,t,n,r):null;case rZ:return n.key===i?h(e,t,n,r):null;case r7:return m(e,t,n=(i=n._init)(n._payload),r)}if(iu(n)||a(n))return null!==i?null:f(e,t,n,r,null);if("function"==typeof n.then)return m(e,t,ev(n),r);if(n.$$typeof===r4)return m(e,t,nl(e,n),r);eb(e,n)}return null}function g(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case rQ:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case rZ:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case r7:return g(e,t,n,r=(0,r._init)(r._payload),i)}if(iu(r)||a(r))return f(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return g(e,t,n,ev(r),i);if(r.$$typeof===r4)return g(e,t,n,nl(t,r),i);eb(t,r)}return null}return function(c,d,h,f){try{o3=0;var v=function t(c,d,h,f){if("object"==typeof h&&null!==h&&h.type===r$&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case rQ:t:{for(var v=h.key;null!==d;){if(d.key===v){if((v=h.type)===r$){if(7===d.tag){r(c,d.sibling),(f=s(d,h.props.children)).return=c,c=f;break t}}else if(d.elementType===v||"object"==typeof v&&null!==v&&v.$$typeof===r7&&ex(v)===d.type){r(c,d.sibling),ey(f=s(d,h.props),h),f.return=c,c=f;break t}r(c,d);break}n(c,d),d=d.sibling}h.type===r$?(f=rD(h.props.children,c.mode,f,h.key)).return=c:(ey(f=rk(h.type,h.key,h.props,null,c.mode,f),h),f.return=c),c=f}return u(c);case rZ:t:{for(v=h.key;null!==d;){if(d.key===v){if(4===d.tag&&d.stateNode.containerInfo===h.containerInfo&&d.stateNode.implementation===h.implementation){r(c,d.sibling),(f=s(d,h.children||[])).return=c,c=f;break t}r(c,d);break}n(c,d),d=d.sibling}(f=rO(h,c.mode,f)).return=c,c=f}return u(c);case r7:return t(c,d,h=(v=h._init)(h._payload),f)}if(iu(h))return function(t,i,a,s){for(var u=null,c=null,d=i,h=i=0,f=null;null!==d&&h<a.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var v=m(t,d,a[h],s);if(null===v){null===d&&(d=f);break}e&&d&&null===v.alternate&&n(t,d),i=l(v,i,h),null===c?u=v:c.sibling=v,c=v,d=f}if(h===a.length)return r(t,d),oB&&T(t,h),u;if(null===d){for(;h<a.length;h++)null!==(d=p(t,a[h],s))&&(i=l(d,i,h),null===c?u=d:c.sibling=d,c=d);return oB&&T(t,h),u}for(d=o(d);h<a.length;h++)null!==(f=g(d,t,h,a[h],s))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),i=l(f,i,h),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach(function(e){return n(t,e)}),oB&&T(t,h),u}(c,d,h,f);if(a(h)){if("function"!=typeof(v=a(h)))throw Error(i(150));return function(t,a,s,u){if(null==s)throw Error(i(151));for(var c=null,d=null,h=a,f=a=0,v=null,y=s.next();null!==h&&!y.done;f++,y=s.next()){h.index>f?(v=h,h=null):v=h.sibling;var b=m(t,h,y.value,u);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&n(t,h),a=l(b,a,f),null===d?c=b:d.sibling=b,d=b,h=v}if(y.done)return r(t,h),oB&&T(t,f),c;if(null===h){for(;!y.done;f++,y=s.next())null!==(y=p(t,y.value,u))&&(a=l(y,a,f),null===d?c=y:d.sibling=y,d=y);return oB&&T(t,f),c}for(h=o(h);!y.done;f++,y=s.next())null!==(y=g(h,t,f,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),a=l(y,a,f),null===d?c=y:d.sibling=y,d=y);return e&&h.forEach(function(e){return n(t,e)}),oB&&T(t,f),c}(c,d,h=v.call(h),f)}if("function"==typeof h.then)return t(c,d,ev(h),f);if(h.$$typeof===r4)return t(c,d,nl(c,h),f);eb(c,h)}return"string"==typeof h&&""!==h||"number"==typeof h||"bigint"==typeof h?(h=""+h,null!==d&&6===d.tag?(r(c,d.sibling),(f=s(d,h)).return=c):(r(c,d),(f=rF(h,c.mode,f)).return=c),u(c=f)):r(c,d)}(c,d,h,f);return o2=null,v}catch(e){if(e===oZ)throw e;var y=t(29,e,null,c.mode);return y.lanes=f,y.return=c,y}finally{}}}function ew(e,t){m(o9,e=s4),m(o6,t),s4=e|t.baseLanes}function eS(){m(o9,s4),m(o6,o6.current)}function eA(){s4=o9.current,p(o6),p(o9)}function eM(e){var t=e.alternate;m(se,1&se.current),m(o8,e),null===o7&&(null===t||null!==o6.current?o7=e:null!==t.memoizedState&&(o7=e))}function eE(e){if(22===e.tag){if(m(se,se.current),m(o8,e),null===o7){var t=e.alternate;null!==t&&null!==t.memoizedState&&(o7=e)}}else eC(e)}function eC(){m(se,se.current),m(o8,o8.current)}function eT(e){p(o8),o7===e&&(o7=null),p(se)}function eR(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||ap(n)||am(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function eP(){throw Error(i(321))}function eI(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!om(e[n],t[n]))return!1;return!0}function eB(e,t,n,r,i,a){return st=a,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.H=null===e||null===e.memoizedState?sp:sm,ss=!1,a=n(r,i),ss=!1,so&&(a=ek(t,n,r,i)),eL(e),a}function eL(e){is.H=sf;var t=null!==sr&&null!==sr.next;if(st=0,si=sr=sn=null,sa=!1,su=0,sc=null,t)throw Error(i(300));null===e||sx||null!==(e=e.dependencies)&&na(e)&&(sx=!0)}function ek(e,t,n,r){sn=e;var a=0;do{if(so&&(sc=null),su=0,so=!1,25<=a)throw Error(i(301));if(a+=1,si=sr=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}is.H=sg,o=t(n,r)}while(so);return o}function eD(){var e=is.H,t=e.useState()[0];return t="function"==typeof t.then?eH(t):t,e=e.useState()[0],(null!==sr?sr.memoizedState:null)!==e&&(sn.flags|=1024),t}function eN(){var e=0!==sl;return sl=0,e}function eF(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function eO(e){if(sa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}sa=!1}st=0,si=sr=sn=null,so=!1,su=sl=0,sc=null}function eU(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===si?sn.memoizedState=si=e:si=si.next=e,si}function ez(){if(null===sr){var e=sn.alternate;e=null!==e?e.memoizedState:null}else e=sr.next;var t=null===si?sn.memoizedState:si.next;if(null!==t)si=t,sr=e;else{if(null===e){if(null===sn.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(sr=e).memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},null===si?sn.memoizedState=si=e:si=si.next=e}return si}function eH(e){var t=su;return su+=1,null===sc&&(sc=[]),e=em(sc,e,t),t=sn,null===(null===si?t.memoizedState:si.next)&&(t=t.alternate,is.H=null===t||null===t.memoizedState?sp:sm),e}function eG(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return eH(e);if(e.$$typeof===r4)return ns(e)}throw Error(i(438,String(e)))}function eV(e){var t=null,n=sn.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=sn.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n=sh(),sn.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ii;return t.index++,n}function ej(e,t){return"function"==typeof t?t(e):t}function eW(e){return eX(ez(),sr,e)}function eX(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{t=a.next;var l=s=null,u=null,c=t,d=!1;do{var h=-0x20000001&c.lane;if(h!==c.lane?(sZ&h)===h:(st&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===oJ&&(d=!0);else if((st&f)===f){c=c.next,f===oJ&&(d=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=o):u=u.next=h,sn.lanes|=f,s6|=f;h=c.action,ss&&n(o,h),o=c.hasEagerState?c.eagerState:n(o,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=o):u=u.next=f,sn.lanes|=h,s6|=h;c=c.next}while(null!==c&&c!==t);if(null===u?s=o:u.next=l,!om(o,e.memoizedState)&&(sx=!0,d&&null!==(n=oY)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=u,r.lastRenderedState=o}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function eJ(e){var t=ez(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);om(o,t.memoizedState)||(sx=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function eY(e,t,n){var r=sn,a=ez(),o=oB;if(o){if(void 0===n)throw Error(i(407));n=n()}else n=t();var s=!om((sr||a).memoizedState,n);if(s&&(a.memoizedState=n,sx=!0),a=a.queue,tu(eQ.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==si&&1&si.memoizedState.tag){if(r.flags|=2048,ti(9,eq.bind(null,r,a,n,t),{destroy:void 0},null),null===sq)throw Error(i(349));o||0!=(60&st)||eK(r,t,n)}return n}function eK(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sn.updateQueue)?(t=sh(),sn.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function eq(e,t,n,r){t.value=n,t.getSnapshot=r,eZ(t)&&e$(e)}function eQ(e,t,n){return n(function(){eZ(t)&&e$(e)})}function eZ(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!om(e,n)}catch(e){return!0}}function e$(e){var t=W(e,2);null!==t&&rt(t,e,2)}function e0(e){var t=eU();if("function"==typeof e){var n=e;if(e=n(),ss){E(!0);try{n()}finally{E(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ej,lastRenderedState:e},t}function e1(e,t,n,r){return e.baseState=n,eX(e,sr,"function"==typeof r?r:ej)}function e2(e,t,n,r,a){if(tR(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==is.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,e3(t,o)):(o.next=n.next,t.pending=n.next=o)}}function e3(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=is.T,o={};is.T=o;try{var s=n(i,r),l=is.S;null!==l&&l(o,s),e4(e,t,s)}catch(n){e6(e,t,n)}finally{is.T=a}}else try{a=n(i,r),e4(e,t,a)}catch(n){e6(e,t,n)}}function e4(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){e5(e,t,n)},function(n){return e6(e,t,n)}):e5(e,t,n)}function e5(e,t,n){t.status="fulfilled",t.value=n,e9(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,e3(e,n)))}function e6(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do t.status="rejected",t.reason=n,e9(t),t=t.next;while(t!==r)}e.action=null}function e9(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function e8(e,t){return t}function e7(e,t){if(oB){var n=sq.formState;if(null!==n){t:{var r=sn;if(oB){if(oI){var i=ay(oI,ok);if(i){oI=ax(i),r=ab(i);break t}}N(r)}r=!1}r&&(t=n[0])}}(n=eU()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e8,lastRenderedState:t},n.queue=r,n=tE.bind(null,sn,r),r.dispatch=n,r=e0(!1);var a=tT.bind(null,sn,!1,r.queue);return r=eU(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=e2.bind(null,sn,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function te(e){return tt(ez(),sr,e)}function tt(e,t,n){t=eX(e,t,e8)[0],e=eW(ej)[0],t="object"==typeof t&&null!==t&&"function"==typeof t.then?eH(t):t;var r=ez(),i=r.queue,a=i.dispatch;return n!==r.memoizedState&&(sn.flags|=2048,ti(9,tn.bind(null,i,n),{destroy:void 0},null)),[t,a,e]}function tn(e,t){e.action=t}function tr(e){var t=ez(),n=sr;if(null!==n)return tt(t,n,e);ez(),t=t.memoizedState;var r=(n=ez()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ti(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=sn.updateQueue)&&(t=sh(),sn.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ta(){return ez().memoizedState}function to(e,t,n,r){var i=eU();sn.flags|=e,i.memoizedState=ti(1|t,n,{destroy:void 0},void 0===r?null:r)}function ts(e,t,n,r){var i=ez();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==sr&&null!==r&&eI(r,sr.memoizedState.deps)?i.memoizedState=ti(t,n,a,r):(sn.flags|=e,i.memoizedState=ti(1|t,n,a,r))}function tl(e,t){to(8390656,8,e,t)}function tu(e,t){ts(2048,8,e,t)}function tc(e,t){return ts(4,2,e,t)}function td(e,t){return ts(4,4,e,t)}function th(e,t){if("function"==typeof t){var n=t(e=e());return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function tf(e,t,n){n=null!=n?n.concat([e]):null,ts(4,4,th.bind(null,t,e),n)}function tp(){}function tm(e,t){var n=ez();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&eI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tg(e,t){var n=ez();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&eI(t,r[1]))return r[0];if(r=e(),ss){E(!0);try{e()}finally{E(!1)}}return n.memoizedState=[r,t],r}function tv(e,t,n){return void 0===n||0!=(0x40000000&st)?e.memoizedState=t:(e.memoizedState=n,e=re(),sn.lanes|=e,s6|=e,n)}function ty(e,t,n,r){return om(n,t)?n:null!==o6.current?(om(e=tv(e,n,r),t)||(sx=!0),e):0==(42&st)?(sx=!0,e.memoizedState=n):(e=re(),sn.lanes|=e,s6|=e,t)}function tb(e,t,n,r,i){var a=ik();iL(0!==a&&8>a?a:8);var o=is.T,s={};is.T=s,tT(e,!1,t,n);try{var l=i(),u=is.S;if(null!==u&&u(s,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,d,h=(c=[],d={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){d.status="fulfilled",d.value=r;for(var e=0;e<c.length;e++)(0,c[e])(r)},function(e){for(d.status="rejected",d.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),d);tC(e,t,h,n7(e))}else tC(e,t,r,n7(e))}catch(n){tC(e,t,{then:function(){},status:"rejected",reason:n},n7())}finally{iL(a),is.T=o}}function tx(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:iV,baseState:iV,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ej,lastRenderedState:iV},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ej,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function t_(){return ns(ij)}function tw(){return ez().memoizedState}function tS(){return ez().memoizedState}function tA(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=n7(),r=ea(t,e=ei(n),n);null!==r&&(rt(r,t,n),eo(r,t,n)),t={cache:nc()},e.payload=t;return}t=t.return}}function tM(e,t,n){var r=n7();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},tR(e)?tP(t,n):null!==(n=j(e,t,n,r))&&(rt(n,e,r),tI(n,t,r))}function tE(e,t,n){tC(e,t,n,n7())}function tC(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(tR(e))tP(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,om(s,o))return V(e,t,i,0),null===sq&&G(),!1}catch(e){}finally{}if(null!==(n=j(e,t,i,r)))return rt(n,e,r),tI(n,t,r),!0}return!1}function tT(e,t,n,r){if(r={lane:2,revertLane:ee(),action:r,hasEagerState:!1,eagerState:null,next:null},tR(e)){if(t)throw Error(i(479))}else null!==(t=j(e,n,r,2))&&rt(t,e,2)}function tR(e){var t=e.alternate;return e===sn||null!==t&&t===sn}function tP(e,t){so=sa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tI(e,t,n){if(0!=(4194176&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,A(e,n)}}function tB(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:rK({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function tL(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||!eh(n,r)||!eh(i,a)}function tk(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sv.enqueueReplaceState(t,t.state,null)}function tD(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=rK({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function tN(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function tF(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function tO(e,t,n){return(n=ei(n)).tag=3,n.payload={element:null},n.callback=function(){tN(e,t)},n}function tU(e){return(e=ei(e)).tag=3,e}function tz(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){tF(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){tF(t,n,r),"function"!=typeof i&&(null===ls?ls=new Set([this]):ls.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}function tH(e,t,n,r){t.child=null===e?o5(t,null,n,r):o4(t,e.child,n,r)}function tG(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return(no(t),r=eB(e,t,n,o,a,i),s=eN(),null===e||sx)?(oB&&s&&P(t),t.flags|=1,tH(e,t,r,i),t.child):(eF(e,t,i),t9(e,t,i))}function tV(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||rI(a)||void 0!==a.defaultProps||null!==n.compare?((e=rk(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,tj(e,t,a,r,i))}if(a=e.child,!t8(e,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:eh)(o,r)&&e.ref===t.ref)return t9(e,t,i)}return t.flags|=1,(e=rB(a,r)).ref=t.ref,e.return=t,t.child=e}function tj(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(eh(a,r)&&e.ref===t.ref){if(sx=!1,t.pendingProps=r=a,!t8(e,i))return t.lanes=e.lanes,t9(e,t,i);0!=(131072&e.flags)&&(sx=!0)}}return tY(e,t,n,r,i)}function tW(e,t,n){var r=t.pendingProps,i=r.children,a=0!=(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(tJ(e,t),"hidden"===r.mode||a){if(0!=(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=0,i=t.child=e.child;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return tX(e,t,r,n)}if(0==(0x20000000&n))return t.lanes=t.childLanes=0x20000000,tX(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&nf(t,null!==o?o.cachePool:null),null!==o?ew(t,o):eS(),eE(t)}else null!==o?(nf(t,o.cachePool),ew(t,o),eC(t),t.memoizedState=null):(null!==e&&nf(t,null),eS(),eC(t));return tH(e,t,i,n),t.child}function tX(e,t,n,r){var i=nh();return i=null===i?null:{parent:iC?sT._currentValue:sT._currentValue2,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&nf(t,null),eS(),eE(t),null!==e&&ni(e,t,r,!0),null}function tJ(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));(null===e||e.ref!==n)&&(t.flags|=2097664)}}function tY(e,t,n,r,i){return(no(t),n=eB(e,t,n,r,void 0,i),r=eN(),null===e||sx)?(oB&&r&&P(t),t.flags|=1,tH(e,t,n,i),t.child):(eF(e,t,i),t9(e,t,i))}function tK(e,t,n,r,i,a){return(no(t),t.updateQueue=null,n=ek(t,r,n,i),eL(e),r=eN(),null===e||sx)?(oB&&r&&P(t),t.flags|=1,tH(e,t,n,a),t.child):(eF(e,t,a),t9(e,t,a))}function tq(e,t,n,r,i){if(no(t),null===t.stateNode){var a=a6,o=n.contextType;"object"==typeof o&&null!==o&&(a=ns(o)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=sv,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},en(t),o=n.contextType,a.context="object"==typeof o&&null!==o?ns(o):a6,a.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(tB(t,n,o,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(o=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&sv.enqueueReplaceState(a,a.state,null),eu(t,r,a,i),el(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=tD(n,s);a.props=l;var u=a.context,c=n.contextType;o=a6,"object"==typeof c&&null!==c&&(o=ns(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s||u!==o)&&tk(t,a,r,o),oK=!1;var h=t.memoizedState;a.state=h,eu(t,r,a,i),el(),u=t.memoizedState,s||h!==u||oK?("function"==typeof d&&(tB(t,n,d,r),u=t.memoizedState),(l=oK||tL(t,n,l,r,h,u,o))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=o,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,er(e,t),c=tD(n,o=t.memoizedProps),a.props=c,d=t.pendingProps,h=a.context,u=n.contextType,l=a6,"object"==typeof u&&null!==u&&(l=ns(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&tk(t,a,r,l),oK=!1,h=t.memoizedState,a.state=h,eu(t,r,a,i),el();var f=t.memoizedState;o!==d||h!==f||oK||null!==e&&null!==e.dependencies&&na(e.dependencies)?("function"==typeof s&&(tB(t,n,s,r),f=t.memoizedState),(c=oK||tL(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&na(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,tJ(e,t),r=0!=(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=o4(t,e.child,null,i),t.child=o4(t,null,n,i)):tH(e,t,n,i),t.memoizedState=a.state,e=t.child):e=t9(e,t,i),e}function tQ(e,t,n,r){return z(),t.flags|=256,tH(e,t,n,r),t.child}function tZ(e){return{baseLanes:e,cachePool:np()}}function t$(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=s7),e}function t0(e,n,r){var a,o=n.pendingProps,s=!1,l=0!=(128&n.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!=(2&se.current)),a&&(s=!0,n.flags&=-129),a=0!=(32&n.flags),n.flags&=-33,null===e){if(oB){if(s?eM(n):eC(n),oB){var u,c=oI;(u=c)&&(null!==(c=aE(c,ok))?(n.memoizedState={dehydrated:c,treeContext:null!==oS?{id:oA,overflow:oM}:null,retryLane:0x20000000},(u=t(18,null,null,0)).stateNode=c,u.return=n,n.child=u,oP=n,oI=null,u=!0):u=!1),u||N(n)}if(null!==(c=n.memoizedState)&&null!==(c=c.dehydrated))return am(c)?n.lanes=16:n.lanes=0x20000000,null;eT(n)}return(c=o.children,o=o.fallback,s)?(eC(n),c=t2({mode:"hidden",children:c},s=n.mode),o=rD(o,s,r,null),c.return=n,o.return=n,c.sibling=o,n.child=c,(s=n.child).memoizedState=tZ(r),s.childLanes=t$(e,a,r),n.memoizedState=s_,o):(eM(n),t1(n,c))}if(null!==(u=e.memoizedState)&&null!==(c=u.dehydrated)){if(l)256&n.flags?(eM(n),n.flags&=-257,n=t3(e,n,r)):null!==n.memoizedState?(eC(n),n.child=e.child,n.flags|=128,n=null):(eC(n),s=o.fallback,c=n.mode,o=t2({mode:"visible",children:o.children},c),s=rD(s,c,r,null),s.flags|=2,o.return=n,s.return=n,o.sibling=s,n.child=o,o4(n,e.child,null,r),(o=n.child).memoizedState=tZ(r),o.childLanes=t$(e,a,r),n.memoizedState=s_,n=s);else if(eM(n),am(c))a=ag(c).digest,(o=Error(i(419))).stack="",o.digest=a,H({value:o,source:null,stack:null}),n=t3(e,n,r);else if(sx||ni(e,n,r,!1),a=0!=(r&e.childLanes),sx||a){if(null!==(a=sq)){if(0!=(42&(o=r&-r)))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:o=64;break;case 0x10000000:o=0x8000000;break;default:o=0}if(0!==(o=0!=(o&(a.suspendedLanes|r))?0:o)&&o!==u.retryLane)throw u.retryLane=o,W(e,o),rt(a,e,o),sb}ap(c)||rf(),n=t3(e,n,r)}else ap(c)?(n.flags|=128,n.child=e.child,av(c,n=rT.bind(null,e)),n=null):(e=u.treeContext,iP&&(oI=aS(c),oP=n,oB=!0,oL=null,ok=!1,null!==e&&(o_[ow++]=oA,o_[ow++]=oM,o_[ow++]=oS,oA=e.id,oM=e.overflow,oS=n)),n=t1(n,o.children),n.flags|=4096);return n}return s?(eC(n),s=o.fallback,c=n.mode,l=(u=e.child).sibling,(o=rB(u,{mode:"hidden",children:o.children})).subtreeFlags=0x1e00000&u.subtreeFlags,null!==l?s=rB(l,s):(s=rD(s,c,r,null),s.flags|=2),s.return=n,o.return=n,o.sibling=s,n.child=o,o=s,s=n.child,null===(c=e.child.memoizedState)?c=tZ(r):(null!==(u=c.cachePool)?(l=iC?sT._currentValue:sT._currentValue2,u=u.parent!==l?{parent:l,pool:l}:u):u=np(),c={baseLanes:c.baseLanes|r,cachePool:u}),s.memoizedState=c,s.childLanes=t$(e,a,r),n.memoizedState=s_,o):(eM(n),e=(r=e.child).sibling,(r=rB(r,{mode:"visible",children:o.children})).return=n,r.sibling=null,null!==e&&(null===(a=n.deletions)?(n.deletions=[e],n.flags|=16):a.push(e)),n.child=r,n.memoizedState=null,r)}function t1(e,t){return(t=t2({mode:"visible",children:t},e.mode)).return=e,e.child=t}function t2(e,t){return rN(e,t,0,null)}function t3(e,t,n){return o4(t,e.child,null,n),e=t1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t4(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),nn(e.return,t,n)}function t5(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function t6(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(tH(e,t,r.children,n),0!=(2&(r=se.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))t:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&t4(e,n,t);else if(19===e.tag)t4(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(m(se,r),i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===eR(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),t5(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eR(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}t5(t,!0,n,null,a);break;case"together":t5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function t9(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),s6|=t.lanes,0==(n&t.childLanes)){if(null===e)return null;if(ni(e,t,n,!1),0==(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=rB(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=rB(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function t8(e,t){return 0!=(e.lanes&t)||!!(null!==(e=e.dependencies)&&na(e))}function t7(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps)sx=!0;else{if(!t8(e,n)&&0==(128&t.flags))return sx=!1,function(e,t,n){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),ne(t,sT,e.memoizedState.cache),z();break;case 27:case 5:k(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:ne(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r){if(null!==r.dehydrated)return eM(t),t.flags|=128,null;if(0!=(n&t.child.childLanes))return t0(e,t,n);return eM(t),null!==(e=t9(e,t,n))?e.sibling:null}eM(t);break;case 19:var i=0!=(128&e.flags);if((r=0!=(n&t.childLanes))||(ni(e,t,n,!1),r=0!=(n&t.childLanes)),i){if(r)return t6(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),m(se,se.current),!r)return null;break;case 22:case 23:return t.lanes=0,tW(e,t,n);case 24:ne(t,sT,e.memoizedState.cache)}return t9(e,t,n)}(e,t,n);sx=0!=(131072&e.flags)}}else sx=!1,oB&&0!=(1048576&t.flags)&&R(t,ox,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"==typeof r)rI(r)?(e=tD(r,e),t.tag=1,t=tq(null,t,r,e,n)):(t.tag=0,t=tY(null,t,r,e,n));else{if(null!=r){if((a=r.$$typeof)===r5){t.tag=11,t=tG(null,t,r,e,n);break t}if(a===r8){t.tag=14,t=tV(null,t,r,e,n);break t}}throw Error(i(306,t=o(r)||r,""))}}return t;case 0:return tY(e,t,t.type,t.pendingProps,n);case 1:return a=tD(r=t.type,t.pendingProps),tq(e,t,r,a,n);case 3:t:{if(B(t,t.stateNode.containerInfo),null===e)throw Error(i(387));var s=t.pendingProps;r=(a=t.memoizedState).element,er(e,t),eu(t,s,null,n);var l=t.memoizedState;if(ne(t,sT,s=l.cache),s!==a.cache&&nr(t,[sT],n,!0),el(),s=l.element,iP&&a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=tQ(e,t,s,n);break t}if(s!==r){H(r=C(Error(i(424)),t)),t=tQ(e,t,s,n);break t}else for(iP&&(oI=aw(t.stateNode.containerInfo),oP=t,oB=!0,oL=null,ok=!0),n=o5(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(z(),s===r){t=t9(e,t,n);break t}tH(e,t,s,n)}t=t.child}return t;case 26:if(aO)return tJ(e,t),null===e?(n=aH(t.type,null,t.pendingProps,null))?t.memoizedState=n:oB||(t.stateNode=aJ(t.type,t.pendingProps,oT.current,t)):t.memoizedState=aH(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(aZ)return k(t),null===e&&aZ&&oB&&(r=t.stateNode=a$(t.type,t.pendingProps,oT.current,oE.current,!1),oP=t,ok=!0,oI=a_(r)),r=t.pendingProps.children,null!==e||oB?tH(e,t,r,n):t.child=o4(t,null,r,n),tJ(e,t),t.child;case 5:return null===e&&oB&&(aN(t.type,t.pendingProps,oE.current),(a=r=oI)&&(null!==(r=aA(r,t.type,t.pendingProps,ok))?(t.stateNode=r,oP=t,oI=a_(r),ok=!1,a=!0):a=!1),a||N(t)),k(t),a=t.type,s=t.pendingProps,l=null!==e?e.memoizedProps:null,r=s.children,iw(a,s)?r=null:null!==l&&iw(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=eB(e,t,eD,null,null,n),iC?ij._currentValue=a:ij._currentValue2=a),tJ(e,t),tH(e,t,r,n),t.child;case 6:return null===e&&oB&&(aF(t.pendingProps,oE.current),(e=n=oI)&&(null!==(n=aM(n,t.pendingProps,ok))?(t.stateNode=n,oP=t,oI=null,e=!0):e=!1),e||N(t)),null;case 13:return t0(e,t,n);case 4:return B(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=o4(t,null,r,n):tH(e,t,r,n),t.child;case 11:return tG(e,t,t.type,t.pendingProps,n);case 7:return tH(e,t,t.pendingProps,n),t.child;case 8:case 12:return tH(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ne(t,t.type,r.value),tH(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,no(t),r=r(a=ns(a)),t.flags|=1,tH(e,t,r,n),t.child;case 14:return tV(e,t,t.type,t.pendingProps,n);case 15:return tj(e,t,t.type,t.pendingProps,n);case 19:return t6(e,t,n);case 22:return tW(e,t,n);case 24:return no(t),r=ns(sT),null===e?(null===(a=nh())&&(a=sq,s=nc(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:r,cache:a},en(t),ne(t,sT,a)):(0!=(e.lanes&n)&&(er(e,t),eu(t,null,null,n),el()),a=e.memoizedState,s=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ne(t,sT,r)):(ne(t,sT,r=s.cache),r!==a.cache&&nr(t,[sT],n,!0))),tH(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ne(e,t,n){iC?(m(sw,t._currentValue),t._currentValue=n):(m(sw,t._currentValue2),t._currentValue2=n)}function nt(e){var t=sw.current;iC?e._currentValue=t:e._currentValue2=t,p(sw)}function nn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var s=a.child;o=o.firstContext;t:for(;null!==o;){var l=o;o=a;for(var u=0;u<t.length;u++)if(l.context===t[u]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),nn(o.return,n,e),r||(s=null);break t}o=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),nn(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function ni(e,t,n,r){e=null;for(var a=t,o=!1;null!==a;){if(!o){if(0!=(524288&a.flags))o=!0;else if(0!=(262144&a.flags))break}if(10===a.tag){var s=a.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var l=a.type;om(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===oR.current){if(null===(s=a.alternate))throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(ij):e=[ij])}a=a.return}null!==e&&nr(t,e,n,r),t.flags|=262144}function na(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!om(iC?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function no(e){sS=e,sA=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ns(e){return nu(sS,e)}function nl(e,t){return null===sS&&no(e),nu(e,t)}function nu(e,t){var n=iC?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===sA){if(null===e)throw Error(i(308));sA=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else sA=sA.next=t;return n}function nc(){return{controller:new sM,data:new Map,refCount:0}}function nd(e){e.refCount--,0===e.refCount&&sE(sC,function(){e.controller.abort()})}function nh(){var e=sP.current;return null!==e?e:sq.pooledCache}function nf(e,t){null===t?m(sP,sP.current):m(sP,t.pool)}function np(){var e=nh();return null===e?null:{parent:iC?sT._currentValue:sT._currentValue2,pool:e}}function nm(e){e.flags|=4}function ng(e,t){if(null!==e&&e.child===t.child)return!1;if(0!=(16&t.flags))return!0;for(e=t.child;null!==e;){if(0!=(13878&e.flags)||0!=(13878&e.subtreeFlags))return!0;e=e.sibling}return!1}function nv(e,t,n,r){if(iT)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)ix(e,n.stateNode);else if(!(4===n.tag||aZ&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(iR)for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=ah(a,i.type,i.memoizedProps)),ix(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=af(a,i.memoizedProps)),ix(e,a);else if(4!==i.tag){if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),nv(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ny(e,t){if(iR&&ng(e,t)){var n=(e=t.stateNode).containerInfo,r=al();(function e(t,n,r,i){if(iR)for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;r&&i&&(o=ah(o,a.type,a.memoizedProps)),au(t,o)}else if(6===a.tag)o=a.stateNode,r&&i&&(o=af(o,a.memoizedProps)),au(t,o);else if(4!==a.tag){if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,null===a.memoizedProps||"manual"!==a.memoizedProps.mode,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}})(r,t,!1,!1),e.pendingChildren=r,nm(t),ac(n,r)}}function nb(e,t,n,r){if(iT)e.memoizedProps!==r&&nm(t);else if(iR){var i=e.stateNode,a=e.memoizedProps;if((e=ng(e,t))||a!==r){var o=oE.current;(a=as(i,n,a,r,!e,null))===i?t.stateNode=i:(i_(a,n,r,o)&&nm(t),t.stateNode=a,e?nv(a,t,!1,!1):nm(t))}else t.stateNode=i}}function nx(e,t,n){if(iO(t,n)){if(e.flags|=0x1000000,!iU(t,n)){if(rc())e.flags|=8192;else throw o1=o0,o$}}else e.flags&=-0x1000001}function n_(e,t){if(aK(t)){if(e.flags|=0x1000000,!aq(t)){if(rc())e.flags|=8192;else throw o1=o0,o$}}else e.flags&=-0x1000001}function nw(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?x():0x20000000,e.lanes|=t,le|=t)}function nS(e,t){if(!oB)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nA(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0x1e00000&i.subtreeFlags,r|=0x1e00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nM(e,t){switch(I(t),t.tag){case 3:nt(sT),L();break;case 26:case 27:case 5:D(t);break;case 4:L();break;case 13:eT(t);break;case 19:p(se);break;case 10:nt(t.type);break;case 22:case 23:eT(t),eA(),null!==e&&p(sP);break;case 24:nt(sT)}}function nE(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){rA(t,t.return,e)}}function nC(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=t;try{s()}catch(e){rA(i,n,e)}}}r=r.next}while(r!==a)}}catch(e){rA(t,t.return,e)}}function nT(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ed(t,n)}catch(t){rA(e,e.return,t)}}}function nR(e,t,n){n.props=tD(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){rA(e,t,n)}}function nP(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=ip(r);break;default:i=r}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(n){rA(e,t,n)}}function nI(e,t){var n=e.ref,r=e.refCleanup;if(null!==n){if("function"==typeof r)try{r()}catch(n){rA(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){rA(e,t,n)}else n.current=null}}function nB(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{i5(r,t,n,e)}catch(t){rA(e,e.return,t)}}function nL(e,t,n){try{i6(e.stateNode,e.type,n,t,e)}catch(t){rA(e,e.return,t)}}function nk(e){return 5===e.tag||3===e.tag||!!aO&&26===e.tag||!!aZ&&27===e.tag||4===e.tag}function nD(e){t:for(;;){for(;null===e.sibling;){if(null===e.return||nk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(aZ?27!==e.tag:1)&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue t;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function nN(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?i9(n,e,t):i2(n,e);else if(!(4===r||aZ&&27===r)&&null!==(e=e.child))for(nN(e,t,n),e=e.sibling;null!==e;)nN(e,t,n),e=e.sibling}function nF(e,t,n){e=e.containerInfo;try{ad(e,n)}catch(e){rA(t,t.return,e)}}function nO(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:nX(e,n),4&r&&nE(5,n);break;case 1:if(nX(e,n),4&r){if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){rA(n,n.return,e)}else{var i=tD(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){rA(n,n.return,e)}}}64&r&&nT(n),512&r&&nP(n,n.return);break;case 3:if(nX(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=ip(n.child.stateNode);break;case 1:e=n.child.stateNode}try{ed(r,e)}catch(e){rA(n,n.return,e)}}break;case 26:if(aO){nX(e,n),512&r&&nP(n,n.return);break}case 27:case 5:nX(e,n),null===t&&4&r&&nB(n),512&r&&nP(n,n.return);break;case 12:default:nX(e,n);break;case 13:nX(e,n),4&r&&nH(e,n);break;case 22:if(!(i=null!==n.memoizedState||sI)){t=null!==t&&null!==t.memoizedState||sB;var a=sI,o=sB;sI=i,(sB=t)&&!o?function e(t,n,r){for(r=r&&0!=(8772&n.subtreeFlags),n=n.child;null!==n;){var i=n.alternate,a=t,o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(a,o,r),nE(4,o);break;case 1:if(e(a,o,r),"function"==typeof(a=(i=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){rA(i,i.return,e)}if(null!==(a=(i=o).updateQueue)){var l=i.stateNode;try{var u=a.shared.hiddenCallbacks;if(null!==u)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)ec(u[a],l)}catch(e){rA(i,i.return,e)}}r&&64&s&&nT(o),nP(o,o.return);break;case 26:case 27:case 5:e(a,o,r),r&&null===i&&4&s&&nB(o),nP(o,o.return);break;case 12:default:e(a,o,r);break;case 13:e(a,o,r),r&&4&s&&nH(a,o);break;case 22:null===o.memoizedState&&e(a,o,r),nP(o,o.return)}n=n.sibling}}(e,n,0!=(8772&n.subtreeFlags)):nX(e,n),sI=a,sB=o}512&r&&("manual"===n.memoizedProps.mode?nP(n,n.return):nI(n,n.return))}}function nU(e,t,n){for(n=n.child;null!==n;)nz(e,t,n),n=n.sibling}function nz(e,t,n){if(op&&"function"==typeof op.onCommitFiberUnmount)try{op.onCommitFiberUnmount(of,n)}catch(e){}switch(n.tag){case 26:if(aO){sB||nI(n,t),nU(e,t,n),n.memoizedState?aV(n.memoizedState):n.stateNode&&aX(n.stateNode);break}case 27:if(aZ){sB||nI(n,t);var r=sF,i=sO;sF=n.stateNode,nU(e,t,n),a2(n.stateNode),sF=r,sO=i;break}case 5:sB||nI(n,t);case 6:if(iT){if(r=sF,i=sO,sF=null,nU(e,t,n),sF=r,sO=i,null!==sF){if(sO)try{ae(sF,n.stateNode)}catch(e){rA(n,t,e)}else try{i7(sF,n.stateNode)}catch(e){rA(n,t,e)}}}else nU(e,t,n);break;case 18:iT&&null!==sF&&(sO?ak(sF,n.stateNode):aL(sF,n.stateNode));break;case 4:iT?(r=sF,i=sO,sF=n.stateNode.containerInfo,sO=!0,nU(e,t,n),sF=r,sO=i):(iR&&nF(n.stateNode,n,al()),nU(e,t,n));break;case 0:case 11:case 14:case 15:sB||nC(2,n,t),sB||nC(4,n,t),nU(e,t,n);break;case 1:sB||(nI(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&nR(n,t,r)),nU(e,t,n);break;case 21:default:nU(e,t,n);break;case 22:sB||nI(n,t),sB=(r=sB)||null!==n.memoizedState,nU(e,t,n),sB=r}}function nH(e,t){if(iP&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{aB(e)}catch(e){rA(t,t.return,e)}}function nG(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new sk),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new sk),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=rR.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function nV(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t;if(iT){var l=s;t:for(;null!==l;){switch(l.tag){case 27:case 5:sF=l.stateNode,sO=!1;break t;case 3:case 4:sF=l.stateNode.containerInfo,sO=!0;break t}l=l.return}if(null===sF)throw Error(i(160));nz(o,s,a),sF=null,sO=!1}else nz(o,s,a);null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)nj(t,e),t=t.sibling}function nj(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:nV(t,e),nW(e),4&r&&(nC(3,e,e.return),nE(3,e),nC(5,e,e.return));break;case 1:nV(t,e),nW(e),512&r&&(sB||null===n||nI(n,n.return)),64&r&&sI&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:if(aO){var a=sU;nV(t,e),nW(e),512&r&&(sB||null===n||nI(n,n.return)),4&r&&(r=null!==n?n.memoizedState:null,t=e.memoizedState,null===n?null===t?null===e.stateNode?e.stateNode=aj(a,e.type,e.memoizedProps,e):aW(a,e.type,e.stateNode):e.stateNode=aG(a,t,e.memoizedProps):r!==t?(null===r?null!==n.stateNode&&aX(n.stateNode):aV(r),null===t?aW(a,e.type,e.stateNode):aG(a,t,e.memoizedProps)):null===t&&null!==e.stateNode&&nL(e,e.memoizedProps,n.memoizedProps));break}case 27:if(aZ&&4&r&&null===e.alternate){a=e.stateNode;var o=e.memoizedProps;try{a0(a),a1(e.type,o,a,e)}catch(t){rA(e,e.return,t)}}case 5:if(nV(t,e),nW(e),512&r&&(sB||null===n||nI(n,n.return)),iT){if(32&e.flags){t=e.stateNode;try{at(t)}catch(t){rA(e,e.return,t)}}4&r&&null!=e.stateNode&&(t=e.memoizedProps,nL(e,t,null!==n?n.memoizedProps:t)),1024&r&&(sL=!0)}break;case 6:if(nV(t,e),nW(e),4&r&&iT){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=null!==n?n.memoizedProps:r,t=e.stateNode;try{i4(t,n,r)}catch(t){rA(e,e.return,t)}}break;case 3:if(aO?(aY(),a=sU,sU=az(t.containerInfo),nV(t,e),sU=a):nV(t,e),nW(e),4&r){if(iT&&iP&&null!==n&&n.memoizedState.isDehydrated)try{aI(t.containerInfo)}catch(t){rA(e,e.return,t)}if(iR){r=t.containerInfo,n=t.pendingChildren;try{ad(r,n)}catch(t){rA(e,e.return,t)}}}sL&&(sL=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var n=t;e(n),5===n.tag&&1024&n.flags&&iW(n.stateNode),t=t.sibling}}(e));break;case 4:aO?(n=sU,sU=az(e.stateNode.containerInfo),nV(t,e),nW(e),sU=n):(nV(t,e),nW(e)),4&r&&iR&&nF(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:default:nV(t,e),nW(e);break;case 13:nV(t,e),nW(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(li=oo()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,nG(e,r));break;case 22:512&r&&(sB||null===n||nI(n,n.return)),a=null!==e.memoizedState;var s=null!==n&&null!==n.memoizedState,l=sI,u=sB;if(sI=l||a,sB=u||s,nV(t,e),sB=u,sI=l,nW(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=a?-2&t._visibility:1|t._visibility,a&&(t=sI||sB,null===n||s||t||function e(t){for(t=t.child;null!==t;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:nC(4,n,n.return),e(n);break;case 1:nI(n,n.return);var r=n.stateNode;"function"==typeof r.componentWillUnmount&&nR(n,n.return,r),e(n);break;case 26:case 27:case 5:nI(n,n.return),e(n);break;case 22:nI(n,n.return),null===n.memoizedState&&e(n);break;default:e(n)}t=t.sibling}}(e)),iT&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode))){t:if(n=null,iT)for(t=e;;){if(5===t.tag||aO&&26===t.tag||aZ&&27===t.tag){if(null===n){s=n=t;try{o=s.stateNode,a?an(o):ai(s.stateNode,s.memoizedProps)}catch(e){rA(s,s.return,e)}}}else if(6===t.tag){if(null===n){s=t;try{var c=s.stateNode;a?ar(c):aa(c,s.memoizedProps)}catch(e){rA(s,s.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,nG(e,n));break;case 19:nV(t,e),nW(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,nG(e,r));case 21:}}function nW(e){var t=e.flags;if(2&t){try{if(iT&&(!aZ||27!==e.tag)){t:{for(var n=e.return;null!==n;){if(nk(n)){var r=n;break t}n=n.return}throw Error(i(160))}switch(r.tag){case 27:if(aZ){var a=r.stateNode,o=nD(e);nN(e,o,a);break}case 5:var s=r.stateNode;32&r.flags&&(at(s),r.flags&=-33);var l=nD(e);nN(e,l,s);break;case 3:case 4:var u=r.stateNode.containerInfo,c=nD(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?i8(r,t,n):i3(r,t);else if(!(4===i||aZ&&27===i)&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,c,u);break;default:throw Error(i(161))}}}catch(t){rA(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function nX(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)nO(e,t.alternate,t),t=t.sibling}function nJ(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&nd(n))}function nY(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&nd(e))}function nK(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nq(e,t,n,r),t=t.sibling}function nq(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:nK(e,t,n,r),2048&i&&nE(9,t);break;case 3:nK(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&nd(e)));break;case 12:if(2048&i){nK(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"==typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){rA(t,t.return,e)}}else nK(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?nK(e,t,n,r):nQ(e,t):4&a._visibility?nK(e,t,n,r):(a._visibility|=4,function e(t,n,r,i,a){for(a=a&&0!=(10256&n.subtreeFlags),n=n.child;null!==n;){var o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(t,o,r,i,a),nE(8,o);break;case 23:break;case 22:var l=o.stateNode;null!==o.memoizedState?4&l._visibility?e(t,o,r,i,a):nQ(t,o):(l._visibility|=4,e(t,o,r,i,a)),a&&2048&s&&nJ(o.alternate,o);break;case 24:e(t,o,r,i,a),a&&2048&s&&nY(o.alternate,o);break;default:e(t,o,r,i,a)}n=n.sibling}}(e,t,n,r,0!=(10256&t.subtreeFlags))),2048&i&&nJ(t.alternate,t);break;case 24:nK(e,t,n,r),2048&i&&nY(t.alternate,t);break;default:nK(e,t,n,r)}}function nQ(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=t,r=n.flags;switch(n.tag){case 22:nQ(e,n),2048&r&&nJ(n.alternate,n);break;case 24:nQ(e,n),2048&r&&nY(n.alternate,n);break;default:nQ(e,n)}t=t.sibling}}function nZ(e){if(e.subtreeFlags&sz)for(e=e.child;null!==e;)n$(e),e=e.sibling}function n$(e){switch(e.tag){case 26:nZ(e),e.flags&sz&&(null!==e.memoizedState?aQ(sU,e.memoizedState,e.memoizedProps):iH(e.type,e.memoizedProps));break;case 5:nZ(e),e.flags&sz&&iH(e.type,e.memoizedProps);break;case 3:case 4:if(aO){var t=sU;sU=az(e.stateNode.containerInfo),nZ(e),sU=t}else nZ(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=sz,sz=0x1000000,nZ(e),sz=t):nZ(e));break;default:nZ(e)}}function n0(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function n1(e){var t=e.deletions;if(0!=(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];sD=r,n3(r,e)}n0(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)n2(e),e=e.sibling}function n2(e){switch(e.tag){case 0:case 11:case 15:n1(e),2048&e.flags&&nC(9,e,e.return);break;case 3:case 12:default:n1(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,function e(t){var n=t.deletions;if(0!=(16&t.flags)){if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];sD=i,n3(i,t)}n0(t)}for(t=t.child;null!==t;){switch((n=t).tag){case 0:case 11:case 15:nC(8,n,n.return),e(n);break;case 22:4&(r=n.stateNode)._visibility&&(r._visibility&=-5,e(n));break;default:e(n)}t=t.sibling}}(e)):n1(e)}}function n3(e,t){for(;null!==sD;){var n=sD;switch(n.tag){case 0:case 11:case 15:nC(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:nd(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,sD=r;else for(n=e;null!==sD;){var i=(r=sD).sibling,a=r.return;if(function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&iF(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(r),r===n){sD=null;break}if(null!==i){i.return=a,sD=i;break}sD=a}}}function n4(e){var t=iI(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(i(364));return t}if(null===(e=iK(e)))throw Error(i(362));return e.stateNode.current}function n5(e,t){var n=e.tag;switch(t.$$typeof){case sG:if(e.type===t.value)return!0;break;case sV:t:{for(n=0,t=t.value,e=[e,0];n<e.length;){var r=e[n++],a=r.tag,o=e[n++],s=t[o];if(5!==a&&26!==a&&27!==a||!iZ(r)){for(;null!=s&&n5(r,s);)s=t[++o];if(o===t.length){t=!0;break t}for(r=r.child;null!==r;)e.push(r,o),r=r.sibling}}t=!1}return t;case sj:if((5===n||26===n||27===n)&&i$(e.stateNode,t.value))return!0;break;case sX:if((5===n||6===n||26===n||27===n)&&null!==(e=iQ(e))&&0<=e.indexOf(t.value))return!0;break;case sW:if((5===n||26===n||27===n)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(i(365))}return!1}function n6(e){switch(e.$$typeof){case sG:return"<"+(o(e.value)||"Unknown")+">";case sV:return":has("+(n6(e)||"")+")";case sj:return'[role="'+e.value+'"]';case sX:return'"'+e.value+'"';case sW:return'[data-testname="'+e.value+'"]';default:throw Error(i(365))}}function n9(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=i.tag,o=e[r++],s=t[o];if(5!==a&&26!==a&&27!==a||!iZ(i)){for(;null!=s&&n5(i,s);)s=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function n8(e,t){if(!iY)throw Error(i(363));e=n9(e=n4(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++],a=r.tag;if(5===a||26===a||27===a)iZ(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}function n7(){if(0!=(2&sK)&&0!==sZ)return sZ&-sZ;if(null!==is.T){var e=oJ;return 0!==e?e:ee()}return iD()}function re(){0===s7&&(s7=0==(0x20000000&sZ)||oB?b():0x20000000);var e=o8.current;return null!==e&&(e.flags|=32),s7}function rt(e,t,n){(e===sq&&2===s$||null!==e.cancelPendingCommit)&&(rl(e,0),ra(e,sZ,s7,!1)),w(e,n),(0==(2&sK)||e!==sq)&&(e===sq&&(0==(2&sK)&&(s9|=n),4===s5&&ra(e,sZ,s7,!1)),Y(e))}function rn(e,t,n){if(0!=(6&sK))throw Error(i(327));for(var r=!n&&0==(60&t)&&0==(t&e.expiredLanes)||y(e,t),a=r?function(e,t){var n=sK;sK|=2;var r=rd(),a=rh();sq!==e||sZ!==t?(lo=null,la=oo()+500,rl(e,t)):s2=y(e,t);t:for(;;)try{if(0!==s$&&null!==sQ){t=sQ;var o=s0;n:switch(s$){case 1:s$=0,s0=null,rv(e,t,o,1);break;case 2:if(ef(o)){s$=0,s0=null,rg(t);break}t=function(){2===s$&&sq===e&&(s$=7),Y(e)},o.then(t,t);break t;case 3:s$=7;break t;case 4:s$=5;break t;case 7:ef(o)?(s$=0,s0=null,rg(t)):(s$=0,s0=null,rv(e,t,o,7));break;case 5:var s=null;switch(sQ.tag){case 26:s=sQ.memoizedState;case 5:case 27:var l=sQ,u=l.type,c=l.pendingProps;if(s?aq(s):iU(u,c)){s$=0,s0=null;var d=l.sibling;if(null!==d)sQ=d;else{var h=l.return;null!==h?(sQ=h,ry(h)):sQ=null}break n}}s$=0,s0=null,rv(e,t,o,5);break;case 6:s$=0,s0=null,rv(e,t,o,6);break;case 8:rs(),s5=6;break t;default:throw Error(i(462))}}(function(){for(;null!==sQ&&!oi();)rm(sQ)})();break}catch(t){ru(e,t)}return(sA=sS=null,is.H=r,is.A=a,sK=n,null!==sQ)?0:(sq=null,sZ=0,G(),s5)}(e,t):rp(e,t,!0),o=r;;){if(0===a)s2&&!r&&ra(e,t,0,!1);else if(6===a)ra(e,t,0,!s1);else{if(n=e.current.alternate,o&&!function(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!om(a(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)){a=rp(e,t,!1),o=!1;continue}if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!=(s=-0x20000001&e.pendingLanes)?s:0x20000000&s?0x20000000:0;if(0!==s){t=s;t:{a=lt;var l=iP&&e.current.memoizedState.isDehydrated;if(l&&(rl(e,s).flags|=256),2!==(s=rp(e,s,!1))){if(s3&&!l){e.errorRecoveryDisabledLanes|=o,s9|=o,a=4;break t}o=ln,ln=a,null!==o&&rr(o)}a=s}if(o=!1,2!==a)continue}}if(1===a){rl(e,0),ra(e,t,0,!0);break}t:{switch(r=e,a){case 0:case 1:throw Error(i(345));case 4:if((4194176&t)===t){ra(r,t,s7,!s1);break t}break;case 2:ln=null;break;case 3:case 5:break;default:throw Error(i(329))}if(r.finishedWork=n,r.finishedLanes=t,(0x3c00000&t)===t&&10<(o=li+300-oo())){if(ra(r,t,s7,!s1),0!==v(r,0))break t;r.timeoutHandle=iA(ri.bind(null,r,n,ln,lo,lr,t,s7,s9,le,s1,2,-0,0),o);break t}ri(r,n,ln,lo,lr,t,s7,s9,le,s1,0,-0,0)}}break}Y(e)}function rr(e){null===ln?ln=e:ln.push.apply(ln,e)}function ri(e,t,n,r,i,a,o,s,l,u,c,d,h){var f=t.subtreeFlags;if((8192&f||0x1002000==(0x1002000&f))&&(iz(),n$(t),null!==(t=iG()))){e.cancelPendingCommit=t(rx.bind(null,e,n,r,i,o,s,l,1,d,h)),ra(e,a,o,!u);return}rx(e,n,r,i,o,s,l,c,d,h)}function ra(e,t,n,r){t&=~s8,t&=~s9,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-a9(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&S(e,n,t)}function ro(){return 0!=(6&sK)||(K(0,!1),!1)}function rs(){if(null!==sQ){if(0===s$)var e=sQ.return;else e=sQ,sA=sS=null,eO(e),o2=null,o3=0,e=sQ;for(;null!==e;)nM(e.alternate,e),e=e.return;sQ=null}}function rl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==iE&&(e.timeoutHandle=iE,iM(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),rs(),sq=e,sQ=n=rB(e.current,null),sZ=t,s$=0,s0=null,s1=!1,s2=y(e,t),s3=!1,le=s7=s8=s9=s6=s5=0,ln=lt=null,lr=!1,0!=(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-a9(r),a=1<<i;t|=e[i],r&=~a}return s4=t,G(),n}function ru(e,t){sn=null,is.H=sf,t===oZ?(t=eg(),s$=3):t===o$?(t=eg(),s$=4):s$=t===sb?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,s0=t,null===sQ&&(s5=1,tN(e,C(t,e.current)))}function rc(){var e=o8.current;return null===e||((4194176&sZ)===sZ?null===o7:((0x3c00000&sZ)===sZ||0!=(0x20000000&sZ))&&e===o7)}function rd(){var e=is.H;return is.H=sf,null===e?sf:e}function rh(){var e=is.A;return is.A=sH,e}function rf(){s5=4,s1||(4194176&sZ)!==sZ&&null!==o8.current||(s2=!0),0==(0x7ffffff&s6)&&0==(0x7ffffff&s9)||null===sq||ra(sq,sZ,s7,!1)}function rp(e,t,n){var r=sK;sK|=2;var i=rd(),a=rh();(sq!==e||sZ!==t)&&(lo=null,rl(e,t)),t=!1;var o=s5;t:for(;;)try{if(0!==s$&&null!==sQ){var s=sQ,l=s0;switch(s$){case 8:rs(),o=6;break t;case 3:case 2:case 6:null===o8.current&&(t=!0);var u=s$;if(s$=0,s0=null,rv(e,s,l,u),n&&s2){o=0;break t}break;default:u=s$,s$=0,s0=null,rv(e,s,l,u)}}(function(){for(;null!==sQ;)rm(sQ)})(),o=s5;break}catch(t){ru(e,t)}return t&&e.shellSuspendCounter++,sA=sS=null,sK=r,is.H=i,is.A=a,null===sQ&&(sq=null,sZ=0,G()),o}function rm(e){var t=t7(e.alternate,e,s4);e.memoizedProps=e.pendingProps,null===t?ry(e):sQ=t}function rg(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=tK(n,t,t.pendingProps,t.type,void 0,sZ);break;case 11:t=tK(n,t,t.pendingProps,t.type.render,t.ref,sZ);break;case 5:eO(t);default:nM(n,t),t=t7(n,t=sQ=rL(t,s4),s4)}e.memoizedProps=e.pendingProps,null===t?ry(e):sQ=t}function rv(e,t,n,r){sA=sS=null,eO(t),o2=null,o3=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&ni(t,n,a,!0),null!==(n=o8.current)){switch(n.tag){case 13:return null===o7?rf():null===n.alternate&&0===s5&&(s5=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===o0?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),rM(e,r,a)),!1;case 22:return n.flags|=65536,r===o0?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),rM(e,r,a)),!1}throw Error(i(435,n.tag))}return rM(e,r,a),rf(),!1}if(oB)return null!==(t=o8.current)?(0==(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==oD&&H(C(e=Error(i(422),{cause:r}),n))):(r!==oD&&H(C(t=Error(i(423),{cause:r}),n)),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=C(r,n),a=tO(e.stateNode,r,a),es(e,a),4!==s5&&(s5=2)),!1;var o=Error(i(520),{cause:r});if(o=C(o,n),null===lt?lt=[o]:lt.push(o),4!==s5&&(s5=2),null===t)return!0;r=C(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=tO(n.stateNode,r,e),es(n,e),!1;case 1:if(t=n.type,o=n.stateNode,0==(128&n.flags)&&("function"==typeof t.getDerivedStateFromError||null!==o&&"function"==typeof o.componentDidCatch&&(null===ls||!ls.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,tz(a=tU(a),e,n,r),es(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,sZ)){s5=1,tN(e,C(n,e.current)),sQ=null;return}}catch(t){if(null!==a)throw sQ=a,t;s5=1,tN(e,C(n,e.current)),sQ=null;return}32768&t.flags?(oB||1===r?e=!0:s2||0!=(0x20000000&sZ)?e=!1:(s1=e=!0,(2===r||3===r||6===r)&&null!==(r=o8.current)&&13===r.tag&&(r.flags|=16384)),rb(t,e)):ry(t)}function ry(e){var t=e;do{if(0!=(32768&t.flags)){rb(t,s1);return}e=t.return;var n=function(e,t,n){var r=t.pendingProps;switch(I(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nA(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),nt(sT),L(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(U(t)?nm(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==oL&&(rr(oL),oL=null))),ny(e,t),nA(t),null;case 26:if(aO){n=t.type;var a=t.memoizedState;return null===e?(nm(t),null!==a?(nA(t),n_(t,a)):(nA(t),nx(t,n,r))):a?a!==e.memoizedState?(nm(t),nA(t),n_(t,a)):(nA(t),t.flags&=-0x1000001):(iT?e.memoizedProps!==r&&nm(t):nb(e,t,n,r),nA(t),nx(t,n,r)),null}case 27:if(aZ){if(D(t),n=oT.current,a=t.type,null!==e&&null!=t.stateNode)iT?e.memoizedProps!==r&&nm(t):nb(e,t,a,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nA(t),null}e=oE.current,U(t)?F(t,e):(e=a$(a,r,n,e,!0),t.stateNode=e,nm(t))}return nA(t),null}case 5:if(D(t),n=t.type,null!==e&&null!=t.stateNode)nb(e,t,n,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nA(t),null}e=oE.current,U(t)?F(t,e):(nv(a=ib(n,r,oT.current,e,t),t,!1,!1),t.stateNode=a,i_(a,n,r,e)&&nm(t))}return nA(t),nx(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,iT?n!==r&&nm(t):iR&&(n!==r?(t.stateNode=iS(r,oT.current,oE.current,t),nm(t)):t.stateNode=e.stateNode);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=oT.current,n=oE.current,U(t)){if(!iP)throw Error(i(176));if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=oP))switch(a.tag){case 27:case 5:r=a.memoizedProps}aT(e,n,t,r)||N(t)}else t.stateNode=iS(r,e,n,t)}return nA(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=U(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!iP)throw Error(i(344));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));aR(a,t)}else z(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nA(t),a=!1}else null!==oL&&(rr(oL),oL=null),a=!0;if(!a){if(256&t.flags)return eT(t),t;return eT(t),null}}if(eT(t),0!=(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){r=t.child,a=null,null!==r.alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),nw(t,t.updateQueue),nA(t),null;case 4:return L(),ny(e,t),null===e&&iB(t.stateNode.containerInfo),nA(t),null;case 10:return nt(t.type),nA(t),null;case 19:if(p(se),null===(a=t.memoizedState))return nA(t),null;if(r=0!=(128&t.flags),null===(o=a.rendering)){if(r)nS(a,!1);else{if(0!==s5||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=eR(e))){for(t.flags|=128,nS(a,!1),e=o.updateQueue,t.updateQueue=e,nw(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)rL(n,e),n=n.sibling;return m(se,1&se.current|2),t.child}e=e.sibling}null!==a.tail&&oo()>la&&(t.flags|=128,r=!0,nS(a,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=eR(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,nw(t,e),nS(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!oB)return nA(t),null}else 2*oo()-a.renderingStartTime>la&&0x20000000!==n&&(t.flags|=128,r=!0,nS(a,!1),t.lanes=4194304)}a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}if(null!==a.tail)return t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=oo(),t.sibling=null,e=se.current,m(se,r?1&e|2:1&e),t;return nA(t),null;case 22:case 23:return eT(t),eA(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!=(0x20000000&n)&&0==(128&t.flags)&&(nA(t),6&t.subtreeFlags&&(t.flags|=8192)):nA(t),null!==(n=t.updateQueue)&&nw(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&p(sP),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),nt(sT),nA(t),null;case 25:return null}throw Error(i(156,t.tag))}(t.alternate,t,s4);if(null!==n){sQ=n;return}if(null!==(t=t.sibling)){sQ=t;return}sQ=t=e}while(null!==t);0===s5&&(s5=5)}function rb(e,t){do{var n=function(e,t){switch(I(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return nt(sT),L(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return D(t),null;case 13:if(eT(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));z()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return p(se),null;case 4:return L(),null;case 10:return nt(t.type),null;case 22:case 23:return eT(t),eA(),null!==e&&p(sP),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return nt(sT),null;default:return null}}(e.alternate,e);if(null!==n){n.flags&=32767,sQ=n;return}if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling)){sQ=e;return}sQ=e=n}while(null!==e);s5=6,sQ=null}function rx(e,t,n,r,a,o,s,l,u,c){var d=is.T,h=ik();try{iL(2),is.T=null,function(e,t,n,r,a,o,s,l){do rw();while(null!==lu);if(0!=(6&sK))throw Error(i(327));var u,c,d=e.finishedWork;if(r=e.finishedLanes,null!==d){if(e.finishedWork=null,e.finishedLanes=0,d===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var h=d.lanes|d.childLanes;if(function(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-a9(n),d=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-0x20000001)}n&=~d}0!==r&&S(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,r,h|=oO,o,s,l),e===sq&&(sQ=sq=null,sZ=0),0==(10256&d.subtreeFlags)&&0==(10256&d.flags)||ll||(ll=!0,ld=h,lh=n,u=ou,c=function(){return rw(!0),null},on(u,c)),n=0!=(15990&d.flags),0!=(15990&d.subtreeFlags)||n?(n=is.T,is.T=null,o=ik(),iL(2),s=sK,sK|=4,function(e,t){for(iv(e.containerInfo),sD=t;null!==sD;)if(t=(e=sD).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,sD=t;else for(;null!==sD;){var n=(e=sD).alternate;switch(t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!=(1024&t)&&null!==n){t=void 0;var r=e,a=n.memoizedProps;n=n.memoizedState;var o=r.stateNode;try{var s=tD(r.type,a,r.elementType===r.type);t=o.getSnapshotBeforeUpdate(s,n),o.__reactInternalSnapshotBeforeUpdate=t}catch(e){rA(r,r.return,e)}}break;case 3:0!=(1024&t)&&iT&&ao(e.stateNode.containerInfo);break;default:if(0!=(1024&t))throw Error(i(163))}if(null!==(t=e.sibling)){t.return=e.return,sD=t;break}sD=e.return}s=sN,sN=!1}(e,d),nj(d,e),iy(e.containerInfo),e.current=d,nO(e,d.alternate,d),oa(),sK=s,iL(o),is.T=n):e.current=d,ll?(ll=!1,lu=e,lc=r):r_(e,h),0===(h=e.pendingLanes)&&(ls=null),function(e){if(op&&"function"==typeof op.onCommitFiberRoot)try{op.onCommitFiberRoot(of,e,void 0,128==(128&e.current.flags))}catch(e){}}(d.stateNode,a),Y(e),null!==t)for(a=e.onRecoverableError,d=0;d<t.length;d++)a((h=t[d]).value,{componentStack:h.stack});0!=(3&lc)&&rw(),h=e.pendingLanes,0!=(4194218&r)&&0!=(42&h)?e===lp?lf++:(lf=0,lp=e):lf=0,K(0,!1)}}(e,t,n,r,h,a,o,s,l,u,c)}finally{is.T=d,iL(h)}}function r_(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,nd(t))}function rw(){if(null!==lu){var e=lu,t=ld;ld=0;var n=M(lc),r=32>n?32:n;n=is.T;var a=ik();try{if(iL(r),is.T=null,null===lu)var o=!1;else{r=lh,lh=null;var s=lu,l=lc;if(lu=null,lc=0,0!=(6&sK))throw Error(i(331));var u=sK;if(sK|=4,n2(s.current),nq(s,s.current,l,r),sK=u,K(0,!1),op&&"function"==typeof op.onPostCommitFiberRoot)try{op.onPostCommitFiberRoot(of,s)}catch(e){}o=!0}return o}finally{iL(a),is.T=n,r_(e,t)}}return!1}function rS(e,t,n){t=C(n,t),t=tO(e.stateNode,t,2),null!==(e=ea(e,t,2))&&(w(e,2),Y(e))}function rA(e,t,n){if(3===e.tag)rS(e,e,n);else for(;null!==t;){if(3===t.tag){rS(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ls||!ls.has(r))){e=C(n,e),null!==(r=ea(t,n=tU(2),2))&&(tz(n,r,t,e),w(r,2),Y(r));break}}t=t.return}}function rM(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new sY;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(s3=!0,i.add(n),e=rE.bind(null,e,t,n),t.then(e,e))}function rE(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sq===e&&(sZ&n)===n&&(4===s5||3===s5&&(0x3c00000&sZ)===sZ&&300>oo()-li?0==(2&sK)&&rl(e,0):s8|=n,le===sZ&&(le=0)),Y(e)}function rC(e,t){0===t&&(t=x()),null!==(e=W(e,t))&&(w(e,t),Y(e))}function rT(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),rC(e,n)}function rR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),rC(e,n)}function rP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rI(e){return!(!(e=e.prototype)||!e.isReactComponent)}function rB(e,n){var r=e.alternate;return null===r?((r=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=0x1e00000&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function rL(e,t){e.flags&=0x1e00002;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function rk(e,n,r,a,o,s){var l=0;if(a=e,"function"==typeof e)rI(e)&&(l=1);else if("string"==typeof e)l=aO&&aZ?aU(e,r,oE.current)?26:a3(e)?27:5:aO?aU(e,r,oE.current)?26:5:aZ&&a3(e)?27:5;else t:switch(e){case r$:return rD(r.children,o,s,n);case r0:l=8,o|=24;break;case r1:return(e=t(12,r,n,2|o)).elementType=r1,e.lanes=s,e;case r6:return(e=t(13,r,n,o)).elementType=r6,e.lanes=s,e;case r9:return(e=t(19,r,n,o)).elementType=r9,e.lanes=s,e;case ie:return rN(r,o,s,n);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case r2:case r4:l=10;break t;case r3:l=9;break t;case r5:l=11;break t;case r8:l=14;break t;case r7:l=16,a=null;break t}l=29,r=Error(i(130,null===e?"null":typeof e,"")),a=null}return(n=t(l,r,n,o)).elementType=e,n.type=a,n.lanes=s,n}function rD(e,n,r,i){return(e=t(7,e,i,n)).lanes=r,e}function rN(e,n,r,a){(e=t(22,e,a,n)).elementType=ie,e.lanes=r;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(i(456));if(0==(2&o._pendingVisibility)){var t=W(e,2);null!==t&&(o._pendingVisibility|=2,rt(t,e,2))}},attach:function(){var e=o._current;if(null===e)throw Error(i(456));if(0!=(2&o._pendingVisibility)){var t=W(e,2);null!==t&&(o._pendingVisibility&=-3,rt(t,e,2))}}};return e.stateNode=o,e}function rF(e,n,r){return(e=t(6,e,null,n)).lanes=r,e}function rO(e,n,r){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function rU(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=iE,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_(0),this.hiddenUpdates=_(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function rz(e,n,r,i,a,o,s,l,u,c,d,h){return e=new rU(e,n,r,s,l,u,c,h),n=1,!0===o&&(n|=24),o=t(3,null,null,n),e.current=o,o.stateNode=e,n=nc(),n.refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:i,isDehydrated:r,cache:n},en(o),e}function rH(e){return e?e=a6:a6}function rG(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw Error(i(268,e=Object.keys(e).join(",")))}return null===(e=null!==(e=h(t))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:ip(e.stateNode)}function rV(e,t,n,r,i,a){var o;i=(o=i)?o=a6:a6,null===r.context?r.context=i:r.pendingContext=i,(r=ei(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ea(e,r,t))&&(rt(n,e,t),eo(n,e,t))}function rj(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rW(e,t){rj(e,t),(e=e.alternate)&&rj(e,t)}var rX={},rJ=n(5263),rY=n(1653),rK=Object.assign,rq=Symbol.for("react.element"),rQ=Symbol.for("react.transitional.element"),rZ=Symbol.for("react.portal"),r$=Symbol.for("react.fragment"),r0=Symbol.for("react.strict_mode"),r1=Symbol.for("react.profiler"),r2=Symbol.for("react.provider"),r3=Symbol.for("react.consumer"),r4=Symbol.for("react.context"),r5=Symbol.for("react.forward_ref"),r6=Symbol.for("react.suspense"),r9=Symbol.for("react.suspense_list"),r8=Symbol.for("react.memo"),r7=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var ie=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var it,ir,ii=Symbol.for("react.memo_cache_sentinel"),ia=Symbol.iterator,io=Symbol.for("react.client.reference"),is=rJ.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,il=!1,iu=Array.isArray,ic=e.rendererVersion,id=e.rendererPackageName,ih=e.extraDevToolsConfig,ip=e.getPublicInstance,im=e.getRootHostContext,ig=e.getChildHostContext,iv=e.prepareForCommit,iy=e.resetAfterCommit,ib=e.createInstance,ix=e.appendInitialChild,i_=e.finalizeInitialChildren,iw=e.shouldSetTextContent,iS=e.createTextInstance,iA=e.scheduleTimeout,iM=e.cancelTimeout,iE=e.noTimeout,iC=e.isPrimaryRenderer;e.warnsIfNotActing;var iT=e.supportsMutation,iR=e.supportsPersistence,iP=e.supportsHydration,iI=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var iB=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var iL=e.setCurrentUpdatePriority,ik=e.getCurrentUpdatePriority,iD=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var iN=e.shouldAttemptEagerTransition,iF=e.detachDeletedInstance;e.requestPostPaintCallback;var iO=e.maySuspendCommit,iU=e.preloadInstance,iz=e.startSuspendingCommit,iH=e.suspendInstance,iG=e.waitForCommitToBeReady,iV=e.NotPendingTransition,ij=e.HostTransitionContext,iW=e.resetFormInstance;e.bindToConsole;var iX=e.supportsMicrotasks,iJ=e.scheduleMicrotask,iY=e.supportsTestSelectors,iK=e.findFiberRoot,iq=e.getBoundingRect,iQ=e.getTextContent,iZ=e.isHiddenSubtree,i$=e.matchAccessibilityRole,i0=e.setFocusIfFocusable,i1=e.setupIntersectionObserver,i2=e.appendChild,i3=e.appendChildToContainer,i4=e.commitTextUpdate,i5=e.commitMount,i6=e.commitUpdate,i9=e.insertBefore,i8=e.insertInContainerBefore,i7=e.removeChild,ae=e.removeChildFromContainer,at=e.resetTextContent,an=e.hideInstance,ar=e.hideTextInstance,ai=e.unhideInstance,aa=e.unhideTextInstance,ao=e.clearContainer,as=e.cloneInstance,al=e.createContainerChildSet,au=e.appendChildToContainerChildSet,ac=e.finalizeContainerChildren,ad=e.replaceContainerChildren,ah=e.cloneHiddenInstance,af=e.cloneHiddenTextInstance,ap=e.isSuspenseInstancePending,am=e.isSuspenseInstanceFallback,ag=e.getSuspenseInstanceFallbackErrorDetails,av=e.registerSuspenseInstanceRetry,ay=e.canHydrateFormStateMarker,ab=e.isFormStateMarkerMatching,ax=e.getNextHydratableSibling,a_=e.getFirstHydratableChild,aw=e.getFirstHydratableChildWithinContainer,aS=e.getFirstHydratableChildWithinSuspenseInstance,aA=e.canHydrateInstance,aM=e.canHydrateTextInstance,aE=e.canHydrateSuspenseInstance,aC=e.hydrateInstance,aT=e.hydrateTextInstance,aR=e.hydrateSuspenseInstance,aP=e.getNextHydratableInstanceAfterSuspenseInstance,aI=e.commitHydratedContainer,aB=e.commitHydratedSuspenseInstance,aL=e.clearSuspenseBoundary,ak=e.clearSuspenseBoundaryFromContainer,aD=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var aN=e.validateHydratableInstance,aF=e.validateHydratableTextInstance,aO=e.supportsResources,aU=e.isHostHoistableType,az=e.getHoistableRoot,aH=e.getResource,aG=e.acquireResource,aV=e.releaseResource,aj=e.hydrateHoistable,aW=e.mountHoistable,aX=e.unmountHoistable,aJ=e.createHoistableInstance,aY=e.prepareToCommitHoistables,aK=e.mayResourceSuspendCommit,aq=e.preloadResource,aQ=e.suspendResource,aZ=e.supportsSingletons,a$=e.resolveSingletonInstance,a0=e.clearSingleton,a1=e.acquireSingletonInstance,a2=e.releaseSingletonInstance,a3=e.isHostSingletonType,a4=[],a5=-1,a6={},a9=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(a8(e)/a7|0)|0},a8=Math.log,a7=Math.LN2,oe=128,ot=4194304,on=rY.unstable_scheduleCallback,or=rY.unstable_cancelCallback,oi=rY.unstable_shouldYield,oa=rY.unstable_requestPaint,oo=rY.unstable_now,os=rY.unstable_ImmediatePriority,ol=rY.unstable_UserBlockingPriority,ou=rY.unstable_NormalPriority,oc=rY.unstable_IdlePriority,od=rY.log,oh=rY.unstable_setDisableYieldValue,of=null,op=null,om="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},og=new WeakMap,ov=[],oy=0,ob=null,ox=0,o_=[],ow=0,oS=null,oA=1,oM="",oE=f(null),oC=f(null),oT=f(null),oR=f(null),oP=null,oI=null,oB=!1,oL=null,ok=!1,oD=Error(i(519)),oN=[],oF=0,oO=0,oU=null,oz=null,oH=!1,oG=!1,oV=!1,oj=0,oW=null,oX=0,oJ=0,oY=null,oK=!1,oq=!1,oQ=Object.prototype.hasOwnProperty,oZ=Error(i(460)),o$=Error(i(474)),o0={then:function(){}},o1=null,o2=null,o3=0,o4=e_(!0),o5=e_(!1),o6=f(null),o9=f(0),o8=f(null),o7=null,se=f(0),st=0,sn=null,sr=null,si=null,sa=!1,so=!1,ss=!1,sl=0,su=0,sc=null,sd=0,sh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},sf={readContext:ns,use:eG,useCallback:eP,useContext:eP,useEffect:eP,useImperativeHandle:eP,useLayoutEffect:eP,useInsertionEffect:eP,useMemo:eP,useReducer:eP,useRef:eP,useState:eP,useDebugValue:eP,useDeferredValue:eP,useTransition:eP,useSyncExternalStore:eP,useId:eP};sf.useCacheRefresh=eP,sf.useMemoCache=eP,sf.useHostTransitionStatus=eP,sf.useFormState=eP,sf.useActionState=eP,sf.useOptimistic=eP;var sp={readContext:ns,use:eG,useCallback:function(e,t){return eU().memoizedState=[e,void 0===t?null:t],e},useContext:ns,useEffect:tl,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,to(4194308,4,th.bind(null,t,e),n)},useLayoutEffect:function(e,t){return to(4194308,4,e,t)},useInsertionEffect:function(e,t){to(4,2,e,t)},useMemo:function(e,t){var n=eU();t=void 0===t?null:t;var r=e();if(ss){E(!0);try{e()}finally{E(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=eU();if(void 0!==n){var i=n(t);if(ss){E(!0);try{n(t)}finally{E(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=tM.bind(null,sn,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eU().memoizedState=e},useState:function(e){var t=(e=e0(e)).queue,n=tE.bind(null,sn,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:tp,useDeferredValue:function(e,t){return tv(eU(),e,t)},useTransition:function(){var e=e0(!1);return e=tb.bind(null,sn,e.queue,!0,!1),eU().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=sn,a=eU();if(oB){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===sq)throw Error(i(349));0!=(60&sZ)||eK(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,tl(eQ.bind(null,r,o,e),[e]),r.flags|=2048,ti(9,eq.bind(null,r,o,n,t),{destroy:void 0},null),n},useId:function(){var e=eU(),t=sq.identifierPrefix;if(oB){var n=oM,r=oA;t=":"+t+"R"+(n=(r&~(1<<32-a9(r)-1)).toString(32)+n),0<(n=sl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=sd++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return eU().memoizedState=tA.bind(null,sn)}};sp.useMemoCache=eV,sp.useHostTransitionStatus=t_,sp.useFormState=e7,sp.useActionState=e7,sp.useOptimistic=function(e){var t=eU();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=tT.bind(null,sn,!0,n),n.dispatch=t,[e,t]};var sm={readContext:ns,use:eG,useCallback:tm,useContext:ns,useEffect:tu,useImperativeHandle:tf,useInsertionEffect:tc,useLayoutEffect:td,useMemo:tg,useReducer:eW,useRef:ta,useState:function(){return eW(ej)},useDebugValue:tp,useDeferredValue:function(e,t){return ty(ez(),sr.memoizedState,e,t)},useTransition:function(){var e=eW(ej)[0],t=ez().memoizedState;return["boolean"==typeof e?e:eH(e),t]},useSyncExternalStore:eY,useId:tw};sm.useCacheRefresh=tS,sm.useMemoCache=eV,sm.useHostTransitionStatus=t_,sm.useFormState=te,sm.useActionState=te,sm.useOptimistic=function(e,t){return e1(ez(),sr,e,t)};var sg={readContext:ns,use:eG,useCallback:tm,useContext:ns,useEffect:tu,useImperativeHandle:tf,useInsertionEffect:tc,useLayoutEffect:td,useMemo:tg,useReducer:eJ,useRef:ta,useState:function(){return eJ(ej)},useDebugValue:tp,useDeferredValue:function(e,t){var n=ez();return null===sr?tv(n,e,t):ty(n,sr.memoizedState,e,t)},useTransition:function(){var e=eJ(ej)[0],t=ez().memoizedState;return["boolean"==typeof e?e:eH(e),t]},useSyncExternalStore:eY,useId:tw};sg.useCacheRefresh=tS,sg.useMemoCache=eV,sg.useHostTransitionStatus=t_,sg.useFormState=tr,sg.useActionState=tr,sg.useOptimistic=function(e,t){var n=ez();return null!==sr?e1(n,sr,e,t):(n.baseState=e,[e,n.queue.dispatch])};var sv={isMounted:function(e){return!!(e=e._reactInternals)&&c(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=n7(),i=ei(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=ea(e,i,r))&&(rt(t,e,r),eo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=n7(),i=ei(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ea(e,i,r))&&(rt(t,e,r),eo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=n7(),r=ei(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ea(e,r,n))&&(rt(t,e,n),eo(t,e,n))}},sy="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit){process.emit("uncaughtException",e);return}console.error(e)},sb=Error(i(461)),sx=!1,s_={dehydrated:null,treeContext:null,retryLane:0},sw=f(null),sS=null,sA=null,sM="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},sE=rY.unstable_scheduleCallback,sC=rY.unstable_NormalPriority,sT={$$typeof:r4,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},sR=is.S;is.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===oW){var n=oW=[];oX=0,oJ=ee(),oY={status:"pending",value:void 0,then:function(e){n.push(e)}}}oX++,t.then(et,et)}(0,t),null!==sR&&sR(e,t)};var sP=f(null),sI=!1,sB=!1,sL=!1,sk="function"==typeof WeakSet?WeakSet:Set,sD=null,sN=!1,sF=null,sO=!1,sU=null,sz=8192,sH={getCacheForType:function(e){var t=ns(sT),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},sG=0,sV=1,sj=2,sW=3,sX=4;if("function"==typeof Symbol&&Symbol.for){var sJ=Symbol.for;sG=sJ("selector.component"),sV=sJ("selector.has_pseudo_class"),sj=sJ("selector.role"),sW=sJ("selector.test_id"),sX=sJ("selector.text")}var sY="function"==typeof WeakMap?WeakMap:Map,sK=0,sq=null,sQ=null,sZ=0,s$=0,s0=null,s1=!1,s2=!1,s3=!1,s4=0,s5=0,s6=0,s9=0,s8=0,s7=0,le=0,lt=null,ln=null,lr=!1,li=0,la=1/0,lo=null,ls=null,ll=!1,lu=null,lc=0,ld=0,lh=null,lf=0,lp=null;return rX.attemptContinuousHydration=function(e){if(13===e.tag){var t=W(e,0x4000000);null!==t&&rt(t,e,0x4000000),rW(e,0x4000000)}},rX.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=n7(),n=W(e,t);null!==n&&rt(n,e,t),rW(e,t)}},rX.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=g(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-a9(t);e.entanglements[1]|=n,t&=~n}Y(e),0==(6&sK)&&(la=oo()+500,K(0,!1))}}break;case 13:null!==(t=W(e,2))&&rt(t,e,2),ro(),rW(e,2)}},rX.batchedUpdates=function(e,t){return e(t)},rX.createComponentSelector=function(e){return{$$typeof:sG,value:e}},rX.createContainer=function(e,t,n,r,i,a,o,s,l,u){return rz(e,t,!1,null,n,r,a,o,s,l,u,null)},rX.createHasPseudoClassSelector=function(e){return{$$typeof:sV,value:e}},rX.createHydrationContainer=function(e,t,n,r,i,a,o,s,l,u,c,d,h){var f;return(e=rz(n,r,!0,e,i,a,s,l,u,c,d,h)).context=(f=null,a6),n=e.current,(i=ei(r=n7())).callback=null!=t?t:null,ea(n,i,r),e.current.lanes=r,w(e,r),Y(e),e},rX.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:rZ,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},rX.createRoleSelector=function(e){return{$$typeof:sj,value:e}},rX.createTestNameSelector=function(e){return{$$typeof:sW,value:e}},rX.createTextSelector=function(e){return{$$typeof:sX,value:e}},rX.defaultOnCaughtError=function(e){console.error(e)},rX.defaultOnRecoverableError=function(e){sy(e)},rX.defaultOnUncaughtError=function(e){sy(e)},rX.deferredUpdates=function(e){var t=is.T,n=ik();try{return iL(32),is.T=null,e()}finally{iL(n),is.T=t}},rX.discreteUpdates=function(e,t,n,r,i){var a=is.T,o=ik();try{return iL(2),is.T=null,e(t,n,r,i)}finally{iL(o),is.T=a,0===sK&&(la=oo()+500)}},rX.findAllNodes=n8,rX.findBoundingRects=function(e,t){if(!iY)throw Error(i(363));t=n8(e,t),e=[];for(var n=0;n<t.length;n++)e.push(iq(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,a=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,d=c+u.width,h=u.y,f=h+u.height;if(r>=c&&o>=h&&a<=d&&s<=f){e.splice(t,1);break}if(r!==c||n.width!==u.width||f<o||h>s){if(!(o!==h||n.height!==u.height||d<r||c>a)){c>r&&(u.width+=c-r,u.x=r),d<a&&(u.width=a-c),e.splice(t,1);break}}else{h>o&&(u.height+=h-o,u.y=o),f<s&&(u.height=s-h),e.splice(t,1);break}}}return e},rX.findHostInstance=rG,rX.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=h(e))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(4!==t.tag&&null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:ip(e.stateNode)},rX.findHostInstanceWithWarning=function(e){return rG(e)},rX.flushPassiveEffects=rw,rX.flushSyncFromReconciler=function(e){var t=sK;sK|=1;var n=is.T,r=ik();try{if(iL(2),is.T=null,e)return e()}finally{iL(r),is.T=n,0==(6&(sK=t))&&K(0,!1)}},rX.flushSyncWork=ro,rX.focusWithin=function(e,t){if(!iY)throw Error(i(363));for(t=Array.from(t=n9(e=n4(e),t)),e=0;e<t.length;){var n=t[e++],r=n.tag;if(!iZ(n)){if((5===r||26===r||27===r)&&i0(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},rX.getFindAllNodesFailureDescription=function(e,t){if(!iY)throw Error(i(363));var n=0,r=[];e=[n4(e),0];for(var a=0;a<e.length;){var o=e[a++],s=o.tag,l=e[a++],u=t[l];if((5!==s&&26!==s&&27!==s||!iZ(o))&&(n5(o,u)&&(r.push(n6(u)),++l>n&&(n=l)),l<t.length))for(o=o.child;null!==o;)e.push(o,l),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(n6(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},rX.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return ip(e.child.stateNode);default:return e.child.stateNode}},rX.injectIntoDevTools=function(){var e={bundleType:0,version:ic,rendererPackageName:id,currentDispatcherRef:is,findFiberByHostInstance:iI,reconcilerVersion:"19.0.0"};if(null!==ih&&(e.rendererConfig=ih),"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{of=t.inject(e),op=t}catch(e){}e=!!t.checkDCE}}return e},rX.isAlreadyRendering=function(){return!1},rX.observeVisibleRects=function(e,t,n,r){if(!iY)throw Error(i(363));var a=i1(e=n8(e,t),n,r).disconnect;return{disconnect:function(){a()}}},rX.shouldError=function(){return null},rX.shouldSuspend=function(){return!1},rX.startHostTransition=function(e,t,n,a){if(5!==e.tag)throw Error(i(476));var o=tx(e).queue;tb(e,o,t,iV,null===n?r:function(){var t=tx(e).next.queue;return tC(e,t,{},n7()),n(a)})},rX.updateContainer=function(e,t,n,r){var i=t.current,a=n7();return rV(i,a,e,t,n,r),a},rX.updateContainerSync=function(e,t,n,r){return 0===t.tag&&rw(),rV(t.current,2,e,t,n,r),2},rX},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},8332:function(e,t,n){"use strict";e.exports=n(5972)},9545:function(e,t,n){"use strict";e.exports=n(4879)},5220:function(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return{$$typeof:n,type:e,key:i,ref:void 0!==(t=r.ref)?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},160:function(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,w={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(e,t,r,i,a,o){return{$$typeof:n,type:e,key:t,ref:void 0!==(r=o.ref)?r:null,props:o}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function T(){}function R(e,t,i){if(null==e)return e;var a=[],o=0;return!function e(t,i,a,o,s){var l,u,c,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var p=!1;if(null===t)p=!0;else switch(d){case"bigint":case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case n:case r:p=!0;break;case h:return e((p=t._init)(t._payload),i,a,o,s)}}if(p)return s=s(t),p=""===o?"."+C(t,0):o,_(s)?(a="",null!=p&&(a=p.replace(E,"$&/")+"/"),e(s,i,a,"",function(e){return e})):null!=s&&(M(s)&&(l=s,u=a+(null==s.key||t&&t.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+p,s=A(l.type,u,void 0,void 0,void 0,l.props)),i.push(s)),1;p=0;var m=""===o?".":o+":";if(_(t))for(var g=0;g<t.length;g++)d=m+C(o=t[g],g),p+=e(o,i,a,d,s);else if("function"==typeof(g=null===(c=t)||"object"!=typeof c?null:"function"==typeof(c=f&&c[f]||c["@@iterator"])?c:null))for(t=g.call(t),g=0;!(o=t.next()).done;)d=m+C(o=o.value,g++),p+=e(o,i,a,d,s);else if("object"===d){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),i,a,o,s);throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(i=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.")}return p}(e,a,"","",function(e){return t.call(i,e,o++)}),a}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit){process.emit("uncaughtException",e);return}console.error(e)};function B(){}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key,a=void 0;if(null!=t)for(o in void 0!==t.ref&&(a=void 0),void 0!==t.key&&(i=""+t.key),t)S.call(t,o)&&"key"!==o&&"__self"!==o&&"__source"!==o&&("ref"!==o||void 0!==t.ref)&&(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];r.children=s}return A(e.type,i,void 0,void 0,a,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return A(e,a,void 0,void 0,null,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(B,I)}catch(e){I(e)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return w.H.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.0.0"},5263:function(e,t,n){"use strict";e.exports=n(160)},4271:function(e,t,n){"use strict";e.exports=n(5220)},1534:function(e,t){"use strict";function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else if(u<i&&0>a(c,n))e[r]=c,e[u]=n,r=u;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],d=[],h=1,f=null,p=3,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else if(t.startTime<=e)i(d),t.sortIndex=t.expirationTime,n(c,t);else break;t=r(d)}}function w(e){if(v=!1,_(e),!g){if(null!==r(c))g=!0,I();else{var t=r(d);null!==t&&B(w,t.startTime-e)}}}var S=!1,A=-1,M=5,E=-1;function C(){return!(t.unstable_now()-E<M)}function T(){if(S){var e=t.unstable_now();E=e;var n=!0;try{t:{g=!1,v&&(v=!1,b(A),A=-1),m=!0;var a=p;try{n:{for(_(e),f=r(c);null!==f&&!(f.expirationTime>e&&C());){var s=f.callback;if("function"==typeof s){f.callback=null,p=f.priorityLevel;var l=s(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){f.callback=l,_(e),n=!0;break n}f===r(c)&&i(c),_(e)}else i(c);f=r(c)}if(null!==f)n=!0;else{var u=r(d);null!==u&&B(w,u.startTime-e),n=!1}}break t}finally{f=null,p=a,m=!1}n=void 0}}finally{n?o():S=!1}}}if("function"==typeof x)o=function(){x(T)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=T,o=function(){P.postMessage(null)}}else o=function(){y(T,0)};function I(){S||(S=!0,o())}function B(e,n){A=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,I())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=0x3fffffff;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s,sortIndex:-1},a>o?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(v?(b(A),A=-1):v=!0,B(w,a-o))):(e.sortIndex=s,n(c,e),g||m||(g=!0,I())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},1653:function(e,t,n){"use strict";e.exports=n(1534)},1264:function(e,t,n){"use strict";n.d(t,{Gfr:()=>i});var r=n(4907);function i(e){return(0,r._)({a:{viewBox:"0 0 512 512"},c:'<path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm113-303L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/>'},e)}},7708:function(e,t,n){"use strict";n.d(t,{bjh:()=>i,dNS:()=>a,zfW:()=>o});var r=n(4907);function i(e){return(0,r._)({a:{viewBox:"0 0 512 512"},c:'<path d="m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34Z"/>'},e)}function a(e){return(0,r._)({a:{viewBox:"0 0 512 512"},c:'<path d="m441 336.2-.06-.05c-9.93-9.18-22.78-11.34-32.16-12.92l-.69-.12c-9.05-1.49-10.48-2.5-14.58-6.17-2.44-2.17-5.35-5.65-5.35-9.94s2.91-7.77 5.34-9.94l30.28-26.87c25.92-22.91 40.2-53.66 40.2-86.59s-14.25-63.68-40.2-86.6c-35.89-31.59-85-49-138.37-49C223.72 48 162 71.37 116 112.11c-43.87 38.77-68 90.71-68 146.24s24.16 107.47 68 146.23c21.75 19.24 47.49 34.18 76.52 44.42a266.17 266.17 0 0 0 86.87 15h1.81c61 0 119.09-20.57 159.39-56.4 9.7-8.56 15.15-20.83 15.34-34.56.21-14.17-5.37-27.95-14.93-36.84ZM112 208a32 32 0 1 1 32 32 32 32 0 0 1-32-32Zm40 135a32 32 0 1 1 32-32 32 32 0 0 1-32 32Zm40-199a32 32 0 1 1 32 32 32 32 0 0 1-32-32Zm64 271a48 48 0 1 1 48-48 48 48 0 0 1-48 48Zm72-239a32 32 0 1 1 32-32 32 32 0 0 1-32 32Z"/>'},e)}function o(e){return(0,r._)({a:{viewBox:"0 0 512 512"},c:'<path d="M256 176a80 80 0 1 0 80 80 80.24 80.24 0 0 0-80-80Zm172.72 80a165.53 165.53 0 0 1-1.64 22.34l48.69 38.12a11.59 11.59 0 0 1 2.63 14.78l-46.06 79.52a11.64 11.64 0 0 1-14.14 4.93l-57.25-23a176.56 176.56 0 0 1-38.82 22.67l-8.56 60.78a11.93 11.93 0 0 1-11.51 9.86h-92.12a12 12 0 0 1-11.51-9.53l-8.56-60.78A169.3 169.3 0 0 1 151.05 393L93.8 416a11.64 11.64 0 0 1-14.14-4.92L33.6 331.57a11.59 11.59 0 0 1 2.63-14.78l48.69-38.12A174.58 174.58 0 0 1 83.28 256a165.53 165.53 0 0 1 1.64-22.34l-48.69-38.12a11.59 11.59 0 0 1-2.63-14.78l46.06-79.52a11.64 11.64 0 0 1 14.14-4.93l57.25 23a176.56 176.56 0 0 1 38.82-22.67l8.56-60.78A11.93 11.93 0 0 1 209.94 26h92.12a12 12 0 0 1 11.51 9.53l8.56 60.78A169.3 169.3 0 0 1 361 119l57.2-23a11.64 11.64 0 0 1 14.14 4.92l46.06 79.52a11.59 11.59 0 0 1-2.63 14.78l-48.69 38.12a174.58 174.58 0 0 1 1.64 22.66Z"/>'},e)}},9716:function(e,t,n){"use strict";n.d(t,{rG3:()=>i});var r=n(4907);function i(e){return(0,r._)({a:{viewBox:"0 0 24 24"},c:'<path fill="currentColor" d="m16 2 5 5v14.008a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 21.008V2.992C3 2.444 3.445 2 3.993 2H16Zm-3 10h3l-4-4-4 4h3v4h2v-4Z"/>'},e)}},5738:function(e,t,n){"use strict";var r=n(5263),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s(function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})},[e,n,t]),o(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},1574:function(e,t,n){"use strict";var r=n(5263),i=n(9170),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=o(e,(d=u(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(o=e,t):(o=e,s=n)}var o,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]))[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),c(f),f}},9170:function(e,t,n){"use strict";e.exports=n(5738)},7786:function(e,t,n){"use strict";e.exports=n(1574)},4907:function(e,t,n){"use strict";n.d(t,{_:()=>o});var r=n(6465),i=n(8414),a=(0,r.XK)("<svg stroke-width=0>");function o(e,t){var n;let o=(0,i.dG)(e.a,t),[s,l]=(0,i.eY)(o,["src"]),[u,c]=(0,i.gQ)(""),d=(0,i.Py)(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return(0,i.GW)(()=>c(d())),(0,i.$W)(()=>{c("")}),n=a(),(0,r.hw)(n,(0,i.dG)({get stroke(){var h;return null===(h=e.a)||void 0===h?void 0:h.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},l,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return u()}}),!0,!0),(0,r.$T)(n,()=>r.sk&&(0,r.Jh)(d())),n}},6056:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}n.d(t,{Z:()=>r})},976:function(e,t,n){"use strict";function r(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{W:()=>r})},3191:function(e,t,n){"use strict";n.d(t,{Hn:()=>u,NN:()=>c,jn:()=>f,pc:()=>o});var r,i,a=n(5263);function o(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){let e=o(r,t,n);if(e)return e;r=t?null:r.sibling}}function s(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}"undefined"!=typeof window&&((null==(r=window.document)?void 0:r.createElement)||(null==(i=window.navigator)?void 0:i.product)==="ReactNative")?a.useLayoutEffect:a.useEffect;let l=s(a.createContext(null));class u extends a.Component{render(){return a.createElement(l.Provider,{value:this._reactInternals},this.props.children)}}function c(){let e=a.useContext(l);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=a.useId();return a.useMemo(()=>{for(let n of[e,null==e?void 0:e.alternate]){if(!n)continue;let e=o(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}let d=Symbol.for("react.context"),h=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===d;function f(){let e=function(){let e=c(),[t]=a.useState(()=>new Map);t.clear();let n=e;for(;n;){let e=n.type;h(e)&&e!==l&&!t.has(e)&&t.set(e,a.use(s(e))),n=n.return}return t}();return a.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>a.createElement(t,null,a.createElement(n.Provider,{...r,value:e.get(n)})),e=>a.createElement(u,{...e})),[e])}},8254:function(e,t,n){"use strict";n.d(t,{DM:()=>p,h8:()=>b,jc:()=>y,ln:()=>g,o5:()=>v});let r=Symbol(),i=Symbol(),a=(e,t)=>new Proxy(e,t),o=Object.getPrototypeOf,s=new WeakMap,l=e=>e&&(s.has(e)?s.get(e):o(e)===Object.prototype||o(e)===Array.prototype),u=e=>"object"==typeof e&&null!==e,c=e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(e=>!e.configurable&&!e.writable),d=e=>{if(Array.isArray(e))return Array.from(e);let t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(e=>{e.configurable=!0}),Object.create(o(e),t)},h=(e,t)=>{let n={f:t},a=!1,o=(t,r)=>{if(!a){let i=n.a.get(e);if(i||(i={},n.a.set(e,i)),"w"===t)i.w=!0;else{let e=i[t];e||(e=new Set,i[t]=e),e.add(r)}}},s=()=>{a=!0,n.a.delete(e)},l={get:(t,r)=>r===i?e:(o("k",r),p(Reflect.get(t,r),n.a,n.c,n.t)),has:(e,t)=>t===r?(s(),!0):(o("h",t),Reflect.has(e,t)),getOwnPropertyDescriptor:(e,t)=>(o("o",t),Reflect.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(o("w"),Reflect.ownKeys(e))};return t&&(l.set=l.deleteProperty=()=>!1),[l,n]},f=e=>e[i]||e,p=(e,t,n,r)=>{if(!l(e))return e;let i=r&&r.get(e);if(!i){let t=f(e);i=c(t)?[t,d(t)]:[t],null==r||r.set(e,i)}let[o,s]=i,u=n&&n.get(o);return(!u||!!s!==u[1].f)&&((u=h(o,!!s))[1].p=a(s||o,u[0]),n&&n.set(o,u)),u[1].a=t,u[1].c=n,u[1].t=r,u[1].p},m=(e,t)=>{let n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((e,t)=>e!==r[t])},g=(e,t,n,r,i=Object.is)=>{if(i(e,t))return!1;if(!u(e)||!u(t))return!0;let a=n.get(f(e));if(!a)return!0;if(r){if(r.get(e)===t)return!1;r.set(e,t)}let o=null;for(let n of a.h||[])if(o=Reflect.has(e,n)!==Reflect.has(t,n))return o;if(!0===a.w){if(o=m(e,t))return o}else for(let n of a.o||[]){let r=!!Reflect.getOwnPropertyDescriptor(e,n);if(o=!!Reflect.getOwnPropertyDescriptor(t,n)!==r)return o}for(let s of a.k||[])if(o=g(e[s],t[s],n,r,i))return o;if(null===o)throw Error("invalid used");return o},v=e=>l(e)&&e[i]||null,y=(e,t=!0)=>{s.set(e,t)},b=(e,t,n)=>{let r=[],i=new WeakSet,a=(e,o)=>{var s,l,c;if(i.has(e))return;u(e)&&i.add(e);let d=u(e)&&t.get(f(e));if(d){if(null===(s=d.h)||void 0===s||s.forEach(e=>{let t=`:has(${String(e)})`;r.push(o?[...o,t]:[t])}),!0===d.w){let e=":ownKeys";r.push(o?[...o,e]:[e])}else null===(l=d.o)||void 0===l||l.forEach(e=>{let t=`:hasOwn(${String(e)})`;r.push(o?[...o,t]:[t])});null===(c=d.k)||void 0===c||c.forEach(t=>{(!n||"value"in(Object.getOwnPropertyDescriptor(e,t)||{}))&&a(e[t],o?[...o,t]:[t])})}else o&&r.push(o)};return a(e),r}},8414:function(e,t,n){"use strict";let r;n.d(t,{$W:()=>T,Df:()=>x,F3:()=>_,GW:()=>w,H3:()=>C,LM:()=>q,LO:()=>R,Py:()=>S,Yz:()=>L,Zw:()=>M,bh:()=>o,dC:()=>A,dG:()=>et,di:()=>ei,eY:()=>en,gQ:()=>b,jt:()=>l,kr:()=>k,on:()=>E,qE:()=>eo,qp:()=>D,rs:()=>ea,so:()=>y,vH:()=>i});let i={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return a(this.context.count)},getNextContextId(){return a(this.context.count++)}};function a(e){let t=String(e),n=t.length-1;return i.context.id+(n?String.fromCharCode(96+n):"")+t}let o=Symbol("solid-proxy"),s="function"==typeof Proxy,l=Symbol("solid-track");Symbol("solid-dev-component");let u={equals:(e,t)=>e===t},c=j,d={owned:null,cleanups:null,context:null,owner:null};var h=null;let f=null,p=null,m=null,g=null,v=0;function y(e,t){let n=p,r=h,i=0===e.length,a=void 0===t?r:t,o=i?d:{owned:null,cleanups:null,context:a?a.context:null,owner:a},s=i?e:()=>e(()=>M(()=>J(o)));h=o,p=null;try{return V(s,!0)}finally{p=n,h=r}}function b(e,t){let n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},u,t):u).equals||void 0};return[F.bind(n),e=>("function"==typeof e&&(e=e(f&&f.running&&f.sources.has(n)?n.tValue:n.value)),O(n,e))]}function x(e,t,n){U(H(e,t,!0,1))}function _(e,t,n){U(H(e,t,!1,1))}function w(e,t,n){c=W;let i=H(e,t,!1,1),a=r&&D(r);a&&(i.suspense=a),n&&n.render||(i.user=!0),g?g.push(i):U(i)}function S(e,t,n){n=n?Object.assign({},u,n):u;let r=H(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,U(r),F.bind(r)}function A(e){return V(e,!1)}function M(e){if(null===p)return e();let t=p;p=null;try{return e()}finally{p=t}}function E(e,t,n){let r;let i=Array.isArray(e),a=n&&n.defer;return n=>{let o;if(i){o=Array(e.length);for(let t=0;t<e.length;t++)o[t]=e[t]()}else o=e();if(a)return a=!1,n;let s=M(()=>t(o,r,n));return r=o,s}}function C(e){w(()=>M(e))}function T(e){return null===h||(null===h.cleanups?h.cleanups=[e]:h.cleanups.push(e)),e}function R(){return p}function P(e){if(f&&f.running)return e(),f.done;let t=p,n=h;return Promise.resolve().then(()=>{let i;return p=t,h=n,r&&((i=f||(f={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0})).done||(i.done=new Promise(e=>i.resolve=e)),i.running=!0),V(e,!1),p=h=null,i?i.done:void 0})}let[I,B]=b(!1);function L(){return[I,P]}function k(e,t){var n,r;let i=Symbol("context");return{id:i,Provider:(n=i,function(e){let t;return _(()=>t=M(()=>(h.context={...h.context,[n]:e.value},N(()=>e.children))),void 0),t}),defaultValue:e}}function D(e){let t;return h&&h.context&&void 0!==(t=h.context[e.id])?t:e.defaultValue}function N(e){let t=S(e),n=S(()=>(function e(t){if("function"==typeof t&&!t.length)return e(t());if(Array.isArray(t)){let n=[];for(let r=0;r<t.length;r++){let i=e(t[r]);Array.isArray(i)?n.push.apply(n,i):n.push(i)}return n}return t})(t()));return n.toArray=()=>{let e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function F(){let e=f&&f.running;if(this.sources&&(e?this.tState:this.state)){if((e?this.tState:this.state)===1)U(this);else{let e=m;m=null,V(()=>X(this),!1),m=e}}if(p){let e=this.observers?this.observers.length:0;p.sources?(p.sources.push(this),p.sourceSlots.push(e)):(p.sources=[this],p.sourceSlots=[e]),this.observers?(this.observers.push(p),this.observerSlots.push(p.sources.length-1)):(this.observers=[p],this.observerSlots=[p.sources.length-1])}return e&&f.sources.has(this)?this.tValue:this.value}function O(e,t,n){let r=f&&f.running&&f.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(f){let r=f.running;(r||!n&&f.sources.has(e))&&(f.sources.add(e),e.tValue=t),r||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&V(()=>{for(let t=0;t<e.observers.length;t+=1){let n=e.observers[t],r=f&&f.running;r&&f.disposed.has(n)||((r?n.tState:n.state)||(n.pure?m.push(n):g.push(n),n.observers&&function e(t){let n=f&&f.running;for(let r=0;r<t.observers.length;r+=1){let i=t.observers[r];(n?i.tState:i.state)||(n?i.tState=2:i.state=2,i.pure?m.push(i):g.push(i),i.observers&&e(i))}}(n)),r?n.tState=1:n.state=1)}if(m.length>1e6)throw m=[],Error()},!1)}return t}function U(e){if(!e.fn)return;J(e);let t=v;z(e,f&&f.running&&f.sources.has(e)?e.tValue:e.value,t),f&&!f.running&&f.sources.has(e)&&queueMicrotask(()=>{V(()=>{f&&(f.running=!0),p=h=e,z(e,e.tValue,t),p=h=null},!1)})}function z(e,t,n){let r;let i=h,a=p;p=h=e;try{r=e.fn(t)}catch(t){return e.pure&&(f&&f.running?(e.tState=1,e.tOwned&&e.tOwned.forEach(J),e.tOwned=void 0):(e.state=1,e.owned&&e.owned.forEach(J),e.owned=null)),e.updatedAt=n+1,K(t)}finally{p=a,h=i}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?O(e,r,!0):f&&f.running&&e.pure?(f.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function H(e,t,n,r=1,i){let a={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:h,context:h?h.context:null,pure:n};return f&&f.running&&(a.state=0,a.tState=r),null===h||h!==d&&(f&&f.running&&h.pure?h.tOwned?h.tOwned.push(a):h.tOwned=[a]:h.owned?h.owned.push(a):h.owned=[a]),a}function G(e){let t=f&&f.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===2)return X(e);if(e.suspense&&M(e.suspense.inFallback))return e.suspense.effects.push(e);let n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<v);){if(t&&f.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let t=e,i=n[r+1];for(;(t=t.owner)&&t!==i;)if(f.disposed.has(t))return}if((t?e.tState:e.state)===1)U(e);else if((t?e.tState:e.state)===2){let t=m;m=null,V(()=>X(e,n[0]),!1),m=t}}}function V(e,t){if(m)return e();let n=!1;t||(m=[]),g?n=!0:g=[],v++;try{let t=e();return function(e){let t;if(m&&(j(m),m=null),e)return;if(f){if(f.promises.size||f.queue.size){if(f.running){f.running=!1,f.effects.push.apply(f.effects,g),g=null,B(!0);return}}else{let e=f.sources,n=f.disposed;for(let e of(g.push.apply(g,f.effects),t=f.resolve,g))"tState"in e&&(e.state=e.tState),delete e.tState;f=null,V(()=>{for(let e of n)J(e);for(let t of e){if(t.value=t.tValue,t.owned)for(let e=0,n=t.owned.length;e<n;e++)J(t.owned[e]);t.tOwned&&(t.owned=t.tOwned),delete t.tValue,delete t.tOwned,t.tState=0}B(!1)},!1)}}let n=g;g=null,n.length&&V(()=>c(n),!1),t&&t()}(n),t}catch(e){n||(g=null),m=null,K(e)}}function j(e){for(let t=0;t<e.length;t++)G(e[t])}function W(e){let t,n=0;for(t=0;t<e.length;t++){let r=e[t];r.user?e[n++]=r:G(r)}if(i.context){var r;if(i.count){i.effects||(i.effects=[]),i.effects.push(...e.slice(0,n));return}i.context=void 0}for(i.effects&&(i.done||!i.count)&&(e=[...i.effects,...e],n+=i.effects.length,delete i.effects),t=0;t<n;t++)G(e[t])}function X(e,t){let n=f&&f.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){let i=e.sources[r];if(i.sources){let e=n?i.tState:i.state;1===e?i!==t&&(!i.updatedAt||i.updatedAt<v)&&G(i):2===e&&X(i,t)}}}function J(e){let t;if(e.sources)for(;e.sources.length;){let t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){let e=r.pop(),i=t.observerSlots.pop();n<r.length&&(e.sourceSlots[i]=n,r[n]=e,t.observerSlots[n]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)J(e.tOwned[t]);delete e.tOwned}if(f&&f.running&&e.pure)!function e(t,n){if(n||(t.tState=0,f.disposed.add(t)),t.owned)for(let n=0;n<t.owned.length;n++)e(t.owned[n])}(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)J(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}f&&f.running?e.tState=0:e.state=0}function Y(e,t,n){try{for(let n of t)n(e)}catch(e){K(e,n&&n.owner||null)}}function K(e,t=h){let n=e instanceof Error?e:Error("string"==typeof e?e:"Unknown error",{cause:e});throw n}function q(e,t){return M(()=>e(t||{}))}function Q(){return!0}Symbol("fallback");let Z={get:(e,t,n)=>t===o?n:e.get(t),has:(e,t)=>t===o||e.has(t),set:Q,deleteProperty:Q,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:Q,deleteProperty:Q}),ownKeys:e=>e.keys()};function $(e){return(e="function"==typeof e?e():e)?e:{}}function ee(){for(let e=0,t=this.length;e<t;++e){let t=this[e]();if(void 0!==t)return t}}function et(...e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];t=t||!!r&&o in r,e[n]="function"==typeof r?(t=!0,S(r)):r}if(s&&t)return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){let r=$(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in $(e[n]))return!0;return!1},keys(){let t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys($(e[n])));return[...new Set(t)]}},Z);let n={},r=Object.create(null);for(let t=e.length-1;t>=0;t--){let i=e[t];if(!i)continue;let a=Object.getOwnPropertyNames(i);for(let e=a.length-1;e>=0;e--){let t=a[e];if("__proto__"===t||"constructor"===t)continue;let o=Object.getOwnPropertyDescriptor(i,t);if(r[t]){let e=n[t];e&&(o.get?e.push(o.get.bind(i)):void 0!==o.value&&e.push(()=>o.value))}else r[t]=o.get?{enumerable:!0,configurable:!0,get:ee.bind(n[t]=[o.get.bind(i)])}:void 0!==o.value?o:void 0}}let i={},a=Object.keys(r);for(let e=a.length-1;e>=0;e--){let t=a[e],n=r[t];n&&n.get?Object.defineProperty(i,t,n):i[t]=n?n.value:void 0}return i}function en(e,...t){if(s&&o in e){let n=new Set(t.length>1?t.flat():t[0]),r=t.map(t=>new Proxy({get:n=>t.includes(n)?e[n]:void 0,has:n=>t.includes(n)&&n in e,keys:()=>t.filter(t=>t in e)},Z));return r.push(new Proxy({get:t=>n.has(t)?void 0:e[t],has:t=>!n.has(t)&&t in e,keys:()=>Object.keys(e).filter(e=>!n.has(e))},Z)),r}let n={},r=t.map(()=>({}));for(let i of Object.getOwnPropertyNames(e)){let a=Object.getOwnPropertyDescriptor(e,i),o=!a.get&&!a.set&&a.enumerable&&a.writable&&a.configurable,s=!1,l=0;for(let e of t)e.includes(i)&&(s=!0,o?r[l][i]=a.value:Object.defineProperty(r[l],i,a)),++l;s||(o?n[i]=a.value:Object.defineProperty(n,i,a))}return[...r,n]}let er=e=>`Stale read from <${e}>.`;function ei(e){let t=e.keyed,n=S(()=>e.when,void 0,void 0),r=t?n:S(n,void 0,{equals:(e,t)=>!e==!t});return S(()=>{let i=r();if(i){let a=e.children;return"function"==typeof a&&a.length>0?M(()=>a(t?i:()=>{if(!M(r))throw er("Show");return n()})):a}return e.fallback},void 0,void 0)}function ea(e){let t=N(()=>e.children),n=S(()=>{let e=t(),n=Array.isArray(e)?e:[e],r=()=>void 0;for(let e=0;e<n.length;e++){let t=e,i=n[e],a=r,o=S(()=>a()?void 0:i.when,void 0,void 0),s=i.keyed?o:S(o,void 0,{equals:(e,t)=>!e==!t});r=()=>a()||(s()?[t,o,i]:void 0)}return r});return S(()=>{let t=n()();if(!t)return e.fallback;let[r,i,a]=t,o=a.children;return"function"==typeof o&&o.length>0?M(()=>o(a.keyed?i():()=>{if(M(n)()?.[0]!==r)throw er("Match");return i()})):o},void 0,void 0)}function eo(e){return e}},2035:function(e,t,n){"use strict";n.d(t,{MT:()=>v,Uy:()=>x});var r=n(8414);let i=Symbol("store-raw"),a=Symbol("store-node"),o=Symbol("store-has"),s=Symbol("store-self");function l(e){let t=e[r.bh];if(!t&&(Object.defineProperty(e,r.bh,{value:t=new Proxy(e,p)}),!Array.isArray(e))){let n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,a=n.length;i<a;i++){let a=n[i];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function u(e){let t;return null!=e&&"object"==typeof e&&(e[r.bh]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function c(e,t=new Set){let n,r,a,o;if(n=null!=e&&e[i])return n;if(!u(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,i=e.length;n<i;n++)(r=c(a=e[n],t))!==a&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let s=0,l=n.length;s<l;s++)i[o=n[s]].get||(r=c(a=e[o],t))===a||(e[o]=r)}return e}function d(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function h(e,t,n){if(e[t])return e[t];let[i,a]=(0,r.gQ)(n,{equals:!1,internal:!0});return i.$=a,e[t]=i}function f(e){(0,r.LO)()&&h(d(e,a),s)()}let p={get(e,t,n){if(t===i)return e;if(t===r.bh)return n;if(t===r.jt)return f(e),n;let s=d(e,a),c=s[t],p=c?c():e[t];if(t===a||t===o||"__proto__"===t)return p;if(!c){let n=Object.getOwnPropertyDescriptor(e,t);(0,r.LO)()&&("function"!=typeof p||e.hasOwnProperty(t))&&!(n&&n.get)&&(p=h(s,t,p)())}return u(p)?l(p):p},has:(e,t)=>t===i||t===r.bh||t===r.jt||t===a||t===o||"__proto__"===t||((0,r.LO)()&&h(d(e,o),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return f(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){let n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.get&&n.configurable&&t!==r.bh&&t!==a&&(delete n.value,delete n.writable,n.get=()=>e[r.bh][t]),n}};function m(e,t,n,r=!1){if(!r&&e[t]===n)return;let i=e[t],l=e.length;void 0===n?(delete e[t],e[o]&&e[o][t]&&void 0!==i&&e[o][t].$()):(e[t]=n,e[o]&&e[o][t]&&void 0===i&&e[o][t].$());let u=d(e,a),c;if((c=h(u,t,i))&&c.$(()=>n),Array.isArray(e)&&e.length!==l){for(let t=e.length;t<l;t++)(c=u[t])&&c.$();(c=h(u,"length",l))&&c.$(e.length)}(c=u[s])&&c.$()}function g(e,t){let n=Object.keys(t);for(let r=0;r<n.length;r+=1){let i=n[r];m(e,i,t[i])}}function v(...[e,t]){let n=c(e||{}),i=Array.isArray(n);return[l(n),function(...e){(0,r.dC)(()=>{i&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),Array.isArray(t=c(t))){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){let r=t[n];e[n]!==r&&m(e,n,r)}m(e,"length",r)}else g(e,t)}(n,e[0]):function e(t,n,r=[]){let i,a=t;if(n.length>1){let o=typeof(i=n.shift()),s=Array.isArray(t);if(Array.isArray(i)){for(let a=0;a<i.length;a++)e(t,[i[a]].concat(n),r);return}if(s&&"function"===o){for(let a=0;a<t.length;a++)i(t[a],a)&&e(t,[a].concat(n),r);return}if(s&&"object"===o){let{from:a=0,to:o=t.length-1,by:s=1}=i;for(let i=a;i<=o;i+=s)e(t,[i].concat(n),r);return}else if(n.length>1){e(t[i],n,[i].concat(r));return}a=t[i],r=[i].concat(r)}let o=n[0];("function"!=typeof o||(o=o(a,r))!==a)&&(void 0!==i||void 0!=o)&&(o=c(o),void 0===i||u(a)&&u(o)&&!Array.isArray(o)?g(a,o):m(t,i,o))}(n,e)})}]}Symbol("store-root");let y=new WeakMap,b={get(e,t){let n;if(t===i)return e;let r=e[t];return u(r)?y.get(r)||(y.set(r,n=new Proxy(r,b)),n):r},set:(e,t,n)=>(m(e,t,c(n)),!0),deleteProperty:(e,t)=>(m(e,t,void 0,!0),!0)};function x(e){return t=>{if(u(t)){let n;(n=y.get(t))||y.set(t,n=new Proxy(t,b)),e(n)}return t}}},6465:function(e,t,n){"use strict";n.d(t,{$T:()=>_,D$:()=>x,Jh:()=>R,Oo:()=>v,Qj:()=>p,XK:()=>f,hw:()=>b,m5:()=>I,ok:()=>g,s1:()=>y,sY:()=>h,sk:()=>P});var r=n(8414);let i=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),a=new Set(["innerHTML","textContent","innerText","children"]),o=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),s=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}}),l=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),u=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),c={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},d="_$DX_DELEGATE";function h(e,t,n,i={}){let a;return(0,r.so)(r=>{a=r,t===document?e():_(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{a(),t.textContent=""}}function f(e,t,n,i){let a;let o=()=>{let t=i?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return t.innerHTML=e,n?t.content.firstChild.firstChild:i?t.firstChild:t.content.firstChild},s=t?()=>(0,r.Zw)(()=>document.importNode(a||(a=o()),!0)):()=>(a||(a=o())).cloneNode(!0);return s.cloneNode=s,s}function p(e,t=window.document){let n=t[d]||(t[d]=new Set);for(let r=0,i=e.length;r<i;r++){let i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,M))}}function m(e,t,n){w(e)||(null==n?e.removeAttribute(t):e.setAttribute(t,n))}function g(e,t){w(e)||(null==t?e.removeAttribute("class"):e.className=t)}function v(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){let r=n[0];e.addEventListener(t,n[0]=t=>r.call(e,n[1],t))}else e.addEventListener(t,n,"function"!=typeof n&&n)}function y(e,t,n={}){let r,i;let a=Object.keys(t||{}),o=Object.keys(n);for(r=0,i=o.length;r<i;r++){let i=o[r];i&&"undefined"!==i&&!t[i]&&(S(e,i,!1),delete n[i])}for(r=0,i=a.length;r<i;r++){let i=a[r],o=!!t[i];i&&"undefined"!==i&&n[i]!==o&&o&&(S(e,i,!0),n[i]=o)}return n}function b(e,t={},n,i){let a={};return i||(0,r.F3)(()=>a.children=E(e,t.children,a.children)),(0,r.F3)(()=>"function"==typeof t.ref&&x(t.ref,e)),(0,r.F3)(()=>(function(e,t,n,r,i={},a=!1){for(let r in t||(t={}),i)if(!(r in t)){if("children"===r)continue;i[r]=A(e,r,null,i[r],n,a,t)}for(let o in t){if("children"===o){r||E(e,t.children);continue}let s=t[o];i[o]=A(e,o,s,i[o],n,a,t)}})(e,t,n,!0,a,!0)),a}function x(e,t,n){return(0,r.Zw)(()=>e(t,n))}function _(e,t,n,i){if(void 0===n||i||(i=[]),"function"!=typeof t)return E(e,t,i,n);(0,r.F3)(r=>E(e,t(),r,n),i)}function w(e){return!!r.vH.context&&!r.vH.done&&(!e||e.isConnected)}function S(e,t,n){let r=t.trim().split(/\s+/);for(let t=0,i=r.length;t<i;t++)e.classList.toggle(r[t],n)}function A(e,t,n,r,u,d,h){var f,b;let x,_,S,A,M;if("style"===t)return function(e,t,n){let r,i;if(!t)return n?m(e,"style"):t;let a=e.style;if("string"==typeof t)return a.cssText=t;for(i in"string"==typeof n&&(a.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[i]&&a.removeProperty(i),delete n[i];for(i in t)(r=t[i])!==n[i]&&(a.setProperty(i,r),n[i]=r);return n}(e,n,r);if("classList"===t)return y(e,n,r);if(n===r)return r;if("ref"===t)d||n(e);else if("on:"===t.slice(0,3)){let i=t.slice(3);r&&e.removeEventListener(i,r,"function"!=typeof r&&r),n&&e.addEventListener(i,n,"function"!=typeof n&&n)}else if("oncapture:"===t.slice(0,10)){let i=t.slice(10);r&&e.removeEventListener(i,r,!0),n&&e.addEventListener(i,n,!0)}else if("on"===t.slice(0,2)){let i=t.slice(2).toLowerCase(),a=l.has(i);if(!a&&r){let t=Array.isArray(r)?r[0]:r;e.removeEventListener(i,t)}(a||n)&&(v(e,i,n,a),a&&p([i]))}else if("attr:"===t.slice(0,5))m(e,t.slice(5),n);else if("bool:"===t.slice(0,5))f=t.slice(5),w(e)||(n?e.setAttribute(f,""):e.removeAttribute(f));else if((M="prop:"===t.slice(0,5))||(S=a.has(t))||!u&&((A=function(e,t){let n=s[e];return"object"==typeof n?n[t]?n.$:void 0:n}(t,e.tagName))||(_=i.has(t)))||(x=e.nodeName.includes("-")||"is"in h)){if(M)t=t.slice(5),_=!0;else if(w(e))return n;"class"===t||"className"===t?g(e,n):!x||_||S?e[A||t]=n:e[t.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())]=n}else{let r=u&&t.indexOf(":")>-1&&c[t.split(":")[0]];r?(b=t,w(e)||(null==n?e.removeAttributeNS(r,b):e.setAttributeNS(r,b,n))):m(e,o[t]||t,n)}return n}function M(e){if(r.vH.registry&&r.vH.events&&r.vH.events.find(([t,n])=>n===e))return;let t=e.target,n=`$$${e.type}`,i=e.target,a=e.currentTarget,o=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),s=()=>{let r=t[n];if(r&&!t.disabled){let i=t[`${n}Data`];if(void 0!==i?r.call(t,i,e):r.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},l=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),r.vH.registry&&!r.vH.done&&(r.vH.done=_$HY.done=!0),e.composedPath){let n=e.composedPath();o(n[0]);for(let e=0;e<n.length-2&&(t=n[e],s());e++){if(t._$host){t=t._$host,l();break}if(t.parentNode===a)break}}else l();o(i)}function E(e,t,n,i,a){let o=w(e);if(o){n||(n=[...e.childNodes]);let t=[];for(let e=0;e<n.length;e++){let r=n[e];8===r.nodeType&&"!$"===r.data.slice(0,2)?r.remove():t.push(r)}n=t}for(;"function"==typeof n;)n=n();if(t===n)return n;let s=typeof t,l=void 0!==i;if(e=l&&n[0]&&n[0].parentNode||e,"string"===s||"number"===s){if(o||"number"===s&&(t=t.toString())===n)return n;if(l){let r=n[0];r&&3===r.nodeType?r.data!==t&&(r.data=t):r=document.createTextNode(t),n=T(e,n,i,r)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===s){if(o)return n;n=T(e,n,i)}else if("function"===s)return(0,r.F3)(()=>{let r=t();for(;"function"==typeof r;)r=r();n=E(e,r,n,i)}),()=>n;else if(Array.isArray(t)){let s=[],u=n&&Array.isArray(n);if(function e(t,n,r,i){let a=!1;for(let o=0,s=n.length;o<s;o++){let s=n[o],l=r&&r[t.length],u;if(null==s||!0===s||!1===s);else if("object"==(u=typeof s)&&s.nodeType)t.push(s);else if(Array.isArray(s))a=e(t,s,l)||a;else if("function"===u){if(i){for(;"function"==typeof s;)s=s();a=e(t,Array.isArray(s)?s:[s],Array.isArray(l)?l:[l])||a}else t.push(s),a=!0}else{let e=String(s);l&&3===l.nodeType&&l.data===e?t.push(l):t.push(document.createTextNode(e))}}return a}(s,t,n,a))return(0,r.F3)(()=>n=E(e,s,n,i,!0)),()=>n;if(o){if(!s.length)return n;if(void 0===i)return n=[...e.childNodes];let t=s[0];if(t.parentNode!==e)return n;let r=[t];for(;(t=t.nextSibling)!==i;)r.push(t);return n=r}if(0===s.length){if(n=T(e,n,i),l)return n}else u?0===n.length?C(e,s,i):function(e,t,n){let r=n.length,i=t.length,a=r,o=0,s=0,l=t[i-1].nextSibling,u=null;for(;o<i||s<a;){if(t[o]===n[s]){o++,s++;continue}for(;t[i-1]===n[a-1];)i--,a--;if(i===o){let t=a<r?s?n[s-1].nextSibling:n[a-s]:l;for(;s<a;)e.insertBefore(n[s++],t)}else if(a===s)for(;o<i;)u&&u.has(t[o])||t[o].remove(),o++;else if(t[o]===n[a-1]&&n[s]===t[i-1]){let r=t[--i].nextSibling;e.insertBefore(n[s++],t[o++].nextSibling),e.insertBefore(n[--a],r),t[i]=n[a]}else{if(!u){u=new Map;let e=s;for(;e<a;)u.set(n[e],e++)}let r=u.get(t[o]);if(null!=r){if(s<r&&r<a){let l=o,c=1,d;for(;++l<i&&l<a&&null!=(d=u.get(t[l]))&&d===r+c;)c++;if(c>r-s){let i=t[o];for(;s<r;)e.insertBefore(n[s++],i)}else e.replaceChild(n[s++],t[o++])}else o++}else t[o++].remove()}}}(e,n,s):(n&&T(e),C(e,s));n=s}else if(t.nodeType){if(o&&t.parentNode)return n=l?[t]:t;if(Array.isArray(n)){if(l)return n=T(e,n,i,t);T(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}return n}function C(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function T(e,t,n,r){if(void 0===n)return e.textContent="";let i=r||document.createTextNode("");if(t.length){let r=!1;for(let a=t.length-1;a>=0;a--){let o=t[a];if(i!==o){let t=o.parentNode===e;r||a?t&&o.remove():t?e.replaceChild(i,o):e.insertBefore(i,n)}else r=!0}}else e.insertBefore(i,n);return[i]}function R(e,...t){}Symbol();let P=!1;function I(e){let[,t]=(0,r.eY)(e,["component"]);return function(e,t){let n=(0,r.Py)(e);return(0,r.Py)(()=>{let e=n();switch(typeof e){case"function":return(0,r.Zw)(()=>e(t));case"string":let i,a;let o=u.has(e),s=r.vH.context?w()&&(i=r.vH.registry.get(a=r.vH.getNextContextId()))?(r.vH.completed&&r.vH.completed.add(i),r.vH.registry.delete(a),i):(void 0)():function(e,t=!1){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e,o);return b(s,t,o),s}})}(()=>e.component,t)}},5066:function(e,t,n){"use strict";let r;n.d(t,{zA:()=>eE,y_:()=>eI});var i=n(8414),a=n(6465);let o=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function s(e){let t;let n={};for(;t=o.exec(e);)n[t[1]]=t[2];return n}function l(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var u=function(){};let c=()=>{},d=e=>e;class h{setAnimation(e){this.animation=e,null==e||e.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}let f=new WeakMap;function p(e){return f.has(e)||f.set(e,{transforms:[],values:new Map}),f.get(e)}function m(e,t){-1===e.indexOf(t)&&e.push(t)}let g=["","X","Y","Z"],v={x:"translateX",y:"translateY",z:"translateZ"},y={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},b={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:y,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:d},skew:y},x=new Map,_=e=>`--motion-${e}`,w=["x","y","z"];["translate","scale","rotate","skew"].forEach(e=>{g.forEach(t=>{w.push(e+t),x.set(_(e+t),b[e])})});let S=(e,t)=>w.indexOf(e)-w.indexOf(t),A=new Set(w),M=e=>A.has(e),E=(e,t)=>{v[t]&&(t=v[t]);let{transforms:n}=p(e);m(n,t),e.style.transform=C(n)},C=e=>e.sort(S).reduce(T,"").trim(),T=(e,t)=>`${e} ${t}(var(${_(t)}))`,R=e=>e.startsWith("--"),P=new Set,I={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},B=e=>"object"==typeof e&&!!e.createAnimation,L=e=>"function"==typeof e,k=e=>"number"==typeof e,D=e=>Array.isArray(e)&&!k(e[0]),N={ms:e=>1e3*e},F=(e,t,n)=>t-e==0?1:(n-e)/(t-e),O=e=>Array.isArray(e)&&k(e[0]),U=(e,t)=>document.createElement("div").animate(e,t),z={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{U({opacity:[1]})}catch(e){return!1}return!0},finished:()=>!!U({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{U({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}},H={},G={};for(let e in z)G[e]=()=>(void 0===H[e]&&(H[e]=z[e]()),H[e]);let V=(e,t)=>{let n="",r=Math.round(t/.015);for(let t=0;t<r;t++)n+=e(F(0,r-1,t))+", ";return n.substring(0,n.length-2)},j=(e,t)=>L(e)?G.linearEasing()?`linear(${V(e,t)})`:I.easing:O(e)?W(e):e,W=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,X=e=>Array.isArray(e)?e:[e];function J(e){return v[e]&&(e=v[e]),M(e)?_(e):e}let Y={get:(e,t)=>{let n=R(t=J(t))?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!n&&0!==n){let e=x.get(t);e&&(n=e.initialValue)}return n},set:(e,t,n)=>{R(t=J(t))?e.style.setProperty(t,n):e.style[t]=n}},K=e=>"string"==typeof e,q=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function Q(e,t){return"object"==typeof e?e:e&&t?t[e]:void 0}function Z(){if(!r)return;let e=r.sort(ee).map(et);e.forEach(en),e.forEach(en),r=void 0}function $(e){r?m(r,e):(r=[e],requestAnimationFrame(Z))}let ee=(e,t)=>e.getDepth()-t.getDepth(),et=e=>e.animateUpdates(),en=e=>e.next(),er=(e,t)=>new CustomEvent(e,{detail:{target:t}});function ei(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:n}}))}function ea(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:n}}))}let eo={any:0,all:1},es=(e,t,n)=>r=>{r.pointerType&&"mouse"!==r.pointerType||(n(),ei(e,t,r))},el=(e,t,n)=>-n*e+n*t+e;function eu(e,t){let n=e[e.length-1];for(let r=1;r<=t;r++){let i=F(0,t,r);e.push(el(n,1,i))}}let ec=(e,t,n)=>{let r=t-e;return((n-e)%r+r)%r+e},ed=(e,t,n)=>Math.min(Math.max(n,e),t),eh=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function ef(e,t,n,r){if(e===t&&n===r)return d;let i=t=>(function(e,t,n,r,i){let a,o;let s=0;do(a=eh(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o;while(Math.abs(a)>1e-7&&++s<12);return o})(t,0,1,e,n);return e=>0===e||1===e?e:eh(i(e),t,r)}let ep=(e,t="end")=>n=>{let r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e;return ed(0,1,("end"===t?Math.floor(r):Math.ceil(r))/e)},em={ease:ef(.25,.1,.25,1),"ease-in":ef(.42,0,1,1),"ease-in-out":ef(.42,0,.58,1),"ease-out":ef(0,0,.58,1)},eg=/\((.*?)\)/;function ev(e){if(L(e))return e;if(O(e))return ef(...e);let t=em[e];if(t)return t;if(e.startsWith("steps")){let t=eg.exec(e);if(t){let e=t[1].split(",");return ep(parseFloat(e[0]),e[1].trim())}}return d}class ey{constructor(e,t=[0,1],{easing:n,duration:r=I.duration,delay:i=I.delay,endDelay:a=I.endDelay,repeat:o=I.repeat,offset:s,direction:l="normal",autoplay:u=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=d,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((e,t)=>{this.resolve=e,this.reject=t}),B(n=n||I.easing)){let e=n.createAnimation(t);n=e.easing,t=e.keyframes||t,r=e.duration||r}this.repeat=o,this.easing=D(n)?d:ev(n),this.updateDuration(r);let c=function(e,t=function(e){let t=[0];return eu(t,e-1),t}(e.length),n=d){let r=e.length,i=r-t.length;return i>0&&eu(t,i),i=>{var a;let o=0;for(;o<r-2&&!(i<t[o+1]);o++);let s=ed(0,1,F(t[o],t[o+1],i));return s=(a=o,D(n)?n[ec(0,n.length,a)]:n)(s),el(e[o],e[o+1],s)}}(t,s,D(n)?n.map(ev):d);this.tick=t=>{var n;let r=0;r=void 0!==this.pauseTime?this.pauseTime:(t-this.startTime)*this.rate,this.t=r,r/=1e3,r=Math.max(r-i,0),"finished"===this.playState&&void 0===this.pauseTime&&(r=this.totalDuration);let o=r/this.duration,s=Math.floor(o),u=o%1;!u&&o>=1&&(u=1),1===u&&s--;let d=s%2;("reverse"===l||"alternate"===l&&d||"alternate-reverse"===l&&!d)&&(u=1-u);let h=r>=this.totalDuration?1:Math.min(u,1),f=c(this.easing(h));e(f),void 0===this.pauseTime&&("finished"===this.playState||r>=this.totalDuration+a)?(this.playState="finished",null===(n=this.resolve)||void 0===n||n.call(this,f)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},u&&this.play()}play(){let e=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(e=this.reject)||void 0===e||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){void 0!==this.pauseTime||0===this.rate?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}let eb={inView:{isActive:e=>!!e.inView,subscribe:(e,{enable:t,disable:n},{inViewOptions:r={}})=>{let{once:i}=r;return function(e,t,{root:n,margin:r,amount:i="any"}={}){var a;if("undefined"==typeof IntersectionObserver)return()=>{};let o=("string"==typeof(a=e)?a=document.querySelectorAll(a):a instanceof Element&&(a=[a]),Array.from(a||[])),s=new WeakMap,l=new IntersectionObserver(e=>{e.forEach(e=>{let n=s.get(e.target);if(!!n!==e.isIntersecting){if(e.isIntersecting){let n=t(e);L(n)?s.set(e.target,n):l.unobserve(e.target)}else n&&(n(e),s.delete(e.target))}})},{root:n,rootMargin:r,threshold:"number"==typeof i?i:eo[i]});return o.forEach(e=>l.observe(e)),()=>l.disconnect()}(e,r=>{if(t(),ea(e,"viewenter",r),!i)return t=>{n(),ea(e,"viewleave",t)}},l(r,["once"]))}},hover:{isActive:e=>!!e.hover,subscribe:(e,{enable:t,disable:n})=>{let r=es(e,"hoverstart",t),i=es(e,"hoverend",n);return e.addEventListener("pointerenter",r),e.addEventListener("pointerleave",i),()=>{e.removeEventListener("pointerenter",r),e.removeEventListener("pointerleave",i)}}},press:{isActive:e=>!!e.press,subscribe:(e,{enable:t,disable:n})=>{let r=t=>{n(),ei(e,"pressend",t),window.removeEventListener("pointerup",r)},i=n=>{t(),ei(e,"pressstart",n),window.addEventListener("pointerup",r)};return e.addEventListener("pointerdown",i),()=>{e.removeEventListener("pointerdown",i),window.removeEventListener("pointerup",r)}}}},ex=["initial","animate",...Object.keys(eb),"exit"],e_=new WeakMap,ew=a.sk?e=>null!=e&&"object"==typeof e&&"t"in e:e=>e instanceof Element,eS=()=>{},eA=(e,t)=>t();var eM=(0,i.kr)(),eE=e=>{let[t,n]=(0,i.gQ)(!0),r={initial:e.initial??!0,mount:t},o=(0,i.LM)(eM.Provider,{value:r,get children(){return function(e,t){let n;let r=(0,i.Zw)(e),o=r?[r]:[];if(a.sk)return()=>o;let{onEnter:s=eA,onExit:l=eA}=t,[u,c]=(0,i.gQ)(t.appear?[]:o),[d]=(0,i.Yz)(),h=!1;function f(e,t){if(!e)return t&&t();h=!0,l(e,()=>{(0,i.dC)(()=>{h=!1,c(t=>t.filter(t=>t!==e)),t&&t()})})}function p(e){let t=n;if(!t)return e&&e();n=void 0,c(e=>[t,...e]),s(t,e??eS)}let m="out-in"===t.mode?e=>h||f(e,p):"in-out"===t.mode?e=>p(()=>f(e)):e=>{f(e),p()};return(0,i.Df)(t=>{let r=e();return(0,i.Zw)(d)?(d(),t):(r!==t&&(n=r,(0,i.dC)(()=>(0,i.Zw)(()=>m(t)))),r)},t.appear?void 0:r),u}(function(e,t=ew,n=ew){let r=(0,i.Py)(e);return(0,i.Py)(()=>(function e(t,n){if(n(t))return t;if("function"==typeof t&&!t.length)return e(t(),n);if(Array.isArray(t))for(let r of t){let t=e(r,n);if(t)return t}return null})(r(),a.sk?n:t))}(()=>e.children),{appear:r.initial,mode:e.exitBeforeEnter?"out-in":"parallel",onExit(e,t){(0,i.dC)(()=>{n(!1),e_.get(e)?.getOptions()?.exit?e.addEventListener("motioncomplete",t):t()})},onEnter(e,t){(0,i.dC)(()=>{n(!0),t()})}})}});return r.initial=!0,o},eC=["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],eT=["tag"],eR=(0,i.kr)(),eP=e=>{let t;let[n,,o]=(0,i.eY)(e,eC,eT),[f,m]=function(e,t,n,a){let o=function(e={},t){let n;let i=t?t.getDepth()+1:0,a={initial:!0,animate:!0},o={},s={};for(let n of ex)s[n]="string"==typeof e[n]?e[n]:null==t?void 0:t.getContext()[n];let f=!1===e.initial?"animate":"initial",m=l(Q(e[f]||s[f],e.variants)||{},["transition"]),g=Object.assign({},m),v=(e,t)=>()=>{a[e]=t,$(b)},y=()=>{for(let t in eb){let r=eb[t].isActive(e),i=o[t];r&&!i?o[t]=eb[t].subscribe(n,{enable:v(t,!0),disable:v(t,!1)},e):!r&&i&&(i(),delete o[t])}},b={update:t=>{n&&(e=t,y(),$(b))},setActive:(e,t)=>{n&&(a[e]=t,$(b))},animateUpdates:function*(){var t,r;let i=m;m={};let o={};for(let n of ex){if(!a[n])continue;let i=Q(e[n]);if(i)for(let n in i)"transition"!==n&&(m[n]=i[n],o[n]=q(null!==(r=null!==(t=i.transition)&&void 0!==t?t:e.transition)&&void 0!==r?r:{},n))}let s=new Set([...Object.keys(m),...Object.keys(i)]),l=[];s.forEach(e=>{var t,r,a;void 0===m[e]&&(m[e]=g[e]),(typeof(r=i[e])!=typeof(a=m[e])||(Array.isArray(r)&&Array.isArray(a)?!function(e,t){let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(r,a):r!==a))&&(null!==(t=g[e])&&void 0!==t||(g[e]=Y.get(n,e)),l.push(function(e,t,n,r={},i){var a;let o;let s=window.__MOTION_DEV_TOOLS_RECORD,l=!1!==r.record&&s,{duration:u=I.duration,delay:f=I.delay,endDelay:m=I.endDelay,repeat:g=I.repeat,easing:v=I.easing,persist:y=!1,direction:b,offset:_,allowWebkitAcceleration:w=!1,autoplay:S=!0}=r,A=p(e),C=M(t),T=G.waapi();C&&E(e,t);let F=J(t),O=((a=A.values).has(F)||a.set(F,new h),a.get(F)),U=x.get(F);return function(e,t=!0){if(e&&"finished"!==e.playState)try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch(e){}}(O.animation,!(B(v)&&O.generator)&&!1!==r.record),()=>{let a=()=>{var t,n;return null!==(n=null!==(t=Y.get(e,F))&&void 0!==t?t:null==U?void 0:U.initialValue)&&void 0!==n?n:0},h=function(e,t){for(let n=0;n<e.length;n++)null===e[n]&&(e[n]=n?e[n-1]:t());return e}(X(n),a),p=function(e,t){var n;let r=(null==t?void 0:t.toDefaultUnit)||d,i=e[e.length-1];if(K(i)){let e=(null===(n=i.match(/(-?[\d.]+)([a-z%]*)/))||void 0===n?void 0:n[2])||"";e&&(r=t=>t+e)}return r}(h,U);if(B(v)){let e=v.createAnimation(h,"opacity"!==t,a,F,O);v=e.easing,h=e.keyframes||h,u=e.duration||u}if(R(F)&&(G.cssRegisterProperty()?function(e){if(!P.has(e)){P.add(e);try{let{syntax:t,initialValue:n}=x.has(e)?x.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:n})}catch(e){}}}(F):T=!1),C&&!G.linearEasing()&&(L(v)||D(v)&&v.some(L))&&(T=!1),T){U&&(h=h.map(e=>k(e)?U.toDefaultUnit(e):e)),1===h.length&&(!G.partialKeyframes()||l)&&h.unshift(a());let t={delay:N.ms(f),duration:N.ms(u),endDelay:N.ms(m),easing:D(v)?void 0:j(v,u),direction:b,iterations:g+1,fill:"both"};(o=e.animate({[F]:h,offset:_,easing:D(v)?v.map(e=>j(e,u)):void 0},t)).finished||(o.finished=new Promise((e,t)=>{o.onfinish=e,o.oncancel=t}));let n=h[h.length-1];o.finished.then(()=>{y||(Y.set(e,F,n),o.cancel())}).catch(c),w||(o.playbackRate=1.000001)}else if(i&&C)1===(h=h.map(e=>"string"==typeof e?parseFloat(e):e)).length&&h.unshift(parseFloat(a())),o=new i(t=>{Y.set(e,F,p?p(t):t)},h,Object.assign(Object.assign({},r),{duration:u,easing:v}));else{let t=h[h.length-1];Y.set(e,F,U&&k(t)?U.toDefaultUnit(t):t)}return l&&s(e,t,h,{duration:u,delay:f,easing:v,repeat:g,offset:_},"motion-one"),O.setAnimation(o),o&&!S&&o.pause(),o}}(n,e,m[e],o[e],ey)))}),yield;let u=l.map(e=>e()).filter(Boolean);if(!u.length)return;let f=m;n.dispatchEvent(er("motionstart",f)),Promise.all(u.map(e=>e.finished)).then(()=>{n.dispatchEvent(er("motioncomplete",f))}).catch(c)},getDepth:()=>i,getTarget:()=>m,getOptions:()=>e,getContext:()=>s,mount:e=>(u(!!e,"Animation state must be mounted with valid Element"),n=e,e_.set(n,b),y(),()=>{var e;for(let t in e_.delete(n),e=b,r&&function(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}(r,e),o)o[t]()}),isMounted:()=>!!n};return b}(n?.initial===!1?{...t(),initial:!1}:t(),a);return(0,i.GW)(()=>{if(n&&!n.mount())return;let r=e(),a=o.mount(r);(0,i.GW)(()=>o.update(t())),(0,i.$W)(()=>{n&&t().exit?(o.setActive("exit",!0),r.addEventListener("motioncomplete",a)):a()})}),[o,function(e){let t={},n=[];for(let r in e){let i=e[r];M(r)&&(v[r]&&(r=v[r]),n.push(r),r=_(r));let a=Array.isArray(i)?i[0]:i,o=x.get(r);o&&(a=k(i)?o.toDefaultUnit(i):i),t[r]=a}return n.length&&(t.transform=C(n)),t}(o.getTarget())]}(()=>t,()=>({...n}),(0,i.qp)(eM),(0,i.qp)(eR));return(0,i.LM)(eR.Provider,{value:f,get children(){return(0,i.LM)(a.m5,(0,i.dG)(o,{ref:n=>{t=n,e.ref?.(n)},get component(){return e.tag||"div"},get style(){return function(e,t){if("string"==typeof e){if("string"==typeof t)return`${e};${t}`;e=s(e)}else"string"==typeof t&&(t=s(t));return{...e,...t}}(e.style,m)}}))}})},eI=new Proxy(eP,{get:(e,t)=>e=>(0,i.LM)(eP,(0,i.dG)(e,{tag:t}))})},4697:function(e,t,n){"use strict";n.d(t,{m6:()=>ed});let r=e=>{let t=s(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{let n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),i(n,t)||o(e)},getConflictingClassGroupIds:(e,t)=>{let i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}},i=(e,t)=>{if(0===e.length)return t.classGroupId;let n=e[0],r=t.nextPart.get(n),a=r?i(e.slice(1),r):void 0;if(a)return a;if(0===t.validators.length)return;let o=e.join("-");return t.validators.find(({validator:e})=>e(o))?.classGroupId},a=/^\[(.+)\]$/,o=e=>{if(a.test(e)){let t=a.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},s=e=>{let{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(let e in n)l(n[e],r,e,t);return r},l=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:u(t,e)).classGroupId=n;return}if("function"==typeof e){if(c(e)){l(e(r),t,n,r);return}t.validators.push({validator:e,classGroupId:n});return}Object.entries(e).forEach(([e,i])=>{l(i,u(t,e),n,r)})})},u=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},c=e=>e.isThemeGetter,d=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,n=new Map,r=new Map,i=(i,a)=>{n.set(i,a),++t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},h=e=>{let{prefix:t,experimentalParseClassName:n}=e,r=e=>{let t;let n=[],r=0,i=0,a=0;for(let o=0;o<e.length;o++){let s=e[o];if(0===r&&0===i){if(":"===s){n.push(e.slice(a,o)),a=o+1;continue}if("/"===s){t=o;continue}}"["===s?r++:"]"===s?r--:"("===s?i++:")"===s&&i--}let o=0===n.length?e:e.substring(a),s=f(o);return{modifiers:n,hasImportantModifier:s!==o,baseClassName:s,maybePostfixModifierPosition:t&&t>a?t-a:void 0}};if(t){let e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){let e=r;r=t=>n({className:t,parseClassName:e})}return r},f=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,p=e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;let n=[],r=[];return e.forEach(e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)}),n.push(...r.sort()),n}},m=e=>({cache:d(e.cacheSize),parseClassName:h(e),sortModifiers:p(e),...r(e)}),g=/\s+/,v=(e,t)=>{let{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=t,o=[],s=e.trim().split(g),l="";for(let e=s.length-1;e>=0;e-=1){let t=s[e],{isExternal:u,modifiers:c,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=n(t);if(u){l=t+(l.length>0?" "+l:l);continue}let p=!!f,m=r(p?h.substring(0,f):h);if(!m){if(!p||!(m=r(h))){l=t+(l.length>0?" "+l:l);continue}p=!1}let g=a(c).join(":"),v=d?g+"!":g,y=v+m;if(o.includes(y))continue;o.push(y);let b=i(m,p);for(let e=0;e<b.length;++e){let t=b[e];o.push(v+t)}l=t+(l.length>0?" "+l:l)}return l};function y(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=b(e))&&(r&&(r+=" "),r+=t);return r}let b=e=>{let t;if("string"==typeof e)return e;let n="";for(let r=0;r<e.length;r++)e[r]&&(t=b(e[r]))&&(n&&(n+=" "),n+=t);return n},x=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,w=/^\((?:(\w[\w-]*):)?(.+)\)$/i,S=/^\d+\/\d+$/,A=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,M=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,R=e=>S.test(e),P=e=>!!e&&!Number.isNaN(Number(e)),I=e=>!!e&&Number.isInteger(Number(e)),B=e=>e.endsWith("%")&&P(e.slice(0,-1)),L=e=>A.test(e),k=()=>!0,D=e=>M.test(e)&&!E.test(e),N=()=>!1,F=e=>C.test(e),O=e=>T.test(e),U=e=>!H(e)&&!J(e),z=e=>ee(e,eo,N),H=e=>_.test(e),G=e=>ee(e,es,D),V=e=>ee(e,el,P),j=e=>ee(e,en,N),W=e=>ee(e,ei,O),X=e=>ee(e,N,F),J=e=>w.test(e),Y=e=>et(e,es),K=e=>et(e,eu),q=e=>et(e,en),Q=e=>et(e,eo),Z=e=>et(e,ei),$=e=>et(e,ec,!0),ee=(e,t,n)=>{let r=_.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},et=(e,t,n=!1)=>{let r=w.exec(e);return!!r&&(r[1]?t(r[1]):n)},en=e=>"position"===e,er=new Set(["image","url"]),ei=e=>er.has(e),ea=new Set(["length","size","percentage"]),eo=e=>ea.has(e),es=e=>"length"===e,el=e=>"number"===e,eu=e=>"family-name"===e,ec=e=>"shadow"===e,ed=function(e,...t){let n,r,i;let a=function(s){return r=(n=m(t.reduce((e,t)=>t(e),e()))).cache.get,i=n.cache.set,a=o,o(s)};function o(e){let t=r(e);if(t)return t;let a=v(e,n);return i(e,a),a}return function(){return a(y.apply(null,arguments))}}(()=>{let e=x("color"),t=x("font"),n=x("text"),r=x("font-weight"),i=x("tracking"),a=x("leading"),o=x("breakpoint"),s=x("container"),l=x("spacing"),u=x("radius"),c=x("shadow"),d=x("inset-shadow"),h=x("drop-shadow"),f=x("blur"),p=x("perspective"),m=x("aspect"),g=x("ease"),v=x("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],_=()=>["auto","hidden","clip","visible","scroll"],w=()=>["auto","contain","none"],S=()=>[J,H,l],A=()=>[R,"full","auto",...S()],M=()=>[I,"none","subgrid",J,H],E=()=>["auto",{span:["full",I,J,H]},J,H],C=()=>[I,"auto",J,H],T=()=>["auto","min","max","fr",J,H],D=()=>["start","end","center","between","around","evenly","stretch","baseline"],N=()=>["start","end","center","stretch"],F=()=>["auto",...S()],O=()=>[R,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],ee=()=>[e,J,H],et=()=>[B,G],en=()=>["","none","full",u,J,H],er=()=>["",P,Y,G],ei=()=>["solid","dashed","dotted","double"],ea=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],eo=()=>["","none",f,J,H],es=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",J,H],el=()=>["none",P,J,H],eu=()=>["none",P,J,H],ec=()=>[P,J,H],ed=()=>[R,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[L],breakpoint:[L],color:[k],container:[L],"drop-shadow":[L],ease:["in","out","in-out"],font:[U],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[L],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[L],shadow:[L],spacing:["px",P],text:[L],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",R,H,J,m]}],container:["container"],columns:[{columns:[P,H,J,s]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...b(),H,J]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[I,"auto",J,H]}],basis:[{basis:[R,"full","auto",s,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[P,R,"auto","initial","none",H]}],grow:[{grow:["",P,J,H]}],shrink:[{shrink:["",P,J,H]}],order:[{order:[I,"first","last","none",J,H]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":T()}],"auto-rows":[{"auto-rows":T()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...N(),"normal"]}],"justify-self":[{"justify-self":["auto",...N()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...N(),"baseline"]}],"align-self":[{self:["auto",...N(),"baseline"]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...N(),"baseline"]}],"place-self":[{"place-self":["auto",...N()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:O()}],w:[{w:[s,"screen",...O()]}],"min-w":[{"min-w":[s,"screen","none",...O()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...O()]}],h:[{h:["screen",...O()]}],"min-h":[{"min-h":["screen","none",...O()]}],"max-h":[{"max-h":["screen",...O()]}],"font-size":[{text:["base",n,Y,G]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,J,V]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",B,H]}],"font-family":[{font:[K,H,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,J,H]}],"line-clamp":[{"line-clamp":[P,"none",J,V]}],leading:[{leading:[a,...S()]}],"list-image":[{"list-image":["none",J,H]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",J,H]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ei(),"wavy"]}],"text-decoration-thickness":[{decoration:[P,"from-font","auto",J,G]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[P,"auto",J,H]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",J,H]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",J,H]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...b(),q,j]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",Q,z]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},I,J,H],radial:["",J,H],conic:[I,J,H]},Z,W]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:et()}],"gradient-via-pos":[{via:et()}],"gradient-to-pos":[{to:et()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:en()}],"rounded-s":[{"rounded-s":en()}],"rounded-e":[{"rounded-e":en()}],"rounded-t":[{"rounded-t":en()}],"rounded-r":[{"rounded-r":en()}],"rounded-b":[{"rounded-b":en()}],"rounded-l":[{"rounded-l":en()}],"rounded-ss":[{"rounded-ss":en()}],"rounded-se":[{"rounded-se":en()}],"rounded-ee":[{"rounded-ee":en()}],"rounded-es":[{"rounded-es":en()}],"rounded-tl":[{"rounded-tl":en()}],"rounded-tr":[{"rounded-tr":en()}],"rounded-br":[{"rounded-br":en()}],"rounded-bl":[{"rounded-bl":en()}],"border-w":[{border:er()}],"border-w-x":[{"border-x":er()}],"border-w-y":[{"border-y":er()}],"border-w-s":[{"border-s":er()}],"border-w-e":[{"border-e":er()}],"border-w-t":[{"border-t":er()}],"border-w-r":[{"border-r":er()}],"border-w-b":[{"border-b":er()}],"border-w-l":[{"border-l":er()}],"divide-x":[{"divide-x":er()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":er()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ei(),"hidden","none"]}],"divide-style":[{divide:[...ei(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...ei(),"none","hidden"]}],"outline-offset":[{"outline-offset":[P,J,H]}],"outline-w":[{outline:["",P,Y,G]}],"outline-color":[{outline:[e]}],shadow:[{shadow:["","none",c,$,X]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",J,H,d]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:er()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[P,G]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":er()}],"inset-ring-color":[{"inset-ring":ee()}],opacity:[{opacity:[P,J,H]}],"mix-blend":[{"mix-blend":[...ea(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ea()}],filter:[{filter:["","none",J,H]}],blur:[{blur:eo()}],brightness:[{brightness:[P,J,H]}],contrast:[{contrast:[P,J,H]}],"drop-shadow":[{"drop-shadow":["","none",h,J,H]}],grayscale:[{grayscale:["",P,J,H]}],"hue-rotate":[{"hue-rotate":[P,J,H]}],invert:[{invert:["",P,J,H]}],saturate:[{saturate:[P,J,H]}],sepia:[{sepia:["",P,J,H]}],"backdrop-filter":[{"backdrop-filter":["","none",J,H]}],"backdrop-blur":[{"backdrop-blur":eo()}],"backdrop-brightness":[{"backdrop-brightness":[P,J,H]}],"backdrop-contrast":[{"backdrop-contrast":[P,J,H]}],"backdrop-grayscale":[{"backdrop-grayscale":["",P,J,H]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[P,J,H]}],"backdrop-invert":[{"backdrop-invert":["",P,J,H]}],"backdrop-opacity":[{"backdrop-opacity":[P,J,H]}],"backdrop-saturate":[{"backdrop-saturate":[P,J,H]}],"backdrop-sepia":[{"backdrop-sepia":["",P,J,H]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",J,H]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[P,"initial",J,H]}],ease:[{ease:["linear","initial",g,J,H]}],delay:[{delay:[P,J,H]}],animate:[{animate:["none",v,J,H]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,J,H]}],"perspective-origin":[{"perspective-origin":es()}],rotate:[{rotate:el()}],"rotate-x":[{"rotate-x":el()}],"rotate-y":[{"rotate-y":el()}],"rotate-z":[{"rotate-z":el()}],scale:[{scale:eu()}],"scale-x":[{"scale-x":eu()}],"scale-y":[{"scale-y":eu()}],"scale-z":[{"scale-z":eu()}],"scale-3d":["scale-3d"],skew:[{skew:ec()}],"skew-x":[{"skew-x":ec()}],"skew-y":[{"skew-y":ec()}],transform:[{transform:[J,H,"","none","gpu","cpu"]}],"transform-origin":[{origin:es()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ed()}],"translate-x":[{"translate-x":ed()}],"translate-y":[{"translate-y":ed()}],"translate-z":[{"translate-z":ed()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",J,H]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",J,H]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[P,Y,G,V]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}})},8992:function(e,t,n){"use strict";n.d(t,{i:()=>r});let r=parseInt(n(5300).UZH.replace(/\D+/g,""))},5300:function(e,t,n){"use strict";let r,i,a,o,s;n.d(t,{$TI:()=>uG,$V:()=>uY,$YQ:()=>oQ,$wi:()=>ef,A5E:()=>iT,ACn:()=>n7,AXT:()=>se,B02:()=>p,BFQ:()=>e6,BG$:()=>td,BVF:()=>Y,BVQ:()=>sd,BbS:()=>ug,Bf4:()=>eb,Bgp:()=>ed,BtG:()=>ad,CJI:()=>im,CaW:()=>tn,CdI:()=>es,CtA:()=>e2,CtF:()=>lA,Cy:()=>W,D1R:()=>eB,D67:()=>na,D9w:()=>e0,Djp:()=>tc,DqL:()=>lB,DvJ:()=>i7,E2K:()=>e4,EB7:()=>oJ,EJi:()=>s6,EcG:()=>cw,EoG:()=>eo,F1y:()=>no,F5G:()=>e3,F5T:()=>iS,FDw:()=>eL,FE5:()=>sZ,FIo:()=>s4,FM8:()=>nO,FT0:()=>li,FUD:()=>tv,FvO:()=>u3,GG6:()=>tm,GQ:()=>cm,GUF:()=>tK,GVz:()=>rn,Gih:()=>tg,Gql:()=>l9,H$k:()=>sq,H7L:()=>nH,HTd:()=>eE,HdW:()=>tS,HgB:()=>ny,HkE:()=>ul,Hmr:()=>un,Hw6:()=>n4,Hy8:()=>z,Hyl:()=>oZ,I3e:()=>nP,IEO:()=>aQ,IFH:()=>tN,IKL:()=>s8,ILR:()=>e8,IOt:()=>tW,Ilk:()=>ix,Ir4:()=>nv,JCZ:()=>nA,JOQ:()=>or,JQ4:()=>eU,JUT:()=>rr,JWc:()=>nm,Jjb:()=>nc,KI_:()=>tY,Kgo:()=>sg,KhW:()=>D,Kj0:()=>i9,Kz5:()=>eO,L5s:()=>l5,LBq:()=>uK,LSk:()=>nw,LY2:()=>eu,LgZ:()=>O,LsT:()=>eF,Ltg:()=>n8,Lun:()=>ln,M$G:()=>ns,M5h:()=>E,M6v:()=>et,M8C:()=>nF,Mig:()=>l$,MyG:()=>t6,N$j:()=>aq,N4l:()=>M,NDo:()=>ei,NKc:()=>J,NMF:()=>tI,NYV:()=>th,NiX:()=>am,Ns1:()=>en,NwF:()=>l_,Ny0:()=>o$,O4K:()=>nJ,O5A:()=>nW,O78:()=>nu,O7d:()=>sG,OAl:()=>ne,ORg:()=>eh,OTo:()=>eX,Oau:()=>cS,OdW:()=>a0,OoA:()=>eS,Ox3:()=>lZ,PA7:()=>tX,PMe:()=>lj,Pa4:()=>ro,PeU:()=>d,Pnf:()=>tL,PpQ:()=>n2,PzK:()=>tj,QM0:()=>ng,QO2:()=>tw,QRU:()=>ut,QZ1:()=>np,Qey:()=>nY,QmN:()=>c,Qpg:()=>cn,R2R:()=>lv,RNb:()=>iL,ROQ:()=>oq,RSm:()=>s7,Rhp:()=>at,Rki:()=>cd,RlZ:()=>V,RsA:()=>u,RvT:()=>nt,S2y:()=>f,S3k:()=>lL,S9g:()=>rJ,SJI:()=>um,SPe:()=>a7,SUY:()=>uu,Se2:()=>K,Sm8:()=>B,SvJ:()=>tb,Syv:()=>tP,T6w:()=>nd,T95:()=>eD,TOt:()=>s_,TUj:()=>uZ,TUv:()=>aK,T_1:()=>cx,T_J:()=>t4,T__:()=>o0,T_f:()=>l0,TlE:()=>iB,Tme:()=>r7,Tn7:()=>s3,TyD:()=>eA,U7:()=>sr,UCm:()=>eJ,USm:()=>rX,UY4:()=>oF,UZH:()=>l,UcC:()=>uq,Uk6:()=>s0,UlW:()=>tU,Uol:()=>sm,V1s:()=>aa,VLJ:()=>cr,VYz:()=>u_,Vdb:()=>H,Vkp:()=>nU,VzW:()=>ez,W2J:()=>nh,WMw:()=>A,WTc:()=>ik,WXh:()=>s$,Wbm:()=>R,Wid:()=>s5,Wl3:()=>b,Wpd:()=>G,Wqd:()=>sl,WwZ:()=>tO,Wzm:()=>oX,Xaj:()=>C,Xcj:()=>uN,XvJ:()=>sQ,Y8D:()=>eK,YBo:()=>le,YGz:()=>el,YKA:()=>tT,YLQ:()=>eM,YT8:()=>o6,Ywn:()=>ri,Z6B:()=>nx,ZAu:()=>af,ZQ6:()=>si,ZRs:()=>t1,ZTh:()=>tM,ZXd:()=>c_,ZZA:()=>lc,Z_g:()=>oY,Zen:()=>nl,Zp0:()=>l4,Zr5:()=>q,ZzF:()=>ru,Zzh:()=>u1,_12:()=>sX,_7h:()=>tV,_AM:()=>e7,_C8:()=>ld,_Li:()=>x,_MY:()=>m,_RZ:()=>nS,_YM:()=>lg,_YX:()=>u9,_am:()=>ac,_fP:()=>ra,_iA:()=>g,_kC:()=>lF,_lf:()=>tk,_sL:()=>tD,_wr:()=>j,a$l:()=>iH,aCh:()=>tJ,aH4:()=>eC,aLr:()=>rC,aNw:()=>lC,aVm:()=>iN,ad5:()=>tZ,aq0:()=>ci,av9:()=>e1,bBp:()=>uk,bGH:()=>T,b_z:()=>sp,bdR:()=>S,blk:()=>oN,bnF:()=>sw,brP:()=>eZ,bsb:()=>tx,c8b:()=>L,cBI:()=>cl,cBK:()=>lk,cJO:()=>sj,cLu:()=>eH,cPb:()=>au,cRx:()=>eq,cU9:()=>lp,cac:()=>nj,ce8:()=>t0,cek:()=>lK,cum:()=>nr,dSO:()=>ey,dUE:()=>ly,dYG:()=>lh,dZ3:()=>ec,dd2:()=>re,dj0:()=>nf,dpR:()=>lN,dwf:()=>ae,dwk:()=>y,e62:()=>iz,eD:()=>Z,eMJ:()=>t5,eS_:()=>nM,eaV:()=>tt,ehD:()=>_,ejS:()=>oD,ekQ:()=>ta,epp:()=>n$,f2y:()=>t_,fHI:()=>sf,fO1:()=>oj,fQA:()=>cp,fSK:()=>U,fY$:()=>eg,fto:()=>tr,g8_:()=>ex,gH0:()=>uH,gSk:()=>tF,g_z:()=>sn,ghN:()=>k,gi4:()=>tu,gti:()=>so,hEm:()=>e$,hH6:()=>lP,iAb:()=>eN,iDF:()=>sU,iKG:()=>lq,iLg:()=>lx,iMs:()=>uW,iUV:()=>uB,iWC:()=>N,iWj:()=>oo,iiP:()=>ty,irR:()=>eV,j17:()=>tQ,j4z:()=>nn,j87:()=>iO,jAl:()=>tC,jFi:()=>w,jZA:()=>ts,jes:()=>X,jfJ:()=>t2,jwo:()=>t8,jyi:()=>aD,jyz:()=>ai,k0A:()=>eG,k74:()=>F,kB5:()=>a_,kaV:()=>lr,kqm:()=>uw,ksN:()=>$,l0P:()=>ti,l6D:()=>tq,l8J:()=>nb,lCJ:()=>iU,lDi:()=>l1,lGU:()=>tE,lLk:()=>lM,lRF:()=>lt,lRj:()=>eI,lb7:()=>a1,lfu:()=>lf,lk7:()=>l2,m7l:()=>lS,mSO:()=>tG,mTL:()=>ur,mXe:()=>sa,msZ:()=>ep,mzJ:()=>uL,nls:()=>oS,ntZ:()=>v,o8S:()=>sJ,oAp:()=>ah,oDz:()=>an,oa8:()=>sY,oqc:()=>t3,p3g:()=>rt,p7y:()=>sc,pBf:()=>nE,pIN:()=>tB,pKu:()=>tp,pQR:()=>sW,ppL:()=>uF,ptH:()=>to,qVC:()=>oK,qhX:()=>er,qkB:()=>eQ,qlB:()=>iF,qyh:()=>eP,rAo:()=>iD,rDY:()=>ar,rOj:()=>P,r_:()=>I,rpg:()=>e_,s4_:()=>l6,sYA:()=>lI,tEQ:()=>lE,tGC:()=>cy,tJx:()=>cg,tNt:()=>nK,tQZ:()=>eW,tUh:()=>lm,tf:()=>uS,tm_:()=>h,u37:()=>us,u7G:()=>l3,u9r:()=>iK,uEv:()=>tR,uL9:()=>ea,uWy:()=>ew,uXU:()=>t9,v2s:()=>oW,v3W:()=>e9,v9Y:()=>n_,vBJ:()=>iA,vCF:()=>Q,vCx:()=>te,vZf:()=>eT,vmT:()=>lO,vpT:()=>ab,vuL:()=>tA,vxC:()=>ev,w$m:()=>ee,wJv:()=>ej,wem:()=>eR,wk1:()=>eY,woe:()=>oG,wuA:()=>e5,x12:()=>oI,x5V:()=>t$,xEZ:()=>n9,xG9:()=>u8,xJs:()=>tf,xTL:()=>uO,xWb:()=>uU,xeV:()=>aw,xfE:()=>em,xo$:()=>sK,xoQ:()=>ni,xoR:()=>s9,xsS:()=>ay,y$t:()=>su,y2t:()=>tl,y8_:()=>cb,yC1:()=>lw,yGw:()=>rN,yHo:()=>nq,ybr:()=>av,yj7:()=>st,ylh:()=>uV,yo9:()=>ag,yt0:()=>t7,ywz:()=>ek,yxD:()=>lD,z$h:()=>tz,z81:()=>tH,z8B:()=>aU,zHn:()=>rD,zbs:()=>lb,zf8:()=>sh,zwN:()=>ow});let l="173",u={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},c={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},d=0,h=1,f=2,p=3,m=0,g=1,v=2,y=3,b=0,x=1,_=2,w=0,S=1,A=2,M=3,E=4,C=5,T=100,R=101,P=102,I=103,B=104,L=200,k=201,D=202,N=203,F=204,O=205,U=206,z=207,H=208,G=209,V=210,j=211,W=212,X=213,J=214,Y=0,K=1,q=2,Q=3,Z=4,$=5,ee=6,et=7,en=0,er=1,ei=2,ea=0,eo=1,es=2,el=3,eu=4,ec=5,ed=6,eh=7,ef="attached",ep="detached",em=300,eg=301,ev=302,ey=303,eb=304,ex=306,e_=1e3,ew=1001,eS=1002,eA=1003,eM=1004,eE=1004,eC=1005,eT=1005,eR=1006,eP=1007,eI=1007,eB=1008,eL=1008,ek=1009,eD=1010,eN=1011,eF=1012,eO=1013,eU=1014,ez=1015,eH=1016,eG=1017,eV=1018,ej=1020,eW=35902,eX=1021,eJ=1022,eY=1023,eK=1024,eq=1025,eQ=1026,eZ=1027,e$=1028,e0=1029,e1=1030,e2=1031,e3=1032,e4=1033,e5=33776,e6=33777,e9=33778,e8=33779,e7=35840,te=35841,tt=35842,tn=35843,tr=36196,ti=37492,ta=37496,to=37808,ts=37809,tl=37810,tu=37811,tc=37812,td=37813,th=37814,tf=37815,tp=37816,tm=37817,tg=37818,tv=37819,ty=37820,tb=37821,tx=36492,t_=36494,tw=36495,tS=36283,tA=36284,tM=36285,tE=36286,tC=2200,tT=2201,tR=2202,tP=2300,tI=2301,tB=2302,tL=2400,tk=2401,tD=2402,tN=2500,tF=2501,tO=0,tU=1,tz=2,tH=3200,tG=3201,tV=3202,tj=3203,tW=0,tX=1,tJ="",tY="srgb",tK="srgb-linear",tq="linear",tQ="srgb",tZ=0,t$=7680,t0=7681,t1=7682,t2=7683,t3=34055,t4=34056,t5=5386,t6=512,t9=513,t8=514,t7=515,ne=516,nt=517,nn=518,nr=519,ni=512,na=513,no=514,ns=515,nl=516,nu=517,nc=518,nd=519,nh=35044,nf=35048,np=35040,nm=35045,ng=35049,nv=35041,ny=35046,nb=35050,nx=35042,n_="100",nw="300 es",nS=2e3,nA=2001,nM={COMPUTE:"compute",RENDER:"render"};class nE{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){let n=this._listeners;return void 0!==n&&void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){let n=this._listeners;if(void 0===n)return;let r=n[e];if(void 0!==r){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){let t=this._listeners;if(void 0===t)return;let n=t[e.type];if(void 0!==n){e.target=this;let t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}let nC=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],nT=1234567,nR=Math.PI/180,nP=180/Math.PI;function nI(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,n=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0;return(nC[255&e]+nC[e>>8&255]+nC[e>>16&255]+nC[e>>24&255]+"-"+nC[255&t]+nC[t>>8&255]+"-"+nC[t>>16&15|64]+nC[t>>24&255]+"-"+nC[63&n|128]+nC[n>>8&255]+"-"+nC[n>>16&255]+nC[n>>24&255]+nC[255&r]+nC[r>>8&255]+nC[r>>16&255]+nC[r>>24&255]).toLowerCase()}function nB(e,t,n){return Math.max(t,Math.min(n,e))}function nL(e,t){return(e%t+t)%t}function nk(e,t,n){return(1-n)*e+n*t}function nD(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/0xffffffff;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/0x7fffffff,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function nN(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(0xffffffff*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(0x7fffffff*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}let nF={DEG2RAD:nR,RAD2DEG:nP,generateUUID:nI,clamp:nB,euclideanModulo:nL,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:nk,damp:function(e,t,n,r){return nk(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(nL(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(nT=e);let t=nT+=0x6d2b79f5;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000},degToRad:function(e){return e*nR},radToDeg:function(e){return e*nP},isPowerOfTwo:function(e){return(e&e-1)==0&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){let a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),d=a((t-r)/2),h=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*d,l*h,s*u);break;case"YZY":e.set(l*h,s*c,l*d,s*u);break;case"ZXZ":e.set(l*d,l*h,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:nN,denormalize:nD};class nO{constructor(e=0,t=0){nO.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=nB(this.x,e.x,t.x),this.y=nB(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=nB(this.x,e,t),this.y=nB(this.y,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(nB(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(nB(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class nU{constructor(e,t,n,r,i,a,o,s,l){nU.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l)}set(e,t,n,r,i,a,o,s,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],w=r[8];return i[0]=a*p+o*v+s*x,i[3]=a*m+o*y+s*_,i[6]=a*g+o*b+s*w,i[1]=l*p+u*v+c*x,i[4]=l*m+u*y+c*_,i[7]=l*g+u*b+c*w,i[2]=d*p+h*v+f*x,i[5]=d*m+h*y+f*_,i[8]=d*g+h*b+f*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,d=o*s-u*i,h=l*i-a*s,f=t*c+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*a)*p,e[3]=d*p,e[4]=(u*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){let s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(nz.makeScale(e,t)),this}rotate(e){return this.premultiply(nz.makeRotation(-e)),this}translate(e,t){return this.premultiply(nz.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let nz=new nU;function nH(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}let nG={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function nV(e,t){return new nG[e](t)}function nj(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function nW(){let e=nj("canvas");return e.style.display="block",e}let nX={};function nJ(e){e in nX||(nX[e]=!0,console.warn(e))}function nY(e,t,n){return new Promise(function(r,i){setTimeout(function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}},n)})}function nK(e){let t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function nq(e){let t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}let nQ=new nU().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nZ=new nU().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715),n$=function(){let e={enabled:!0,workingColorSpace:tK,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n&&(this.spaces[t].transfer===tQ&&(e.r=n0(e.r),e.g=n0(e.g),e.b=n0(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===tQ&&(e.r=n1(e.r),e.g=n1(e.g),e.b=n1(e.b))),e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===tJ?tq:this.spaces[e].transfer},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[tK]:{primaries:t,whitePoint:r,transfer:tq,toXYZ:nQ,fromXYZ:nZ,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:tY},outputColorSpaceConfig:{drawingBufferColorSpace:tY}},[tY]:{primaries:t,whitePoint:r,transfer:tQ,toXYZ:nQ,fromXYZ:nZ,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:tY}}}),e}();function n0(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function n1(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class n2{static getDataURL(e){let t;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===r&&(r=nj("canvas")),r.width=e.width,r.height=e.height;let n=r.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=r}return t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=nj("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*n0(i[e]/255);return n.putImageData(r,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*n0(t[e]/255)):t[e]=n0(t[e]);return{data:t,width:e.width,height:e.height}}}}let n3=0;class n4{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:n3++}),this.uuid=nI(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(n5(r[t].image)):e.push(n5(r[t]))}else e=n5(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function n5(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?n2.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let n6=0;class n9 extends nE{constructor(e=n9.DEFAULT_IMAGE,t=n9.DEFAULT_MAPPING,n=ew,r=ew,i=eR,a=eB,o=eY,s=ek,l=n9.DEFAULT_ANISOTROPY,u=tJ){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:n6++}),this.uuid=nI(),this.name="",this.source=new n4(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new nO(0,0),this.repeat=new nO(1,1),this.center=new nO(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nU,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==em)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case e_:e.x=e.x-Math.floor(e.x);break;case ew:e.x=e.x<0?0:1;break;case eS:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case e_:e.y=e.y-Math.floor(e.y);break;case ew:e.y=e.y<0?0:1;break;case eS:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}n9.DEFAULT_IMAGE=null,n9.DEFAULT_MAPPING=em,n9.DEFAULT_ANISOTROPY=1;class n8{constructor(e=0,t=0,n=0,r=1){n8.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;let a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],d=a[9],h=a[2],f=a[6],p=a[10];if(.01>Math.abs(s-u)&&.01>Math.abs(l-h)&&.01>Math.abs(d-f)){if(.1>Math.abs(s+u)&&.1>Math.abs(l+h)&&.1>Math.abs(d+f)&&.1>Math.abs(o+c+p-3))return this.set(1,0,0,0),this;t=Math.PI;let e=(o+1)/2,a=(c+1)/2,m=(p+1)/2,g=(s+u)/4,v=(l+h)/4,y=(d+f)/4;return e>a&&e>m?e<.01?(n=0,r=.707106781,i=.707106781):(r=g/(n=Math.sqrt(e)),i=v/n):a>m?a<.01?(n=.707106781,r=0,i=.707106781):(n=g/(r=Math.sqrt(a)),i=y/r):m<.01?(n=.707106781,r=.707106781,i=0):(n=v/(i=Math.sqrt(m)),r=y/i),this.set(n,r,i,t),this}let m=Math.sqrt((f-d)*(f-d)+(l-h)*(l-h)+(u-s)*(u-s));return .001>Math.abs(m)&&(m=1),this.x=(f-d)/m,this.y=(l-h)/m,this.z=(u-s)/m,this.w=Math.acos((o+c+p-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=nB(this.x,e.x,t.x),this.y=nB(this.y,e.y,t.y),this.z=nB(this.z,e.z,t.z),this.w=nB(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=nB(this.x,e,t),this.y=nB(this.y,e,t),this.z=nB(this.z,e,t),this.w=nB(this.w,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(nB(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class n7 extends nE{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new n8(0,0,e,t),this.scissorTest=!1,this.viewport=new n8(0,0,e,t);let r=new n9({width:e,height:t,depth:1},(n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:eR,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n)).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];let i=n.count;for(let e=0;e<i;e++)this.textures[e]=r.clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let t=Object.assign({},e.texture.image);return this.texture.source=new n4(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class re extends n7{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class rt extends n9{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=eA,this.minFilter=eA,this.wrapR=ew,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class rn extends re{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new rt(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class rr extends n9{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=eA,this.minFilter=eA,this.wrapR=ew,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ri extends re{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new rr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ra{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],d=i[a+0],h=i[a+1],f=i[a+2],p=i[a+3];if(0===o){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(1===o){e[t+0]=d,e[t+1]=h,e[t+2]=f,e[t+3]=p;return}if(c!==p||s!==d||l!==h||u!==f){let e=1-o,t=s*d+l*h+u*f+c*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){let i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}let i=o*n;if(s=s*e+d*i,l=l*e+h*i,u=u*e+f*i,c=c*e+p*i,e===1-o){let e=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=e,l*=e,u*=e,c*=e}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,a){let o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],d=i[a+1],h=i[a+2],f=i[a+3];return e[t]=o*f+u*c+s*h-l*d,e[t+1]=s*f+u*d+l*c-o*h,e[t+2]=l*f+u*h+o*d-s*c,e[t+3]=u*f-o*c-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"YXZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"ZXY":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"ZYX":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"YZX":this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f;break;case"XZY":this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],d=n+o+c;if(d>0){let e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(u-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>c){let e=2*Math.sqrt(1+n-o-c);this._w=(u-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>c){let e=2*Math.sqrt(1+o-n-c);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+u)/e}else{let e=2*Math.sqrt(1+c-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nB(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;let s=1-o*o;if(s<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}let l=Math.sqrt(s),u=Math.atan2(l,o),c=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=a*c+this._w*d,this._x=n*c+this._x*d,this._y=r*c+this._y*d,this._z=i*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ro{constructor(e=0,t=0,n=0){ro.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(rl.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rl.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=2*(a*r-o*n),u=2*(o*t-i*r),c=2*(i*n-a*t);return this.x=t+s*l+a*c-o*u,this.y=n+s*u+o*l-i*c,this.z=r+s*c+i*u-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=nB(this.x,e.x,t.x),this.y=nB(this.y,e.y,t.y),this.z=nB(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=nB(this.x,e,t),this.y=nB(this.y,e,t),this.z=nB(this.z,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(nB(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return rs.copy(this).projectOnVector(e),this.sub(rs)}reflect(e){return this.sub(rs.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(nB(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let rs=new ro,rl=new ra;class ru{constructor(e=new ro(Infinity,Infinity,Infinity),t=new ro(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(rd.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(rd.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=rd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n){let r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,rd):rd.fromBufferAttribute(r,t),rd.applyMatrix4(e.matrixWorld),this.expandByPoint(rd);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),rh.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),rh.copy(n.boundingBox)),rh.applyMatrix4(e.matrixWorld),this.union(rh)}let r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,rd),rd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rb),rx.subVectors(this.max,rb),rf.subVectors(e.a,rb),rp.subVectors(e.b,rb),rm.subVectors(e.c,rb),rg.subVectors(rp,rf),rv.subVectors(rm,rp),ry.subVectors(rf,rm);let t=[0,-rg.z,rg.y,0,-rv.z,rv.y,0,-ry.z,ry.y,rg.z,0,-rg.x,rv.z,0,-rv.x,ry.z,0,-ry.x,-rg.y,rg.x,0,-rv.y,rv.x,0,-ry.y,ry.x,0];return!!(rS(t,rf,rp,rm,rx)&&rS(t=[1,0,0,0,1,0,0,0,1],rf,rp,rm,rx))&&(r_.crossVectors(rg,rv),rS(t=[r_.x,r_.y,r_.z],rf,rp,rm,rx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(rd).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(rc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let rc=[new ro,new ro,new ro,new ro,new ro,new ro,new ro,new ro],rd=new ro,rh=new ru,rf=new ro,rp=new ro,rm=new ro,rg=new ro,rv=new ro,ry=new ro,rb=new ro,rx=new ro,r_=new ro,rw=new ro;function rS(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){rw.fromArray(e,a);let o=i.x*Math.abs(rw.x)+i.y*Math.abs(rw.y)+i.z*Math.abs(rw.z),s=t.dot(rw),l=n.dot(rw),u=r.dot(rw);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>o)return!1}return!0}let rA=new ru,rM=new ro,rE=new ro;class rC{constructor(e=new ro,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):rA.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;rM.subVectors(e,this.center);let t=rM.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=(e-this.radius)*.5;this.center.addScaledVector(rM,n/e),this.radius+=n}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(rE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(rM.copy(e.center).add(rE)),this.expandByPoint(rM.copy(e.center).sub(rE)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let rT=new ro,rR=new ro,rP=new ro,rI=new ro,rB=new ro,rL=new ro,rk=new ro;class rD{constructor(e=new ro,t=new ro(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rT)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=rT.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rT.copy(this.origin).addScaledVector(this.direction,t),rT.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){let i,a,o,s;rR.copy(e).add(t).multiplyScalar(.5),rP.copy(t).sub(e).normalize(),rI.copy(this.origin).sub(rR);let l=.5*e.distanceTo(t),u=-this.direction.dot(rP),c=rI.dot(this.direction),d=-rI.dot(rP),h=rI.lengthSq(),f=Math.abs(1-u*u);if(f>0){if(i=u*d-c,a=u*c-d,s=l*f,i>=0){if(a>=-s){if(a<=s){let e=1/f;i*=e,a*=e,o=i*(i+u*a+2*c)+a*(u*i+a+2*d)+h}else o=-(i=Math.max(0,-(u*(a=l)+c)))*i+a*(a+2*d)+h}else o=-(i=Math.max(0,-(u*(a=-l)+c)))*i+a*(a+2*d)+h}else a<=-s?(a=(i=Math.max(0,-(-u*l+c)))>0?-l:Math.min(Math.max(-l,-d),l),o=-i*i+a*(a+2*d)+h):a<=s?(i=0,o=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):(a=(i=Math.max(0,-(u*l+c)))>0?l:Math.min(Math.max(-l,-d),l),o=-i*i+a*(a+2*d)+h)}else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*d)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(rR).addScaledVector(rP,a),o}intersectSphere(e,t){rT.subVectors(e.center,this.origin);let n=rT.dot(this.direction),r=rT.dot(rT)-n*n,i=e.radius*e.radius;if(r>i)return null;let a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}intersectBox(e,t){let n,r,i,a,o,s;let l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return(l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(i=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(i=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||i>r)?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>r)?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,rT)}intersectTriangle(e,t,n,r,i){let a;rB.subVectors(t,e),rL.subVectors(n,e),rk.crossVectors(rB,rL);let o=this.direction.dot(rk);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}rI.subVectors(this.origin,e);let s=a*this.direction.dot(rL.crossVectors(rI,rL));if(s<0)return null;let l=a*this.direction.dot(rB.cross(rI));if(l<0||s+l>o)return null;let u=-a*rI.dot(rk);return u<0?null:this.at(u/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rN{constructor(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,m){rN.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,m)}set(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rN().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/rF.setFromMatrixColumn(e,0).length(),i=1/rF.setFromMatrixColumn(e,1).length(),a=1/rF.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){let e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){let e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){let e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e-i*o,t[4]=-a*c,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*u,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){let e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){let e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){let e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=a*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=o*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rU,e,rz)}lookAt(e,t,n){let r=this.elements;return rV.subVectors(e,t),0===rV.lengthSq()&&(rV.z=1),rV.normalize(),rH.crossVectors(n,rV),0===rH.lengthSq()&&(1===Math.abs(n.z)?rV.x+=1e-4:rV.z+=1e-4,rV.normalize(),rH.crossVectors(n,rV)),rH.normalize(),rG.crossVectors(rV,rH),r[0]=rH.x,r[4]=rG.x,r[8]=rV.x,r[1]=rH.y,r[5]=rG.y,r[9]=rV.y,r[2]=rH.z,r[6]=rG.z,r[10]=rV.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],w=r[4],S=r[8],A=r[12],M=r[1],E=r[5],C=r[9],T=r[13],R=r[2],P=r[6],I=r[10],B=r[14],L=r[3],k=r[7],D=r[11],N=r[15];return i[0]=a*_+o*M+s*R+l*L,i[4]=a*w+o*E+s*P+l*k,i[8]=a*S+o*C+s*I+l*D,i[12]=a*A+o*T+s*B+l*N,i[1]=u*_+c*M+d*R+h*L,i[5]=u*w+c*E+d*P+h*k,i[9]=u*S+c*C+d*I+h*D,i[13]=u*A+c*T+d*B+h*N,i[2]=f*_+p*M+m*R+g*L,i[6]=f*w+p*E+m*P+g*k,i[10]=f*S+p*C+m*I+g*D,i[14]=f*A+p*T+m*B+g*N,i[3]=v*_+y*M+b*R+x*L,i[7]=v*w+y*E+b*P+x*k,i[11]=v*S+y*C+b*I+x*D,i[15]=v*A+y*T+b*B+x*N,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14],f=e[3],p=e[7];return f*(+i*s*c-r*l*c-i*o*d+n*l*d+r*o*h-n*s*h)+p*(+t*s*h-t*l*d+i*a*d-r*a*h+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*h-i*a*c+n*a*h+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*d+r*a*c-n*a*d+n*s*u)}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=c*m*l-p*d*l+p*s*h-o*m*h-c*s*g+o*d*g,y=f*d*l-u*m*l-f*s*h+a*m*h+u*s*g-a*d*g,b=u*p*l-f*c*l+f*o*h-a*p*h-u*o*g+a*c*g,x=f*c*s-u*p*s-f*o*d+a*p*d+u*o*m-a*c*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/_;return e[0]=v*w,e[1]=(p*d*i-c*m*i-p*r*h+n*m*h+c*r*g-n*d*g)*w,e[2]=(o*m*i-p*s*i+p*r*l-n*m*l-o*r*g+n*s*g)*w,e[3]=(c*s*i-o*d*i-c*r*l+n*d*l+o*r*h-n*s*h)*w,e[4]=y*w,e[5]=(u*m*i-f*d*i+f*r*h-t*m*h-u*r*g+t*d*g)*w,e[6]=(f*s*i-a*m*i-f*r*l+t*m*l+a*r*g-t*s*g)*w,e[7]=(a*d*i-u*s*i+u*r*l-t*d*l-a*r*h+t*s*h)*w,e[8]=b*w,e[9]=(f*c*i-u*p*i-f*n*h+t*p*h+u*n*g-t*c*g)*w,e[10]=(a*p*i-f*o*i+f*n*l-t*p*l-a*n*g+t*o*g)*w,e[11]=(u*o*i-a*c*i-u*n*l+t*c*l+a*n*h-t*o*h)*w,e[12]=x*w,e[13]=(u*p*r-f*c*r+f*n*d-t*p*d-u*n*m+t*c*m)*w,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*m-t*o*m)*w,e[15]=(a*c*r-u*o*r+u*n*s-t*c*s-a*n*d+t*o*d)*w,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];return Math.sqrt(Math.max(t,e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,d=i*l,h=i*u,f=i*c,p=a*u,m=a*c,g=o*c,v=s*l,y=s*u,b=s*c,x=n.x,_=n.y,w=n.z;return r[0]=(1-(p+g))*x,r[1]=(h+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(h-b)*_,r[5]=(1-(d+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(d+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=rF.set(r[0],r[1],r[2]).length(),a=rF.set(r[4],r[5],r[6]).length(),o=rF.set(r[8],r[9],r[10]).length();0>this.determinant()&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],rO.copy(this);let s=1/i,l=1/a,u=1/o;return rO.elements[0]*=s,rO.elements[1]*=s,rO.elements[2]*=s,rO.elements[4]*=l,rO.elements[5]*=l,rO.elements[6]*=l,rO.elements[8]*=u,rO.elements[9]*=u,rO.elements[10]*=u,t.setFromRotationMatrix(rO),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a,o=nS){let s,l;let u=this.elements;if(o===nS)s=-(a+i)/(a-i),l=-2*a*i/(a-i);else if(o===nA)s=-a/(a-i),l=-a*i/(a-i);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=2*i/(t-e),u[4]=0,u[8]=(t+e)/(t-e),u[12]=0,u[1]=0,u[5]=2*i/(n-r),u[9]=(n+r)/(n-r),u[13]=0,u[2]=0,u[6]=0,u[10]=s,u[14]=l,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,i,a,o=nS){let s,l;let u=this.elements,c=1/(t-e),d=1/(n-r),h=1/(a-i);if(o===nS)s=(a+i)*h,l=-2*h;else if(o===nA)s=i*h,l=-1*h;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-((t+e)*c),u[1]=0,u[5]=2*d,u[9]=0,u[13]=-((n+r)*d),u[2]=0,u[6]=0,u[10]=l,u[14]=-s,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}let rF=new ro,rO=new rN,rU=new ro(0,0,0),rz=new ro(1,1,1),rH=new ro,rG=new ro,rV=new ro,rj=new rN,rW=new ra;class rX{constructor(e=0,t=0,n=0,r=rX.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(nB(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-nB(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(nB(d,-1,1)),.9999999>Math.abs(d)?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-nB(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(nB(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-nB(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return rj.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rj,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rW.setFromEuler(this),this.setFromQuaternion(rW,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}rX.DEFAULT_ORDER="XYZ";class rJ{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let rY=0,rK=new ro,rq=new ra,rQ=new rN,rZ=new ro,r$=new ro,r0=new ro,r1=new ra,r2=new ro(1,0,0),r3=new ro(0,1,0),r4=new ro(0,0,1),r5={type:"added"},r6={type:"removed"},r9={type:"childadded",child:null},r8={type:"childremoved",child:null};class r7 extends nE{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rY++}),this.uuid=nI(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=r7.DEFAULT_UP.clone();let e=new ro,t=new rX,n=new ra,r=new ro(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new rN},normalMatrix:{value:new nU}}),this.matrix=new rN,this.matrixWorld=new rN,this.matrixAutoUpdate=r7.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=r7.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rJ,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return rq.setFromAxisAngle(e,t),this.quaternion.multiply(rq),this}rotateOnWorldAxis(e,t){return rq.setFromAxisAngle(e,t),this.quaternion.premultiply(rq),this}rotateX(e){return this.rotateOnAxis(r2,e)}rotateY(e){return this.rotateOnAxis(r3,e)}rotateZ(e){return this.rotateOnAxis(r4,e)}translateOnAxis(e,t){return rK.copy(e).applyQuaternion(this.quaternion),this.position.add(rK.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(r2,e)}translateY(e){return this.translateOnAxis(r3,e)}translateZ(e){return this.translateOnAxis(r4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(rQ.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?rZ.copy(e):rZ.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),r$.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rQ.lookAt(r$,rZ,this.up):rQ.lookAt(rZ,r$,this.up),this.quaternion.setFromRotationMatrix(rQ),r&&(rQ.extractRotation(r.matrixWorld),rq.setFromRotationMatrix(rQ),this.quaternion.premultiply(rq.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(r5),r9.child=e,this.dispatchEvent(r9),r9.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(r6),r8.child=e,this.dispatchEvent(r8),r8.child=null),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),rQ.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),rQ.multiply(e.parent.matrixWorld)),e.applyMatrix4(rQ),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(r5),r9.child=e,this.dispatchEvent(r9),r9.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);let r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r$,e,r0),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r$,r1,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material)}if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function a(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.add(n.clone())}return this}}r7.DEFAULT_UP=new ro(0,1,0),r7.DEFAULT_MATRIX_AUTO_UPDATE=!0,r7.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let ie=new ro,it=new ro,ir=new ro,ii=new ro,ia=new ro,io=new ro,is=new ro,il=new ro,iu=new ro,ic=new ro,id=new n8,ih=new n8,ip=new n8;class im{constructor(e=new ro,t=new ro,n=new ro){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ie.subVectors(e,t),r.cross(ie);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ie.subVectors(r,t),it.subVectors(n,t),ir.subVectors(e,t);let a=ie.dot(ie),o=ie.dot(it),s=ie.dot(ir),l=it.dot(it),u=it.dot(ir),c=a*l-o*o;if(0===c)return i.set(0,0,0),null;let d=1/c,h=(l*s-o*u)*d,f=(a*u-o*s)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,ii)&&ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getInterpolation(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,ii)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,ii.x),s.addScaledVector(a,ii.y),s.addScaledVector(o,ii.z),s)}static getInterpolatedAttribute(e,t,n,r,i,a){return id.setScalar(0),ih.setScalar(0),ip.setScalar(0),id.fromBufferAttribute(e,t),ih.fromBufferAttribute(e,n),ip.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(id,i.x),a.addScaledVector(ih,i.y),a.addScaledVector(ip,i.z),a}static isFrontFacing(e,t,n,r){return ie.subVectors(n,t),it.subVectors(e,t),0>ie.cross(it).dot(r)}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ie.subVectors(this.c,this.b),it.subVectors(this.a,this.b),.5*ie.cross(it).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return im.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return im.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return im.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return im.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return im.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r;let i=this.a,a=this.b,o=this.c;ia.subVectors(a,i),io.subVectors(o,i),il.subVectors(e,i);let s=ia.dot(il),l=io.dot(il);if(s<=0&&l<=0)return t.copy(i);iu.subVectors(e,a);let u=ia.dot(iu),c=io.dot(iu);if(u>=0&&c<=u)return t.copy(a);let d=s*c-u*l;if(d<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(ia,n);ic.subVectors(e,o);let h=ia.dot(ic),f=io.dot(ic);if(f>=0&&h<=f)return t.copy(o);let p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return r=l/(l-f),t.copy(i).addScaledVector(io,r);let m=u*f-h*c;if(m<=0&&c-u>=0&&h-f>=0)return is.subVectors(o,a),r=(c-u)/(c-u+(h-f)),t.copy(a).addScaledVector(is,r);let g=1/(m+p+d);return n=p*g,r=d*g,t.copy(i).addScaledVector(ia,n).addScaledVector(io,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ig={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},iv={h:0,s:0,l:0},iy={h:0,s:0,l:0};function ib(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}class ix{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){return void 0===t&&void 0===n?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,n),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=tY){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,n$.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=n$.workingColorSpace){return this.r=e,this.g=t,this.b=n,n$.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=n$.workingColorSpace){if(e=nL(e,1),t=nB(t,0,1),n=nB(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=ib(i,r,e+1/3),this.g=ib(i,r,e),this.b=ib(i,r,e-1/3)}return n$.toWorkingColorSpace(this,r),this}setStyle(e,t=tY){let n;function r(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;let a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let r=n[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=tY){let n=ig[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=n0(e.r),this.g=n0(e.g),this.b=n0(e.b),this}copyLinearToSRGB(e){return this.r=n1(e.r),this.g=n1(e.g),this.b=n1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tY){return n$.fromWorkingColorSpace(i_.copy(this),e),65536*Math.round(nB(255*i_.r,0,255))+256*Math.round(nB(255*i_.g,0,255))+Math.round(nB(255*i_.b,0,255))}getHexString(e=tY){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=n$.workingColorSpace){let n,r;n$.fromWorkingColorSpace(i_.copy(this),t);let i=i_.r,a=i_.g,o=i_.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)n=0,r=0;else{let e=s-l;switch(r=u<=.5?e/(s+l):e/(2-s-l),s){case i:n=(a-o)/e+6*(a<o);break;case a:n=(o-i)/e+2;break;case o:n=(i-a)/e+4}n/=6}return e.h=n,e.s=r,e.l=u,e}getRGB(e,t=n$.workingColorSpace){return n$.fromWorkingColorSpace(i_.copy(this),t),e.r=i_.r,e.g=i_.g,e.b=i_.b,e}getStyle(e=tY){n$.fromWorkingColorSpace(i_.copy(this),e);let t=i_.r,n=i_.g,r=i_.b;return e!==tY?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(iv),this.setHSL(iv.h+e,iv.s+t,iv.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(iv),e.getHSL(iy);let n=nk(iv.h,iy.h,t),r=nk(iv.s,iy.s,t),i=nk(iv.l,iy.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let i_=new ix;ix.NAMES=ig;let iw=0;class iS extends nE{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iw++}),this.uuid=nI(),this.name="",this.type="Material",this.blending=S,this.side=b,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=F,this.blendDst=O,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ix(0,0,0),this.blendAlpha=0,this.depthFunc=Q,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=nr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=t$,this.stencilZFail=t$,this.stencilZPass=t$,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(void 0===r){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==S&&(n.blending=this.blending),this.side!==b&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==F&&(n.blendSrc=this.blendSrc),this.blendDst!==O&&(n.blendDst=this.blendDst),this.blendEquation!==T&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Q&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==nr&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==t$&&(n.stencilFail=this.stencilFail),this.stencilZFail!==t$&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==t$&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class iA extends iS{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ix(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.combine=en,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let iM=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){let t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}let a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;(8388608&t)==0;)t<<=1,n-=8388608;t&=-8388609,n+=0x38800000,a[e]=t|n}for(let e=1024;e<2048;++e)a[e]=0x38000000+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=0x47800000,o[32]=0x80000000;for(let e=33;e<63;++e)o[e]=0x80000000+(e-32<<23);o[63]=0xc7800000;for(let e=1;e<64;++e)32!==e&&(s[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}();function iE(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=nB(e,-65504,65504),iM.floatView[0]=e;let t=iM.uint32View[0],n=t>>23&511;return iM.baseTable[n]+((8388607&t)>>iM.shiftTable[n])}function iC(e){let t=e>>10;return iM.uint32View[0]=iM.mantissaTable[iM.offsetTable[t]+(1023&e)]+iM.exponentTable[t],iM.floatView[0]}let iT={toHalfFloat:iE,fromHalfFloat:iC},iR=new ro,iP=new nO,iI=0;class iB{constructor(e,t,n=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:iI++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=nh,this.updateRanges=[],this.gpuType=ez,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)iP.fromBufferAttribute(this,t),iP.applyMatrix3(e),this.setXY(t,iP.x,iP.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.applyMatrix3(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.applyMatrix4(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.applyNormalMatrix(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.transformDirection(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=nD(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=nN(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=nD(t,this.array)),t}setX(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=nD(t,this.array)),t}setY(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=nD(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=nD(t,this.array)),t}setW(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array),r=nN(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array),r=nN(r,this.array),i=nN(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==nh&&(e.usage=this.usage),e}}class iL extends iB{constructor(e,t,n){super(new Int8Array(e),t,n)}}class ik extends iB{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class iD extends iB{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class iN extends iB{constructor(e,t,n){super(new Int16Array(e),t,n)}}class iF extends iB{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class iO extends iB{constructor(e,t,n){super(new Int32Array(e),t,n)}}class iU extends iB{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class iz extends iB{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=iC(this.array[e*this.itemSize]);return this.normalized&&(t=nD(t,this.array)),t}setX(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize]=iE(t),this}getY(e){let t=iC(this.array[e*this.itemSize+1]);return this.normalized&&(t=nD(t,this.array)),t}setY(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize+1]=iE(t),this}getZ(e){let t=iC(this.array[e*this.itemSize+2]);return this.normalized&&(t=nD(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize+2]=iE(t),this}getW(e){let t=iC(this.array[e*this.itemSize+3]);return this.normalized&&(t=nD(t,this.array)),t}setW(e,t){return this.normalized&&(t=nN(t,this.array)),this.array[e*this.itemSize+3]=iE(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array)),this.array[e+0]=iE(t),this.array[e+1]=iE(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array),r=nN(r,this.array)),this.array[e+0]=iE(t),this.array[e+1]=iE(n),this.array[e+2]=iE(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array),r=nN(r,this.array),i=nN(i,this.array)),this.array[e+0]=iE(t),this.array[e+1]=iE(n),this.array[e+2]=iE(r),this.array[e+3]=iE(i),this}}class iH extends iB{constructor(e,t,n){super(new Float32Array(e),t,n)}}let iG=0,iV=new rN,ij=new r7,iW=new ro,iX=new ru,iJ=new ru,iY=new ro;class iK extends nE{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:iG++}),this.uuid=nI(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nH(e)?iU:iF)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=new nU().getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return iV.makeRotationFromQuaternion(e),this.applyMatrix4(iV),this}rotateX(e){return iV.makeRotationX(e),this.applyMatrix4(iV),this}rotateY(e){return iV.makeRotationY(e),this.applyMatrix4(iV),this}rotateZ(e){return iV.makeRotationZ(e),this.applyMatrix4(iV),this}translate(e,t,n){return iV.makeTranslation(e,t,n),this.applyMatrix4(iV),this}scale(e,t,n){return iV.makeScale(e,t,n),this.applyMatrix4(iV),this}lookAt(e){return ij.lookAt(e),ij.updateMatrix(),this.applyMatrix4(ij.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(iW).negate(),this.translate(iW.x,iW.y,iW.z),this}setFromPoints(e){let t=this.getAttribute("position");if(void 0===t){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new iH(t,3))}else{let n=Math.min(e.length,t.count);for(let r=0;r<n;r++){let n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ru);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ro(-1/0,-1/0,-1/0),new ro(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];iX.setFromBufferAttribute(n),this.morphTargetsRelative?(iY.addVectors(this.boundingBox.min,iX.min),this.boundingBox.expandByPoint(iY),iY.addVectors(this.boundingBox.max,iX.max),this.boundingBox.expandByPoint(iY)):(this.boundingBox.expandByPoint(iX.min),this.boundingBox.expandByPoint(iX.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rC);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ro,1/0);return}if(e){let n=this.boundingSphere.center;if(iX.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];iJ.setFromBufferAttribute(n),this.morphTargetsRelative?(iY.addVectors(iX.min,iJ.min),iX.expandByPoint(iY),iY.addVectors(iX.max,iJ.max),iX.expandByPoint(iY)):(iX.expandByPoint(iJ.min),iX.expandByPoint(iJ.max))}iX.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)iY.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(iY));if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)iY.fromBufferAttribute(a,t),o&&(iW.fromBufferAttribute(e,t),iY.add(iW)),r=Math.max(r,n.distanceToSquared(iY))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new iB(new Float32Array(4*n.count),4));let a=this.getAttribute("tangent"),o=[],s=[];for(let e=0;e<n.count;e++)o[e]=new ro,s[e]=new ro;let l=new ro,u=new ro,c=new ro,d=new nO,h=new nO,f=new nO,p=new ro,m=new ro,g=this.groups;0===g.length&&(g=[{start:0,count:e.count}]);for(let t=0,r=g.length;t<r;++t){let r=g[t],a=r.start,v=r.count;for(let t=a,r=a+v;t<r;t+=3)!function(e,t,r){l.fromBufferAttribute(n,e),u.fromBufferAttribute(n,t),c.fromBufferAttribute(n,r),d.fromBufferAttribute(i,e),h.fromBufferAttribute(i,t),f.fromBufferAttribute(i,r),u.sub(l),c.sub(l),h.sub(d),f.sub(d);let a=1/(h.x*f.y-f.x*h.y);isFinite(a)&&(p.copy(u).multiplyScalar(f.y).addScaledVector(c,-h.y).multiplyScalar(a),m.copy(c).multiplyScalar(h.x).addScaledVector(u,-f.x).multiplyScalar(a),o[e].add(p),o[t].add(p),o[r].add(p),s[e].add(m),s[t].add(m),s[r].add(m))}(e.getX(t+0),e.getX(t+1),e.getX(t+2))}let v=new ro,y=new ro,b=new ro,x=new ro;function _(e){b.fromBufferAttribute(r,e),x.copy(b);let t=o[e];v.copy(t),v.sub(b.multiplyScalar(b.dot(t))).normalize(),y.crossVectors(x,t);let n=y.dot(s[e]);a.setXYZW(e,v.x,v.y,v.z,n<0?-1:1)}for(let t=0,n=g.length;t<n;++t){let n=g[t],r=n.start,i=n.count;for(let t=r,n=r+i;t<n;t+=3)_(e.getX(t+0)),_(e.getX(t+1)),_(e.getX(t+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new iB(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new ro,i=new ro,a=new ro,o=new ro,s=new ro,l=new ro,u=new ro,c=new ro;if(e)for(let d=0,h=e.count;d<h;d+=3){let h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),o.add(u),s.add(u),l.add(u),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)iY.fromBufferAttribute(e,t),iY.normalize(),e.setXYZ(t,iY.x,iY.y,iY.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new iB(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new iK,n=this.index.array,r=this.attributes;for(let i in r){let a=e(r[i],n);t.setAttribute(i,a)}let i=this.morphAttributes;for(let r in i){let a=[],o=i[r];for(let t=0,r=o.length;t<r;t++){let r=e(o[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let e=0,n=a.length;e<n;e++){let n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let t in n){let r=n[t];e.data.attributes[t]=r.toJSON(e.data)}let r={},i=!1;for(let t in this.morphAttributes){let n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){let r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let r=e.attributes;for(let e in r){let n=r[e];this.setAttribute(e,n.clone(t))}let i=e.morphAttributes;for(let e in i){let n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}let o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());let s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let iq=new rN,iQ=new rD,iZ=new rC,i$=new ro,i0=new ro,i1=new ro,i2=new ro,i3=new ro,i4=new ro,i5=new ro,i6=new ro;class i9 extends r7{constructor(e=new iK,t=new iA){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let o=this.morphTargetInfluences;if(i&&o){i4.set(0,0,0);for(let n=0,r=i.length;n<r;n++){let r=o[n],s=i[n];0!==r&&(i3.fromBufferAttribute(s,e),a?i4.addScaledVector(i3,r):i4.addScaledVector(i3.sub(t),r))}t.add(i4)}return t}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),iZ.copy(n.boundingSphere),iZ.applyMatrix4(i),iQ.copy(e.ray).recast(e.near),!1===iZ.containsPoint(iQ.origin)&&(null===iQ.intersectSphere(iZ,i$)||iQ.origin.distanceToSquared(i$)>(e.far-e.near)**2)||(iq.copy(i).invert(),iQ.copy(e.ray).applyMatrix4(iq),null!==n.boundingBox&&!1===iQ.intersectsBox(n.boundingBox)))return;this._computeIntersections(e,t,iQ)}}_computeIntersections(e,t,n){let r;let i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==o){if(Array.isArray(a))for(let i=0,s=d.length;i<s;i++){let s=d[i],f=a[s.materialIndex],p=Math.max(s.start,h.start),m=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));for(let i=p;i<m;i+=3){let a=o.getX(i);(r=i8(this,f,e,n,l,u,c,a,o.getX(i+1),o.getX(i+2)))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}}else{let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);for(let d=i;d<s;d+=3){let i=o.getX(d);(r=i8(this,a,e,n,l,u,c,i,o.getX(d+1),o.getX(d+2)))&&(r.faceIndex=Math.floor(d/3),t.push(r))}}}else if(void 0!==s){if(Array.isArray(a))for(let i=0,o=d.length;i<o;i++){let o=d[i],f=a[o.materialIndex],p=Math.max(o.start,h.start),m=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));for(let i=p;i<m;i+=3)(r=i8(this,f,e,n,l,u,c,i,i+1,i+2))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}else{let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);for(let s=i;s<o;s+=3)(r=i8(this,a,e,n,l,u,c,s,s+1,s+2))&&(r.faceIndex=Math.floor(s/3),t.push(r))}}}}function i8(e,t,n,r,i,a,o,s,l,u){e.getVertexPosition(s,i0),e.getVertexPosition(l,i1),e.getVertexPosition(u,i2);let c=function(e,t,n,r,i,a,o,s){let l;if(null===(t.side===x?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===b,s)))return null;i6.copy(s),i6.applyMatrix4(e.matrixWorld);let u=n.ray.origin.distanceTo(i6);return u<n.near||u>n.far?null:{distance:u,point:i6.clone(),object:e}}(e,t,n,r,i0,i1,i2,i5);if(c){let e=new ro;im.getBarycoord(i5,i0,i1,i2,e),i&&(c.uv=im.getInterpolatedAttribute(i,s,l,u,e,new nO)),a&&(c.uv1=im.getInterpolatedAttribute(a,s,l,u,e,new nO)),o&&(c.normal=im.getInterpolatedAttribute(o,s,l,u,e,new ro),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));let t={a:s,b:l,c:u,normal:new ro,materialIndex:0};im.getNormal(i0,i1,i2,t.normal),c.face=t,c.barycoord=e}return c}class i7 extends iK{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};let o=this;r=Math.floor(r),i=Math.floor(i);let s=[],l=[],u=[],c=[],d=0,h=0;function f(e,t,n,r,i,a,f,p,m,g,v){let y=a/m,b=f/g,x=a/2,_=f/2,w=p/2,S=m+1,A=g+1,M=0,E=0,C=new ro;for(let a=0;a<A;a++){let o=a*b-_;for(let s=0;s<S;s++){let d=s*y-x;C[e]=d*r,C[t]=o*i,C[n]=w,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,u.push(C.x,C.y,C.z),c.push(s/m),c.push(1-a/g),M+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){let n=d+t+S*e,r=d+t+S*(e+1),i=d+(t+1)+S*(e+1),a=d+(t+1)+S*e;s.push(n,r,a),s.push(r,i,a),E+=6}o.addGroup(h,E,v),h+=E,d+=M}f("z","y","x",-1,-1,n,t,e,a=Math.floor(a),i,0),f("z","y","x",1,-1,n,t,-e,a,i,1),f("x","z","y",1,1,e,n,t,r,a,2),f("x","z","y",1,-1,e,n,-t,r,a,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new iH(l,3)),this.setAttribute("normal",new iH(u,3)),this.setAttribute("uv",new iH(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i7(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ae(e){let t={};for(let n in e)for(let r in t[n]={},e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function at(e){let t={};for(let n=0;n<e.length;n++){let r=ae(e[n]);for(let e in r)t[e]=r[e]}return t}function an(e){let t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:n$.workingColorSpace}let ar={clone:ae,merge:at};class ai extends iS{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ae(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class aa extends r7{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rN,this.projectionMatrix=new rN,this.projectionMatrixInverse=new rN,this.coordinateSystem=nS}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let ao=new ro,as=new nO,al=new nO;class au extends aa{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*nP*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*nR*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*nP*Math.atan(Math.tan(.5*nR*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){ao.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ao.x,ao.y).multiplyScalar(-e/ao.z),ao.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ao.x,ao.y).multiplyScalar(-e/ao.z)}getViewSize(e,t){return this.getViewBounds(e,as,al),t.subVectors(al,as)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*nR*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}let o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class ac extends r7{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new au(-90,1,e,t);r.layers=this.layers,this.add(r);let i=new au(-90,1,e,t);i.layers=this.layers,this.add(i);let a=new au(-90,1,e,t);a.layers=this.layers,this.add(a);let o=new au(-90,1,e,t);o.layers=this.layers,this.add(o);let s=new au(-90,1,e,t);s.layers=this.layers,this.add(s);let l=new au(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,o,s]=t;for(let e of t)this.remove(e);if(e===nS)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else if(e===nA)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[i,a,o,s,l,u]=this.children,c=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;let p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,s),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(c,d,h),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class ad extends n9{constructor(e,t,n,r,i,a,o,s,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:eg,n,r,i,a,o,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ah extends re{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};this.texture=new ad([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:eR}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new i7(5,5,5),i=new ai({name:"CubemapFromEquirect",uniforms:ae(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:x,blending:w});i.uniforms.tEquirect.value=t;let a=new i9(r,i),o=t.minFilter;return t.minFilter===eB&&(t.minFilter=eR),new ac(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}class af extends r7{constructor(){super(),this.isGroup=!0,this.type="Group"}}let ap={type:"move"};class am{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new af,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new af,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ro,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ro),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new af,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ro,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ro),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let r of(a=!0,e.hand.values())){let e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}let r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position);l.inputState.pinching&&o>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ap)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new af;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ag{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ix(e),this.density=t}clone(){return new ag(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class av{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ix(e),this.near=t,this.far=n}clone(){return new av(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ay extends r7{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new rX,this.environmentIntensity=1,this.environmentRotation=new rX,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ab{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=nh,this.updateRanges=[],this.version=0,this.uuid=nI()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nI()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nI()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let ax=new ro;class a_{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ax.fromBufferAttribute(this,t),ax.applyMatrix4(e),this.setXYZ(t,ax.x,ax.y,ax.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ax.fromBufferAttribute(this,t),ax.applyNormalMatrix(e),this.setXYZ(t,ax.x,ax.y,ax.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ax.fromBufferAttribute(this,t),ax.transformDirection(e),this.setXYZ(t,ax.x,ax.y,ax.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=nD(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=nN(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=nN(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nN(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nN(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nN(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=nD(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=nD(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=nD(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=nD(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array),r=nN(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nN(t,this.array),n=nN(n,this.array),r=nN(r,this.array),i=nN(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new a_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new iB(new this.array.constructor(e),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}}class aw extends iS{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ix(0xffffff),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let aS=new ro,aA=new ro,aM=new ro,aE=new nO,aC=new nO,aT=new rN,aR=new ro,aP=new ro,aI=new ro,aB=new nO,aL=new nO,ak=new nO;class aD extends r7{constructor(e=new aw){if(super(),this.isSprite=!0,this.type="Sprite",void 0===i){i=new iK;let e=new ab(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);i.setIndex([0,1,2,0,2,3]),i.setAttribute("position",new a_(e,3,0,!1)),i.setAttribute("uv",new a_(e,2,3,!1))}this.geometry=i,this.material=e,this.center=new nO(.5,.5)}raycast(e,t){let n,r;null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),aA.setFromMatrixScale(this.matrixWorld),aT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),aM.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&aA.multiplyScalar(-aM.z);let i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));let a=this.center;aN(aR.set(-.5,-.5,0),aM,a,aA,n,r),aN(aP.set(.5,-.5,0),aM,a,aA,n,r),aN(aI.set(.5,.5,0),aM,a,aA,n,r),aB.set(0,0),aL.set(1,0),ak.set(1,1);let o=e.ray.intersectTriangle(aR,aP,aI,!1,aS);if(null===o&&(aN(aP.set(-.5,.5,0),aM,a,aA,n,r),aL.set(0,1),null===(o=e.ray.intersectTriangle(aR,aI,aP,!1,aS))))return;let s=e.ray.origin.distanceTo(aS);s<e.near||s>e.far||t.push({distance:s,point:aS.clone(),uv:im.getInterpolation(aS,aR,aP,aI,aB,aL,ak,new nO),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function aN(e,t,n,r,i,a){aE.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(aC.x=a*aE.x-i*aE.y,aC.y=i*aE.x+a*aE.y):aC.copy(aE),e.copy(t),e.x+=aC.x,e.y+=aC.y,e.applyMatrix4(aT)}let aF=new ro,aO=new ro;class aU extends r7{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let e=0,n=t.length;e<n;e++){let n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){let r;t=Math.abs(t);let i=this.levels;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){let t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){let e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){aF.setFromMatrixPosition(this.matrixWorld);let n=e.ray.origin.distanceTo(aF);this.getObjectForDistance(n).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){let n,r;aF.setFromMatrixPosition(e.matrixWorld),aO.setFromMatrixPosition(this.matrixWorld);let i=aF.distanceTo(aO)/e.zoom;for(n=1,t[0].object.visible=!0,r=t.length;n<r;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),i>=e)t[n-1].object.visible=!1,t[n].object.visible=!0;else break}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}toJSON(e){let t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];let n=this.levels;for(let e=0,r=n.length;e<r;e++){let r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}let az=new ro,aH=new n8,aG=new n8,aV=new ro,aj=new rN,aW=new ro,aX=new rC,aJ=new rN,aY=new rD;class aK extends i9{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ef,this.bindMatrix=new rN,this.bindMatrixInverse=new rN,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;null===this.boundingBox&&(this.boundingBox=new ru),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,aW),this.boundingBox.expandByPoint(aW)}computeBoundingSphere(){let e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new rC),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,aW),this.boundingSphere.expandByPoint(aW)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let n=this.material,r=this.matrixWorld;if(void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),aX.copy(this.boundingSphere),aX.applyMatrix4(r),!1!==e.ray.intersectsSphere(aX))){if(aJ.copy(r).invert(),aY.copy(e.ray).applyMatrix4(aJ),null!==this.boundingBox&&!1===aY.intersectsBox(this.boundingBox))return;this._computeIntersections(e,t,aY)}}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new n8,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);let r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ef?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ep?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let n=this.skeleton,r=this.geometry;aH.fromBufferAttribute(r.attributes.skinIndex,e),aG.fromBufferAttribute(r.attributes.skinWeight,e),az.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){let r=aG.getComponent(e);if(0!==r){let i=aH.getComponent(e);aj.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(aV.copy(az).applyMatrix4(aj),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class aq extends r7{constructor(){super(),this.isBone=!0,this.type="Bone"}}class aQ extends n9{constructor(e=null,t=1,n=1,r,i,a,o,s,l=eA,u=eA,c,d){super(null,a,o,s,l,u,r,i,c,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let aZ=new rN,a$=new rN;class a0{constructor(e=[],t=[]){this.uuid=nI(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new rN)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let t=new rN;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){let i=e[r]?e[r].matrixWorld:a$;aZ.multiplyMatrices(i,t[r]),aZ.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new a0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length),t=new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4);t.set(this.boneMatrices);let n=new aQ(t,e,e,eY,ez);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=e.bones[n],i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new aq),this.bones.push(i),this.boneInverses.push(new rN().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){let i=t[r];e.bones.push(i.uuid);let a=n[r];e.boneInverses.push(a.toArray())}return e}}class a1 extends iB{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}let a2=new rN,a3=new rN,a4=[],a5=new ru,a6=new rN,a9=new i9,a8=new rC;class a7 extends i9{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new a1(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,a6)}computeBoundingBox(){let e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new ru),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,a2),a5.copy(e.boundingBox).applyMatrix4(a2),this.boundingBox.union(a5)}computeBoundingSphere(){let e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new rC),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,a2),a8.copy(e.boundingSphere).applyMatrix4(a2),this.boundingSphere.union(a8)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){let n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let e=0;e<n.length;e++)n[e]=r[i+e]}raycast(e,t){let n=this.matrixWorld,r=this.count;if(a9.geometry=this.geometry,a9.material=this.material,void 0!==a9.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),a8.copy(this.boundingSphere),a8.applyMatrix4(n),!1!==e.ray.intersectsSphere(a8)))for(let i=0;i<r;i++){this.getMatrixAt(i,a2),a3.multiplyMatrices(n,a2),a9.matrixWorld=a3,a9.raycast(e,a4);for(let e=0,n=a4.length;e<n;e++){let n=a4[e];n.instanceId=i,n.object=this,t.push(n)}a4.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new a1(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){let n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new aQ(new Float32Array(r*this.count),r,this.count,e$,ez));let i=this.morphTexture.source.data.data,a=0;for(let e=0;e<n.length;e++)a+=n[e];let o=this.geometry.morphTargetsRelative?1:1-a,s=r*e;i[s]=o,i.set(n,s+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}let oe=new ro,ot=new ro,on=new nU;class or{constructor(e=new ro(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=oe.subVectors(n,t).cross(ot.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(oe),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||on.getNormalMatrix(e),r=this.coplanarPoint(oe).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let oi=new rC,oa=new ro;class oo{constructor(e=new or,t=new or,n=new or,r=new or,i=new or,a=new or){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=nS){let n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(n[0].setComponents(s-i,d-l,m-h,b-g).normalize(),n[1].setComponents(s+i,d+l,m+h,b+g).normalize(),n[2].setComponents(s+a,d+u,m+f,b+v).normalize(),n[3].setComponents(s-a,d-u,m-f,b-v).normalize(),n[4].setComponents(s-o,d-c,m-p,b-y).normalize(),t===nS)n[5].setComponents(s+o,d+c,m+p,b+y).normalize();else if(t===nA)n[5].setComponents(o,c,p,y).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),oi.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),oi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(oi)}intersectsSprite(e){return oi.center.set(0,0,0),oi.radius=.7071067811865476,oi.applyMatrix4(e.matrixWorld),this.intersectsSphere(oi)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(oa.x=r.normal.x>0?e.max.x:e.min.x,oa.y=r.normal.y>0?e.max.y:e.min.y,oa.z=r.normal.z>0?e.max.z:e.min.z,0>r.distanceToPoint(oa))return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function os(e,t){return e-t}function ol(e,t){return e.z-t.z}function ou(e,t){return t.z-e.z}let oc=new rN,od=new ix(1,1,1),oh=new oo,of=new ru,op=new rC,om=new ro,og=new ro,ov=new ro,oy=new class{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){let i=this.pool,a=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});let o=i[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}},ob=new i9,ox=[];function o_(e,t){if(e.constructor!==t.constructor){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{let n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class ow extends i9{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=2*t,r){super(new iK,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount),t=new aQ(new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4),e,e,eY,ez);this._matricesTexture=t}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new aQ(new Uint32Array((e=Math.ceil(e))*e),e,e,e0,eU);this._indirectTexture=t}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new aQ(new Float32Array((e=Math.ceil(e))*e*4).fill(1),e,e,eY,ez);t.colorSpace=n$.workingColorSpace,this._colorsTexture=t}_initializeGeometry(e){let t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(let r in e.attributes){let{array:i,itemSize:a,normalized:o}=e.getAttribute(r),s=new iB(new i.constructor(n*a),a,o);t.setAttribute(r,s)}if(null!==e.getIndex()){let e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new iB(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){let t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(let n in t.attributes){if(!e.hasAttribute(n))throw Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);let r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){let t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){let t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ru);let e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;let r=t[n].geometryIndex;this.getMatrixAt(n,oc),this.getBoundingBoxAt(r,of).applyMatrix4(oc),e.union(of)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rC);let e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;let r=t[n].geometryIndex;this.getMatrixAt(n,oc),this.getBoundingSphereAt(r,op).applyMatrix4(oc),e.union(op)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw Error("THREE.BatchedMesh: Maximum item count reached.");let t={visible:!0,active:!0,geometryIndex:e},n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(os),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));let r=this._matricesTexture;oc.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;let i=this._colorsTexture;return i&&(od.toArray(i.image.data,4*n),i.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e,t=-1,n=-1){let r;this._initializeGeometry(e),this._validateGeometry(e);let i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===t?e.getAttribute("position").count:t;let o=e.getIndex();if(null!==o&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?o.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(os),a[r=this._availableGeometryIds.shift()]=i):(r=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(r,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,r}setGeometryAt(e,t){if(e>=this._geometryCount)throw Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);let n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");let s=o.vertexStart,l=o.reservedVertexCount;for(let e in o.vertexCount=t.getAttribute("position").count,n.attributes){let r=t.getAttribute(e),i=n.getAttribute(e);!function(e,t,n=0){let r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){let i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}(r,i,s);let a=r.itemSize;for(let e=r.count;e<l;e++){let t=s+e;for(let e=0;e<a;e++)i.setComponent(t,e,0)}i.needsUpdate=!0,i.addUpdateRange(s*a,l*a)}if(r){let e=o.indexStart,n=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)i.setX(e+t,s+a.getX(t));for(let t=a.count;t<n;t++)i.setX(e+t,s);i.needsUpdate=!0,i.addUpdateRange(e,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,null!==t.boundingBox&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,null!==t.boundingSphere&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){let t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;let n=this._instanceInfo;for(let t=0,r=n.length;t<r;t++)n[t].active&&n[t].geometryIndex===e&&this.deleteInstance(t);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0,n=this._geometryInfo,r=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),i=this.geometry;for(let a=0,o=n.length;a<o;a++){let o=n[r[a]];if(!1!==o.active){if(null!==i.index){if(o.indexStart!==t){let{indexStart:n,vertexStart:r,reservedIndexCount:a}=o,s=i.index,l=s.array,u=e-r;for(let e=n;e<n+a;e++)l[e]=l[e]+u;s.array.copyWithin(t,n,n+a),s.addUpdateRange(t,a),o.indexStart=t}t+=o.reservedIndexCount}if(o.vertexStart!==e){let{vertexStart:t,reservedVertexCount:n}=o,r=i.attributes;for(let i in r){let a=r[i],{array:o,itemSize:s}=a;o.copyWithin(e*s,t*s,(t+n)*s),a.addUpdateRange(e*s,n*s)}o.vertexStart=e}e+=o.reservedVertexCount,o.start=i.index?o.indexStart:o.vertexStart,this._nextIndexStart=i.index?o.indexStart+o.reservedIndexCount:0,this._nextVertexStart=o.vertexStart+o.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;let n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){let e=new ru,t=n.index,i=n.attributes.position;for(let n=r.start,a=r.start+r.count;n<a;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(om.fromBufferAttribute(i,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;let n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){let t=new rC;this.getBoundingBoxAt(e,of),of.getCenter(t.center);let i=n.index,a=n.attributes.position,o=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;i&&(n=i.getX(n)),om.fromBufferAttribute(a,n),o=Math.max(o,t.center.distanceToSquared(om))}t.radius=Math.sqrt(o),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);let n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);let n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){let t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(os);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);let r=new Int32Array(e),i=new Int32Array(e);o_(this._multiDrawCounts,r),o_(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;let a=this._indirectTexture,o=this._matricesTexture,s=this._colorsTexture;a.dispose(),this._initIndirectTexture(),o_(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),o_(o.image.data,this._matricesTexture.image.data),s&&(s.dispose(),this._initColorsTexture(),o_(s.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){let n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);let r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new iK,this._initializeGeometry(r));let i=this.geometry;for(let e in r.index&&o_(r.index.array,i.index.array),r.attributes)o_(r.attributes[e].array,i.attributes[e].array)}raycast(e,t){let n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,a=this.geometry;ob.material=this.material,ob.geometry.index=a.index,ob.geometry.attributes=a.attributes,null===ob.geometry.boundingBox&&(ob.geometry.boundingBox=new ru),null===ob.geometry.boundingSphere&&(ob.geometry.boundingSphere=new rC);for(let a=0,o=n.length;a<o;a++){if(!n[a].visible||!n[a].active)continue;let o=n[a].geometryIndex,s=r[o];ob.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(a,ob.matrixWorld).premultiply(i),this.getBoundingBoxAt(o,ob.geometry.boundingBox),this.getBoundingSphereAt(o,ob.geometry.boundingSphere),ob.raycast(e,ox);for(let e=0,n=ox.length;e<n;e++){let n=ox[e];n.object=this,n.batchId=a,t.push(n)}ox.length=0}ob.material=null,ob.geometry.index=null,ob.geometry.attributes={},ob.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>({...e})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let a=r.getIndex(),o=null===a?1:a.array.BYTES_PER_ELEMENT,s=this._instanceInfo,l=this._multiDrawStarts,u=this._multiDrawCounts,c=this._geometryInfo,d=this.perObjectFrustumCulled,h=this._indirectTexture,f=h.image.data;d&&(oc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),oh.setFromProjectionMatrix(oc,e.coordinateSystem));let p=0;if(this.sortObjects){oc.copy(this.matrixWorld).invert(),om.setFromMatrixPosition(n.matrixWorld).applyMatrix4(oc),og.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(oc);for(let e=0,t=s.length;e<t;e++)if(s[e].visible&&s[e].active){let t=s[e].geometryIndex;this.getMatrixAt(e,oc),this.getBoundingSphereAt(t,op).applyMatrix4(oc);let n=!1;if(d&&(n=!oh.intersectsSphere(op)),!n){let n=c[t],r=ov.subVectors(op.center,om).dot(og);oy.push(n.start,n.count,r,e)}}let e=oy.list,t=this.customSort;null===t?e.sort(i.transparent?ou:ol):t.call(this,e,n);for(let t=0,n=e.length;t<n;t++){let n=e[t];l[p]=n.start*o,u[p]=n.count,f[p]=n.index,p++}oy.reset()}else for(let e=0,t=s.length;e<t;e++)if(s[e].visible&&s[e].active){let t=s[e].geometryIndex,n=!1;if(d&&(this.getMatrixAt(e,oc),this.getBoundingSphereAt(t,op).applyMatrix4(oc),n=!oh.intersectsSphere(op)),!n){let n=c[t];l[p]=n.start*o,u[p]=n.count,f[p]=e,p++}}h.needsUpdate=!0,this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class oS extends iS{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ix(0xffffff),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let oA=new ro,oM=new ro,oE=new rN,oC=new rD,oT=new rC,oR=new ro,oP=new ro;class oI extends r7{constructor(e=new iK,t=new oS){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)oA.fromBufferAttribute(t,e-1),oM.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=oA.distanceTo(oM);e.setAttribute("lineDistance",new iH(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),oT.copy(n.boundingSphere),oT.applyMatrix4(r),oT.radius+=i,!1===e.ray.intersectsSphere(oT))return;oE.copy(r).invert(),oC.copy(e.ray).applyMatrix4(oE);let o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=this.isLineSegments?2:1,u=n.index,c=n.attributes.position;if(null!==u){let n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){let n=oB(this,e,oC,s,u.getX(i),u.getX(i+1),i);n&&t.push(n)}if(this.isLineLoop){let i=oB(this,e,oC,s,u.getX(r-1),u.getX(n),r-1);i&&t.push(i)}}else{let n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){let n=oB(this,e,oC,s,i,i+1,i);n&&t.push(n)}if(this.isLineLoop){let i=oB(this,e,oC,s,r-1,n,r-1);i&&t.push(i)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function oB(e,t,n,r,i,a,o){let s=e.geometry.attributes.position;if(oA.fromBufferAttribute(s,i),oM.fromBufferAttribute(s,a),n.distanceSqToSegment(oA,oM,oR,oP)>r)return;oR.applyMatrix4(e.matrixWorld);let l=t.ray.origin.distanceTo(oR);if(!(l<t.near)&&!(l>t.far))return{distance:l,point:oP.clone().applyMatrix4(e.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:e}}let oL=new ro,ok=new ro;class oD extends oI{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)oL.fromBufferAttribute(t,e),ok.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+oL.distanceTo(ok);e.setAttribute("lineDistance",new iH(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class oN extends oI{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oF extends iS{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ix(0xffffff),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let oO=new rN,oU=new rD,oz=new rC,oH=new ro;class oG extends r7{constructor(e=new iK,t=new oF){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),oz.copy(n.boundingSphere),oz.applyMatrix4(r),oz.radius+=i,!1===e.ray.intersectsSphere(oz))return;oO.copy(r).invert(),oU.copy(e.ray).applyMatrix4(oO);let o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes.position;if(null!==l){let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);for(let a=n;a<i;a++){let n=l.getX(a);oH.fromBufferAttribute(u,n),oV(oH,n,s,r,e,t,this)}}else{let n=Math.max(0,a.start),i=Math.min(u.count,a.start+a.count);for(let a=n;a<i;a++)oH.fromBufferAttribute(u,a),oV(oH,a,s,r,e,t,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function oV(e,t,n,r,i,a,o){let s=oU.distanceSqToPoint(e);if(s<n){let n=new ro;oU.closestPointToPoint(e,n),n.applyMatrix4(r);let l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class oj extends n9{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:eR,this.magFilter=void 0!==i?i:eR,this.generateMipmaps=!1;let u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class oW extends oj{constructor(e,t,n,r,i,a,o,s){super({},e,t,n,r,i,a,o,s),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class oX extends n9{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=eA,this.minFilter=eA,this.generateMipmaps=!1,this.needsUpdate=!0}}class oJ extends n9{constructor(e,t,n,r,i,a,o,s,l,u,c,d){super(null,a,o,s,l,u,r,i,c,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class oY extends oJ{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ew,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class oK extends oJ{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,eg),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class oq extends n9{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class oQ extends n9{constructor(e,t,n,r,i,a,o,s,l,u=eQ){if(u!==eQ&&u!==eZ)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===eQ&&(n=eU),void 0===n&&u===eZ&&(n=ej),super(null,r,i,a,o,s,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:eA,this.minFilter=void 0!==s?s:eA,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class oZ{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)t.push(i+=(n=this.getPoint(a/e)).distanceTo(r)),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n;let r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];let o=0,s=a-1,l;for(;o<=s;)if((l=r[i=Math.floor(o+(s-o)/2)]-n)<0)o=i+1;else if(l>0)s=i-1;else{s=i;break}if(r[i=s]===n)return i/(a-1);let u=r[i],c=r[i+1];return(i+(n-u)/(c-u))/(a-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),a=this.getPoint(r),o=t||(i.isVector2?new nO:new ro);return o.copy(a).sub(i).normalize(),o}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new ro,r=[],i=[],a=[],o=new ro,s=new rN;for(let t=0;t<=e;t++){let n=t/e;r[t]=this.getTangentAt(n,new ro)}i[0]=new ro,a[0]=new ro;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),c=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();let e=Math.acos(nB(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(nB(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class o$ extends oZ{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t=new nO){let n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);let a=this.aStartAngle+e*r,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=s-this.aY;o=n*e-r*t+this.aX,s=n*t+r*e+this.aY}return t.set(o,s)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class o0 extends o${constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function o1(){let e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,l*=o,u*=o)},calc:function(i){let a=i*i;return e+t*i+n*a+a*i*r}}}let o2=new ro,o3=new o1,o4=new o1,o5=new o1;class o6 extends oZ{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ro){let n,r;let i=this.points,a=i.length,o=(a-+!this.closed)*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?n=i[(s-1)%a]:(o2.subVectors(i[0],i[1]).add(i[0]),n=o2);let u=i[s%a],c=i[(s+1)%a];if(this.closed||s+2<a?r=i[(s+2)%a]:(o2.subVectors(i[a-1],i[a-2]).add(i[a-1]),r=o2),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(c),e),a=Math.pow(c.distanceToSquared(r),e);i<1e-4&&(i=1),t<1e-4&&(t=i),a<1e-4&&(a=i),o3.initNonuniformCatmullRom(n.x,u.x,c.x,r.x,t,i,a),o4.initNonuniformCatmullRom(n.y,u.y,c.y,r.y,t,i,a),o5.initNonuniformCatmullRom(n.z,u.z,c.z,r.z,t,i,a)}else"catmullrom"===this.curveType&&(o3.initCatmullRom(n.x,u.x,c.x,r.x,this.tension),o4.initCatmullRom(n.y,u.y,c.y,r.y,this.tension),o5.initCatmullRom(n.z,u.z,c.z,r.z,this.tension));return t.set(o3.calc(l),o4.calc(l),o5.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new ro().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function o9(e,t,n,r,i){let a=(r-t)*.5,o=(i-n)*.5,s=e*e;return e*s*(2*n-2*r+a+o)+(-3*n+3*r-2*a-o)*s+a*e+n}function o8(e,t,n,r){return function(e,t){let n=1-e;return n*n*t}(e,t)+2*(1-e)*e*n+e*e*r}function o7(e,t,n,r,i){return function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+3*(1-e)*e*e*r+e*e*e*i}class se extends oZ{constructor(e=new nO,t=new nO,n=new nO,r=new nO){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new nO){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(o7(e,n.x,r.x,i.x,a.x),o7(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class st extends oZ{constructor(e=new ro,t=new ro,n=new ro,r=new ro){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ro){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(o7(e,n.x,r.x,i.x,a.x),o7(e,n.y,r.y,i.y,a.y),o7(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sn extends oZ{constructor(e=new nO,t=new nO){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new nO){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new nO){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sr extends oZ{constructor(e=new ro,t=new ro){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ro){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ro){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class si extends oZ{constructor(e=new nO,t=new nO,n=new nO){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new nO){let n=this.v0,r=this.v1,i=this.v2;return t.set(o8(e,n.x,r.x,i.x),o8(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sa extends oZ{constructor(e=new ro,t=new ro,n=new ro){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ro){let n=this.v0,r=this.v1,i=this.v2;return t.set(o8(e,n.x,r.x,i.x),o8(e,n.y,r.y,i.y),o8(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class so extends oZ{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new nO){let n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(o9(a,o.x,s.x,l.x,u.x),o9(a,o.y,s.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new nO().fromArray(n))}return this}}var ss=Object.freeze({__proto__:null,ArcCurve:o0,CatmullRomCurve3:o6,CubicBezierCurve:se,CubicBezierCurve3:st,EllipseCurve:o$,LineCurve:sn,LineCurve3:sr,QuadraticBezierCurve:si,QuadraticBezierCurve3:sa,SplineCurve:so});class sl extends oZ{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new ss[n](t,e))}return this}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)e.push(t+=this.curves[n].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t;let n=[];for(let r=0,i=this.curves;r<i.length;r++){let a=i[r],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){let r=s[e];t&&t.equals(r)||(n.push(r),t=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(new ss[n.type]().fromJSON(n))}return this}}class su extends sl{constructor(e){super(),this.type="Path",this.currentPoint=new nO,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new sn(this.currentPoint.clone(),new nO(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new si(this.currentPoint.clone(),new nO(e,t),new nO(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){let o=new se(this.currentPoint.clone(),new nO(e,t),new nO(n,r),new nO(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){let t=new so([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){let o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){let l=new o$(e,t,n,r,i,a,o,s);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sc extends iK{constructor(e=[new nO(0,-.5),new nO(.5,0),new nO(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=nB(r,0,2*Math.PI);let i=[],a=[],o=[],s=[],l=[],u=1/t,c=new ro,d=new nO,h=new ro,f=new ro,p=new ro,m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=+g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=+g,h.y=-m,h.z=0*g,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),s.push(h.x,h.y,h.z),p.copy(f)}for(let i=0;i<=t;i++){let h=n+i*u*r,f=Math.sin(h),p=Math.cos(h);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*f,c.y=e[n].y,c.z=e[n].x*p,a.push(c.x,c.y,c.z),d.x=i/t,d.y=n/(e.length-1),o.push(d.x,d.y);let r=s[3*n+0]*f,u=s[3*n+1],h=s[3*n+0]*p;l.push(r,u,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){let r=t+n*e.length,a=r+e.length,o=r+e.length+1,s=r+1;i.push(r,a,s),i.push(o,s,a)}this.setIndex(i),this.setAttribute("position",new iH(a,3)),this.setAttribute("uv",new iH(o,2)),this.setAttribute("normal",new iH(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sc(e.points,e.segments,e.phiStart,e.phiLength)}}class sd extends sc{constructor(e=1,t=1,n=4,r=8){let i=new su;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new sd(e.radius,e.length,e.capSegments,e.radialSegments)}}class sh extends iK{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);let i=[],a=[],o=[],s=[],l=new ro,u=new nO;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let i=0,c=3;i<=t;i++,c+=3){let d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),a.push(l.x,l.y,l.z),o.push(0,0,1),u.x=(a[c]/e+1)/2,u.y=(a[c+1]/e+1)/2,s.push(u.x,u.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new iH(a,3)),this.setAttribute("normal",new iH(o,3)),this.setAttribute("uv",new iH(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sh(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sf extends iK{constructor(e=1,t=1,n=1,r=32,i=1,a=!1,o=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};let l=this;r=Math.floor(r),i=Math.floor(i);let u=[],c=[],d=[],h=[],f=0,p=[],m=n/2,g=0;function v(n){let i=f,a=new nO,p=new ro,v=0,y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)c.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),f++;let x=f;for(let e=0;e<=r;e++){let t=e/r*s+o,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*b,p.z=y*n,c.push(p.x,p.y,p.z),d.push(0,b,0),a.x=.5*n+.5,a.y=.5*i*b+.5,h.push(a.x,a.y),f++}for(let e=0;e<r;e++){let t=i+e,r=x+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}(function(){let a=new ro,v=new ro,y=0,b=(t-e)/n;for(let l=0;l<=i;l++){let u=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*s+o,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,c.push(v.x,v.y,v.z),a.set(l,b,p).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),u.push(f++)}p.push(u)}for(let n=0;n<r;n++)for(let r=0;r<i;r++){let a=p[r][n],o=p[r+1][n],s=p[r+1][n+1],l=p[r][n+1];(e>0||0!==r)&&(u.push(a,o,l),y+=3),(t>0||r!==i-1)&&(u.push(o,s,l),y+=3)}l.addGroup(g,y,0),g+=y})(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new iH(c,3)),this.setAttribute("normal",new iH(d,3)),this.setAttribute("uv",new iH(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sp extends sf{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,o=2*Math.PI){super(0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new sp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sm extends iK{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let i=[],a=[];function o(e){i.push(e.x,e.y,e.z)}function s(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}(function(e){let n=new ro,r=new ro,i=new ro;for(let a=0;a<t.length;a+=3)s(t[a+0],n),s(t[a+1],r),s(t[a+2],i),function(e,t,n,r){let i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];let o=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)0===e&&r===i?a[r][e]=o:a[r][e]=o.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){let n=Math.floor(t/2);t%2==0?(o(a[e][n+1]),o(a[e+1][n]),o(a[e][n])):(o(a[e][n+1]),o(a[e+1][n+1]),o(a[e+1][n]))}}(n,r,i,e)})(r),function(e){let t=new ro;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){let e=new ro;for(let n=0;n<i.length;n+=3){var t;e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];let r=u(e)/2/Math.PI+.5,o=Math.atan2(-(t=e).y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5;a.push(r,1-o)}(function(){let e=new ro,t=new ro,n=new ro,r=new ro,o=new nO,s=new nO,c=new nO;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),c.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);let f=u(r);l(o,h+0,e,f),l(s,h+2,t,f),l(c,h+4,n,f)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new iH(i,3)),this.setAttribute("normal",new iH(i.slice(),3)),this.setAttribute("uv",new iH(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sm(e.vertices,e.indices,e.radius,e.details)}}class sg extends sm{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sg(e.radius,e.detail)}}let sv=new ro,sy=new ro,sb=new ro,sx=new im;class s_ extends iK{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){let n=Math.cos(nR*t),r=e.getIndex(),i=e.getAttribute("position"),a=r?r.count:i.count,o=[0,0,0],s=["a","b","c"],l=[,,,],u={},c=[];for(let e=0;e<a;e+=3){r?(o[0]=r.getX(e),o[1]=r.getX(e+1),o[2]=r.getX(e+2)):(o[0]=e,o[1]=e+1,o[2]=e+2);let{a:t,b:a,c:d}=sx;if(t.fromBufferAttribute(i,o[0]),a.fromBufferAttribute(i,o[1]),d.fromBufferAttribute(i,o[2]),sx.getNormal(sb),l[0]=`${Math.round(1e4*t.x)},${Math.round(1e4*t.y)},${Math.round(1e4*t.z)}`,l[1]=`${Math.round(1e4*a.x)},${Math.round(1e4*a.y)},${Math.round(1e4*a.z)}`,l[2]=`${Math.round(1e4*d.x)},${Math.round(1e4*d.y)},${Math.round(1e4*d.z)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let e=0;e<3;e++){let t=(e+1)%3,r=l[e],i=l[t],a=sx[s[e]],d=sx[s[t]],h=`${r}_${i}`,f=`${i}_${r}`;f in u&&u[f]?(sb.dot(u[f].normal)<=n&&(c.push(a.x,a.y,a.z),c.push(d.x,d.y,d.z)),u[f]=null):h in u||(u[h]={index0:o[e],index1:o[t],normal:sb.clone()})}}for(let e in u)if(u[e]){let{index0:t,index1:n}=u[e];sv.fromBufferAttribute(i,t),sy.fromBufferAttribute(i,n),c.push(sv.x,sv.y,sv.z),c.push(sy.x,sy.y,sy.z)}this.setAttribute("position",new iH(c,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class sw extends su{constructor(e){super(e),this.uuid=nI(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(new su().fromJSON(n))}return this}}let sS=function(e,t,n=2){let r,i,a,o,s,l,u;let c=t&&t.length,d=c?t[0]*n:e.length,h=sA(e,0,d,n,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,n,r){let i,a,o,s,l;let u=[];for(i=0,a=t.length;i<a;i++)o=t[i]*r,s=i<a-1?t[i+1]*r:e.length,(l=sA(e,o,s,r,!1))===l.next&&(l.steiner=!0),u.push(function(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}(l));for(u.sort(sE),i=0;i<u.length;i++)n=function(e,t){let n=function(e,t){let n=t,r=-1/0,i,a=e.x,o=e.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let e=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;let s=i,l=i.x,u=i.y,c=1/0,d;n=i;do{var h,f;a>=n.x&&n.x>=l&&a!==n.x&&sT(o<u?a:r,o,l,u,o<u?r:a,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(a-n.x),sk(n,e)&&(d<c||d===c&&(n.x>i.x||n.x===i.x&&(h=i,f=n,0>sR(h.prev,h,f.prev)&&0>sR(f.next,h,h.next))))&&(i=n,c=d)),n=n.next}while(n!==s);return i}(e,t);if(!n)return t;let r=sD(n,e);return sM(r,r.next),sM(n,n.next)}(u[i],n);return n}(e,t,h,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(let t=n;t<d;t+=n)s=e[t],l=e[t+1],s<r&&(r=s),l<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-i))?32767/u:0}return function e(t,n,r,i,a,o,s){if(!t)return;!s&&o&&function(e,t,n,r){let i=e;do 0===i.z&&(i.z=sC(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(t,i,a,o);let l=t,u,c;for(;t.prev!==t.next;){if(u=t.prev,c=t.next,o?function(e,t,n,r){let i=e.prev,a=e.next;if(sR(i,e,a)>=0)return!1;let o=i.x,s=e.x,l=a.x,u=i.y,c=e.y,d=a.y,h=o<s?o<l?o:l:s<l?s:l,f=u<c?u<d?u:d:c<d?c:d,p=o>s?o>l?o:l:s>l?s:l,m=u>c?u>d?u:d:c>d?c:d,g=sC(h,f,t,n,r),v=sC(p,m,t,n,r),y=e.prevZ,b=e.nextZ;for(;y&&y.z>=g&&b&&b.z<=v;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=m&&y!==i&&y!==a&&sT(o,u,s,c,l,d,y.x,y.y)&&sR(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=h&&b.x<=p&&b.y>=f&&b.y<=m&&b!==i&&b!==a&&sT(o,u,s,c,l,d,b.x,b.y)&&sR(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=g;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=m&&y!==i&&y!==a&&sT(o,u,s,c,l,d,y.x,y.y)&&sR(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=v;){if(b.x>=h&&b.x<=p&&b.y>=f&&b.y<=m&&b!==i&&b!==a&&sT(o,u,s,c,l,d,b.x,b.y)&&sR(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}(t,i,a,o):function(e){let t=e.prev,n=e.next;if(sR(t,e,n)>=0)return!1;let r=t.x,i=e.x,a=n.x,o=t.y,s=e.y,l=n.y,u=r<i?r<a?r:a:i<a?i:a,c=o<s?o<l?o:l:s<l?s:l,d=r>i?r>a?r:a:i>a?i:a,h=o>s?o>l?o:l:s>l?s:l,f=n.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=c&&f.y<=h&&sT(r,o,i,s,a,l,f.x,f.y)&&sR(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}(t)){n.push(u.i/r|0),n.push(t.i/r|0),n.push(c.i/r|0),sF(t),t=c.next,l=c.next;continue}if((t=c)===l){s?1===s?e(t=function(e,t,n){let r=e;do{let i=r.prev,a=r.next.next;!sP(i,a)&&sI(i,r,r.next,a)&&sk(i,a)&&sk(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),sF(r),sF(r.next),r=e=a),r=r.next}while(r!==e);return sM(r)}(sM(t),n,r),n,r,i,a,o,2):2===s&&function(t,n,r,i,a,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){var l,u;if(s.i!==t.i&&(l=s,u=t,l.next.i!==u.i&&l.prev.i!==u.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&sI(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(l,u)&&(sk(l,u)&&sk(u,l)&&function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}(l,u)&&(sR(l.prev,l,u.prev)||sR(l,u.prev,u))||sP(l,u)&&sR(l.prev,l,l.next)>0&&sR(u.prev,u,u.next)>0))){let l=sD(s,t);s=sM(s,s.next),l=sM(l,l.next),e(s,n,r,i,a,o,0),e(l,n,r,i,a,o,0);return}t=t.next}s=s.next}while(s!==t)}(t,n,r,i,a,o):e(sM(t),n,r,i,a,o,1);break}}}(h,f,n,r,i,u,0),f};function sA(e,t,n,r,i){let a,o;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=sN(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=sN(a,e[a],e[a+1],o);return o&&sP(o,o.next)&&(sF(o),o=o.next),o}function sM(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(sP(n,n.next)||0===sR(n.prev,n,n.next))){if(sF(n),(n=t=n.prev)===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function sE(e,t){return e.x-t.x}function sC(e,t,n,r,i){return(e=((e=((e=((e=((e=(e-n)*i|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)|(t=((t=((t=((t=((t=(t-r)*i|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function sT(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function sR(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function sP(e,t){return e.x===t.x&&e.y===t.y}function sI(e,t,n,r){let i=sL(sR(e,t,n)),a=sL(sR(e,t,r)),o=sL(sR(n,r,e)),s=sL(sR(n,r,t));return!!(i!==a&&o!==s||0===i&&sB(e,n,t)||0===a&&sB(e,r,t)||0===o&&sB(n,e,r)||0===s&&sB(n,t,r))}function sB(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function sL(e){return e>0?1:e<0?-1:0}function sk(e,t){return 0>sR(e.prev,e,e.next)?sR(e,t,e.next)>=0&&sR(e,e.prev,t)>=0:0>sR(e,t,e.prev)||0>sR(e,e.next,t)}function sD(e,t){let n=new sO(e.i,e.x,e.y),r=new sO(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function sN(e,t,n,r){let i=new sO(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function sF(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function sO(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class sU{static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return .5*n}static isClockWise(e){return 0>sU.area(e)}static triangulateShape(e,t){let n=[],r=[],i=[];sz(e),sH(n,e);let a=e.length;t.forEach(sz);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,sH(n,t[e]);let o=sS(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function sz(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function sH(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class sG extends iK{constructor(e=new sw([new nO(.5,.5),new nO(-.5,.5),new nO(-.5,-.5),new nO(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,r=[],i=[];for(let a=0,o=e.length;a<o;a++)!function(e){let a,o,s,l;let u=[],c=void 0!==t.curveSegments?t.curveSegments:12,d=void 0!==t.steps?t.steps:1,h=void 0!==t.depth?t.depth:1,f=void 0===t.bevelEnabled||t.bevelEnabled,p=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:p-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3,y=t.extrudePath,b=void 0!==t.UVGenerator?t.UVGenerator:sV,x,_=!1;y&&(x=y.getSpacedPoints(d),_=!0,f=!1,a=y.computeFrenetFrames(d,!1),o=new ro,s=new ro,l=new ro),f||(v=0,p=0,m=0,g=0);let w=e.extractPoints(c),S=w.shape,A=w.holes;if(!sU.isClockWise(S)){S=S.reverse();for(let e=0,t=A.length;e<t;e++){let t=A[e];sU.isClockWise(t)&&(A[e]=t.reverse())}}let M=sU.triangulateShape(S,A),E=S;for(let e=0,t=A.length;e<t;e++){let t=A[e];S=S.concat(t)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}let T=S.length,R=M.length;function P(e,t,n){let r,i,a;let o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s;if(Math.abs(o*u-s*l)>Number.EPSILON){let d=Math.sqrt(c),h=Math.sqrt(l*l+u*u),f=t.x-s/d,p=t.y+o/d,m=((n.x-u/h-f)*u-(n.y+l/h-p)*l)/(o*u-s*l),g=(r=f+o*m-e.x)*r+(i=p+s*m-e.y)*i;if(g<=2)return new nO(r,i);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(u)&&(e=!0),e?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new nO(r/a,i/a)}let I=[];for(let e=0,t=E.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),I[e]=P(E[e],E[n],E[r]);let B=[],L,k=I.concat();for(let e=0,t=A.length;e<t;e++){let t=A[e];L=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[e]=P(t[e],t[r],t[i]);B.push(L),k=k.concat(L)}for(let e=0;e<v;e++){let t=e/v,n=p*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=E.length;e<t;e++){let t=C(E[e],I[e],r);F(t.x,t.y,-n)}for(let e=0,t=A.length;e<t;e++){let t=A[e];L=B[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],L[e],r);F(i.x,i.y,-n)}}}let D=m+g;for(let e=0;e<T;e++){let t=f?C(S[e],k[e],D):S[e];_?(s.copy(a.normals[0]).multiplyScalar(t.x),o.copy(a.binormals[0]).multiplyScalar(t.y),l.copy(x[0]).add(s).add(o),F(l.x,l.y,l.z)):F(t.x,t.y,0)}for(let e=1;e<=d;e++)for(let t=0;t<T;t++){let n=f?C(S[t],k[t],D):S[t];_?(s.copy(a.normals[e]).multiplyScalar(n.x),o.copy(a.binormals[e]).multiplyScalar(n.y),l.copy(x[e]).add(s).add(o),F(l.x,l.y,l.z)):F(n.x,n.y,h/d*e)}for(let e=v-1;e>=0;e--){let t=e/v,n=p*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=E.length;e<t;e++){let t=C(E[e],I[e],r);F(t.x,t.y,h+n)}for(let e=0,t=A.length;e<t;e++){let t=A[e];L=B[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],L[e],r);_?F(i.x,i.y+x[d-1].y,x[d-1].x+n):F(i.x,i.y,h+n)}}}function N(e,t){let i=e.length;for(;--i>=0;){let a=i,o=i-1;o<0&&(o=e.length-1);for(let e=0,i=d+2*v;e<i;e++){let i=T*e,s=T*(e+1);!function(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);let o=r.length/3,s=b.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);z(s[0]),z(s[1]),z(s[3]),z(s[1]),z(s[2]),z(s[3])}(t+a+i,t+o+i,t+o+s,t+a+s)}}}function F(e,t,n){u.push(e),u.push(t),u.push(n)}function O(e,t,i){U(e),U(t),U(i);let a=r.length/3,o=b.generateTopUV(n,r,a-3,a-2,a-1);z(o[0]),z(o[1]),z(o[2])}function U(e){r.push(u[3*e+0]),r.push(u[3*e+1]),r.push(u[3*e+2])}function z(e){i.push(e.x),i.push(e.y)}(function(){let e=r.length/3;if(f){let e=0,t=0*T;for(let e=0;e<R;e++){let n=M[e];O(n[2]+t,n[1]+t,n[0]+t)}t=T*(d+2*v);for(let e=0;e<R;e++){let n=M[e];O(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<R;e++){let t=M[e];O(t[2],t[1],t[0])}for(let e=0;e<R;e++){let t=M[e];O(t[0]+T*d,t[1]+T*d,t[2]+T*d)}}n.addGroup(e,r.length/3-e,0)})(),function(){let e=r.length/3,t=0;N(E,0),t+=E.length;for(let e=0,n=A.length;e<n;e++){let n=A[e];N(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}(e[a]);this.setAttribute("position",new iH(r,3)),this.setAttribute("uv",new iH(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){let r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=new ss[r.type]().fromJSON(r)),new sG(n,e.options)}}let sV={generateTopUV:function(e,t,n,r,i){let a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new nO(a,o),new nO(s,l),new nO(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){let o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new nO(o,1-l),new nO(u,1-d),new nO(h,1-p),new nO(m,1-v)]:[new nO(s,1-l),new nO(c,1-d),new nO(f,1-p),new nO(g,1-v)]}};class sj extends sm{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sj(e.radius,e.detail)}}class sW extends sm{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sW(e.radius,e.detail)}}class sX extends iK{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,u=s+1,c=e/o,d=t/s,h=[],f=[],p=[],m=[];for(let e=0;e<u;e++){let t=e*d-a;for(let n=0;n<l;n++){let r=n*c-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){let n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new iH(f,3)),this.setAttribute("normal",new iH(p,3)),this.setAttribute("uv",new iH(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sX(e.width,e.height,e.widthSegments,e.heightSegments)}}class sJ extends iK{constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);let o=[],s=[],l=[],u=[],c=e,d=(t-e)/(r=Math.max(1,r)),h=new ro,f=new nO;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){let r=i+e/n*a;h.x=c*Math.cos(r),h.y=c*Math.sin(r),s.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(h.x/t+1)/2,f.y=(h.y/t+1)/2,u.push(f.x,f.y)}c+=d}for(let e=0;e<r;e++){let t=e*(n+1);for(let e=0;e<n;e++){let r=e+t,i=r+n+1,a=r+n+2,s=r+1;o.push(r,i,s),o.push(i,a,s)}}this.setIndex(o),this.setAttribute("position",new iH(s,3)),this.setAttribute("normal",new iH(l,3)),this.setAttribute("uv",new iH(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sJ(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class sY extends iK{constructor(e=new sw([new nO(0,.5),new nO(-.5,-.5),new nO(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;function l(e){let o=r.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===sU.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===sU.isClockWise(t)&&(c[e]=t.reverse())}let d=sU.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){let t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){let t=d[e],r=t[0]+o,i=t[1]+o,a=t[2]+o;n.push(r,i,a),s+=3}}this.setIndex(n),this.setAttribute("position",new iH(r,3)),this.setAttribute("normal",new iH(i,3)),this.setAttribute("uv",new iH(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){let r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}return new sY(n,e.curveSegments)}}class sK extends iK{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let s=Math.min(a+o,Math.PI),l=0,u=[],c=new ro,d=new ro,h=[],f=[],p=[],m=[];for(let h=0;h<=n;h++){let g=[],v=h/n,y=0;0===h&&0===a?y=.5/t:h===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){let s=n/t;c.x=-e*Math.cos(r+s*i)*Math.sin(a+v*o),c.y=e*Math.cos(a+v*o),c.z=e*Math.sin(r+s*i)*Math.sin(a+v*o),f.push(c.x,c.y,c.z),d.copy(c).normalize(),p.push(d.x,d.y,d.z),m.push(s+y,1-v),g.push(l++)}u.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){let t=u[e][r+1],i=u[e][r],o=u[e+1][r],l=u[e+1][r+1];(0!==e||a>0)&&h.push(t,i,l),(e!==n-1||s<Math.PI)&&h.push(i,o,l)}this.setIndex(h),this.setAttribute("position",new iH(f,3)),this.setAttribute("normal",new iH(p,3)),this.setAttribute("uv",new iH(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sK(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class sq extends sm{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sq(e.radius,e.detail)}}class sQ extends iK{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);let a=[],o=[],s=[],l=[],u=new ro,c=new ro,d=new ro;for(let a=0;a<=n;a++)for(let h=0;h<=r;h++){let f=h/r*i,p=a/n*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(f),c.y=(e+t*Math.cos(p))*Math.sin(f),c.z=t*Math.sin(p),o.push(c.x,c.y,c.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),d.subVectors(c,u).normalize(),s.push(d.x,d.y,d.z),l.push(h/r),l.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,s=(r+1)*e+t;a.push(n,i,s),a.push(i,o,s)}this.setIndex(a),this.setAttribute("position",new iH(o,3)),this.setAttribute("normal",new iH(s,3)),this.setAttribute("uv",new iH(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sQ(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class sZ extends iK{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);let o=[],s=[],l=[],u=[],c=new ro,d=new ro,h=new ro,f=new ro,p=new ro,m=new ro,g=new ro;for(let o=0;o<=n;++o){let y=o/n*i*Math.PI*2;v(y,i,a,e,h),v(y+.01,i,a,e,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){let i=e/r*Math.PI*2,a=-t*Math.cos(i),f=t*Math.sin(i);c.x=h.x+(a*g.x+f*p.x),c.y=h.y+(a*g.y+f*p.y),c.z=h.z+(a*g.z+f*p.z),s.push(c.x,c.y,c.z),d.subVectors(c,h).normalize(),l.push(d.x,d.y,d.z),u.push(o/n),u.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;o.push(n,i,s),o.push(i,a,s)}function v(e,t,n,r,i){let a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new iH(s,3)),this.setAttribute("normal",new iH(l,3)),this.setAttribute("uv",new iH(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sZ(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class s$ extends iK{constructor(e=new sa(new ro(-1,-1,0),new ro(-1,1,0),new ro(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};let a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;let o=new ro,s=new ro,l=new nO,u=new ro,c=[],d=[],h=[],f=[];function p(i){u=e.getPointAt(i/t,u);let l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){let t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);s.x=a*l.x+i*h.x,s.y=a*l.y+i*h.y,s.z=a*l.z+i*h.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=u.x+n*s.x,o.y=u.y+n*s.y,o.z=u.z+n*s.z,c.push(o.x,o.y,o.z)}}(function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;f.push(n,i,o),f.push(i,a,o)}}()})(),this.setIndex(f),this.setAttribute("position",new iH(c,3)),this.setAttribute("normal",new iH(d,3)),this.setAttribute("uv",new iH(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new s$(new ss[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class s0 extends iK{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){let t=[],n=new Set,r=new ro,i=new ro;if(null!==e.index){let a=e.attributes.position,o=e.index,s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){let l=s[e],u=l.start,c=l.count;for(let e=u,s=u+c;e<s;e+=3)for(let s=0;s<3;s++){let l=o.getX(e+s),u=o.getX(e+(s+1)%3);r.fromBufferAttribute(a,l),i.fromBufferAttribute(a,u),!0===s1(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{let a=e.attributes.position;for(let e=0,o=a.count/3;e<o;e++)for(let o=0;o<3;o++){let s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===s1(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new iH(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function s1(e,t,n){let r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var s2=Object.freeze({__proto__:null,BoxGeometry:i7,CapsuleGeometry:sd,CircleGeometry:sh,ConeGeometry:sp,CylinderGeometry:sf,DodecahedronGeometry:sg,EdgesGeometry:s_,ExtrudeGeometry:sG,IcosahedronGeometry:sj,LatheGeometry:sc,OctahedronGeometry:sW,PlaneGeometry:sX,PolyhedronGeometry:sm,RingGeometry:sJ,ShapeGeometry:sY,SphereGeometry:sK,TetrahedronGeometry:sq,TorusGeometry:sQ,TorusKnotGeometry:sZ,TubeGeometry:s$,WireframeGeometry:s0});class s3 extends iS{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ix(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class s4 extends ai{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class s5 extends iS{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ix(0xffffff),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s6 extends s5{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new nO(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nB(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ix(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ix(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ix(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class s9 extends iS{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ix(0xffffff),this.specular=new ix(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.combine=en,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s8 extends iS{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ix(0xffffff),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class s7 extends iS{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class le extends iS{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ix(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.combine=en,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lt extends iS{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ln extends iS{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class lr extends iS{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ix(0xffffff),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class li extends oS{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function la(e,t,n){return e&&(n||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function lo(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ls(e){let t=e.length,n=Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function(t,n){return e[t]-e[n]}),n}function ll(e,t,n){let r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){let r=n[a]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function lu(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let o=a[r];if(void 0!==o){if(Array.isArray(o))do void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++];while(void 0!==a);else if(void 0!==o.toArray)do void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++];while(void 0!==a);else do void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++];while(void 0!==a)}}let lc={convertArray:la,isTypedArray:lo,getKeyframeOrder:ls,sortedArray:ll,flattenJSON:lu,subclip:function(e,t,n,r,i=30){let a=e.clone();a.name=t;let o=[];for(let e=0;e<a.tracks.length;++e){let t=a.tracks[e],s=t.getValueSize(),l=[],u=[];for(let e=0;e<t.times.length;++e){let a=t.times[e]*i;if(!(a<n)&&!(a>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)u.push(t.values[e*s+n])}}0!==l.length&&(t.times=la(l,t.times.constructor),t.values=la(u,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);let i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){let r;let i=n.tracks[t],o=i.ValueTypeName;if("bool"===o||"string"===o)continue;let s=e.tracks.find(function(e){return e.name===i.name&&e.ValueTypeName===o});if(void 0===s)continue;let l=0,u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);let c=0,d=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let h=i.times.length-1;if(a<=i.times[0]){let e=l,t=u-l;r=i.values.slice(e,t)}else if(a>=i.times[h]){let e=h*u+l,t=e+u-l;r=i.values.slice(e,t)}else{let e=i.createInterpolant(),t=l,n=u-l;e.evaluate(a),r=e.resultBuffer.slice(t,n)}"quaternion"===o&&new ra().fromArray(r).normalize().conjugate().toArray(r);let f=s.times.length;for(let e=0;e<f;++e){let t=e*d+c;if("quaternion"===o)ra.multiplyQuaternionsFlat(s.values,t,r,0,s.values,t);else{let e=d-2*c;for(let n=0;n<e;++n)s.values[t+n]-=r[n]}}}return e.blendMode=tF,e}};class ld{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];i:{a:{let a;o:{s:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break s;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,e<(r=t[++n]))break a}a=t.length;break o}if(!(e>=i)){let o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break a}a=n,n=0;break o}break i}for(;n<a;){let r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class lh extends ld{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tL,endingEnd:tL}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case tk:i=e,o=2*t-n;break;case tD:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case tk:a=e,s=2*n-t;break;case tD:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}let l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let e=0;e!==o;++e)i[e]=g*a[u+e]+v*a[l+e]+y*a[s+e]+b*a[c+e];return i}}class lf extends ld{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u;for(let e=0;e!==o;++e)i[e]=a[l+e]*c+a[s+e]*u;return i}}class lp extends ld{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class lm{constructor(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=la(t,this.TimeBufferType),this.values=la(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t;let n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:la(e.times,Array),values:la(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new lp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lf(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new lh(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tP:t=this.InterpolantFactoryMethodDiscrete;break;case tI:t=this.InterpolantFactoryMethodLinear;break;case tB:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tP;case this.InterpolantFactoryMethodLinear:return tI;case this.InterpolantFactoryMethodSmooth:return tB}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);let e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){let r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&lo(r))for(let t=0,n=r.length;t!==n;++t){let n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===tB,i=e.length-1,a=1;for(let o=1;o<i;++o){let i=!1,s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0])){if(r)i=!0;else{let e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){let n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}}if(i){if(o!==a){e[a]=e[o];let r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}lm.prototype.TimeBufferType=Float32Array,lm.prototype.ValueBufferType=Float32Array,lm.prototype.DefaultInterpolation=tI;class lg extends lm{constructor(e,t,n){super(e,t,n)}}lg.prototype.ValueTypeName="bool",lg.prototype.ValueBufferType=Array,lg.prototype.DefaultInterpolation=tP,lg.prototype.InterpolantFactoryMethodLinear=void 0,lg.prototype.InterpolantFactoryMethodSmooth=void 0;class lv extends lm{}lv.prototype.ValueTypeName="color";class ly extends lm{}ly.prototype.ValueTypeName="number";class lb extends ld{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o;for(let e=l+o;l!==e;l+=4)ra.slerpFlat(i,0,a,l-o,a,l,s);return i}}class lx extends lm{InterpolantFactoryMethodLinear(e){return new lb(this.times,this.values,this.getValueSize(),e)}}lx.prototype.ValueTypeName="quaternion",lx.prototype.InterpolantFactoryMethodSmooth=void 0;class l_ extends lm{constructor(e,t,n){super(e,t,n)}}l_.prototype.ValueTypeName="string",l_.prototype.ValueBufferType=Array,l_.prototype.DefaultInterpolation=tP,l_.prototype.InterpolantFactoryMethodLinear=void 0,l_.prototype.InterpolantFactoryMethodSmooth=void 0;class lw extends lm{}lw.prototype.ValueTypeName="vector";class lS{constructor(e="",t=-1,n=[],r=tN){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=nI(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push((function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ly;case"vector":case"vector2":case"vector3":case"vector4":return lw;case"color":return lv;case"quaternion":return lx;case"bool":case"boolean":return lg;case"string":return l_}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],n=[];lu(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)})(n[e]).scale(r));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(lm.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){let i=t.length,a=[];for(let e=0;e<i;e++){let o=[],s=[];o.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);let l=ls(o);o=ll(o,1,l),s=ll(s,1,l),r||0!==o[0]||(o.push(i),s.push(s[0])),a.push(new ly(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.name.match(i);if(a&&a.length>1){let e=a[1],t=r[e];t||(r[e]=t=[]),t.push(n)}}let a=[];for(let e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(e,t,n,r,i){if(0!==n.length){let a=[],o=[];lu(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let e=0;e<l.length;e++){let i=l[e].keys;if(i&&0!==i.length){if(i[0].morphTargets){let e;let t={};for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(let n in t){let t=[],a=[];for(let r=0;r!==i[e].morphTargets.length;++r){let r=i[e];t.push(r.time),a.push(+(r.morphTarget===n))}r.push(new ly(".morphTargetInfluence["+n+"]",t,a))}s=t.length*a}else{let a=".bones["+t[e].name+"]";n(lw,a+".position",i,"pos",r),n(lx,a+".quaternion",i,"rot",r),n(lw,a+".scale",i,"scl",r)}}}return 0===r.length?null:new this(i,s,r,o)}resetDuration(){let e=this.tracks,t=0;for(let n=0,r=e.length;n!==r;++n){let e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}let lA={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class lM{constructor(e,t,n){let r;let i=this,a=!1,o=0,s=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return -1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){let n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}let lE=new lM;class lC{constructor(e){this.manager=void 0!==e?e:lE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}lC.DEFAULT_MATERIAL_NAME="__DEFAULT";let lT={};class lR extends Error{constructor(e,t){super(e),this.response=t}}class lP extends lC{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=lA.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==lT[e]){lT[e].push({onLoad:t,onProgress:n,onError:r});return}lT[e]=[],lT[e].push({onLoad:t,onProgress:n,onError:r});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;let n=lT[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0;return new Response(new ReadableStream({start(e){(function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{let r=new ProgressEvent("progress",{lengthComputable:o,loaded:s+=i.byteLength,total:a});for(let e=0,t=n.length;e<t;e++){let t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}},t=>{e.error(t)})})()}}))}throw new lR(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>new DOMParser().parseFromString(e,o));case"json":return e.json();default:if(void 0===o)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(o),n=new TextDecoder(t&&t[1]?t[1].toLowerCase():void 0);return e.arrayBuffer().then(e=>n.decode(e))}}}).then(t=>{lA.add(e,t);let n=lT[e];delete lT[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{let n=lT[e];if(void 0===n)throw this.manager.itemError(e),t;delete lT[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lI extends lC{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new lP(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t=[];for(let n=0;n<e.length;n++){let r=lS.parse(e[n]);t.push(r)}return t}}class lB extends lC{constructor(e){super(e)}load(e,t,n,r){let i=this,a=[],o=new oJ,s=new lP(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;if(Array.isArray(e))for(let u=0,c=e.length;u<c;++u)!function(u){s.load(e[u],function(e){let n=i.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=eR),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,r)}(u);else s.load(e,function(e){let n=i.parse(e,!0);if(n.isCubemap){let e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=eR),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}class lL extends lC{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=lA.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;let o=nj("img");function s(){u(),lA.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class lk extends lC{constructor(e){super(e)}load(e,t,n,r){let i=new ad;i.colorSpace=tY;let a=new lL(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;for(let n=0;n<e.length;++n)!function(n){a.load(e[n],function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(n);return i}}class lD extends lC{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new aQ,o=new lP(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,function(e){let n;try{n=i.parse(e)}catch(e){if(void 0!==r)r(e);else{console.error(e);return}}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:ew,a.wrapT=void 0!==n.wrapT?n.wrapT:ew,a.magFilter=void 0!==n.magFilter?n.magFilter:eR,a.minFilter=void 0!==n.minFilter?n.minFilter:eR,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=eB),1===n.mipmapCount&&(a.minFilter=eR),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,r),a}}class lN extends lC{constructor(e){super(e)}load(e,t,n,r){let i=new n9,a=new lL(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}class lF extends r7{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ix(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class lO extends lF{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(r7.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ix(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}let lU=new rN,lz=new ro,lH=new ro;class lG{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nO(512,512),this.map=null,this.mapPass=null,this.matrix=new rN,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oo,this._frameExtents=new nO(1,1),this._viewportCount=1,this._viewports=[new n8(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;lz.setFromMatrixPosition(e.matrixWorld),t.position.copy(lz),lH.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(lH),t.updateMatrixWorld(),lU.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lU),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(lU)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class lV extends lG{constructor(){super(new au(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*nP*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lj extends lF{constructor(e,t,n=0,r=Math.PI/3,i=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(r7.DEFAULT_UP),this.updateMatrix(),this.target=new r7,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new lV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}let lW=new rN,lX=new ro,lJ=new ro;class lY extends lG{constructor(){super(new au(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new nO(4,2),this._viewportCount=6,this._viewports=[new n8(2,1,1,1),new n8(0,1,1,1),new n8(3,1,1,1),new n8(1,1,1,1),new n8(3,0,1,1),new n8(1,0,1,1)],this._cubeDirections=[new ro(1,0,0),new ro(-1,0,0),new ro(0,0,1),new ro(0,0,-1),new ro(0,1,0),new ro(0,-1,0)],this._cubeUps=[new ro(0,1,0),new ro(0,1,0),new ro(0,1,0),new ro(0,1,0),new ro(0,0,1),new ro(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),lX.setFromMatrixPosition(e.matrixWorld),n.position.copy(lX),lJ.copy(n.position),lJ.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(lJ),n.updateMatrixWorld(),r.makeTranslation(-lX.x,-lX.y,-lX.z),lW.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lW)}}class lK extends lF{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new lY}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lq extends aa{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class lQ extends lG{constructor(){super(new lq(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lZ extends lF{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(r7.DEFAULT_UP),this.updateMatrix(),this.target=new r7,this.shadow=new lQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class l$ extends lF{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class l0 extends lF{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class l1{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ro)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){let n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class l2 extends lF{constructor(e=new l1,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class l3 extends lC{constructor(e){super(e),this.textures={}}load(e,t,n,r){let i=this,a=new lP(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}let r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=new ix().setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(let t in e.uniforms){let i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=new ix().setHex(i.value);break;case"v2":r.uniforms[t].value=new nO().fromArray(i.value);break;case"v3":r.uniforms[t].value=new ro().fromArray(i.value);break;case"v4":r.uniforms[t].value=new n8().fromArray(i.value);break;case"m3":r.uniforms[t].value=new nU().fromArray(i.value);break;case"m4":r.uniforms[t].value=new rN().fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(let t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=new nO().fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=new nO().fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return l3.createMaterialFromType(e)}static createMaterialFromType(e){return new({ShadowMaterial:s3,SpriteMaterial:aw,RawShaderMaterial:s4,ShaderMaterial:ai,PointsMaterial:oF,MeshPhysicalMaterial:s6,MeshStandardMaterial:s5,MeshPhongMaterial:s9,MeshToonMaterial:s8,MeshNormalMaterial:s7,MeshLambertMaterial:le,MeshDepthMaterial:lt,MeshDistanceMaterial:ln,MeshBasicMaterial:iA,MeshMatcapMaterial:lr,LineDashedMaterial:li,LineBasicMaterial:oS,Material:iS})[e]}}class l4{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return -1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e))?e:t+e}}class l5 extends iK{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class l6 extends lC{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new lP(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t={},n={};function r(e,r){if(void 0!==t[r])return t[r];let i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];let r=new Uint32Array(e.arrayBuffers[t]).buffer;return n[t]=r,r}(e,i.buffer),o=new ab(nV(i.type,a),i.stride);return o.uuid=i.uuid,t[r]=o,o}let i=e.isInstancedBufferGeometry?new l5:new iK,a=e.data.index;if(void 0!==a){let e=nV(a.type,a.array);i.setIndex(new iB(e,1))}let o=e.data.attributes;for(let t in o){let n;let a=o[t];if(a.isInterleavedBufferAttribute)n=new a_(r(e.data,a.data),a.itemSize,a.offset,a.normalized);else{let e=nV(a.type,a.array);n=new(a.isInstancedBufferAttribute?a1:iB)(e,a.itemSize,a.normalized)}void 0!==a.name&&(n.name=a.name),void 0!==a.usage&&n.setUsage(a.usage),i.setAttribute(t,n)}let s=e.data.morphAttributes;if(s)for(let t in s){let n=s[t],a=[];for(let t=0,i=n.length;t<i;t++){let i;let o=n[t];i=o.isInterleavedBufferAttribute?new a_(r(e.data,o.data),o.itemSize,o.offset,o.normalized):new iB(nV(o.type,o.array),o.itemSize,o.normalized),void 0!==o.name&&(i.name=o.name),a.push(i)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){let t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}let u=e.data.boundingSphere;if(void 0!==u){let e=new ro;void 0!==u.center&&e.fromArray(u.center),i.boundingSphere=new rC(e,u.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class l9 extends lC{constructor(e){super(e)}load(e,t,n,r){let i=this,a=""===this.path?l4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;let o=new lP(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(t){void 0!==r&&r(t),console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}let o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase()){void 0!==r&&r(Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(a,t)},n,r)}async loadAsync(e,t){let n=""===this.path?l4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;let r=new lP(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);let i=JSON.parse(await r.loadAsync(e,t)),a=i.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(i)}parse(e,t){let n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),this.bindLightTargets(l),void 0!==t){let e=!1;for(let t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){let t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o,a,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),this.bindLightTargets(s),s}parseShapes(e){let t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){let r=new sw().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){let n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let t=0,i=e.length;t<i;t++){let i=new a0().fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){let n={};if(void 0!==e){let r=new l6;for(let i=0,a=e.length;i<a;i++){let a;let o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(o);break;default:o.type in s2?a=s2[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.userData&&(a.userData=o.userData),n[o.uuid]=a}}return n}parseMaterials(e,t){let n={},r={};if(void 0!==e){let i=new l3;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){let a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){let t={};if(void 0!==e)for(let n=0;n<e.length;n++){let r=e[n],i=lS.parse(r);t[i.uuid]=i}return t}parseImages(e,t){let n;let r=this,i={};function a(e){if("string"==typeof e){var t;return t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:r.resourcePath+e,r.manager.itemStart(t),n.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}return e.data?{data:nV(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(n=new lL(new lM(t))).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],r=n.url;if(Array.isArray(r)){let e=[];for(let t=0,n=r.length;t<n;t++){let n=a(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new aQ(n.data,n.width,n.height)))}i[n.uuid]=new n4(e)}else{let e=a(n.url);i[n.uuid]=new n4(e)}}}return i}async parseImagesAsync(e){let t;let n=this,r={};async function i(e){if("string"==typeof e){let r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e;return await t.loadAsync(r)}return e.data?{data:nV(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(t=new lL(this.manager)).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.url;if(Array.isArray(a)){let e=[];for(let t=0,n=a.length;t<n;t++){let n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new aQ(r.data,r.width,r.height)))}r[n.uuid]=new n4(e)}else{let e=await i(n.url);r[n.uuid]=new n4(e)}}}return r}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}let r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){let a;let o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);let s=t[o.image],l=s.data;Array.isArray(l)?(a=new ad,6===l.length&&(a.needsUpdate=!0)):(a=l&&l.data?new aQ:new n9,l&&(a.needsUpdate=!0)),a.source=s,a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,l8)),void 0!==o.channel&&(a.channel=o.channel),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],l7),a.wrapT=n(o.wrap[1],l7)),void 0!==o.format&&(a.format=o.format),void 0!==o.internalFormat&&(a.internalFormat=o.internalFormat),void 0!==o.type&&(a.type=o.type),void 0!==o.colorSpace&&(a.colorSpace=o.colorSpace),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,ue)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,ue)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.generateMipmaps&&(a.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(a.compareFunction=o.compareFunction),void 0!==o.userData&&(a.userData=o.userData),r[o.uuid]=a}return r}parseObject(e,t,n,r,i){let a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){let t=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new ay,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new ix(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new av(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new ag(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new au(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new lq(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new l$(e.color,e.intensity);break;case"DirectionalLight":(a=new lZ(e.color,e.intensity)).target=e.target||"";break;case"PointLight":a=new lK(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new l0(e.color,e.intensity,e.width,e.height);break;case"SpotLight":(a=new lj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay)).target=e.target||"";break;case"HemisphereLight":a=new lO(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new l2().fromJSON(e);break;case"SkinnedMesh":a=new aK(o=l(e.geometry),s=u(e.material)),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":a=new i9(o=l(e.geometry),s=u(e.material));break;case"InstancedMesh":o=l(e.geometry),s=u(e.material);let d=e.count,h=e.instanceMatrix,f=e.instanceColor;(a=new a7(o,s,d)).instanceMatrix=new a1(new Float32Array(h.array),16),void 0!==f&&(a.instanceColor=new a1(new Float32Array(f.array),f.itemSize));break;case"BatchedMesh":o=l(e.geometry),s=u(e.material),(a=new ow(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s)).geometry=o,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(e=>{let t=new ru;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);let n=new rC;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":a=new aU;break;case"Line":a=new oI(l(e.geometry),u(e.material));break;case"LineLoop":a=new oN(l(e.geometry),u(e.material));break;case"LineSegments":a=new oD(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new oG(l(e.geometry),u(e.material));break;case"Sprite":a=new aD(u(e.material));break;case"Group":a=new af;break;case"Bone":a=new aq;break;default:a=new r7}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){let o=e.children;for(let e=0;e<o.length;e++)a.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){let t=e.animations;for(let e=0;e<t.length;e++){let n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);let t=e.levels;for(let e=0;e<t.length;e++){let n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){let n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){let n=t.target,r=e.getObjectByProperty("uuid",n);void 0!==r?t.target=r:t.target=new r7}})}}let l8={UVMapping:em,CubeReflectionMapping:eg,CubeRefractionMapping:ev,EquirectangularReflectionMapping:ey,EquirectangularRefractionMapping:eb,CubeUVReflectionMapping:ex},l7={RepeatWrapping:e_,ClampToEdgeWrapping:ew,MirroredRepeatWrapping:eS},ue={NearestFilter:eA,NearestMipmapNearestFilter:eM,NearestMipmapLinearFilter:eC,LinearFilter:eR,LinearMipmapNearestFilter:eP,LinearMipmapLinearFilter:eB};class ut extends lC{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=lA.get(e);if(void 0!==a){if(i.manager.itemStart(e),a.then){a.then(n=>{t&&t(n),i.manager.itemEnd(e)}).catch(e=>{r&&r(e)});return}return setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a}let o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader;let s=fetch(e,o).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){return lA.add(e,n),t&&t(n),i.manager.itemEnd(e),n}).catch(function(t){r&&r(t),lA.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)});lA.add(e,s),i.manager.itemStart(e)}}class un{static getContext(){return void 0===a&&(a=new(window.AudioContext||window.webkitAudioContext)),a}static setContext(e){a=e}}class ur extends lC{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new lP(this.manager);function o(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{let n=e.slice(0);un.getContext().decodeAudioData(n,function(e){t(e)}).catch(o)}catch(e){o(e)}},n,r)}}let ui=new rN,ua=new rN,uo=new rN;class us{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new au,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new au,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){let n,r;t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,uo.copy(e.projectionMatrix);let i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(nR*t.fov*.5)/t.zoom;ua.elements[12]=-i,ui.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,uo.elements[0]=2*t.near/(r-n),uo.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(uo),n=-o*t.aspect-a,r=o*t.aspect-a,uo.elements[0]=2*t.near/(r-n),uo.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(uo)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ua),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ui)}}class ul extends au{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class uu{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=uc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=uc();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function uc(){return performance.now()}let ud=new ro,uh=new ra,uf=new ro,up=new ro;class um extends r7{constructor(){super(),this.type="AudioListener",this.context=un.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new uu}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ud,uh,uf),up.set(0,0,-1).applyQuaternion(uh),t.positionX){let e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ud.x,e),t.positionY.linearRampToValueAtTime(ud.y,e),t.positionZ.linearRampToValueAtTime(ud.z,e),t.forwardX.linearRampToValueAtTime(up.x,e),t.forwardY.linearRampToValueAtTime(up.y,e),t.forwardZ.linearRampToValueAtTime(up.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(ud.x,ud.y,ud.z),t.setOrientation(up.x,up.y,up.z,n.x,n.y,n.z)}}class ug extends r7{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying){console.warn("THREE.Audio: Audio is already playing.");return}if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return(super.copy(e,t),"buffer"!==e.sourceType)?console.warn("THREE.Audio: Audio source type cannot be copied."):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice()),this}clone(e){return new this.constructor(this.listener).copy(this,e)}}let uv=new ro,uy=new ra,ub=new ro,ux=new ro;class u_ extends ug{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(uv,uy,ub),ux.set(0,0,1).applyQuaternion(uy);let t=this.panner;if(t.positionX){let e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(uv.x,e),t.positionY.linearRampToValueAtTime(uv.y,e),t.positionZ.linearRampToValueAtTime(uv.z,e),t.orientationX.linearRampToValueAtTime(ux.x,e),t.orientationY.linearRampToValueAtTime(ux.y,e),t.orientationZ.linearRampToValueAtTime(ux.z,e)}else t.setPosition(uv.x,uv.y,uv.z),t.setOrientation(ux.x,ux.y,ux.z)}}class uw{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class uS{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;let e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n;e!==r;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){ra.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){let a=this._workIndex*i;ra.multiplyQuaternionsFlat(e,a,e,t,e,n),ra.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){let a=1-r;for(let o=0;o!==i;++o){let i=t+o;e[i]=e[i]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){let i=t+a;e[i]=e[i]+e[n+a]*r}}}let uA="\\[\\]\\.:\\/",uM=RegExp("["+uA+"]","g"),uE="[^"+uA+"]",uC="[^"+uA.replace("\\.","")+"]",uT=/((?:WC+[\/:])*)/.source.replace("WC",uE),uR=/(WCOD+)?/.source.replace("WCOD",uC),uP=RegExp("^"+uT+uR+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uE)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uE)+"$"),uI=["material","materials","bones","map"];class uB{constructor(e,t,n){this.path=t,this.parsedPath=n||uB.parseTrackName(t),this.node=uB.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new uB.Composite(e,t,n):new uB(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uM,"")}static parseTrackName(e){let t=uP.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==uI.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=uB.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(void 0===e[n]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(void 0!==r){if(void 0===e[r]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[r]}}let a=e[r];if(void 0===a){console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?o=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}uB.Composite=class{constructor(e,t,n){let r=n||uB.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},uB.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},uB.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},uB.prototype.GetterByBindingType=[uB.prototype._getValue_direct,uB.prototype._getValue_array,uB.prototype._getValue_arrayElement,uB.prototype._getValue_toArray],uB.prototype.SetterByBindingTypeAndVersioning=[[uB.prototype._setValue_direct,uB.prototype._setValue_direct_setNeedsUpdate,uB.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[uB.prototype._setValue_array,uB.prototype._setValue_array_setNeedsUpdate,uB.prototype._setValue_array_setMatrixWorldNeedsUpdate],[uB.prototype._setValue_arrayElement,uB.prototype._setValue_arrayElement_setNeedsUpdate,uB.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[uB.prototype._setValue_fromArray,uB.prototype._setValue_fromArray_setNeedsUpdate,uB.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uL{constructor(){this.isAnimationObjectGroup=!0,this.uuid=nI(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o,s=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){let c=arguments[u],d=c.uuid,h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(c);for(let e=0;e!==a;++e)i[e].push(new uB(c,n[e],r[e]))}else if(h<l){o=e[h];let s=--l,u=e[s];t[u.uuid]=h,e[h]=u,t[d]=s,e[s]=c;for(let e=0;e!==a;++e){let t=i[e],a=t[s],o=t[h];t[h]=a,void 0===o&&(o=new uB(c,n[e],r[e])),t[s]=o}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){let o=arguments[a],s=o.uuid,l=t[s];if(void 0!==l&&l>=i){let a=i++,u=e[a];t[u.uuid]=l,e[l]=u,t[s]=a,e[a]=o;for(let e=0;e!==r;++e){let t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){let s=arguments[o],l=s.uuid,u=t[l];if(void 0!==u){if(delete t[l],u<i){let o=--i,s=e[o],l=--a,c=e[l];t[s.uuid]=u,e[u]=s,t[c.uuid]=o,e[o]=c,e.pop();for(let e=0;e!==r;++e){let t=n[e],r=t[o],i=t[l];t[u]=r,t[o]=i,t.pop()}}else{let i=--a,o=e[i];i>0&&(t[o.uuid]=u),e[u]=o,e.pop();for(let e=0;e!==r;++e){let t=n[e];t[u]=t[i],t.pop()}}}}this.nCachedObjects_=i}subscribe_(e,t){let n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];let a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(let n=u,r=s.length;n!==r;++n){let r=s[n];c[n]=new uB(r,e,t)}return c}unsubscribe_(e){let t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){let r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class uk{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;let i=t.tracks,a=i.length,o=Array(a),s={endingStart:tL,endingEnd:tL};for(let e=0;e!==a;++e){let t=i[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let n=this._clip.duration,r=e._clip.duration;e.warp(1,r/n,t),this.warp(n/r,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);let s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}let i=this._startTime;if(null!==i){let r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);let a=this._updateTime(t),o=this._updateWeight(e);if(o>0){let e=this._interpolants,t=this._propertyBindings;if(this.blendMode===tF)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(null!==n){let r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===tR;if(0===e)return -1===i?r:a&&(1&i)==1?t-r:r;if(n===tC){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));l:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break l}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){let n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);let o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&(1&i)==1)return t-r}return r}_setEndings(e,t,n){let r=this._interpolantSettings;n?(r.endingStart=tk,r.endingEnd=tk):(e?r.endingStart=this.zeroSlopeAtStart?tk:tL:r.endingStart=tD,t?r.endingEnd=this.zeroSlopeAtEnd?tk:tL:r.endingEnd=tD)}_scheduleFading(e,t,n){let r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);let o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}let uD=new Float32Array(1);class uN extends nE{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(let e=0;e!==i;++e){let i=r[e],l=i.name,c=u[l];if(void 0!==c)++c.referenceCount,a[e]=c;else{if(void 0!==(c=a[e])){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,s,l));continue}let r=t&&t._propertyBindings[e].binding.parsedPath;c=new uS(uB.create(n,l,r),i.ValueTypeName,i.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,s,l),a[e]=c}o[e].resultBuffer=c.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){let r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{let t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;let c=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete c[d],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){let r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new lf(new Float32Array(2),new Float32Array(2),1,uD)).__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){let r=t||this._root,i=r.uuid,a="string"==typeof e?lS.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:tN),void 0!==s){let e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;let u=new uk(this,a,t,n);return this._bindAction(u,l),this._addInactiveAction(u,o,i),u}existingAction(e,t){let n=t||this._root,r=n.uuid,i="string"==typeof e?lS.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;let t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o)t[o]._update(r,e,i,a);let o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){let e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){let r=e[n];this._deactivateAction(r);let i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let e in n){let r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}let r=this._bindingsByRootAndName[t];if(void 0!==r)for(let e in r){let t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){let n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class uF extends n7{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new rr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class uO extends n7{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=n,this.texture=new rt(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class uU{constructor(e){this.value=e}clone(){return new uU(void 0===this.value.clone?this.value:this.value.clone())}}let uz=0;class uH extends nE{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:uz++}),this.name="",this.usage=nh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return -1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++){let n=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0;e<n.length;e++)this.uniforms.push(n[e].clone())}return this}clone(){return new this.constructor().copy(this)}}class uG extends ab{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class uV{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}let uj=new rN;class uW{constructor(e,t,n=0,r=1/0){this.ray=new rD(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new rJ,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return uj.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(uj),this}intersectObject(e,t=!0,n=[]){return uJ(e,this,n,t),n.sort(uX),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)uJ(e[r],this,n,t);return n.sort(uX),n}}function uX(e,t){return e.distance-t.distance}function uJ(e,t,n,r){let i=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,n)&&(i=!1),!0===i&&!0===r){let r=e.children;for(let e=0,i=r.length;e<i;e++)uJ(r[e],t,n,!0)}}class uY{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=nB(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(nB(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uK{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class uq{constructor(e,t,n,r){uq.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){let i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}let uQ=new nO;class uZ{constructor(e=new nO(Infinity,Infinity),t=new nO(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=uQ.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,uQ).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let u$=new ro,u0=new ro;class u1{constructor(e=new ro,t=new ro){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){u$.subVectors(e,this.start),u0.subVectors(this.end,this.start);let n=u0.dot(u0),r=u0.dot(u$)/n;return t&&(r=nB(r,0,1)),r}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}let u2=new ro;class u3 extends r7{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new iK,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1;e<32;e++,t++){let n=e/32*Math.PI*2,i=t/32*Math.PI*2;r.push(Math.cos(n),Math.sin(n),1,Math.cos(i),Math.sin(i),1)}n.setAttribute("position",new iH(r,3));let i=new oS({fog:!1,toneMapped:!1});this.cone=new oD(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),u2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(u2),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}let u4=new ro,u5=new rN,u6=new rN;class u9 extends oD{constructor(e){let t=function e(t){let n=[];!0===t.isBone&&n.push(t);for(let r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new iK,r=[],i=[],a=new ix(0,0,1),o=new ix(0,1,0);for(let e=0;e<t.length;e++){let n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new iH(r,3)),n.setAttribute("color",new iH(i,3)),super(n,new oS({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,n=this.geometry,r=n.getAttribute("position");u6.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){let i=t[e];i.parent&&i.parent.isBone&&(u5.multiplyMatrices(u6,i.matrixWorld),u4.setFromMatrixPosition(u5),r.setXYZ(n,u4.x,u4.y,u4.z),u5.multiplyMatrices(u6,i.parent.matrixWorld),u4.setFromMatrixPosition(u5),r.setXYZ(n+1,u4.x,u4.y,u4.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}class u8 extends i9{constructor(e,t,n){super(new sK(t,4,2),new iA({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}let u7=new ro,ce=new ix,ct=new ix;class cn extends r7{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";let r=new sW(t);r.rotateY(.5*Math.PI),this.material=new iA({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);let i=new Float32Array(3*r.getAttribute("position").count);r.setAttribute("color",new iB(i,3)),this.add(new i9(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");ce.copy(this.light.color),ct.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){let r=e<n/2?ce:ct;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(u7.setFromMatrixPosition(this.light.matrixWorld).negate())}}class cr extends oD{constructor(e=10,t=10,n=4473924,r=8947848){n=new ix(n),r=new ix(r);let i=t/2,a=e/t,o=e/2,s=[],l=[];for(let e=0,u=0,c=-o;e<=t;e++,c+=a){s.push(-o,0,c,o,0,c),s.push(c,0,-o,c,0,o);let t=e===i?n:r;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}let u=new iK;u.setAttribute("position",new iH(s,3)),u.setAttribute("color",new iH(l,3)),super(u,new oS({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ci extends oD{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new ix(i),a=new ix(a);let o=[],s=[];if(t>1)for(let n=0;n<t;n++){let r=n/t*(2*Math.PI),l=Math.sin(r)*e,u=Math.cos(r)*e;o.push(0,0,0),o.push(l,0,u);let c=1&n?i:a;s.push(c.r,c.g,c.b),s.push(c.r,c.g,c.b)}for(let t=0;t<n;t++){let l=1&t?i:a,u=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*u,i=Math.cos(t)*u;o.push(n,0,i),s.push(l.r,l.g,l.b),n=Math.sin(t=(e+1)/r*(2*Math.PI))*u,i=Math.cos(t)*u,o.push(n,0,i),s.push(l.r,l.g,l.b)}}let l=new iK;l.setAttribute("position",new iH(o,3)),l.setAttribute("color",new iH(s,3)),super(l,new oS({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}let ca=new ro,co=new ro,cs=new ro;class cl extends r7{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new iK;r.setAttribute("position",new iH([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new oS({fog:!1,toneMapped:!1});this.lightPlane=new oI(r,i),this.add(this.lightPlane),(r=new iK).setAttribute("position",new iH([0,0,0,0,0,1],3)),this.targetLine=new oI(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ca.setFromMatrixPosition(this.light.matrixWorld),co.setFromMatrixPosition(this.light.target.matrixWorld),cs.subVectors(co,ca),this.lightPlane.lookAt(co),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(co),this.targetLine.scale.z=cs.length()}}let cu=new ro,cc=new aa;class cd extends oD{constructor(e){let t=new iK,n=new oS({color:0xffffff,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function o(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new iH(r,3)),t.setAttribute("color",new iH(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new ix(0xffaa00),u=new ix(0xff0000),c=new ix(43775),d=new ix(0xffffff),h=new ix(3355443);this.setColors(l,u,c,d,h)}setColors(e,t,n,r,i){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;cc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);let n=this.camera.coordinateSystem===nS?-1:0;ch("c",t,e,cc,0,0,n),ch("t",t,e,cc,0,0,1),ch("n1",t,e,cc,-1,-1,n),ch("n2",t,e,cc,1,-1,n),ch("n3",t,e,cc,-1,1,n),ch("n4",t,e,cc,1,1,n),ch("f1",t,e,cc,-1,-1,1),ch("f2",t,e,cc,1,-1,1),ch("f3",t,e,cc,-1,1,1),ch("f4",t,e,cc,1,1,1),ch("u1",t,e,cc,.7,1.1,n),ch("u2",t,e,cc,-.7,1.1,n),ch("u3",t,e,cc,0,2,n),ch("cf1",t,e,cc,-1,0,1),ch("cf2",t,e,cc,1,0,1),ch("cf3",t,e,cc,0,-1,1),ch("cf4",t,e,cc,0,1,1),ch("cn1",t,e,cc,-1,0,n),ch("cn2",t,e,cc,1,0,n),ch("cn3",t,e,cc,0,-1,n),ch("cn4",t,e,cc,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ch(e,t,n,r,i,a,o){cu.set(i,a,o).unproject(r);let s=t[e];if(void 0!==s){let e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],cu.x,cu.y,cu.z)}}let cf=new ru;class cp extends oD{constructor(e,t=0xffff00){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new iK;i.setIndex(new iB(n,1)),i.setAttribute("position",new iB(r,3)),super(i,new oS({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&cf.setFromObject(this.object),cf.isEmpty())return;let t=cf.min,n=cf.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cm extends oD{constructor(e,t=0xffff00){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new iK;r.setIndex(new iB(n,1)),r.setAttribute("position",new iH([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new oS({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class cg extends oI{constructor(e,t=1,n=0xffff00){let r=new iK;r.setAttribute("position",new iH([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new oS({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let i=new iK;i.setAttribute("position",new iH([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new i9(i,new iA({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}let cv=new ro;class cy extends r7{constructor(e=new ro(0,0,1),t=new ro(0,0,0),n=1,r=0xffff00,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===o&&((o=new iK).setAttribute("position",new iH([0,0,0,0,1,0],3)),(s=new sf(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new oI(o,new oS({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new i9(s,new iA({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{cv.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(cv,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cb extends oD{constructor(e=1){let t=new iK;t.setAttribute("position",new iH([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],3)),t.setAttribute("color",new iH([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(t,new oS({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let r=new ix,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cx{constructor(){this.type="ShapePath",this.color=new ix,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new su,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){let t,n,r,i,a;let o=sU.isClockWise,s=this.subPaths;if(0===s.length)return[];let l=[];if(1===s.length)return n=s[0],(r=new sw).curves=n.curves,l.push(r),l;let u=!o(s[0].getPoints());u=e?!u:u;let c=[],d=[],h=[],f=0;d[0]=void 0,h[f]=[];for(let r=0,a=s.length;r<a;r++)t=o(i=(n=s[r]).getPoints()),(t=e?!t:t)?(!u&&d[f]&&f++,d[f]={s:new sw,p:i},d[f].s.curves=n.curves,u&&f++,h[f]=[]):h[f].push({h:n,p:i[0]});if(!d[0])return function(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=new sw;i.curves=r.curves,t.push(i)}return t}(s);if(d.length>1){let e=!1,t=0;for(let e=0,t=d.length;e<t;e++)c[e]=[];for(let n=0,r=d.length;n<r;n++){let r=h[n];for(let i=0;i<r.length;i++){let a=r[i],o=!0;for(let r=0;r<d.length;r++)(function(e,t){let n=t.length,r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],o=t[a],s=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],s=-s,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{let t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r})(a.p,d[r].p)&&(n!==r&&t++,o?(o=!1,c[r].push(a)):e=!0);o&&c[n].push(a)}}t>0&&!1===e&&(h=c)}for(let e=0,t=d.length;e<t;e++){r=d[e].s,l.push(r),a=h[e];for(let e=0,t=a.length;e<t;e++)r.holes.push(a[e].h)}return l}}class c_ extends nE{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function cw(e,t,n,r){let i=function(e){switch(e){case ek:case eD:return{byteLength:1,components:1};case eF:case eN:case eH:return{byteLength:2,components:1};case eG:case eV:return{byteLength:2,components:4};case eU:case eO:case ez:return{byteLength:4,components:1};case eW:return{byteLength:4,components:3}}throw Error(`Unknown texture type ${e}.`)}(r);switch(n){case eX:case eK:return e*t;case eq:return e*t*2;case e$:case e0:return e*t/i.components*i.byteLength;case e1:case e2:return e*t*2/i.components*i.byteLength;case eJ:return e*t*3/i.components*i.byteLength;case eY:case e4:return e*t*4/i.components*i.byteLength;case e5:case e6:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case e9:case e8:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case te:case tn:return Math.max(e,16)*Math.max(t,8)/4;case e7:case tt:return Math.max(e,8)*Math.max(t,8)/2;case tr:case ti:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case ta:case to:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case ts:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case tl:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case tu:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case tc:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case td:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case th:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case tf:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case tp:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case tm:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case tg:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case tv:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case ty:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case tb:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case tx:case t_:case tw:return Math.ceil(e/4)*Math.ceil(t/4)*16;case tS:case tA:return Math.ceil(e/4)*Math.ceil(t/4)*8;case tM:case tE:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw Error(`Unable to determine texture byte length for ${n} format.`)}let cS={contain:function(e,t){let n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){let n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:cw};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:l}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=l)},9708:function(e,t,n){"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>r.LY2,AddEquation:()=>r.bGH,AddOperation:()=>r.NDo,AdditiveAnimationBlendMode:()=>r.gSk,AdditiveBlending:()=>r.WMw,AgXToneMapping:()=>r.Bgp,AlphaFormat:()=>r.OTo,AlwaysCompare:()=>r.T6w,AlwaysDepth:()=>r.Se2,AlwaysStencilFunc:()=>r.cum,AmbientLight:()=>r.Mig,AnimationAction:()=>r.bBp,AnimationClip:()=>r.m7l,AnimationLoader:()=>r.sYA,AnimationMixer:()=>r.Xcj,AnimationObjectGroup:()=>r.mzJ,AnimationUtils:()=>r.ZZA,ArcCurve:()=>r.T__,ArrayCamera:()=>r.HkE,ArrowHelper:()=>r.tGC,AttachedBindMode:()=>r.$wi,Audio:()=>r.BbS,AudioAnalyser:()=>r.kqm,AudioContext:()=>r.Hmr,AudioListener:()=>r.SJI,AudioLoader:()=>r.mTL,AxesHelper:()=>r.y8_,BackSide:()=>r._Li,BasicDepthPacking:()=>r.z81,BasicShadowMap:()=>r._MY,BatchedMesh:()=>r.zwN,Bone:()=>r.N$j,BooleanKeyframeTrack:()=>r._YM,Box2:()=>r.TUj,Box3:()=>r.ZzF,Box3Helper:()=>r.GQ,BoxGeometry:()=>r.DvJ,BoxHelper:()=>r.fQA,BufferAttribute:()=>r.TlE,BufferGeometry:()=>r.u9r,BufferGeometryLoader:()=>r.s4_,ByteType:()=>r.T95,Cache:()=>r.CtF,Camera:()=>r.V1s,CameraHelper:()=>r.Rki,CanvasTexture:()=>r.ROQ,CapsuleGeometry:()=>r.BVQ,CatmullRomCurve3:()=>r.YT8,CineonToneMapping:()=>r.YGz,CircleGeometry:()=>r.zf8,ClampToEdgeWrapping:()=>r.uWy,Clock:()=>r.SUY,Color:()=>r.Ilk,ColorKeyframeTrack:()=>r.R2R,ColorManagement:()=>r.epp,CompressedArrayTexture:()=>r.Z_g,CompressedCubeTexture:()=>r.qVC,CompressedTexture:()=>r.EB7,CompressedTextureLoader:()=>r.DqL,ConeGeometry:()=>r.b_z,ConstantAlphaFactor:()=>r.jes,ConstantColorFactor:()=>r._wr,Controls:()=>r.ZXd,CubeCamera:()=>r._am,CubeReflectionMapping:()=>r.fY$,CubeRefractionMapping:()=>r.vxC,CubeTexture:()=>r.BtG,CubeTextureLoader:()=>r.cBK,CubeUVReflectionMapping:()=>r.g8_,CubicBezierCurve:()=>r.AXT,CubicBezierCurve3:()=>r.yj7,CubicInterpolant:()=>r.dYG,CullFaceBack:()=>r.tm_,CullFaceFront:()=>r.S2y,CullFaceFrontBack:()=>r.B02,CullFaceNone:()=>r.PeU,Curve:()=>r.Hyl,CurvePath:()=>r.Wqd,CustomBlending:()=>r.Xaj,CustomToneMapping:()=>r.dZ3,CylinderGeometry:()=>r.fHI,Cylindrical:()=>r.LBq,Data3DTexture:()=>r.JUT,DataArrayTexture:()=>r.p3g,DataTexture:()=>r.IEO,DataTextureLoader:()=>r.yxD,DataUtils:()=>r.A5E,DecrementStencilOp:()=>r.jfJ,DecrementWrapStencilOp:()=>r.T_J,DefaultLoadingManager:()=>r.tEQ,DepthFormat:()=>r.qkB,DepthStencilFormat:()=>r.brP,DepthTexture:()=>r.$YQ,DetachedBindMode:()=>r.msZ,DirectionalLight:()=>r.Ox3,DirectionalLightHelper:()=>r.cBI,DiscreteInterpolant:()=>r.cU9,DodecahedronGeometry:()=>r.Kgo,DoubleSide:()=>r.ehD,DstAlphaFactor:()=>r.fSK,DstColorFactor:()=>r.Vdb,DynamicCopyUsage:()=>r.l8J,DynamicDrawUsage:()=>r.dj0,DynamicReadUsage:()=>r.QM0,EdgesGeometry:()=>r.TOt,EllipseCurve:()=>r.Ny0,EqualCompare:()=>r.F1y,EqualDepth:()=>r.eD,EqualStencilFunc:()=>r.jwo,EquirectangularReflectionMapping:()=>r.dSO,EquirectangularRefractionMapping:()=>r.Bf4,Euler:()=>r.USm,EventDispatcher:()=>r.pBf,ExtrudeGeometry:()=>r.O7d,FileLoader:()=>r.hH6,Float16BufferAttribute:()=>r.e62,Float32BufferAttribute:()=>r.a$l,FloatType:()=>r.VzW,Fog:()=>r.ybr,FogExp2:()=>r.yo9,FramebufferTexture:()=>r.Wzm,FrontSide:()=>r.Wl3,Frustum:()=>r.iWj,GLBufferAttribute:()=>r.ylh,GLSL1:()=>r.v9Y,GLSL3:()=>r.LSk,GreaterCompare:()=>r.Zen,GreaterDepth:()=>r.w$m,GreaterEqualCompare:()=>r.Jjb,GreaterEqualDepth:()=>r.ksN,GreaterEqualStencilFunc:()=>r.j4z,GreaterStencilFunc:()=>r.OAl,GridHelper:()=>r.VLJ,Group:()=>r.ZAu,HalfFloatType:()=>r.cLu,HemisphereLight:()=>r.vmT,HemisphereLightHelper:()=>r.Qpg,IcosahedronGeometry:()=>r.cJO,ImageBitmapLoader:()=>r.QRU,ImageLoader:()=>r.S3k,ImageUtils:()=>r.PpQ,IncrementStencilOp:()=>r.ZRs,IncrementWrapStencilOp:()=>r.oqc,InstancedBufferAttribute:()=>r.lb7,InstancedBufferGeometry:()=>r.L5s,InstancedInterleavedBuffer:()=>r.$TI,InstancedMesh:()=>r.SPe,Int16BufferAttribute:()=>r.aVm,Int32BufferAttribute:()=>r.j87,Int8BufferAttribute:()=>r.RNb,IntType:()=>r.Kz5,InterleavedBuffer:()=>r.vpT,InterleavedBufferAttribute:()=>r.kB5,Interpolant:()=>r._C8,InterpolateDiscrete:()=>r.Syv,InterpolateLinear:()=>r.NMF,InterpolateSmooth:()=>r.pIN,InvertStencilOp:()=>r.eMJ,KeepStencilOp:()=>r.x5V,KeyframeTrack:()=>r.tUh,LOD:()=>r.z8B,LatheGeometry:()=>r.p7y,Layers:()=>r.S9g,LessCompare:()=>r.D67,LessDepth:()=>r.Zr5,LessEqualCompare:()=>r.M$G,LessEqualDepth:()=>r.vCF,LessEqualStencilFunc:()=>r.yt0,LessStencilFunc:()=>r.uXU,Light:()=>r._kC,LightProbe:()=>r.lk7,Line:()=>r.x12,Line3:()=>r.Zzh,LineBasicMaterial:()=>r.nls,LineCurve:()=>r.g_z,LineCurve3:()=>r.U7,LineDashedMaterial:()=>r.FT0,LineLoop:()=>r.blk,LineSegments:()=>r.ejS,LinearFilter:()=>r.wem,LinearInterpolant:()=>r.lfu,LinearMipMapLinearFilter:()=>r.FDw,LinearMipMapNearestFilter:()=>r.lRj,LinearMipmapLinearFilter:()=>r.D1R,LinearMipmapNearestFilter:()=>r.qyh,LinearSRGBColorSpace:()=>r.GUF,LinearToneMapping:()=>r.EoG,LinearTransfer:()=>r.l6D,Loader:()=>r.aNw,LoaderUtils:()=>r.Zp0,LoadingManager:()=>r.lLk,LoopOnce:()=>r.jAl,LoopPingPong:()=>r.uEv,LoopRepeat:()=>r.YKA,LuminanceAlphaFormat:()=>r.cRx,LuminanceFormat:()=>r.Y8D,MOUSE:()=>r.RsA,Material:()=>r.F5T,MaterialLoader:()=>r.u7G,MathUtils:()=>r.M8C,Matrix2:()=>r.UcC,Matrix3:()=>r.Vkp,Matrix4:()=>r.yGw,MaxEquation:()=>r.Sm8,Mesh:()=>r.Kj0,MeshBasicMaterial:()=>r.vBJ,MeshDepthMaterial:()=>r.lRF,MeshDistanceMaterial:()=>r.Lun,MeshLambertMaterial:()=>r.YBo,MeshMatcapMaterial:()=>r.kaV,MeshNormalMaterial:()=>r.RSm,MeshPhongMaterial:()=>r.xoR,MeshPhysicalMaterial:()=>r.EJi,MeshStandardMaterial:()=>r.Wid,MeshToonMaterial:()=>r.IKL,MinEquation:()=>r.r_,MirroredRepeatWrapping:()=>r.OoA,MixOperation:()=>r.qhX,MultiplyBlending:()=>r.M5h,MultiplyOperation:()=>r.Ns1,NearestFilter:()=>r.TyD,NearestMipMapLinearFilter:()=>r.vZf,NearestMipMapNearestFilter:()=>r.HTd,NearestMipmapLinearFilter:()=>r.aH4,NearestMipmapNearestFilter:()=>r.YLQ,NeutralToneMapping:()=>r.ORg,NeverCompare:()=>r.xoQ,NeverDepth:()=>r.BVF,NeverStencilFunc:()=>r.MyG,NoBlending:()=>r.jFi,NoColorSpace:()=>r.aCh,NoToneMapping:()=>r.uL9,NormalAnimationBlendMode:()=>r.IFH,NormalBlending:()=>r.bdR,NotEqualCompare:()=>r.O78,NotEqualDepth:()=>r.M6v,NotEqualStencilFunc:()=>r.RvT,NumberKeyframeTrack:()=>r.dUE,Object3D:()=>r.Tme,ObjectLoader:()=>r.Gql,ObjectSpaceNormalMap:()=>r.PA7,OctahedronGeometry:()=>r.pQR,OneFactor:()=>r.ghN,OneMinusConstantAlphaFactor:()=>r.NKc,OneMinusConstantColorFactor:()=>r.Cy,OneMinusDstAlphaFactor:()=>r.Hy8,OneMinusDstColorFactor:()=>r.Wpd,OneMinusSrcAlphaFactor:()=>r.LgZ,OneMinusSrcColorFactor:()=>r.iWC,OrthographicCamera:()=>r.iKG,PCFShadowMap:()=>r._iA,PCFSoftShadowMap:()=>r.ntZ,PMREMGenerator:()=>T,Path:()=>r.y$t,PerspectiveCamera:()=>r.cPb,Plane:()=>r.JOQ,PlaneGeometry:()=>r._12,PlaneHelper:()=>r.tJx,PointLight:()=>r.cek,PointLightHelper:()=>r.xG9,Points:()=>r.woe,PointsMaterial:()=>r.UY4,PolarGridHelper:()=>r.aq0,PolyhedronGeometry:()=>r.Uol,PositionalAudio:()=>r.VYz,PropertyBinding:()=>r.iUV,PropertyMixer:()=>r.tf,QuadraticBezierCurve:()=>r.ZQ6,QuadraticBezierCurve3:()=>r.mXe,Quaternion:()=>r._fP,QuaternionKeyframeTrack:()=>r.iLg,QuaternionLinearInterpolant:()=>r.zbs,RED_GREEN_RGTC2_Format:()=>r.ZTh,RED_RGTC1_Format:()=>r.HdW,REVISION:()=>r.UZH,RGBADepthPacking:()=>r.mSO,RGBAFormat:()=>r.wk1,RGBAIntegerFormat:()=>r.E2K,RGBA_ASTC_10x10_Format:()=>r.FUD,RGBA_ASTC_10x5_Format:()=>r.pKu,RGBA_ASTC_10x6_Format:()=>r.GG6,RGBA_ASTC_10x8_Format:()=>r.Gih,RGBA_ASTC_12x10_Format:()=>r.iiP,RGBA_ASTC_12x12_Format:()=>r.SvJ,RGBA_ASTC_4x4_Format:()=>r.ptH,RGBA_ASTC_5x4_Format:()=>r.jZA,RGBA_ASTC_5x5_Format:()=>r.y2t,RGBA_ASTC_6x5_Format:()=>r.gi4,RGBA_ASTC_6x6_Format:()=>r.Djp,RGBA_ASTC_8x5_Format:()=>r.BG$,RGBA_ASTC_8x6_Format:()=>r.NYV,RGBA_ASTC_8x8_Format:()=>r.xJs,RGBA_BPTC_Format:()=>r.bsb,RGBA_ETC2_EAC_Format:()=>r.ekQ,RGBA_PVRTC_2BPPV1_Format:()=>r.CaW,RGBA_PVRTC_4BPPV1_Format:()=>r.eaV,RGBA_S3TC_DXT1_Format:()=>r.BFQ,RGBA_S3TC_DXT3_Format:()=>r.v3W,RGBA_S3TC_DXT5_Format:()=>r.ILR,RGBDepthPacking:()=>r._7h,RGBFormat:()=>r.UCm,RGBIntegerFormat:()=>r.F5G,RGB_BPTC_SIGNED_Format:()=>r.f2y,RGB_BPTC_UNSIGNED_Format:()=>r.QO2,RGB_ETC1_Format:()=>r.fto,RGB_ETC2_Format:()=>r.l0P,RGB_PVRTC_2BPPV1_Format:()=>r.vCx,RGB_PVRTC_4BPPV1_Format:()=>r._AM,RGB_S3TC_DXT1_Format:()=>r.wuA,RGDepthPacking:()=>r.PzK,RGFormat:()=>r.av9,RGIntegerFormat:()=>r.CtA,RawShaderMaterial:()=>r.FIo,Ray:()=>r.zHn,Raycaster:()=>r.iMs,RectAreaLight:()=>r.T_f,RedFormat:()=>r.hEm,RedIntegerFormat:()=>r.D9w,ReinhardToneMapping:()=>r.CdI,RenderTarget:()=>r.ACn,RenderTarget3D:()=>r.ppL,RenderTargetArray:()=>r.xTL,RepeatWrapping:()=>r.rpg,ReplaceStencilOp:()=>r.ce8,ReverseSubtractEquation:()=>r.rOj,RingGeometry:()=>r.o8S,SIGNED_RED_GREEN_RGTC2_Format:()=>r.lGU,SIGNED_RED_RGTC1_Format:()=>r.vuL,SRGBColorSpace:()=>r.KI_,SRGBTransfer:()=>r.j17,Scene:()=>r.xsS,ShaderChunk:()=>o,ShaderLib:()=>l,ShaderMaterial:()=>r.jyz,ShadowMaterial:()=>r.Tn7,Shape:()=>r.bnF,ShapeGeometry:()=>r.oa8,ShapePath:()=>r.T_1,ShapeUtils:()=>r.iDF,ShortType:()=>r.iAb,Skeleton:()=>r.OdW,SkeletonHelper:()=>r._YX,SkinnedMesh:()=>r.TUv,Source:()=>r.Hw6,Sphere:()=>r.aLr,SphereGeometry:()=>r.xo$,Spherical:()=>r.$V,SphericalHarmonics3:()=>r.lDi,SplineCurve:()=>r.gti,SpotLight:()=>r.PMe,SpotLightHelper:()=>r.FvO,Sprite:()=>r.jyi,SpriteMaterial:()=>r.xeV,SrcAlphaFactor:()=>r.k74,SrcAlphaSaturateFactor:()=>r.RlZ,SrcColorFactor:()=>r.KhW,StaticCopyUsage:()=>r.HgB,StaticDrawUsage:()=>r.W2J,StaticReadUsage:()=>r.JWc,StereoCamera:()=>r.u37,StreamCopyUsage:()=>r.Z6B,StreamDrawUsage:()=>r.QZ1,StreamReadUsage:()=>r.Ir4,StringKeyframeTrack:()=>r.NwF,SubtractEquation:()=>r.Wbm,SubtractiveBlending:()=>r.N4l,TOUCH:()=>r.QmN,TangentSpaceNormalMap:()=>r.IOt,TetrahedronGeometry:()=>r.H$k,Texture:()=>r.xEZ,TextureLoader:()=>r.dpR,TextureUtils:()=>r.Oau,TimestampQuery:()=>r.eS_,TorusGeometry:()=>r.XvJ,TorusKnotGeometry:()=>r.FE5,Triangle:()=>r.CJI,TriangleFanDrawMode:()=>r.z$h,TriangleStripDrawMode:()=>r.UlW,TrianglesDrawMode:()=>r.WwZ,TubeGeometry:()=>r.WXh,UVMapping:()=>r.xfE,Uint16BufferAttribute:()=>r.qlB,Uint32BufferAttribute:()=>r.lCJ,Uint8BufferAttribute:()=>r.WTc,Uint8ClampedBufferAttribute:()=>r.rAo,Uniform:()=>r.xWb,UniformsGroup:()=>r.gH0,UniformsLib:()=>s,UniformsUtils:()=>r.rDY,UnsignedByteType:()=>r.ywz,UnsignedInt248Type:()=>r.wJv,UnsignedInt5999Type:()=>r.tQZ,UnsignedIntType:()=>r.JQ4,UnsignedShort4444Type:()=>r.k0A,UnsignedShort5551Type:()=>r.irR,UnsignedShortType:()=>r.LsT,VSMShadowMap:()=>r.dwk,Vector2:()=>r.FM8,Vector3:()=>r.Pa4,Vector4:()=>r.Ltg,VectorKeyframeTrack:()=>r.yC1,VideoFrameTexture:()=>r.v2s,VideoTexture:()=>r.fO1,WebGL3DRenderTarget:()=>r.Ywn,WebGLArrayRenderTarget:()=>r.GVz,WebGLCoordinateSystem:()=>r._RZ,WebGLCubeRenderTarget:()=>r.oAp,WebGLRenderTarget:()=>r.dd2,WebGLRenderer:()=>tE,WebGLUtils:()=>tv,WebGPUCoordinateSystem:()=>r.JCZ,WebXRController:()=>r.NiX,WireframeGeometry:()=>r.Uk6,WrapAroundEnding:()=>r._sL,ZeroCurvatureEnding:()=>r.Pnf,ZeroFactor:()=>r.c8b,ZeroSlopeEnding:()=>r._lf,ZeroStencilOp:()=>r.ad5,createCanvasElement:()=>r.O5A});var r=n(5300);function i(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function a(e){let t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);let r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){let e=t.get(n);(!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version});return}let i=t.get(n);if(void 0===i)t.set(n,function(t,n){let r;let i=t.array,a=t.usage,o=i.byteLength,s=e.createBuffer();if(e.bindBuffer(n,s),e.bufferData(n,i,a),t.onUploadCallback(),i instanceof Float32Array)r=e.FLOAT;else if(i instanceof Uint16Array)r=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)r=e.SHORT;else if(i instanceof Uint32Array)r=e.UNSIGNED_INT;else if(i instanceof Int32Array)r=e.INT;else if(i instanceof Int8Array)r=e.BYTE;else if(i instanceof Uint8Array)r=e.UNSIGNED_BYTE;else if(i instanceof Uint8ClampedArray)r=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);return{buffer:s,type:r,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){let i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){let n=a[t],r=a[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):a[++t]=r}a.length=t+1;for(let t=0,n=a.length;t<n;t++){let n=a[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}let o={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		#else\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},s={common:{diffuse:{value:new r.Ilk(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new r.Vkp},alphaMap:{value:null},alphaMapTransform:{value:new r.Vkp},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new r.Vkp}},envmap:{envMap:{value:null},envMapRotation:{value:new r.Vkp},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new r.Vkp}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new r.Vkp}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new r.Vkp},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new r.Vkp},normalScale:{value:new r.FM8(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new r.Vkp},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new r.Vkp}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new r.Vkp}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new r.Vkp}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.Ilk(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new r.Ilk(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new r.Vkp},alphaTest:{value:0},uvTransform:{value:new r.Vkp}},sprite:{diffuse:{value:new r.Ilk(0xffffff)},opacity:{value:1},center:{value:new r.FM8(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new r.Vkp},alphaMap:{value:null},alphaMapTransform:{value:new r.Vkp},alphaTest:{value:0}}},l={basic:{uniforms:(0,r.Rhp)([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.fog]),vertexShader:o.meshbasic_vert,fragmentShader:o.meshbasic_frag},lambert:{uniforms:(0,r.Rhp)([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.fog,s.lights,{emissive:{value:new r.Ilk(0)}}]),vertexShader:o.meshlambert_vert,fragmentShader:o.meshlambert_frag},phong:{uniforms:(0,r.Rhp)([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.fog,s.lights,{emissive:{value:new r.Ilk(0)},specular:{value:new r.Ilk(1118481)},shininess:{value:30}}]),vertexShader:o.meshphong_vert,fragmentShader:o.meshphong_frag},standard:{uniforms:(0,r.Rhp)([s.common,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.roughnessmap,s.metalnessmap,s.fog,s.lights,{emissive:{value:new r.Ilk(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:o.meshphysical_vert,fragmentShader:o.meshphysical_frag},toon:{uniforms:(0,r.Rhp)([s.common,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.gradientmap,s.fog,s.lights,{emissive:{value:new r.Ilk(0)}}]),vertexShader:o.meshtoon_vert,fragmentShader:o.meshtoon_frag},matcap:{uniforms:(0,r.Rhp)([s.common,s.bumpmap,s.normalmap,s.displacementmap,s.fog,{matcap:{value:null}}]),vertexShader:o.meshmatcap_vert,fragmentShader:o.meshmatcap_frag},points:{uniforms:(0,r.Rhp)([s.points,s.fog]),vertexShader:o.points_vert,fragmentShader:o.points_frag},dashed:{uniforms:(0,r.Rhp)([s.common,s.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:o.linedashed_vert,fragmentShader:o.linedashed_frag},depth:{uniforms:(0,r.Rhp)([s.common,s.displacementmap]),vertexShader:o.depth_vert,fragmentShader:o.depth_frag},normal:{uniforms:(0,r.Rhp)([s.common,s.bumpmap,s.normalmap,s.displacementmap,{opacity:{value:1}}]),vertexShader:o.meshnormal_vert,fragmentShader:o.meshnormal_frag},sprite:{uniforms:(0,r.Rhp)([s.sprite,s.fog]),vertexShader:o.sprite_vert,fragmentShader:o.sprite_frag},background:{uniforms:{uvTransform:{value:new r.Vkp},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:o.background_vert,fragmentShader:o.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new r.Vkp}},vertexShader:o.backgroundCube_vert,fragmentShader:o.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:o.cube_vert,fragmentShader:o.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:o.equirect_vert,fragmentShader:o.equirect_frag},distanceRGBA:{uniforms:(0,r.Rhp)([s.common,s.displacementmap,{referencePosition:{value:new r.Pa4},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:o.distanceRGBA_vert,fragmentShader:o.distanceRGBA_frag},shadow:{uniforms:(0,r.Rhp)([s.lights,s.fog,{color:{value:new r.Ilk(0)},opacity:{value:1}}]),vertexShader:o.shadow_vert,fragmentShader:o.shadow_frag}};l.physical={uniforms:(0,r.Rhp)([l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new r.Vkp},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new r.Vkp},clearcoatNormalScale:{value:new r.FM8(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new r.Vkp},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new r.Vkp},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new r.Vkp},sheen:{value:0},sheenColor:{value:new r.Ilk(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new r.Vkp},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new r.Vkp},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new r.Vkp},transmissionSamplerSize:{value:new r.FM8},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new r.Vkp},attenuationDistance:{value:0},attenuationColor:{value:new r.Ilk(0)},specularColor:{value:new r.Ilk(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new r.Vkp},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new r.Vkp},anisotropyVector:{value:new r.FM8},anisotropyMap:{value:null},anisotropyMapTransform:{value:new r.Vkp}}]),vertexShader:o.meshphysical_vert,fragmentShader:o.meshphysical_frag};let u={r:0,b:0,g:0},c=new r.USm,d=new r.yGw;function h(e,t,n,i,a,o,s){let h,f;let p=new r.Ilk(0),m=+(!0!==o),g=null,v=0,y=null;function b(e){let r=!0===e.isScene?e.background:null;return r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r)),r}function x(t,n){t.getRGB(u,(0,r.oDz)(e)),i.buffers.color.setClear(u.r,u.g,u.b,n,s)}return{getClearColor:function(){return p},setClearColor:function(e,t=1){p.set(e),x(p,m=t)},getClearAlpha:function(){return m},setClearAlpha:function(e){x(p,m=e)},render:function(t){let n=!1,r=b(t);null===r?x(p,m):r&&r.isColor&&(x(r,1),n=!0);let a=e.xr.getEnvironmentBlendMode();"additive"===a?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){let i=b(n);i&&(i.isCubeTexture||i.mapping===r.g8_)?(void 0===f&&((f=new r.Kj0(new r.DvJ(1,1,1),new r.jyz({name:"BackgroundCubeMaterial",uniforms:(0,r.dwf)(l.backgroundCube.uniforms),vertexShader:l.backgroundCube.vertexShader,fragmentShader:l.backgroundCube.fragmentShader,side:r._Li,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(f)),c.copy(n.backgroundRotation),c.x*=-1,c.y*=-1,c.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(c.y*=-1,c.z*=-1),f.material.uniforms.envMap.value=i,f.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,f.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(d.makeRotationFromEuler(c)),f.material.toneMapped=r.epp.getTransfer(i.colorSpace)!==r.j17,(g!==i||v!==i.version||y!==e.toneMapping)&&(f.material.needsUpdate=!0,g=i,v=i.version,y=e.toneMapping),f.layers.enableAll(),t.unshift(f,f.geometry,f.material,0,0,null)):i&&i.isTexture&&(void 0===h&&((h=new r.Kj0(new r._12(2,2),new r.jyz({name:"BackgroundMaterial",uniforms:(0,r.dwf)(l.background.uniforms),vertexShader:l.background.vertexShader,fragmentShader:l.background.fragmentShader,side:r.Wl3,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(h)),h.material.uniforms.t2D.value=i,h.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,h.material.toneMapped=r.epp.getTransfer(i.colorSpace)!==r.j17,!0===i.matrixAutoUpdate&&i.updateMatrix(),h.material.uniforms.uvTransform.value.copy(i.matrix),(g!==i||v!==i.version||y!==e.toneMapping)&&(h.material.needsUpdate=!0,g=i,v=i.version,y=e.toneMapping),h.layers.enableAll(),t.unshift(h,h.geometry,h.material,0,0,null))},dispose:function(){void 0!==f&&(f.geometry.dispose(),f.material.dispose(),f=void 0),void 0!==h&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}}}function f(e,t){let n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},a=c(null),o=a,s=!1;function l(t){return e.bindVertexArray(t)}function u(t){return e.deleteVertexArray(t)}function c(e){let t=[],r=[],i=[];for(let e=0;e<n;e++)t[e]=0,r[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function d(){let e=o.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){f(e,0)}function f(t,n){let r=o.newAttributes,i=o.enabledAttributes,a=o.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function p(){let t=o.newAttributes,n=o.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function m(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function g(){v(),s=!0,o!==a&&l((o=a).object)}function v(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function(n,a,u,g,v){let y=!1,b=function(t,n,r){let a=!0===r.wireframe,o=i[t.id];void 0===o&&(o={},i[t.id]=o);let s=o[n.id];void 0===s&&(s={},o[n.id]=s);let l=s[a];return void 0===l&&(l=c(e.createVertexArray()),s[a]=l),l}(g,u,a);o!==b&&l((o=b).object),(y=function(e,t,n,r){let i=o.attributes,a=t.attributes,s=0,l=n.getAttributes();for(let t in l)if(l[t].location>=0){let n=i[t],r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n||n.attribute!==r||r&&n.data!==r.data)return!0;s++}return o.attributesNum!==s||o.index!==r}(n,g,u,v))&&function(e,t,n,r){let i={},a=t.attributes,s=0,l=n.getAttributes();for(let t in l)if(l[t].location>=0){let n=a[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));let r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,s++}o.attributes=i,o.attributesNum=s,o.index=r}(n,g,u,v),null!==v&&t.update(v,e.ELEMENT_ARRAY_BUFFER),(y||s)&&(s=!1,function(n,i,a,o){d();let s=o.attributes,l=a.getAttributes(),u=i.defaultAttributeValues;for(let i in l){let a=l[i];if(a.location>=0){let l=s[i];if(void 0===l&&("instanceMatrix"===i&&n.instanceMatrix&&(l=n.instanceMatrix),"instanceColor"===i&&n.instanceColor&&(l=n.instanceColor)),void 0!==l){let i=l.normalized,s=l.itemSize,u=t.get(l);if(void 0===u)continue;let c=u.buffer,d=u.type,p=u.bytesPerElement,g=d===e.INT||d===e.UNSIGNED_INT||l.gpuType===r.Kz5;if(l.isInterleavedBufferAttribute){let t=l.data,r=t.stride,u=l.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)f(a.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<a.locationSize;e++)h(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)m(a.location+e,s/a.locationSize,d,i,r*p,(u+s/a.locationSize*e)*p,g)}else{if(l.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)f(a.location+e,l.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=l.meshPerAttribute*l.count)}else for(let e=0;e<a.locationSize;e++)h(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)m(a.location+e,s/a.locationSize,d,i,s*p,s/a.locationSize*e*p,g)}}else if(void 0!==u){let t=u[i];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(a.location,t);break;case 3:e.vertexAttrib3fv(a.location,t);break;case 4:e.vertexAttrib4fv(a.location,t);break;default:e.vertexAttrib1fv(a.location,t)}}}}p()}(n,a,u,g),null!==v&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(v).buffer))},reset:g,resetDefaultState:v,dispose:function(){for(let e in g(),i){let t=i[e];for(let e in t){let n=t[e];for(let e in n)u(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;let t=i[e.id];for(let e in t){let n=t[e];for(let e in n)u(n[e].object),delete n[e];delete t[e]}delete i[e.id]},releaseStatesOfProgram:function(e){for(let t in i){let n=i[t];if(void 0===n[e.id])continue;let r=n[e.id];for(let e in r)u(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:h,disableUnusedAttributes:p}}function p(e,t,n){let r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);let o=0;for(let e=0;e<a;e++)o+=i[e];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,a,o,s){if(0===o)return;let l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],a[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,a,0,s,0,o);let t=0;for(let e=0;e<o;e++)t+=a[e]*s[e];n.update(t,r,1)}}}function m(e,t,n,i){let a;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp",l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);let u=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==a)return a;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");a=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:o,textureFormatReadable:function(t){return t===r.wk1||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){let a=n===r.cLu&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return n===r.ywz||i.convert(n)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)||n===r.VzW||!!a},precision:s,logarithmicDepthBuffer:u,reverseDepthBuffer:c,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function g(e){let t=this,n=null,i=0,a=!1,o=!1,s=new r.JOQ,l=new r.Vkp,u={value:null,needsUpdate:!1};function c(e,n,r,i){let a=null!==e?e.length:0,o=null;if(0!==a){if(o=u.value,!0!==i||null===o){let t=r+4*a,i=n.matrixWorldInverse;l.getNormalMatrix(i),(null===o||o.length<t)&&(o=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(i,l),s.normal.toArray(o,n),o[n+3]=s.constant}u.value=o,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,o}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let n=0!==e.length||t||0!==i||a;return a=t,i=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(r,s,l){let d=r.clippingPlanes,h=r.clipIntersection,f=r.clipShadows,p=e.get(r);if(a&&null!==d&&0!==d.length&&(!o||f)){let e=o?0:i,t=4*e,r=p.clippingState||null;u.value=r,r=c(d,s,t,l);for(let e=0;e!==t;++e)r[e]=n[e];p.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}else o?c(null):(u.value!==n&&(u.value=n,u.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0)}}function v(e){let t=new WeakMap;function n(e,t){return t===r.dSO?e.mapping=r.fY$:t===r.Bf4&&(e.mapping=r.vxC),e}function i(e){let n=e.target;n.removeEventListener("dispose",i);let r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(a){if(a&&a.isTexture){let o=a.mapping;if(o===r.dSO||o===r.Bf4){if(t.has(a))return n(t.get(a).texture,a.mapping);{let o=a.image;if(!o||!(o.height>0))return null;{let s=new r.oAp(o.height);return s.fromEquirectangularTexture(e,a),t.set(a,s),a.addEventListener("dispose",i),n(s.texture,a.mapping)}}}}return a},dispose:function(){t=new WeakMap}}}let y=[.125,.215,.35,.446,.526,.582],b=new r.iKG,x=new r.Ilk,_=null,w=0,S=0,A=!1,M=(1+Math.sqrt(5))/2,E=1/M,C=[new r.Pa4(-M,E,0),new r.Pa4(M,E,0),new r.Pa4(-E,0,M),new r.Pa4(E,0,M),new r.Pa4(0,M,-E),new r.Pa4(0,M,E),new r.Pa4(-1,1,-1),new r.Pa4(1,1,-1),new r.Pa4(-1,1,1),new r.Pa4(1,1,1)];class T{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){_=this._renderer.getRenderTarget(),w=this._renderer.getActiveCubeFace(),S=this._renderer.getActiveMipmapLevel(),A=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=B(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=I(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_,w,S),this._renderer.xr.enabled=A,e.scissorTest=!1,P(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===r.fY$||e.mapping===r.vxC?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_=this._renderer.getRenderTarget(),w=this._renderer.getActiveCubeFace(),S=this._renderer.getActiveMipmapLevel(),A=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:r.wem,minFilter:r.wem,generateMipmaps:!1,type:r.cLu,format:r.wk1,colorSpace:r.GUF,depthBuffer:!1},i=R(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=R(e,t,n);let{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],i=[],a=e,o=e-4+1+y.length;for(let s=0;s<o;s++){let o=Math.pow(2,a);n.push(o);let l=1/o;s>e-4?l=y[s-e+4-1]:0===s&&(l=0),i.push(l);let u=1/(o-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],f=new Float32Array(108),p=new Float32Array(72),m=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];f.set(r,18*e),p.set(h,12*e);let i=[e,e,e,e,e,e];m.set(i,6*e)}let g=new r.u9r;g.setAttribute("position",new r.TlE(f,3)),g.setAttribute("uv",new r.TlE(p,2)),g.setAttribute("faceIndex",new r.TlE(m,1)),t.push(g),a>4&&a--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){let i=new Float32Array(20),a=new r.Pa4(0,1,0);return new r.jyz({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:L(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:r.jFi,depthTest:!1,depthWrite:!1})}(i,e,t)}return i}_compileMaterial(e){let t=new r.Kj0(this._lodPlanes[0],e);this._renderer.compile(t,b)}_sceneToCubeUV(e,t,n,i){let a=new r.cPb(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(x),l.toneMapping=r.uL9,l.autoClear=!1;let d=new r.vBJ({name:"PMREM.Background",side:r._Li,depthWrite:!1,depthTest:!1}),h=new r.Kj0(new r.DvJ,d),f=!1,p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,f=!0):(d.color.copy(x),f=!0);for(let t=0;t<6;t++){let n=t%3;0===n?(a.up.set(0,o[t],0),a.lookAt(s[t],0,0)):1===n?(a.up.set(0,0,o[t]),a.lookAt(0,s[t],0)):(a.up.set(0,o[t],0),a.lookAt(0,0,s[t]));let r=this._cubeSize;P(i,n*r,t>2?r:0,r,r),l.setRenderTarget(i),f&&l.render(h,a),l.render(e,a)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=c,l.autoClear=u,e.background=p}_textureToCubeUV(e,t){let n=this._renderer,i=e.mapping===r.fY$||e.mapping===r.vxC;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=B()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=I());let a=i?this._cubemapMaterial:this._equirectMaterial,o=new r.Kj0(this._lodPlanes[0],a);a.uniforms.envMap.value=e;let s=this._cubeSize;P(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(o,b)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let t=1;t<r;t++){let n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=C[(r-t-1)%C.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,r,i){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,i,a,o,s){let l=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");let c=new r.Kj0(this._lodPlanes[i],u),d=u.uniforms,h=this._sizeLods[n]-1,f=isFinite(a)?Math.PI/(2*h):2*Math.PI/39,p=a/f,m=isFinite(a)?1+Math.floor(3*p):20;m>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);let g=[],v=0;for(let e=0;e<20;++e){let t=e/p,n=Math.exp(-t*t/2);g.push(n),0===e?v+=n:e<m&&(v+=2*n)}for(let e=0;e<g.length;e++)g[e]=g[e]/v;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=g,d.latitudinal.value="latitudinal"===o,s&&(d.poleAxis.value=s);let{_lodMax:y}=this;d.dTheta.value=f,d.mipInt.value=y-n;let x=this._sizeLods[i],_=4*(this._cubeSize-x);P(t,3*x*(i>y-4?i-y+4:0),_,3*x,2*x),l.setRenderTarget(t),l.render(c,b)}}function R(e,t,n){let i=new r.dd2(e,t,n);return i.texture.mapping=r.g8_,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function P(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function I(){return new r.jyz({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:L(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:r.jFi,depthTest:!1,depthWrite:!1})}function B(){return new r.jyz({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:L(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:r.jFi,depthTest:!1,depthWrite:!1})}function L(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function k(e){let t=new WeakMap,n=null;function i(e){let n=e.target;n.removeEventListener("dispose",i);let r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(a){if(a&&a.isTexture){let o=a.mapping,s=o===r.dSO||o===r.Bf4,l=o===r.fY$||o===r.vxC;if(s||l){let r=t.get(a),o=void 0!==r?r.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==o)return null===n&&(n=new T(e)),(r=s?n.fromEquirectangular(a,r):n.fromCubemap(a,r)).texture.pmremVersion=a.pmremVersion,t.set(a,r),r.texture;if(void 0!==r)return r.texture;{let o=a.image;return s&&o&&o.height>0||l&&o&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(o)?(null===n&&(n=new T(e)),(r=s?n.fromEquirectangular(a):n.fromCubemap(a)).texture.pmremVersion=a.pmremVersion,t.set(a,r),a.addEventListener("dispose",i),r.texture):null}}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function D(e){let t={};function n(n){let r;if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){let t=n(e);return null===t&&(0,r.O4K)("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function N(e,t,n,i){let a={},o=new WeakMap;function s(e){let r=e.target;for(let e in null!==r.index&&t.remove(r.index),r.attributes)t.remove(r.attributes[e]);r.removeEventListener("dispose",s),delete a[r.id];let l=o.get(r);l&&(t.remove(l),o.delete(r)),i.releaseStatesOfGeometry(r),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,n.memory.geometries--}function l(e){let n=[],i=e.index,a=e.attributes.position,s=0;if(null!==i){let e=i.array;s=i.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===a)return;let e=a.array;s=a.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let l=new((0,r.H7L)(n)?r.lCJ:r.qlB)(n,1);l.version=s;let u=o.get(e);u&&t.remove(u),o.set(e,l)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener("dispose",s),a[t.id]=!0,n.memory.geometries++),t},update:function(n){let r=n.attributes;for(let n in r)t.update(r[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){let t=o.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&l(e)}else l(e);return o.get(e)}}}function F(e,t,n){let r,i,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(r,o,i,t*a,s),n.update(o,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*a),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(e,a,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,o);let s=0;for(let e=0;e<o;e++)s+=a[e];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,s,l,u){if(0===l)return;let c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)o(e[t]/a,s[t],u[t]);else{c.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,u,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*u[e];n.update(t,r,1)}}}function O(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=n/3*i;break;case e.LINES:t.lines+=n/2*i;break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function U(e,t,n){let i=new WeakMap,a=new r.Ltg;return{update:function(o,s,l){let u=o.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,d=void 0!==c?c.length:0,h=i.get(s);if(void 0===h||h.count!==d){void 0!==h&&h.texture.dispose();let e=void 0!==s.morphAttributes.position,n=void 0!==s.morphAttributes.normal,o=void 0!==s.morphAttributes.color,l=s.morphAttributes.position||[],u=s.morphAttributes.normal||[],c=s.morphAttributes.color||[],f=0;!0===e&&(f=1),!0===n&&(f=2),!0===o&&(f=3);let p=s.attributes.position.count*f,m=1;p>t.maxTextureSize&&(m=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);let g=new Float32Array(p*m*4*d),v=new r.p3g(g,p,m,d);v.type=r.VzW,v.needsUpdate=!0;let y=4*f;for(let t=0;t<d;t++){let r=l[t],i=u[t],s=c[t],d=p*m*4*t;for(let t=0;t<r.count;t++){let l=t*y;!0===e&&(a.fromBufferAttribute(r,t),g[d+l+0]=a.x,g[d+l+1]=a.y,g[d+l+2]=a.z,g[d+l+3]=0),!0===n&&(a.fromBufferAttribute(i,t),g[d+l+4]=a.x,g[d+l+5]=a.y,g[d+l+6]=a.z,g[d+l+7]=0),!0===o&&(a.fromBufferAttribute(s,t),g[d+l+8]=a.x,g[d+l+9]=a.y,g[d+l+10]=a.z,g[d+l+11]=4===s.itemSize?a.w:1)}}h={count:d,texture:v,size:new r.FM8(p,m)},i.set(s,h),s.addEventListener("dispose",function e(){v.dispose(),i.delete(s),s.removeEventListener("dispose",e)})}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let t=0;for(let e=0;e<u.length;e++)t+=u[e];let n=s.morphTargetsRelative?1:1-t;l.getUniforms().setValue(e,"morphTargetBaseInfluence",n),l.getUniforms().setValue(e,"morphTargetInfluences",u)}l.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function z(e,t,n,r){let i=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){let s=r.render.frame,l=o.geometry,u=t.get(o,l);if(i.get(u)!==s&&(t.update(u),i.set(u,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){let e=o.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return u},dispose:function(){i=new WeakMap}}}let H=new r.xEZ,G=new r.$YQ(1,1),V=new r.p3g,j=new r.JUT,W=new r.BtG,X=[],J=[],Y=new Float32Array(16),K=new Float32Array(9),q=new Float32Array(4);function Q(e,t,n){let r=e[0];if(r<=0||r>0)return e;let i=t*n,a=X[i];if(void 0===a&&(a=new Float32Array(i),X[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function Z(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function $(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ee(e,t){let n=J[t];void 0===n&&(n=new Int32Array(t),J[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function et(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function en(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Z(n,t))return;e.uniform2fv(this.addr,t),$(n,t)}}function er(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Z(n,t))return;e.uniform3fv(this.addr,t),$(n,t)}}function ei(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Z(n,t))return;e.uniform4fv(this.addr,t),$(n,t)}}function ea(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(Z(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),$(n,t)}else{if(Z(n,r))return;q.set(r),e.uniformMatrix2fv(this.addr,!1,q),$(n,r)}}function eo(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(Z(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),$(n,t)}else{if(Z(n,r))return;K.set(r),e.uniformMatrix3fv(this.addr,!1,K),$(n,r)}}function es(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(Z(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),$(n,t)}else{if(Z(n,r))return;Y.set(r),e.uniformMatrix4fv(this.addr,!1,Y),$(n,r)}}function el(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function eu(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Z(n,t))return;e.uniform2iv(this.addr,t),$(n,t)}}function ec(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Z(n,t))return;e.uniform3iv(this.addr,t),$(n,t)}}function ed(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Z(n,t))return;e.uniform4iv(this.addr,t),$(n,t)}}function eh(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function ef(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Z(n,t))return;e.uniform2uiv(this.addr,t),$(n,t)}}function ep(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Z(n,t))return;e.uniform3uiv(this.addr,t),$(n,t)}}function em(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Z(n,t))return;e.uniform4uiv(this.addr,t),$(n,t)}}function eg(e,t,n){let i;let a=this.cache,o=n.allocateTextureUnit();a[0]!==o&&(e.uniform1i(this.addr,o),a[0]=o),this.type===e.SAMPLER_2D_SHADOW?(G.compareFunction=r.M$G,i=G):i=H,n.setTexture2D(t||i,o)}function ev(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||j,i)}function ey(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||W,i)}function eb(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||V,i)}function ex(e,t){e.uniform1fv(this.addr,t)}function e_(e,t){let n=Q(t,this.size,2);e.uniform2fv(this.addr,n)}function ew(e,t){let n=Q(t,this.size,3);e.uniform3fv(this.addr,n)}function eS(e,t){let n=Q(t,this.size,4);e.uniform4fv(this.addr,n)}function eA(e,t){let n=Q(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function eM(e,t){let n=Q(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function eE(e,t){let n=Q(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function eC(e,t){e.uniform1iv(this.addr,t)}function eT(e,t){e.uniform2iv(this.addr,t)}function eR(e,t){e.uniform3iv(this.addr,t)}function eP(e,t){e.uniform4iv(this.addr,t)}function eI(e,t){e.uniform1uiv(this.addr,t)}function eB(e,t){e.uniform2uiv(this.addr,t)}function eL(e,t){e.uniform3uiv(this.addr,t)}function ek(e,t){e.uniform4uiv(this.addr,t)}function eD(e,t,n){let r=this.cache,i=t.length,a=ee(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),$(r,a));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||H,a[e])}function eN(e,t,n){let r=this.cache,i=t.length,a=ee(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),$(r,a));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||j,a[e])}function eF(e,t,n){let r=this.cache,i=t.length,a=ee(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),$(r,a));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||W,a[e])}function eO(e,t,n){let r=this.cache,i=t.length,a=ee(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),$(r,a));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||V,a[e])}class eU{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return et;case 35664:return en;case 35665:return er;case 35666:return ei;case 35674:return ea;case 35675:return eo;case 35676:return es;case 5124:case 35670:return el;case 35667:case 35671:return eu;case 35668:case 35672:return ec;case 35669:case 35673:return ed;case 5125:return eh;case 36294:return ef;case 36295:return ep;case 36296:return em;case 35678:case 36198:case 36298:case 36306:case 35682:return eg;case 35679:case 36299:case 36307:return ev;case 35680:case 36300:case 36308:case 36293:return ey;case 36289:case 36303:case 36311:case 36292:return eb}}(t.type)}}class ez{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ex;case 35664:return e_;case 35665:return ew;case 35666:return eS;case 35674:return eA;case 35675:return eM;case 35676:return eE;case 5124:case 35670:return eC;case 35667:case 35671:return eT;case 35668:case 35672:return eR;case 35669:case 35673:return eP;case 5125:return eI;case 36294:return eB;case 36295:return eL;case 36296:return ek;case 35678:case 36198:case 36298:case 36306:case 35682:return eD;case 35679:case 36299:case 36307:return eN;case 35680:case 36300:case 36308:case 36293:return eF;case 36289:case 36303:case 36311:case 36292:return eO}}(t.type)}}class eH{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,a=r.length;i!==a;++i){let a=r[i];a.setValue(e,t[a.id],n)}}}let eG=/(\w+)(\])?(\[|\.)?/g;function eV(e,t){e.seq.push(t),e.map[t.id]=t}class ej{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);!function(e,t,n){let r=e.name,i=r.length;for(eG.lastIndex=0;;){let a=eG.exec(r),o=eG.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){eV(n,void 0===u?new eU(s,e,t):new ez(s,e,t));break}{let e=n.map[s];void 0===e&&eV(n,e=new eH(s)),n=e}}}(n,i,this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){let a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}}function eW(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let eX=0,eJ=new r.Vkp;function eY(e,t,n){let r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let a=/ERROR: 0:(\d+)/.exec(i);if(!a)return i;{let r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){let i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}}let eK=new r.Pa4;function eq(e){return""!==e}function eQ(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function eZ(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let e$=/^[ \t]*#include +<([\w\d./]+)>/gm;function e0(e){return e.replace(e$,e2)}let e1=new Map;function e2(e,t){let n=o[t];if(void 0===n){let e=e1.get(t);if(void 0!==e)n=o[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e);else throw Error("Can not resolve #include <"+t+">")}return e0(n)}let e3=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e4(e){return e.replace(e3,e5)}function e5(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function e6(e){let t=`precision ${e.precision} float;
	precision ${e.precision} int;
	precision ${e.precision} sampler2D;
	precision ${e.precision} samplerCube;
	precision ${e.precision} sampler3D;
	precision ${e.precision} sampler2DArray;
	precision ${e.precision} sampler2DShadow;
	precision ${e.precision} samplerCubeShadow;
	precision ${e.precision} sampler2DArrayShadow;
	precision ${e.precision} isampler2D;
	precision ${e.precision} isampler3D;
	precision ${e.precision} isamplerCube;
	precision ${e.precision} isampler2DArray;
	precision ${e.precision} usampler2D;
	precision ${e.precision} usampler3D;
	precision ${e.precision} usamplerCube;
	precision ${e.precision} usampler2DArray;
	`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function e9(e,t,n,i){let a,s,l,u,c,d;let h=e.getContext(),f=n.defines,p=n.vertexShader,m=n.fragmentShader,g=(c="SHADOWMAP_TYPE_BASIC",n.shadowMapType===r._iA?c="SHADOWMAP_TYPE_PCF":n.shadowMapType===r.ntZ?c="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===r.dwk&&(c="SHADOWMAP_TYPE_VSM"),c),v=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case r.fY$:case r.vxC:t="ENVMAP_TYPE_CUBE";break;case r.g8_:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),y=(d="ENVMAP_MODE_REFLECTION",n.envMap&&n.envMapMode===r.vxC&&(d="ENVMAP_MODE_REFRACTION"),d),b=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case r.Ns1:t="ENVMAP_BLENDING_MULTIPLY";break;case r.qhX:t="ENVMAP_BLENDING_MIX";break;case r.NDo:t="ENVMAP_BLENDING_ADD"}return t}(n),x=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:1/t,maxMip:n}}(n),_=[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(eq).join("\n"),w=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(f),S=h.createProgram(),A=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w].filter(eq).join("\n")).length>0&&(a+="\n"),(s=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w].filter(eq).join("\n")).length>0&&(s+="\n")):(a=[e6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(eq).join("\n"),s=[e6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+y:"",n.envMap?"#define "+b:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==r.uL9?"#define TONE_MAPPING":"",n.toneMapping!==r.uL9?o.tonemapping_pars_fragment:"",n.toneMapping!==r.uL9?function(e,t){let n;switch(t){case r.EoG:n="Linear";break;case r.CdI:n="Reinhard";break;case r.YGz:n="Cineon";break;case r.LY2:n="ACESFilmic";break;case r.Bgp:n="AgX";break;case r.ORg:n="Neutral";break;case r.dZ3:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",o.colorspace_pars_fragment,function(e,t){let n=function(e){r.epp._getMatrix(eJ,r.epp.workingColorSpace,e);let t=`mat3( ${eJ.elements.map(e=>e.toFixed(4))} )`;switch(r.epp.getTransfer(e)){case r.l6D:return[t,"LinearTransferOETF"];case r.j17:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) {
	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );
}`}("linearToOutputTexel",n.outputColorSpace),function(){r.epp.getLuminanceCoefficients(eK);let e=eK.x.toFixed(4),t=eK.y.toFixed(4),n=eK.z.toFixed(4);return`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${e}, ${t}, ${n} );
	return dot( weights, rgb );
}`}(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(eq).join("\n")),p=eZ(p=eQ(p=e0(p),n),n),m=eZ(m=eQ(m=e0(m),n),n),p=e4(p),m=e4(m),!0!==n.isRawShaderMaterial&&(A="#version 300 es\n",a=[_,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,s=["#define varying in",n.glslVersion===r.LSk?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===r.LSk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s);let M=A+a+p,E=A+s+m,C=eW(h,h.VERTEX_SHADER,M),T=eW(h,h.FRAGMENT_SHADER,E);function R(t){if(e.debug.checkShaderErrors){let n=h.getProgramInfoLog(S).trim(),r=h.getShaderInfoLog(C).trim(),i=h.getShaderInfoLog(T).trim(),o=!0,l=!0;if(!1===h.getProgramParameter(S,h.LINK_STATUS)){if(o=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(h,S,C,T);else{let e=eY(h,C,"vertex"),r=eY(h,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+h.getError()+" - VALIDATE_STATUS "+h.getProgramParameter(S,h.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):(""===r||""===i)&&(l=!1);l&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:a},fragmentShader:{log:i,prefix:s}})}h.deleteShader(C),h.deleteShader(T),l=new ej(h,S),u=function(e,t){let n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),a=r.name,o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(h,S)}h.attachShader(S,C),h.attachShader(S,T),void 0!==n.index0AttributeName?h.bindAttribLocation(S,0,n.index0AttributeName):!0===n.morphTargets&&h.bindAttribLocation(S,0,"position"),h.linkProgram(S),this.getUniforms=function(){return void 0===l&&R(this),l},this.getAttributes=function(){return void 0===u&&R(this),u};let P=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===P&&(P=h.getProgramParameter(S,37297)),P},this.destroy=function(){i.releaseStatesOfProgram(this),h.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=eX++,this.cacheKey=t,this.usedTimes=1,this.program=S,this.vertexShader=C,this.fragmentShader=T,this}let e8=0;class e7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new te(e),t.set(e,n)),n}}class te{constructor(e){this.id=e8++,this.code=e,this.usedTimes=0}}function tt(e,t,n,i,a,o,s){let u=new r.S9g,c=new e7,d=new Set,h=[],f=a.logarithmicDepthBuffer,p=a.vertexTextures,m=a.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(e){return(d.add(e),0===e)?"uv":`uv${e}`}return{getParameters:function(o,u,h,y,b){let x,_,w,S;let A=y.fog,M=b.geometry,E=o.isMeshStandardMaterial?y.environment:null,C=(o.isMeshStandardMaterial?n:t).get(o.envMap||E),T=C&&C.mapping===r.g8_?C.image.height:null,R=g[o.type];null!==o.precision&&(m=a.getMaxPrecision(o.precision))!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead.");let P=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,I=void 0!==P?P.length:0,B=0;if(void 0!==M.morphAttributes.position&&(B=1),void 0!==M.morphAttributes.normal&&(B=2),void 0!==M.morphAttributes.color&&(B=3),R){let e=l[R];x=e.vertexShader,_=e.fragmentShader}else x=o.vertexShader,_=o.fragmentShader,c.update(o),w=c.getVertexShaderID(o),S=c.getFragmentShaderID(o);let L=e.getRenderTarget(),k=e.state.buffers.depth.getReversed(),D=!0===b.isInstancedMesh,N=!0===b.isBatchedMesh,F=!!o.map,O=!!o.matcap,U=!!C,z=!!o.aoMap,H=!!o.lightMap,G=!!o.bumpMap,V=!!o.normalMap,j=!!o.displacementMap,W=!!o.emissiveMap,X=!!o.metalnessMap,J=!!o.roughnessMap,Y=o.anisotropy>0,K=o.clearcoat>0,q=o.dispersion>0,Q=o.iridescence>0,Z=o.sheen>0,$=o.transmission>0,ee=Y&&!!o.anisotropyMap,et=K&&!!o.clearcoatMap,en=K&&!!o.clearcoatNormalMap,er=K&&!!o.clearcoatRoughnessMap,ei=Q&&!!o.iridescenceMap,ea=Q&&!!o.iridescenceThicknessMap,eo=Z&&!!o.sheenColorMap,es=Z&&!!o.sheenRoughnessMap,el=!!o.specularMap,eu=!!o.specularColorMap,ec=!!o.specularIntensityMap,ed=$&&!!o.transmissionMap,eh=$&&!!o.thicknessMap,ef=!!o.gradientMap,ep=!!o.alphaMap,em=o.alphaTest>0,eg=!!o.alphaHash,ev=!!o.extensions,ey=r.uL9;o.toneMapped&&(null===L||!0===L.isXRRenderTarget)&&(ey=e.toneMapping);let eb={shaderID:R,shaderType:o.type,shaderName:o.name,vertexShader:x,fragmentShader:_,defines:o.defines,customVertexShaderID:w,customFragmentShaderID:S,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,batching:N,batchingColor:N&&null!==b._colorsTexture,instancing:D,instancingColor:D&&null!==b.instanceColor,instancingMorph:D&&null!==b.morphTexture,supportsVertexTextures:p,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:r.GUF,alphaToCoverage:!!o.alphaToCoverage,map:F,matcap:O,envMap:U,envMapMode:U&&C.mapping,envMapCubeUVHeight:T,aoMap:z,lightMap:H,bumpMap:G,normalMap:V,displacementMap:p&&j,emissiveMap:W,normalMapObjectSpace:V&&o.normalMapType===r.PA7,normalMapTangentSpace:V&&o.normalMapType===r.IOt,metalnessMap:X,roughnessMap:J,anisotropy:Y,anisotropyMap:ee,clearcoat:K,clearcoatMap:et,clearcoatNormalMap:en,clearcoatRoughnessMap:er,dispersion:q,iridescence:Q,iridescenceMap:ei,iridescenceThicknessMap:ea,sheen:Z,sheenColorMap:eo,sheenRoughnessMap:es,specularMap:el,specularColorMap:eu,specularIntensityMap:ec,transmission:$,transmissionMap:ed,thicknessMap:eh,gradientMap:ef,opaque:!1===o.transparent&&o.blending===r.bdR&&!1===o.alphaToCoverage,alphaMap:ep,alphaTest:em,alphaHash:eg,combine:o.combine,mapUv:F&&v(o.map.channel),aoMapUv:z&&v(o.aoMap.channel),lightMapUv:H&&v(o.lightMap.channel),bumpMapUv:G&&v(o.bumpMap.channel),normalMapUv:V&&v(o.normalMap.channel),displacementMapUv:j&&v(o.displacementMap.channel),emissiveMapUv:W&&v(o.emissiveMap.channel),metalnessMapUv:X&&v(o.metalnessMap.channel),roughnessMapUv:J&&v(o.roughnessMap.channel),anisotropyMapUv:ee&&v(o.anisotropyMap.channel),clearcoatMapUv:et&&v(o.clearcoatMap.channel),clearcoatNormalMapUv:en&&v(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:er&&v(o.clearcoatRoughnessMap.channel),iridescenceMapUv:ei&&v(o.iridescenceMap.channel),iridescenceThicknessMapUv:ea&&v(o.iridescenceThicknessMap.channel),sheenColorMapUv:eo&&v(o.sheenColorMap.channel),sheenRoughnessMapUv:es&&v(o.sheenRoughnessMap.channel),specularMapUv:el&&v(o.specularMap.channel),specularColorMapUv:eu&&v(o.specularColorMap.channel),specularIntensityMapUv:ec&&v(o.specularIntensityMap.channel),transmissionMapUv:ed&&v(o.transmissionMap.channel),thicknessMapUv:eh&&v(o.thicknessMap.channel),alphaMapUv:ep&&v(o.alphaMap.channel),vertexTangents:!!M.attributes.tangent&&(V||Y),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!M.attributes.color&&4===M.attributes.color.itemSize,pointsUvs:!0===b.isPoints&&!!M.attributes.uv&&(F||ep),fog:!!A,useFog:!0===o.fog,fogExp2:!!A&&A.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:f,reverseDepthBuffer:k,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==M.morphAttributes.position,morphNormals:void 0!==M.morphAttributes.normal,morphColors:void 0!==M.morphAttributes.color,morphTargetsCount:I,morphTextureStride:B,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numSpotLightMaps:u.spotLightMap.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numSpotLightShadowsWithMaps:u.numSpotLightShadowsWithMaps,numLightProbes:u.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:ey,decodeVideoTexture:F&&!0===o.map.isVideoTexture&&r.epp.getTransfer(o.map.colorSpace)===r.j17,decodeVideoTextureEmissive:W&&!0===o.emissiveMap.isVideoTexture&&r.epp.getTransfer(o.emissiveMap.colorSpace)===r.j17,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===r.ehD,flipSided:o.side===r._Li,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:ev&&!0===o.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ev&&!0===o.extensions.multiDraw||N)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return eb.vertexUv1s=d.has(1),eb.vertexUv2s=d.has(2),eb.vertexUv3s=d.has(3),d.clear(),eb},getProgramCacheKey:function(t){var n,r,i,a;let o=[];if(t.shaderID?o.push(t.shaderID):(o.push(t.customVertexShaderID),o.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)o.push(e),o.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(n=o,r=t,n.push(r.precision),n.push(r.outputColorSpace),n.push(r.envMapMode),n.push(r.envMapCubeUVHeight),n.push(r.mapUv),n.push(r.alphaMapUv),n.push(r.lightMapUv),n.push(r.aoMapUv),n.push(r.bumpMapUv),n.push(r.normalMapUv),n.push(r.displacementMapUv),n.push(r.emissiveMapUv),n.push(r.metalnessMapUv),n.push(r.roughnessMapUv),n.push(r.anisotropyMapUv),n.push(r.clearcoatMapUv),n.push(r.clearcoatNormalMapUv),n.push(r.clearcoatRoughnessMapUv),n.push(r.iridescenceMapUv),n.push(r.iridescenceThicknessMapUv),n.push(r.sheenColorMapUv),n.push(r.sheenRoughnessMapUv),n.push(r.specularMapUv),n.push(r.specularColorMapUv),n.push(r.specularIntensityMapUv),n.push(r.transmissionMapUv),n.push(r.thicknessMapUv),n.push(r.combine),n.push(r.fogExp2),n.push(r.sizeAttenuation),n.push(r.morphTargetsCount),n.push(r.morphAttributeCount),n.push(r.numDirLights),n.push(r.numPointLights),n.push(r.numSpotLights),n.push(r.numSpotLightMaps),n.push(r.numHemiLights),n.push(r.numRectAreaLights),n.push(r.numDirLightShadows),n.push(r.numPointLightShadows),n.push(r.numSpotLightShadows),n.push(r.numSpotLightShadowsWithMaps),n.push(r.numLightProbes),n.push(r.shadowMapType),n.push(r.toneMapping),n.push(r.numClippingPlanes),n.push(r.numClipIntersection),n.push(r.depthPacking),i=o,a=t,u.disableAll(),a.supportsVertexTextures&&u.enable(0),a.instancing&&u.enable(1),a.instancingColor&&u.enable(2),a.instancingMorph&&u.enable(3),a.matcap&&u.enable(4),a.envMap&&u.enable(5),a.normalMapObjectSpace&&u.enable(6),a.normalMapTangentSpace&&u.enable(7),a.clearcoat&&u.enable(8),a.iridescence&&u.enable(9),a.alphaTest&&u.enable(10),a.vertexColors&&u.enable(11),a.vertexAlphas&&u.enable(12),a.vertexUv1s&&u.enable(13),a.vertexUv2s&&u.enable(14),a.vertexUv3s&&u.enable(15),a.vertexTangents&&u.enable(16),a.anisotropy&&u.enable(17),a.alphaHash&&u.enable(18),a.batching&&u.enable(19),a.dispersion&&u.enable(20),a.batchingColor&&u.enable(21),i.push(u.mask),u.disableAll(),a.fog&&u.enable(0),a.useFog&&u.enable(1),a.flatShading&&u.enable(2),a.logarithmicDepthBuffer&&u.enable(3),a.reverseDepthBuffer&&u.enable(4),a.skinning&&u.enable(5),a.morphTargets&&u.enable(6),a.morphNormals&&u.enable(7),a.morphColors&&u.enable(8),a.premultipliedAlpha&&u.enable(9),a.shadowMapEnabled&&u.enable(10),a.doubleSided&&u.enable(11),a.flipSided&&u.enable(12),a.useDepthPacking&&u.enable(13),a.dithering&&u.enable(14),a.transmission&&u.enable(15),a.sheen&&u.enable(16),a.opaque&&u.enable(17),a.pointsUvs&&u.enable(18),a.decodeVideoTexture&&u.enable(19),a.decodeVideoTextureEmissive&&u.enable(20),a.alphaToCoverage&&u.enable(21),i.push(u.mask),o.push(e.outputColorSpace)),o.push(t.customProgramCacheKey),o.join()},getUniforms:function(e){let t;let n=g[e.type];if(n){let e=l[n];t=r.rDY.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;for(let e=0,t=h.length;e<t;e++){let t=h[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new e9(e,n,t,o),h.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){let t=h.indexOf(e);h[t]=h[h.length-1],h.pop(),e.destroy()}},releaseShaderCache:function(e){c.remove(e)},programs:h,dispose:function(){c.dispose()}}}function tn(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function tr(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ti(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ta(){let e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||tr),r.length>1&&r.sort(t||ti),i.length>1&&i.sort(t||ti)}}}function to(){let e=new WeakMap;return{get:function(t,n){let r;let i=e.get(t);return void 0===i?(r=new ta,e.set(t,[r])):n>=i.length?(r=new ta,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function ts(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":n={direction:new r.Pa4,color:new r.Ilk};break;case"SpotLight":n={position:new r.Pa4,direction:new r.Pa4,color:new r.Ilk,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new r.Pa4,color:new r.Ilk,distance:0,decay:0};break;case"HemisphereLight":n={direction:new r.Pa4,skyColor:new r.Ilk,groundColor:new r.Ilk};break;case"RectAreaLight":n={color:new r.Ilk,position:new r.Pa4,halfWidth:new r.Pa4,halfHeight:new r.Pa4}}return e[t.id]=n,n}}}let tl=0;function tu(e,t){return 2*!!t.castShadow-2*!!e.castShadow+ +!!t.map-+!!e.map}function tc(e){let t=new ts,n=function(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.FM8};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.FM8,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)i.probe.push(new r.Pa4);let a=new r.Pa4,o=new r.yGw,l=new r.yGw;return{setup:function(r){let a=0,o=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,c=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0;r.sort(tu);for(let e=0,s=r.length;e<s;e++){let s=r[e],x=s.color,_=s.intensity,w=s.distance,S=s.shadow&&s.shadow.map?s.shadow.map.texture:null;if(s.isAmbientLight)a+=x.r*_,o+=x.g*_,l+=x.b*_;else if(s.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(s.sh.coefficients[e],_);b++}else if(s.isDirectionalLight){let e=t.get(s);if(e.color.copy(s.color).multiplyScalar(s.intensity),s.castShadow){let e=s.shadow,t=n.get(s);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,i.directionalShadow[u]=t,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=s.shadow.matrix,p++}i.directional[u]=e,u++}else if(s.isSpotLight){let e=t.get(s);e.position.setFromMatrixPosition(s.matrixWorld),e.color.copy(x).multiplyScalar(_),e.distance=w,e.coneCos=Math.cos(s.angle),e.penumbraCos=Math.cos(s.angle*(1-s.penumbra)),e.decay=s.decay,i.spot[d]=e;let r=s.shadow;if(s.map&&(i.spotLightMap[v]=s.map,v++,r.updateMatrices(s),s.castShadow&&y++),i.spotLightMatrix[d]=r.matrix,s.castShadow){let e=n.get(s);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=S,g++}d++}else if(s.isRectAreaLight){let e=t.get(s);e.color.copy(x).multiplyScalar(_),e.halfWidth.set(.5*s.width,0,0),e.halfHeight.set(0,.5*s.height,0),i.rectArea[h]=e,h++}else if(s.isPointLight){let e=t.get(s);if(e.color.copy(s.color).multiplyScalar(s.intensity),e.distance=s.distance,e.decay=s.decay,s.castShadow){let e=s.shadow,t=n.get(s);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,i.pointShadow[c]=t,i.pointShadowMap[c]=S,i.pointShadowMatrix[c]=s.shadow.matrix,m++}i.point[c]=e,c++}else if(s.isHemisphereLight){let e=t.get(s);e.skyColor.copy(s.color).multiplyScalar(_),e.groundColor.copy(s.groundColor).multiplyScalar(_),i.hemi[f]=e,f++}}h>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=s.LTC_FLOAT_1,i.rectAreaLTC2=s.LTC_FLOAT_2):(i.rectAreaLTC1=s.LTC_HALF_1,i.rectAreaLTC2=s.LTC_HALF_2)),i.ambient[0]=a,i.ambient[1]=o,i.ambient[2]=l;let x=i.hash;(x.directionalLength!==u||x.pointLength!==c||x.spotLength!==d||x.rectAreaLength!==h||x.hemiLength!==f||x.numDirectionalShadows!==p||x.numPointShadows!==m||x.numSpotShadows!==g||x.numSpotMaps!==v||x.numLightProbes!==b)&&(i.directional.length=u,i.spot.length=d,i.rectArea.length=h,i.point.length=c,i.hemi.length=f,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotLightMatrix.length=g+v-y,i.spotLightMap.length=v,i.numSpotLightShadowsWithMaps=y,i.numLightProbes=b,x.directionalLength=u,x.pointLength=c,x.spotLength=d,x.rectAreaLength=h,x.hemiLength=f,x.numDirectionalShadows=p,x.numPointShadows=m,x.numSpotShadows=g,x.numSpotMaps=v,x.numLightProbes=b,i.version=tl++)},setupView:function(e,t){let n=0,r=0,s=0,u=0,c=0,d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){let h=e[t];if(h.isDirectionalLight){let e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(h.isSpotLight){let e=i.spot[s];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),s++}else if(h.isRectAreaLight){let e=i.rectArea[u];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),l.identity(),o.copy(h.matrixWorld),o.premultiply(d),l.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(l),e.halfHeight.applyMatrix4(l),u++}else if(h.isPointLight){let e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),r++}else if(h.isHemisphereLight){let e=i.hemi[c];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),c++}}},state:i}}function td(e){let t=new tc(e),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function th(e){let t=new WeakMap;return{get:function(n,r=0){let i;let a=t.get(n);return void 0===a?(i=new td(e),t.set(n,[i])):r>=a.length?(i=new td(e),a.push(i)):i=a[r],i},dispose:function(){t=new WeakMap}}}function tf(e,t,n){let i=new r.iWj,a=new r.FM8,o=new r.FM8,s=new r.Ltg,l=new r.lRF({depthPacking:r.mSO}),u=new r.Lun,c={},d=n.maxTextureSize,h={[r.Wl3]:r._Li,[r._Li]:r.Wl3,[r.ehD]:r.ehD},f=new r.jyz({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new r.FM8},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=f.clone();p.defines.HORIZONTAL_PASS=1;let m=new r.u9r;m.setAttribute("position",new r.TlE(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let g=new r.Kj0(m,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r._iA;let y=this.type;function b(t,n,i,a){let o=null,s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===i.isPointLight?u:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=o.uuid,t=n.uuid,r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=o.clone(),r[t]=i,n.addEventListener("dispose",x)),o=i}return o.visible=n.visible,o.wireframe=n.wireframe,a===r.dwk?o.side=null!==n.shadowSide?n.shadowSide:n.side:o.side=null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial&&(e.properties.get(o).light=i),o}function x(e){for(let t in e.target.removeEventListener("dispose",x),c){let n=c[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(n,l,u){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===n.length)return;let c=e.getRenderTarget(),h=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),x=e.state;x.setBlending(r.jFi),x.buffers.color.setClear(1,1,1,1),x.buffers.depth.setTest(!0),x.setScissorTest(!1);let _=y!==r.dwk&&this.type===r.dwk,w=y===r.dwk&&this.type!==r.dwk;for(let c=0,h=n.length;c<h;c++){let h=n[c],m=h.shadow;if(void 0===m){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===m.autoUpdate&&!1===m.needsUpdate)continue;a.copy(m.mapSize);let v=m.getFrameExtents();if(a.multiply(v),o.copy(m.mapSize),(a.x>d||a.y>d)&&(a.x>d&&(o.x=Math.floor(d/v.x),a.x=o.x*v.x,m.mapSize.x=o.x),a.y>d&&(o.y=Math.floor(d/v.y),a.y=o.y*v.y,m.mapSize.y=o.y)),null===m.map||!0===_||!0===w){let e=this.type!==r.dwk?{minFilter:r.TyD,magFilter:r.TyD}:{};null!==m.map&&m.map.dispose(),m.map=new r.dd2(a.x,a.y,e),m.map.texture.name=h.name+".shadowMap",m.camera.updateProjectionMatrix()}e.setRenderTarget(m.map),e.clear();let y=m.getViewportCount();for(let n=0;n<y;n++){let a=m.getViewport(n);s.set(o.x*a.x,o.y*a.y,o.x*a.z,o.y*a.w),x.viewport(s),m.updateMatrices(h,n),i=m.getFrustum(),function n(a,o,s,l,u){if(!1===a.visible)return;if(a.layers.test(o.layers)&&(a.isMesh||a.isLine||a.isPoints)&&(a.castShadow||a.receiveShadow&&u===r.dwk)&&(!a.frustumCulled||i.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,a.matrixWorld);let n=t.update(a),r=a.material;if(Array.isArray(r)){let t=n.groups;for(let i=0,c=t.length;i<c;i++){let c=t[i],d=r[c.materialIndex];if(d&&d.visible){let t=b(a,d,l,u);a.onBeforeShadow(e,a,o,s,n,t,c),e.renderBufferDirect(s,null,n,t,a,c),a.onAfterShadow(e,a,o,s,n,t,c)}}}else if(r.visible){let t=b(a,r,l,u);a.onBeforeShadow(e,a,o,s,n,t,null),e.renderBufferDirect(s,null,n,t,a,null),a.onAfterShadow(e,a,o,s,n,t,null)}}let c=a.children;for(let e=0,t=c.length;e<t;e++)n(c[e],o,s,l,u)}(l,u,m.camera,h,this.type)}!0!==m.isPointLightShadow&&this.type===r.dwk&&function(n,i){let o=t.update(g);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new r.dd2(a.x,a.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,o,f,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,o,p,g,null)}(m,u),m.needsUpdate=!1}y=this.type,v.needsUpdate=!1,e.setRenderTarget(c,h,m)}}let tp={[r.BVF]:r.Se2,[r.Zr5]:r.w$m,[r.eD]:r.M6v,[r.vCF]:r.ksN,[r.Se2]:r.BVF,[r.w$m]:r.Zr5,[r.M6v]:r.eD,[r.ksN]:r.vCF};function tm(e,t){let n=new function(){let t=!1,n=new r.Ltg,i=null,a=new r.Ltg(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,s){!0===s&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===a.equals(n)&&(e.clearColor(t,r,i,o),a.copy(n))},reset:function(){t=!1,i=null,a.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,a=null,o=null,s=null;return{setReversed:function(e){if(i!==e){let e=t.get("EXT_clip_control");i?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);let n=s;s=null,this.setClear(n)}i=e},getReversed:function(){return i},setTest:function(t){t?H(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(t){a===t||n||(e.depthMask(t),a=t)},setFunc:function(t){if(i&&(t=tp[t]),o!==t){switch(t){case r.BVF:e.depthFunc(e.NEVER);break;case r.Se2:e.depthFunc(e.ALWAYS);break;case r.Zr5:e.depthFunc(e.LESS);break;case r.vCF:e.depthFunc(e.LEQUAL);break;case r.eD:e.depthFunc(e.EQUAL);break;case r.ksN:e.depthFunc(e.GEQUAL);break;case r.w$m:e.depthFunc(e.GREATER);break;case r.M6v:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}o=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(i&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,a=null,o=null,s=null,i=!1}}},a=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){(r!==t||i!==n||a!==o)&&(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){(o!==t||s!==n||l!==r)&&(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},o=new WeakMap,s=new WeakMap,l={},u={},c=new WeakMap,d=[],h=null,f=!1,p=null,m=null,g=null,v=null,y=null,b=null,x=null,_=new r.Ilk(0,0,0),w=0,S=!1,A=null,M=null,E=null,C=null,T=null,R=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),P=!1,I=0,B=e.getParameter(e.VERSION);-1!==B.indexOf("WebGL")?P=parseFloat(/^WebGL (\d)/.exec(B)[1])>=1:-1!==B.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(B)[1])>=2);let L=null,k={},D=e.getParameter(e.SCISSOR_BOX),N=e.getParameter(e.VIEWPORT),F=new r.Ltg().fromArray(D),O=new r.Ltg().fromArray(N);function U(t,n,r,i){let a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}let z={};function H(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function G(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}z[e.TEXTURE_2D]=U(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=U(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=U(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=U(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),a.setClear(0),H(e.DEPTH_TEST),i.setFunc(r.vCF),X(!1),J(r.tm_),H(e.CULL_FACE),W(r.jFi);let V={[r.bGH]:e.FUNC_ADD,[r.Wbm]:e.FUNC_SUBTRACT,[r.rOj]:e.FUNC_REVERSE_SUBTRACT};V[r.r_]=e.MIN,V[r.Sm8]=e.MAX;let j={[r.c8b]:e.ZERO,[r.ghN]:e.ONE,[r.KhW]:e.SRC_COLOR,[r.k74]:e.SRC_ALPHA,[r.RlZ]:e.SRC_ALPHA_SATURATE,[r.Vdb]:e.DST_COLOR,[r.fSK]:e.DST_ALPHA,[r.iWC]:e.ONE_MINUS_SRC_COLOR,[r.LgZ]:e.ONE_MINUS_SRC_ALPHA,[r.Wpd]:e.ONE_MINUS_DST_COLOR,[r.Hy8]:e.ONE_MINUS_DST_ALPHA,[r._wr]:e.CONSTANT_COLOR,[r.Cy]:e.ONE_MINUS_CONSTANT_COLOR,[r.jes]:e.CONSTANT_ALPHA,[r.NKc]:e.ONE_MINUS_CONSTANT_ALPHA};function W(t,n,i,a,o,s,l,u,c,d){if(t===r.jFi){!0===f&&(G(e.BLEND),f=!1);return}if(!1===f&&(H(e.BLEND),f=!0),t!==r.Xaj){if(t!==p||d!==S){if((m!==r.bGH||y!==r.bGH)&&(e.blendEquation(e.FUNC_ADD),m=r.bGH,y=r.bGH),d)switch(t){case r.bdR:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case r.WMw:e.blendFunc(e.ONE,e.ONE);break;case r.N4l:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case r.M5h:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case r.bdR:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case r.WMw:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case r.N4l:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case r.M5h:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,v=null,b=null,x=null,_.set(0,0,0),w=0,p=t,S=d}return}o=o||n,s=s||i,l=l||a,(n!==m||o!==y)&&(e.blendEquationSeparate(V[n],V[o]),m=n,y=o),(i!==g||a!==v||s!==b||l!==x)&&(e.blendFuncSeparate(j[i],j[a],j[s],j[l]),g=i,v=a,b=s,x=l),(!1===u.equals(_)||c!==w)&&(e.blendColor(u.r,u.g,u.b,c),_.copy(u),w=c),p=t,S=!1}function X(t){A!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),A=t)}function J(t){t!==r.PeU?(H(e.CULL_FACE),t!==M&&(t===r.tm_?e.cullFace(e.BACK):t===r.S2y?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),M=t}function Y(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),(C!==n||T!==r)&&(e.polygonOffset(n,r),C=n,T=r)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:a},enable:H,disable:G,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=d,i=!1;if(t){void 0===(r=c.get(n))&&(r=[],c.set(n,r));let a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:W,setMaterial:function(t,o){t.side===r.ehD?G(e.CULL_FACE):H(e.CULL_FACE);let s=t.side===r._Li;o&&(s=!s),X(s),t.blending===r.bdR&&!1===t.transparent?W(r.jFi):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),n.setMask(t.colorWrite);let l=t.stencilWrite;a.setTest(l),l&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Y(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:X,setCullFace:J,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:Y,setScissorTest:function(t){t?H(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+R-1),L!==t&&(e.activeTexture(t),L=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===L?e.TEXTURE0+R-1:L);let i=k[r];void 0===i&&(i={type:void 0,texture:void 0},k[r]=i),(i.type!==t||i.texture!==n)&&(L!==r&&(e.activeTexture(r),L=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){let t=k[L];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){let r=s.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(0xffffffff),e.stencilFunc(e.ALWAYS,0,0xffffffff),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},L=null,k={},u={},c=new WeakMap,d=[],h=null,f=!1,p=null,m=null,g=null,v=null,y=null,b=null,x=null,_=new r.Ilk(0,0,0),w=0,S=!1,A=null,M=null,E=null,C=null,T=null,F.set(0,0,e.canvas.width,e.canvas.height),O.set(0,0,e.canvas.width,e.canvas.height),n.reset(),i.reset(),a.reset()}}}function tg(e,t,n,i,a,o,s){let l;let u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new r.FM8,h=new WeakMap,f=new WeakMap,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):(0,r.cac)("canvas")}function g(e,t,n){let r=1,i=H(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){let n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===l&&(l=m(n,a));let o=t?m(n,a):l;return o.width=n,o.height=a,o.getContext("2d").drawImage(e,0,0,n,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+a+")."),o}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+").")}return e}function v(e){return e.generateMipmaps}function y(t){e.generateMipmap(t)}function b(n,i,a,o,s=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(a===e.FLOAT&&(l=e.R32F),a===e.HALF_FLOAT&&(l=e.R16F),a===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.R8UI),a===e.UNSIGNED_SHORT&&(l=e.R16UI),a===e.UNSIGNED_INT&&(l=e.R32UI),a===e.BYTE&&(l=e.R8I),a===e.SHORT&&(l=e.R16I),a===e.INT&&(l=e.R32I)),i===e.RG&&(a===e.FLOAT&&(l=e.RG32F),a===e.HALF_FLOAT&&(l=e.RG16F),a===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RG_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.RG8UI),a===e.UNSIGNED_SHORT&&(l=e.RG16UI),a===e.UNSIGNED_INT&&(l=e.RG32UI),a===e.BYTE&&(l=e.RG8I),a===e.SHORT&&(l=e.RG16I),a===e.INT&&(l=e.RG32I)),i===e.RGB_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.RGB8UI),a===e.UNSIGNED_SHORT&&(l=e.RGB16UI),a===e.UNSIGNED_INT&&(l=e.RGB32UI),a===e.BYTE&&(l=e.RGB8I),a===e.SHORT&&(l=e.RGB16I),a===e.INT&&(l=e.RGB32I)),i===e.RGBA_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.RGBA8UI),a===e.UNSIGNED_SHORT&&(l=e.RGBA16UI),a===e.UNSIGNED_INT&&(l=e.RGBA32UI),a===e.BYTE&&(l=e.RGBA8I),a===e.SHORT&&(l=e.RGBA16I),a===e.INT&&(l=e.RGBA32I)),i===e.RGB&&a===e.UNSIGNED_INT_5_9_9_9_REV&&(l=e.RGB9_E5),i===e.RGBA){let t=s?r.l6D:r.epp.getTransfer(o);a===e.FLOAT&&(l=e.RGBA32F),a===e.HALF_FLOAT&&(l=e.RGBA16F),a===e.UNSIGNED_BYTE&&(l=t===r.j17?e.SRGB8_ALPHA8:e.RGBA8),a===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),a===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return(l===e.R16F||l===e.R32F||l===e.RG16F||l===e.RG32F||l===e.RGBA16F||l===e.RGBA32F)&&t.get("EXT_color_buffer_float"),l}function x(t,n){let i;return t?null===n||n===r.JQ4||n===r.wJv?i=e.DEPTH24_STENCIL8:n===r.VzW?i=e.DEPTH32F_STENCIL8:n===r.LsT&&(i=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===r.JQ4||n===r.wJv?i=e.DEPTH_COMPONENT24:n===r.VzW?i=e.DEPTH_COMPONENT32F:n===r.LsT&&(i=e.DEPTH_COMPONENT16),i}function _(e,t){return!0===v(e)||e.isFramebufferTexture&&e.minFilter!==r.TyD&&e.minFilter!==r.wem?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){let t=e.target;t.removeEventListener("dispose",w),function(e){let t=i.get(e);if(void 0===t.__webglInit)return;let n=e.source,r=f.get(n);if(r){let i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&A(e),0===Object.keys(r).length&&f.delete(n)}i.remove(e)}(t),t.isVideoTexture&&h.delete(t)}function S(t){let n=t.target;n.removeEventListener("dispose",S),function(t){let n=i.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let r=0;r<n.__webglFramebuffer[t].length;r++)e.deleteFramebuffer(n.__webglFramebuffer[t][r]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}let r=t.textures;for(let t=0,n=r.length;t<n;t++){let n=i.get(r[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),s.memory.textures--),i.remove(r[t])}i.remove(t)}(n)}function A(t){let n=i.get(t);e.deleteTexture(n.__webglTexture);let r=t.source,a=f.get(r);delete a[n.__cacheKey],s.memory.textures--}let M=0;function E(t,r){let a=i.get(t);if(t.isVideoTexture&&function(e){let t=s.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){let e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===e.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{B(a,t,r);return}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}let C={[r.rpg]:e.REPEAT,[r.uWy]:e.CLAMP_TO_EDGE,[r.OoA]:e.MIRRORED_REPEAT},T={[r.TyD]:e.NEAREST,[r.YLQ]:e.NEAREST_MIPMAP_NEAREST,[r.aH4]:e.NEAREST_MIPMAP_LINEAR,[r.wem]:e.LINEAR,[r.qyh]:e.LINEAR_MIPMAP_NEAREST,[r.D1R]:e.LINEAR_MIPMAP_LINEAR},R={[r.xoQ]:e.NEVER,[r.T6w]:e.ALWAYS,[r.D67]:e.LESS,[r.M$G]:e.LEQUAL,[r.F1y]:e.EQUAL,[r.Jjb]:e.GEQUAL,[r.Zen]:e.GREATER,[r.O78]:e.NOTEQUAL};function P(n,o){if(o.type===r.VzW&&!1===t.has("OES_texture_float_linear")&&(o.magFilter===r.wem||o.magFilter===r.qyh||o.magFilter===r.aH4||o.magFilter===r.D1R||o.minFilter===r.wem||o.minFilter===r.qyh||o.minFilter===r.aH4||o.minFilter===r.D1R)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,C[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,C[o.wrapT]),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,C[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T[o.minFilter]),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,R[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")&&o.magFilter!==r.TyD&&(o.minFilter===r.aH4||o.minFilter===r.D1R)&&(o.type!==r.VzW||!1!==t.has("OES_texture_float_linear"))&&(o.anisotropy>1||i.get(o).__currentAnisotropy)){let r=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,a.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy}}function I(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));let i=n.source,a=f.get(i);void 0===a&&(a={},f.set(i,a));let o=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;let i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&A(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function B(t,s,l){let u=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(u=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(u=e.TEXTURE_3D);let c=I(t,s),d=s.source;n.bindTexture(u,t.__webglTexture,e.TEXTURE0+l);let h=i.get(d);if(d.version!==h.__version||!0===c){let t;n.activeTexture(e.TEXTURE0+l);let i=r.epp.getPrimaries(r.epp.workingColorSpace),f=s.colorSpace===r.aCh?null:r.epp.getPrimaries(s.colorSpace),p=s.colorSpace===r.aCh||i===f?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let m=g(s.image,!1,a.maxTextureSize);m=z(s,m);let w=o.convert(s.format,s.colorSpace),S=o.convert(s.type),A=b(s.internalFormat,w,S,s.colorSpace,s.isVideoTexture);P(u,s);let M=s.mipmaps,E=!0!==s.isVideoTexture,C=void 0===h.__version||!0===c,T=d.dataReady,R=_(s,m);if(s.isDepthTexture)A=x(s.format===r.brP,s.type),C&&(E?n.texStorage2D(e.TEXTURE_2D,1,A,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,A,m.width,m.height,0,w,S,null));else if(s.isDataTexture){if(M.length>0){E&&C&&n.texStorage2D(e.TEXTURE_2D,R,A,M[0].width,M[0].height);for(let r=0,i=M.length;r<i;r++)t=M[r],E?T&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,w,S,t.data):n.texImage2D(e.TEXTURE_2D,r,A,t.width,t.height,0,w,S,t.data);s.generateMipmaps=!1}else E?(C&&n.texStorage2D(e.TEXTURE_2D,R,A,m.width,m.height),T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,w,S,m.data)):n.texImage2D(e.TEXTURE_2D,0,A,m.width,m.height,0,w,S,m.data)}else if(s.isCompressedTexture){if(s.isCompressedArrayTexture){E&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,A,M[0].width,M[0].height,m.depth);for(let i=0,a=M.length;i<a;i++)if(t=M[i],s.format!==r.wk1){if(null!==w){if(E){if(T){if(s.layerUpdates.size>0){let a=(0,r.EcG)(t.width,t.height,s.format,s.type);for(let r of s.layerUpdates){let o=t.data.subarray(r*a/t.data.BYTES_PER_ELEMENT,(r+1)*a/t.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,r,t.width,t.height,1,w,o)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,0,t.width,t.height,m.depth,w,t.data)}}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,i,A,t.width,t.height,m.depth,0,t.data,0,0)}else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}else E?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,0,t.width,t.height,m.depth,w,S,t.data):n.texImage3D(e.TEXTURE_2D_ARRAY,i,A,t.width,t.height,m.depth,0,w,S,t.data)}else{E&&C&&n.texStorage2D(e.TEXTURE_2D,R,A,M[0].width,M[0].height);for(let i=0,a=M.length;i<a;i++)t=M[i],s.format!==r.wk1?null!==w?E?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,i,0,0,t.width,t.height,w,t.data):n.compressedTexImage2D(e.TEXTURE_2D,i,A,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?T&&n.texSubImage2D(e.TEXTURE_2D,i,0,0,t.width,t.height,w,S,t.data):n.texImage2D(e.TEXTURE_2D,i,A,t.width,t.height,0,w,S,t.data)}}else if(s.isDataArrayTexture){if(E){if(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,A,m.width,m.height,m.depth),T){if(s.layerUpdates.size>0){let t=(0,r.EcG)(m.width,m.height,s.format,s.type);for(let r of s.layerUpdates){let i=m.data.subarray(r*t/m.data.BYTES_PER_ELEMENT,(r+1)*t/m.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,m.width,m.height,1,w,S,i)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,w,S,m.data)}}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,A,m.width,m.height,m.depth,0,w,S,m.data)}else if(s.isData3DTexture)E?(C&&n.texStorage3D(e.TEXTURE_3D,R,A,m.width,m.height,m.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,w,S,m.data)):n.texImage3D(e.TEXTURE_3D,0,A,m.width,m.height,m.depth,0,w,S,m.data);else if(s.isFramebufferTexture){if(C){if(E)n.texStorage2D(e.TEXTURE_2D,R,A,m.width,m.height);else{let t=m.width,r=m.height;for(let i=0;i<R;i++)n.texImage2D(e.TEXTURE_2D,i,A,t,r,0,w,S,null),t>>=1,r>>=1}}}else if(M.length>0){if(E&&C){let t=H(M[0]);n.texStorage2D(e.TEXTURE_2D,R,A,t.width,t.height)}for(let r=0,i=M.length;r<i;r++)t=M[r],E?T&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,w,S,t):n.texImage2D(e.TEXTURE_2D,r,A,w,S,t);s.generateMipmaps=!1}else if(E){if(C){let t=H(m);n.texStorage2D(e.TEXTURE_2D,R,A,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,w,S,m)}else n.texImage2D(e.TEXTURE_2D,0,A,w,S,m);v(s)&&y(u),h.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function L(t,r,a,s,l,c){let d=o.convert(a.format,a.colorSpace),h=o.convert(a.type),f=b(a.internalFormat,d,h,a.colorSpace),p=i.get(r),m=i.get(a);if(m.__renderTarget=r,!p.__hasExternalTextures){let t=Math.max(1,r.width>>c),i=Math.max(1,r.height>>c);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,c,f,t,i,r.depth,0,d,h,null):n.texImage2D(l,c,f,t,i,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),U(r)?u.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,l,m.__webglTexture,0,O(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,l,m.__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function k(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){let i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,o=x(n.stencilBuffer,a),s=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,l=O(n);U(n)?u.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,l,o,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,l,o,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,s,e.RENDERBUFFER,t)}else{let t=n.textures;for(let i=0;i<t.length;i++){let a=t[i],s=o.convert(a.format,a.colorSpace),l=o.convert(a.type),c=b(a.internalFormat,s,l,a.colorSpace),d=O(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,c,n.width,n.height):U(n)?u.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function D(t){let a=i.get(t),o=!0===t.isWebGLCubeRenderTarget;if(a.__boundDepthTexture!==t.depthTexture){let e=t.depthTexture;if(a.__depthDisposeCallback&&a.__depthDisposeCallback(),e){let t=()=>{delete a.__boundDepthTexture,delete a.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),a.__depthDisposeCallback=t}a.__boundDepthTexture=e}if(t.depthTexture&&!a.__autoAllocateDepthBuffer){if(o)throw Error("target.depthTexture not supported in Cube render targets");!function(t,a){if(a&&a.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!(a.depthTexture&&a.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let o=i.get(a.depthTexture);o.__renderTarget=a,o.__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),E(a.depthTexture,0);let s=o.__webglTexture,l=O(a);if(a.depthTexture.format===r.qkB)U(a)?u.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else if(a.depthTexture.format===r.brP)U(a)?u.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0);else throw Error("Unknown depthTexture format")}(a.__webglFramebuffer,t)}else if(o){a.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,a.__webglFramebuffer[r]),void 0===a.__webglDepthbuffer[r])a.__webglDepthbuffer[r]=e.createRenderbuffer(),k(a.__webglDepthbuffer[r],t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=a.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,a.__webglFramebuffer),void 0===a.__webglDepthbuffer)a.__webglDepthbuffer=e.createRenderbuffer(),k(a.__webglDepthbuffer,t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=a.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}n.bindFramebuffer(e.FRAMEBUFFER,null)}let N=[],F=[];function O(e){return Math.min(a.maxSamples,e.samples)}function U(e){let n=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function z(e,t){let n=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==r.GUF&&n!==r.aCh&&(r.epp.getTransfer(n)===r.j17?(i!==r.wk1||a!==r.ywz)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function H(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(d.width=e.naturalWidth||e.width,d.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(d.width=e.displayWidth,d.height=e.displayHeight):(d.width=e.width,d.height=e.height),d}this.allocateTextureUnit=function(){let e=M;return e>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+a.maxTextures),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=E,this.setTexture2DArray=function(t,r){let a=i.get(t);if(t.version>0&&a.__version!==t.version){B(a,t,r);return}n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){let a=i.get(t);if(t.version>0&&a.__version!==t.version){B(a,t,r);return}n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){let l=i.get(t);if(t.version>0&&l.__version!==t.version){(function(t,s,l){if(6!==s.image.length)return;let u=I(t,s),c=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);let d=i.get(c);if(c.version!==d.__version||!0===u){let t;n.activeTexture(e.TEXTURE0+l);let i=r.epp.getPrimaries(r.epp.workingColorSpace),h=s.colorSpace===r.aCh?null:r.epp.getPrimaries(s.colorSpace),f=s.colorSpace===r.aCh||i===h?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);let p=s.isCompressedTexture||s.image[0].isCompressedTexture,m=s.image[0]&&s.image[0].isDataTexture,x=[];for(let e=0;e<6;e++)p||m?x[e]=m?s.image[e].image:s.image[e]:x[e]=g(s.image[e],!0,a.maxCubemapSize),x[e]=z(s,x[e]);let w=x[0],S=o.convert(s.format,s.colorSpace),A=o.convert(s.type),M=b(s.internalFormat,S,A,s.colorSpace),E=!0!==s.isVideoTexture,C=void 0===d.__version||!0===u,T=c.dataReady,R=_(s,w);if(P(e.TEXTURE_CUBE_MAP,s),p){E&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,R,M,w.width,w.height);for(let i=0;i<6;i++){t=x[i].mipmaps;for(let a=0;a<t.length;a++){let o=t[a];s.format!==r.wk1?null!==S?E?T&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,0,0,o.width,o.height,S,o.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,M,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,0,0,o.width,o.height,S,A,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,M,o.width,o.height,0,S,A,o.data)}}}else{if(t=s.mipmaps,E&&C){t.length>0&&R++;let r=H(x[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,R,M,r.width,r.height)}for(let r=0;r<6;r++)if(m){E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,x[r].width,x[r].height,S,A,x[r].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,M,x[r].width,x[r].height,0,S,A,x[r].data);for(let i=0;i<t.length;i++){let a=t[i].image[r].image;E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,a.width,a.height,S,A,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,M,a.width,a.height,0,S,A,a.data)}}else{E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,S,A,x[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,M,S,A,x[r]);for(let i=0;i<t.length;i++){let a=t[i];E?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,S,A,a.image[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,M,S,A,a.image[r])}}}v(s)&&y(e.TEXTURE_CUBE_MAP),d.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version})(l,t,s);return}n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,r){let a=i.get(t);void 0!==n&&L(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&D(t)},this.setupRenderTarget=function(t){let r=t.texture,a=i.get(t),l=i.get(r);t.addEventListener("dispose",S);let u=t.textures,c=!0===t.isWebGLCubeRenderTarget,d=u.length>1;if(!d&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,s.memory.textures++),c){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let n=0;n<r.mipmaps.length;n++)a.__webglFramebuffer[t][n]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,n=u.length;t<n;t++){let n=i.get(u[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===U(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<u.length;n++){let r=u[n];a.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[n]);let i=o.convert(r.format,r.colorSpace),s=o.convert(r.type),l=b(r.internalFormat,i,s,r.colorSpace,!0===t.isXRRenderTarget),c=O(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,a.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),k(a.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),P(e.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)L(a.__webglFramebuffer[n][i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else L(a.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(r)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(let r=0,o=u.length;r<o;r++){let o=u[r],s=i.get(o);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),P(e.TEXTURE_2D,o),L(a.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),v(o)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),P(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)L(a.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,i,n);else L(a.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,i,0);v(r)&&y(i),n.unbindTexture()}t.depthBuffer&&D(t)},this.updateRenderTargetMipmap=function(t){let r=t.textures;for(let a=0,o=r.length;a<o;a++){let o=r[a];if(v(o)){let r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),y(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0){if(!1===U(t)){let r=t.textures,a=t.width,o=t.height,s=e.COLOR_BUFFER_BIT,l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),d=r.length>1;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);let t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===c&&(N.length=0,F.length=0,N.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(N.push(l),F.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,F)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,N))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);let a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&c){let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}}},this.setupDepthRenderbuffer=D,this.setupFrameBufferTexture=L,this.useMultisampledRTT=U}function tv(e,t){return{convert:function(n,i=r.aCh){let a;let o=r.epp.getTransfer(i);if(n===r.ywz)return e.UNSIGNED_BYTE;if(n===r.k0A)return e.UNSIGNED_SHORT_4_4_4_4;if(n===r.irR)return e.UNSIGNED_SHORT_5_5_5_1;if(n===r.tQZ)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===r.T95)return e.BYTE;if(n===r.iAb)return e.SHORT;if(n===r.LsT)return e.UNSIGNED_SHORT;if(n===r.Kz5)return e.INT;if(n===r.JQ4)return e.UNSIGNED_INT;if(n===r.VzW)return e.FLOAT;if(n===r.cLu)return e.HALF_FLOAT;if(n===r.OTo)return e.ALPHA;if(n===r.UCm)return e.RGB;if(n===r.wk1)return e.RGBA;if(n===r.Y8D)return e.LUMINANCE;if(n===r.cRx)return e.LUMINANCE_ALPHA;if(n===r.qkB)return e.DEPTH_COMPONENT;if(n===r.brP)return e.DEPTH_STENCIL;if(n===r.hEm)return e.RED;if(n===r.D9w)return e.RED_INTEGER;if(n===r.av9)return e.RG;if(n===r.CtA)return e.RG_INTEGER;if(n===r.E2K)return e.RGBA_INTEGER;if(n===r.wuA||n===r.BFQ||n===r.v3W||n===r.ILR){if(o===r.j17){if(null===(a=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===r.wuA)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===r.BFQ)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===r.v3W)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===r.ILR)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===r.wuA)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===r.BFQ)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===r.v3W)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===r.ILR)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(n===r._AM||n===r.vCx||n===r.eaV||n===r.CaW){if(null===(a=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===r._AM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===r.vCx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===r.eaV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===r.CaW)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===r.fto||n===r.l0P||n===r.ekQ){if(null===(a=t.get("WEBGL_compressed_texture_etc")))return null;if(n===r.fto||n===r.l0P)return o===r.j17?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===r.ekQ)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===r.ptH||n===r.jZA||n===r.y2t||n===r.gi4||n===r.Djp||n===r.BG$||n===r.NYV||n===r.xJs||n===r.pKu||n===r.GG6||n===r.Gih||n===r.FUD||n===r.iiP||n===r.SvJ){if(null===(a=t.get("WEBGL_compressed_texture_astc")))return null;if(n===r.ptH)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===r.jZA)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===r.y2t)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===r.gi4)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===r.Djp)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===r.BG$)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===r.NYV)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===r.xJs)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===r.pKu)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===r.GG6)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===r.Gih)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===r.FUD)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===r.iiP)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===r.SvJ)return o===r.j17?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===r.bsb||n===r.f2y||n===r.QO2){if(null===(a=t.get("EXT_texture_compression_bptc")))return null;if(n===r.bsb)return o===r.j17?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===r.f2y)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===r.QO2)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===r.HdW||n===r.vuL||n===r.ZTh||n===r.lGU){if(null===(a=t.get("EXT_texture_compression_rgtc")))return null;if(n===r.bsb)return a.COMPRESSED_RED_RGTC1_EXT;if(n===r.vuL)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===r.ZTh)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===r.lGU)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===r.wJv?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}let ty=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,tb=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class tx{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){let i=new r.xEZ;e.properties.get(i).__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(null!==this.texture&&null===this.mesh){let t=e.cameras[0].viewport,n=new r.jyz({vertexShader:ty,fragmentShader:tb,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new r.Kj0(new r._12(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class t_ extends r.pBf{constructor(e,t){super();let n=this,a=null,o=1,s=null,l="local-floor",u=1,c=null,d=null,h=null,f=null,p=null,m=null,g=new tx,v=t.getContextAttributes(),y=null,b=null,x=[],_=[],w=new r.FM8,S=null,A=new r.cPb;A.viewport=new r.Ltg;let M=new r.cPb;M.viewport=new r.Ltg;let E=[A,M],C=new r.HkE,T=null,R=null;function P(e){let t=_.indexOf(e.inputSource);if(-1===t)return;let n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,c||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function I(){a.removeEventListener("select",P),a.removeEventListener("selectstart",P),a.removeEventListener("selectend",P),a.removeEventListener("squeeze",P),a.removeEventListener("squeezestart",P),a.removeEventListener("squeezeend",P),a.removeEventListener("end",I),a.removeEventListener("inputsourceschange",B);for(let e=0;e<x.length;e++){let t=_[e];null!==t&&(_[e]=null,x[e].disconnect(t))}T=null,R=null,g.reset(),e.setRenderTarget(y),p=null,f=null,h=null,a=null,b=null,F.stop(),n.isPresenting=!1,e.setPixelRatio(S),e.setSize(w.width,w.height,!1),n.dispatchEvent({type:"sessionend"})}function B(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=_.indexOf(n);r>=0&&(_[r]=null,x[r].disconnect(n))}for(let t=0;t<e.added.length;t++){let n=e.added[t],r=_.indexOf(n);if(-1===r){for(let e=0;e<x.length;e++){if(e>=_.length){_.push(n),r=e;break}if(null===_[e]){_[e]=n,r=e;break}}if(-1===r)break}let i=x[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new r.NiX,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new r.NiX,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new r.NiX,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){l=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(e){c=e},this.getBaseLayer=function(){return null!==f?f:p},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return a},this.setSession=async function(i){if(null!==(a=i)){if(y=e.getRenderTarget(),a.addEventListener("select",P),a.addEventListener("selectstart",P),a.addEventListener("selectend",P),a.addEventListener("squeeze",P),a.addEventListener("squeezestart",P),a.addEventListener("squeezeend",P),a.addEventListener("end",I),a.addEventListener("inputsourceschange",B),!0!==v.xrCompatible&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(w),"undefined"!=typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,i=null,s=null;v.depth&&(s=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?r.brP:r.qkB,i=v.stencil?r.wJv:r.JQ4);let l={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:o};f=(h=new XRWebGLBinding(a,t)).createProjectionLayer(l),a.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),b=new r.dd2(f.textureWidth,f.textureHeight,{format:r.wk1,type:r.ywz,depthTexture:new r.$YQ(f.textureWidth,f.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:4*!!v.antialias,resolveDepthBuffer:!1===f.ignoreDepthValues})}else{let n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(a,t,n),a.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new r.dd2(p.framebufferWidth,p.framebufferHeight,{format:r.wk1,type:r.ywz,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}b.isXRRenderTarget=!0,this.setFoveation(u),c=null,s=await a.requestReferenceSpace(l),F.setContext(a),F.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};let L=new r.Pa4,k=new r.Pa4;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){var t,n,i;if(null===a)return;let o=e.near,s=e.far;null!==g.texture&&(g.depthNear>0&&(o=g.depthNear),g.depthFar>0&&(s=g.depthFar)),C.near=M.near=A.near=o,C.far=M.far=A.far=s,(T!==C.near||R!==C.far)&&(a.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,R=C.far),A.layers.mask=2|e.layers.mask,M.layers.mask=4|e.layers.mask,C.layers.mask=A.layers.mask|M.layers.mask;let l=e.parent,u=C.cameras;D(C,l);for(let e=0;e<u.length;e++)D(u[e],l);2===u.length?function(e,t,n){L.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);let r=L.distanceTo(k),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=r/(-c+d),f=-(h*c);if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(h),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{let t=o+h,n=s+h;e.projectionMatrix.makePerspective(o*c-f,o*d+(r-f),l*s/n*t,u*s/n*t,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,A,M):C.projectionMatrix.copy(A.projectionMatrix),t=e,n=C,null===(i=l)?t.matrix.copy(n.matrixWorld):(t.matrix.copy(i.matrixWorld),t.matrix.invert(),t.matrix.multiply(n.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(n.projectionMatrix),t.projectionMatrixInverse.copy(n.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*r.I3e*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==f||null!==p)return u},this.setFoveation=function(e){u=e,null!==f&&(f.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(C)};let N=null,F=new i;F.setAnimationLoop(function(t,i){if(d=i.getViewerPose(c||s),m=i,null!==d){let t=d.views;null!==p&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let n=!1;t.length!==C.cameras.length&&(C.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){let a=t[i],o=null;if(null!==p)o=p.getViewport(a);else{let t=h.getViewSubImage(f,a);o=t.viewport,0===i&&(e.setRenderTargetTextures(b,t.colorTexture,f.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(b))}let s=E[i];void 0===s&&((s=new r.cPb).layers.enable(i),s.viewport=new r.Ltg,E[i]=s),s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(a.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===i&&(C.matrix.copy(s.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===n&&C.cameras.push(s)}let i=a.enabledFeatures;if(i&&i.includes("depth-sensing")&&"gpu-optimized"==a.depthUsage&&h){let n=h.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&g.init(e,n,a.renderState)}}for(let e=0;e<x.length;e++){let t=_[e],n=x[e];null!==t&&void 0!==n&&n.update(t,i,c||s)}N&&N(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),m=null}),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}let tw=new r.USm,tS=new r.yGw;function tA(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,i.side===r._Li&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),i.side===r._Li&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);let a=t.get(i),o=a.envMap,s=a.envMapRotation;o&&(e.envMap.value=o,tw.copy(s),tw.x*=-1,tw.y*=-1,tw.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(tw.y*=-1,tw.z*=-1),e.envMapRotation.value.setFromMatrix4(tS.makeRotationFromEuler(tw)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,(0,r.oDz)(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,a,o,s,l){var u,c,d,h,f,p,m,g,v,y,b,x,_,w,S,A,M,E,C,T,R;a.isMeshBasicMaterial?i(e,a):a.isMeshLambertMaterial?i(e,a):a.isMeshToonMaterial?(i(e,a),u=e,(c=a).gradientMap&&(u.gradientMap.value=c.gradientMap)):a.isMeshPhongMaterial?(i(e,a),d=e,h=a,d.specular.value.copy(h.specular),d.shininess.value=Math.max(h.shininess,1e-4)):a.isMeshStandardMaterial?(i(e,a),f=e,p=a,f.metalness.value=p.metalness,p.metalnessMap&&(f.metalnessMap.value=p.metalnessMap,n(p.metalnessMap,f.metalnessMapTransform)),f.roughness.value=p.roughness,p.roughnessMap&&(f.roughnessMap.value=p.roughnessMap,n(p.roughnessMap,f.roughnessMapTransform)),p.envMap&&(f.envMapIntensity.value=p.envMapIntensity),a.isMeshPhysicalMaterial&&(m=e,g=a,v=l,m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===r._Li&&m.clearcoatNormalScale.value.negate())),g.dispersion>0&&(m.dispersion.value=g.dispersion),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,m.specularIntensityMapTransform)))):a.isMeshMatcapMaterial?(i(e,a),y=e,(b=a).matcap&&(y.matcap.value=b.matcap)):a.isMeshDepthMaterial?i(e,a):a.isMeshDistanceMaterial?(i(e,a),function(e,n){let r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,a)):a.isMeshNormalMaterial?i(e,a):a.isLineBasicMaterial?(x=e,_=a,x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,_.map&&(x.map.value=_.map,n(_.map,x.mapTransform)),a.isLineDashedMaterial&&(w=e,S=a,w.dashSize.value=S.dashSize,w.totalSize.value=S.dashSize+S.gapSize,w.scale.value=S.scale)):a.isPointsMaterial?(A=e,M=a,E=o,C=s,A.diffuse.value.copy(M.color),A.opacity.value=M.opacity,A.size.value=M.size*E,A.scale.value=.5*C,M.map&&(A.map.value=M.map,n(M.map,A.uvTransform)),M.alphaMap&&(A.alphaMap.value=M.alphaMap,n(M.alphaMap,A.alphaMapTransform)),M.alphaTest>0&&(A.alphaTest.value=M.alphaTest)):a.isSpriteMaterial?(T=e,R=a,T.diffuse.value.copy(R.color),T.opacity.value=R.opacity,T.rotation.value=R.rotation,R.map&&(T.map.value=R.map,n(R.map,T.mapTransform)),R.alphaMap&&(T.alphaMap.value=R.alphaMap,n(R.alphaMap,T.alphaMapTransform)),R.alphaTest>0&&(T.alphaTest.value=R.alphaTest)):a.isShadowMaterial?(e.color.value.copy(a.color),e.opacity.value=a.opacity):a.isShaderMaterial&&(a.uniformsNeedUpdate=!1)}}}function tM(e,t,n,r){let i={},a={},o=[],s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e){let t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){let n=t.target;n.removeEventListener("dispose",u);let r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){let n=t.program;r.uniformBlockBinding(e,n)},update:function(n,c){let d=i[n.id];void 0===d&&(function(e){let t=e.uniforms,n=0;for(let e=0,r=t.length;e<r;e++){let r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){let t=r[e],i=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=i.length;e<r;e++){let r=l(i[e]),a=n%16,o=a%r.boundary,s=a+o;n+=o,0!==s&&16-s<r.storage&&(n+=16-s),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}let r=n%16;r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),d=function(t){let n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;let r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));let h=c.program;r.updateUBOMapping(n,h);let f=t.render.frame;a[n.id]!==f&&(function(t){let n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){let n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){let i=n[r];if(!0===function(e,t,n,r){let i=e.value,a=t+"_"+n;if(void 0===r[a])return"number"==typeof i||"boolean"==typeof i?r[a]=i:r[a]=i.clone(),!0;{let e=r[a];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}(i,t,r,a)){let t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value],r=0;for(let a=0;a<n.length;a++){let o=n[a],s=l(o);"number"==typeof o||"boolean"==typeof o?(i.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(let t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}class tE{constructor(e={}){let t,n,o,s,l,u,c,d,y,b,x,_,w,S,A,M,E,C,T,R,P,I,B,L,H;let{canvas:G=(0,r.O5A)(),context:V=null,depth:j=!0,stencil:W=!1,alpha:X=!1,antialias:J=!1,premultipliedAlpha:Y=!0,preserveDrawingBuffer:K=!1,powerPreference:q="default",failIfMajorPerformanceCaveat:Q=!1,reverseDepthBuffer:Z=!1}=e;if(this.isWebGLRenderer=!0,null!==V){if("undefined"!=typeof WebGLRenderingContext&&V instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");t=V.getContextAttributes().alpha}else t=X;let $=new Uint32Array(4),ee=new Int32Array(4),et=null,en=null,er=[],ei=[];this.domElement=G,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=r.KI_,this.toneMapping=r.uL9,this.toneMappingExposure=1;let ea=this,eo=!1,es=0,el=0,eu=null,ec=-1,ed=null,eh=new r.Ltg,ef=new r.Ltg,ep=null,em=new r.Ilk(0),eg=0,ev=G.width,ey=G.height,eb=1,ex=null,e_=null,ew=new r.Ltg(0,0,ev,ey),eS=new r.Ltg(0,0,ev,ey),eA=!1,eM=new r.iWj,eE=!1,eC=!1;this.transmissionResolutionScale=1;let eT=new r.yGw,eR=new r.yGw,eP=new r.Pa4,eI=new r.Ltg,eB={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},eL=!1;function ek(){return null===eu?eb:1}let eD=V;function eN(e,t){return G.getContext(e,t)}try{if("setAttribute"in G&&G.setAttribute("data-engine",`three.js r${r.UZH}`),G.addEventListener("webglcontextlost",eU,!1),G.addEventListener("webglcontextrestored",ez,!1),G.addEventListener("webglcontextcreationerror",eH,!1),null===eD){let e="webgl2";if(eD=eN(e,{alpha:!0,depth:j,stencil:W,antialias:J,premultipliedAlpha:Y,preserveDrawingBuffer:K,powerPreference:q,failIfMajorPerformanceCaveat:Q}),null===eD){if(eN(e))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function eF(){(n=new D(eD)).init(),B=new tv(eD,n),o=new m(eD,n,e,B),s=new tm(eD,n),o.reverseDepthBuffer&&Z&&s.buffers.depth.setReversed(!0),l=new O(eD),u=new tn,c=new tg(eD,n,s,u,o,B,l),d=new v(ea),y=new k(ea),b=new a(eD),L=new f(eD,b),x=new N(eD,b,l,L),_=new z(eD,x,b,l),R=new U(eD,o,c),E=new g(u),w=new tt(ea,d,y,n,o,L,E),S=new tA(ea,u),A=new to,M=new th(n),T=new h(ea,d,y,s,_,t,Y),C=new tf(ea,_,o),H=new tM(eD,l,o,s),P=new p(eD,n,l),I=new F(eD,n,l),l.programs=w.programs,ea.capabilities=o,ea.extensions=n,ea.properties=u,ea.renderLists=A,ea.shadowMap=C,ea.state=s,ea.info=l}eF();let eO=new t_(ea,eD);function eU(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),eo=!0}function ez(){console.log("THREE.WebGLRenderer: Context Restored."),eo=!1;let e=l.autoReset,t=C.enabled,n=C.autoUpdate,r=C.needsUpdate,i=C.type;eF(),l.autoReset=e,C.enabled=t,C.autoUpdate=n,C.needsUpdate=r,C.type=i}function eH(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eG(e){var t;let n=e.target;n.removeEventListener("dispose",eG),function(e){let t=u.get(e).programs;void 0!==t&&(t.forEach(function(e){w.releaseProgram(e)}),e.isShaderMaterial&&w.releaseShaderCache(e))}(t=n),u.remove(t)}function eV(e,t,n){!0===e.transparent&&e.side===r.ehD&&!1===e.forceSinglePass?(e.side=r._Li,e.needsUpdate=!0,e0(e,t,n),e.side=r.Wl3,e.needsUpdate=!0,e0(e,t,n),e.side=r.ehD):e0(e,t,n)}this.xr=eO,this.getContext=function(){return eD},this.getContextAttributes=function(){return eD.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return eb},this.setPixelRatio=function(e){void 0!==e&&(eb=e,this.setSize(ev,ey,!1))},this.getSize=function(e){return e.set(ev,ey)},this.setSize=function(e,t,n=!0){if(eO.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ev=e,ey=t,G.width=Math.floor(e*eb),G.height=Math.floor(t*eb),!0===n&&(G.style.width=e+"px",G.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return e.set(ev*eb,ey*eb).floor()},this.setDrawingBufferSize=function(e,t,n){ev=e,ey=t,eb=n,G.width=Math.floor(e*n),G.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(eh)},this.getViewport=function(e){return e.copy(ew)},this.setViewport=function(e,t,n,r){e.isVector4?ew.set(e.x,e.y,e.z,e.w):ew.set(e,t,n,r),s.viewport(eh.copy(ew).multiplyScalar(eb).round())},this.getScissor=function(e){return e.copy(eS)},this.setScissor=function(e,t,n,r){e.isVector4?eS.set(e.x,e.y,e.z,e.w):eS.set(e,t,n,r),s.scissor(ef.copy(eS).multiplyScalar(eb).round())},this.getScissorTest=function(){return eA},this.setScissorTest=function(e){s.setScissorTest(eA=e)},this.setOpaqueSort=function(e){ex=e},this.setTransparentSort=function(e){e_=e},this.getClearColor=function(e){return e.copy(T.getClearColor())},this.setClearColor=function(){T.setClearColor.apply(T,arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha.apply(T,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==eu){let t=eu.texture.format;e=t===r.E2K||t===r.CtA||t===r.D9w}if(e){let e=eu.texture.type,t=e===r.ywz||e===r.JQ4||e===r.LsT||e===r.wJv||e===r.k0A||e===r.irR,n=T.getClearColor(),i=T.getClearAlpha(),a=n.r,o=n.g,s=n.b;t?($[0]=a,$[1]=o,$[2]=s,$[3]=i,eD.clearBufferuiv(eD.COLOR,0,$)):(ee[0]=a,ee[1]=o,ee[2]=s,ee[3]=i,eD.clearBufferiv(eD.COLOR,0,ee))}else i|=eD.COLOR_BUFFER_BIT}t&&(i|=eD.DEPTH_BUFFER_BIT),n&&(i|=eD.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),eD.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){G.removeEventListener("webglcontextlost",eU,!1),G.removeEventListener("webglcontextrestored",ez,!1),G.removeEventListener("webglcontextcreationerror",eH,!1),T.dispose(),A.dispose(),M.dispose(),u.dispose(),d.dispose(),y.dispose(),_.dispose(),L.dispose(),H.dispose(),w.dispose(),eO.dispose(),eO.removeEventListener("sessionstart",eX),eO.removeEventListener("sessionend",eJ),eY.stop()},this.renderBufferDirect=function(e,t,i,a,l,h){let f;null===t&&(t=eB);let p=l.isMesh&&0>l.matrixWorld.determinant(),m=function(e,t,n,i,a){var l,h;!0!==t.isScene&&(t=eB),c.resetTextureUnits();let f=t.fog,p=i.isMeshStandardMaterial?t.environment:null,m=null===eu?ea.outputColorSpace:!0===eu.isXRRenderTarget?eu.texture.colorSpace:r.GUF,g=(i.isMeshStandardMaterial?y:d).get(i.envMap||p),v=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,b=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),x=!!n.morphAttributes.position,_=!!n.morphAttributes.normal,w=!!n.morphAttributes.color,A=r.uL9;i.toneMapped&&(null===eu||!0===eu.isXRRenderTarget)&&(A=ea.toneMapping);let M=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,C=void 0!==M?M.length:0,T=u.get(i),P=en.state.lights;if(!0===eE&&(!0===eC||e!==ed)){let t=e===ed&&i.id===ec;E.setState(i,e,t)}let I=!1;i.version===T.__version?T.needsLights&&T.lightsStateVersion!==P.state.version?I=!0:T.outputColorSpace!==m?I=!0:a.isBatchedMesh&&!1===T.batching?I=!0:a.isBatchedMesh||!0!==T.batching?a.isBatchedMesh&&!0===T.batchingColor&&null===a.colorTexture?I=!0:a.isBatchedMesh&&!1===T.batchingColor&&null!==a.colorTexture?I=!0:a.isInstancedMesh&&!1===T.instancing?I=!0:a.isInstancedMesh||!0!==T.instancing?a.isSkinnedMesh&&!1===T.skinning?I=!0:a.isSkinnedMesh||!0!==T.skinning?a.isInstancedMesh&&!0===T.instancingColor&&null===a.instanceColor?I=!0:a.isInstancedMesh&&!1===T.instancingColor&&null!==a.instanceColor?I=!0:a.isInstancedMesh&&!0===T.instancingMorph&&null===a.morphTexture?I=!0:a.isInstancedMesh&&!1===T.instancingMorph&&null!==a.morphTexture?I=!0:T.envMap!==g?I=!0:!0===i.fog&&T.fog!==f?I=!0:void 0!==T.numClippingPlanes&&(T.numClippingPlanes!==E.numPlanes||T.numIntersection!==E.numIntersection)?I=!0:T.vertexAlphas!==v?I=!0:T.vertexTangents!==b?I=!0:T.morphTargets!==x?I=!0:T.morphNormals!==_?I=!0:T.morphColors!==w?I=!0:T.toneMapping!==A?I=!0:T.morphTargetsCount!==C&&(I=!0):I=!0:I=!0:I=!0:(I=!0,T.__version=i.version);let B=T.currentProgram;!0===I&&(B=e0(i,t,a));let L=!1,k=!1,D=!1,N=B.getUniforms(),F=T.uniforms;if(s.useProgram(B.program)&&(L=!0,k=!0,D=!0),i.id!==ec&&(ec=i.id,k=!0),L||ed!==e){s.buffers.depth.getReversed()?(eT.copy(e.projectionMatrix),(0,r.tNt)(eT),(0,r.yHo)(eT),N.setValue(eD,"projectionMatrix",eT)):N.setValue(eD,"projectionMatrix",e.projectionMatrix),N.setValue(eD,"viewMatrix",e.matrixWorldInverse);let t=N.map.cameraPosition;void 0!==t&&t.setValue(eD,eP.setFromMatrixPosition(e.matrixWorld)),o.logarithmicDepthBuffer&&N.setValue(eD,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&N.setValue(eD,"isOrthographic",!0===e.isOrthographicCamera),ed!==e&&(ed=e,k=!0,D=!0)}if(a.isSkinnedMesh){N.setOptional(eD,a,"bindMatrix"),N.setOptional(eD,a,"bindMatrixInverse");let e=a.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),N.setValue(eD,"boneTexture",e.boneTexture,c))}a.isBatchedMesh&&(N.setOptional(eD,a,"batchingTexture"),N.setValue(eD,"batchingTexture",a._matricesTexture,c),N.setOptional(eD,a,"batchingIdTexture"),N.setValue(eD,"batchingIdTexture",a._indirectTexture,c),N.setOptional(eD,a,"batchingColorTexture"),null!==a._colorsTexture&&N.setValue(eD,"batchingColorTexture",a._colorsTexture,c));let O=n.morphAttributes;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color)&&R.update(a,n,B),(k||T.receiveShadow!==a.receiveShadow)&&(T.receiveShadow=a.receiveShadow,N.setValue(eD,"receiveShadow",a.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(F.envMap.value=g,F.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1),i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(F.envMapIntensity.value=t.environmentIntensity),k&&(N.setValue(eD,"toneMappingExposure",ea.toneMappingExposure),T.needsLights&&(l=F,h=D,l.ambientLightColor.needsUpdate=h,l.lightProbe.needsUpdate=h,l.directionalLights.needsUpdate=h,l.directionalLightShadows.needsUpdate=h,l.pointLights.needsUpdate=h,l.pointLightShadows.needsUpdate=h,l.spotLights.needsUpdate=h,l.spotLightShadows.needsUpdate=h,l.rectAreaLights.needsUpdate=h,l.hemisphereLights.needsUpdate=h),f&&!0===i.fog&&S.refreshFogUniforms(F,f),S.refreshMaterialUniforms(F,i,eb,ey,en.state.transmissionRenderTarget[e.id]),ej.upload(eD,e1(T),F,c)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(ej.upload(eD,e1(T),F,c),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&N.setValue(eD,"center",a.center),N.setValue(eD,"modelViewMatrix",a.modelViewMatrix),N.setValue(eD,"normalMatrix",a.normalMatrix),N.setValue(eD,"modelMatrix",a.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){let e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){let n=e[t];H.update(n,B),H.bind(n,B)}}return B}(e,t,i,a,l);s.setMaterial(a,p);let g=i.index,v=1;if(!0===a.wireframe){if(void 0===(g=x.getWireframeAttribute(i)))return;v=2}let _=i.drawRange,w=i.attributes.position,A=_.start*v,M=(_.start+_.count)*v;null!==h&&(A=Math.max(A,h.start*v),M=Math.min(M,(h.start+h.count)*v)),null!==g?(A=Math.max(A,0),M=Math.min(M,g.count)):null!=w&&(A=Math.max(A,0),M=Math.min(M,w.count));let C=M-A;if(C<0||C===1/0)return;L.setup(l,a,m,i,g);let T=P;if(null!==g&&(f=b.get(g),(T=I).setIndex(f)),l.isMesh)!0===a.wireframe?(s.setLineWidth(a.wireframeLinewidth*ek()),T.setMode(eD.LINES)):T.setMode(eD.TRIANGLES);else if(l.isLine){let e=a.linewidth;void 0===e&&(e=1),s.setLineWidth(e*ek()),l.isLineSegments?T.setMode(eD.LINES):l.isLineLoop?T.setMode(eD.LINE_LOOP):T.setMode(eD.LINE_STRIP)}else l.isPoints?T.setMode(eD.POINTS):l.isSprite&&T.setMode(eD.TRIANGLES);if(l.isBatchedMesh){if(null!==l._multiDrawInstances)T.renderMultiDrawInstances(l._multiDrawStarts,l._multiDrawCounts,l._multiDrawCount,l._multiDrawInstances);else if(n.get("WEBGL_multi_draw"))T.renderMultiDraw(l._multiDrawStarts,l._multiDrawCounts,l._multiDrawCount);else{let e=l._multiDrawStarts,t=l._multiDrawCounts,n=l._multiDrawCount,r=g?b.get(g).bytesPerElement:1,i=u.get(a).currentProgram.getUniforms();for(let a=0;a<n;a++)i.setValue(eD,"_gl_DrawID",a),T.render(e[a]/r,t[a])}}else if(l.isInstancedMesh)T.renderInstances(A,C,l.count);else if(i.isInstancedBufferGeometry){let e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);T.renderInstances(A,C,t)}else T.render(A,C)},this.compile=function(e,t,n=null){null===n&&(n=e),(en=M.get(n)).init(t),ei.push(en),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(en.pushLight(e),e.castShadow&&en.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(en.pushLight(e),e.castShadow&&en.pushShadow(e))}),en.setupLights();let r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;let t=e.material;if(t){if(Array.isArray(t))for(let i=0;i<t.length;i++){let a=t[i];eV(a,n,e),r.add(a)}else eV(t,n,e),r.add(t)}}),ei.pop(),en=null,r},this.compileAsync=function(e,t,r=null){let i=this.compile(e,t,r);return new Promise(t=>{function r(){if(i.forEach(function(e){u.get(e).currentProgram.isReady()&&i.delete(e)}),0===i.size){t(e);return}setTimeout(r,10)}null!==n.get("KHR_parallel_shader_compile")?r():setTimeout(r,10)})};let eW=null;function eX(){eY.stop()}function eJ(){eY.start()}let eY=new i;function eK(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)en.pushLight(e),e.castShadow&&en.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||eM.intersectsSprite(e)){r&&eI.setFromMatrixPosition(e.matrixWorld).applyMatrix4(eR);let t=_.update(e),i=e.material;i.visible&&et.push(e,t,i,n,eI.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||eM.intersectsObject(e))){let t=_.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),eI.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),eI.copy(t.boundingSphere.center)),eI.applyMatrix4(e.matrixWorld).applyMatrix4(eR)),Array.isArray(i)){let r=t.groups;for(let a=0,o=r.length;a<o;a++){let o=r[a],s=i[o.materialIndex];s&&s.visible&&et.push(e,t,s,n,eI.z,o)}}else i.visible&&et.push(e,t,i,n,eI.z,null)}}let i=e.children;for(let e=0,a=i.length;e<a;e++)eK(i[e],t,n,r)}function eq(e,t,n,r){let i=e.opaque,a=e.transmissive,o=e.transparent;en.setupLightsView(n),!0===eE&&E.setGlobalState(ea.clippingPlanes,n),r&&s.viewport(eh.copy(r)),i.length>0&&eZ(i,t,n),a.length>0&&eZ(a,t,n),o.length>0&&eZ(o,t,n),s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),s.setPolygonOffset(!1)}function eQ(e,t,i,a){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;void 0===en.state.transmissionRenderTarget[a.id]&&(en.state.transmissionRenderTarget[a.id]=new r.dd2(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float")?r.cLu:r.ywz,minFilter:r.D1R,samples:4,stencilBuffer:W,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:r.epp.workingColorSpace}));let o=en.state.transmissionRenderTarget[a.id],s=a.viewport||eh;o.setSize(s.z*ea.transmissionResolutionScale,s.w*ea.transmissionResolutionScale);let l=ea.getRenderTarget();ea.setRenderTarget(o),ea.getClearColor(em),(eg=ea.getClearAlpha())<1&&ea.setClearColor(0xffffff,.5),ea.clear(),eL&&T.render(i);let u=ea.toneMapping;ea.toneMapping=r.uL9;let d=a.viewport;if(void 0!==a.viewport&&(a.viewport=void 0),en.setupLightsView(a),!0===eE&&E.setGlobalState(ea.clippingPlanes,a),eZ(e,i,a),c.updateMultisampleRenderTarget(o),c.updateRenderTargetMipmap(o),!1===n.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let n=0,o=t.length;n<o;n++){let o=t[n],s=o.object,l=o.geometry,u=o.material,c=o.group;if(u.side===r.ehD&&s.layers.test(a.layers)){let t=u.side;u.side=r._Li,u.needsUpdate=!0,e$(s,i,a,l,u,c),u.side=t,u.needsUpdate=!0,e=!0}}!0===e&&(c.updateMultisampleRenderTarget(o),c.updateRenderTargetMipmap(o))}ea.setRenderTarget(l),ea.setClearColor(em,eg),void 0!==d&&(a.viewport=d),ea.toneMapping=u}function eZ(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){let a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,u=a.group;o.layers.test(n.layers)&&e$(o,t,n,s,l,u)}}function e$(e,t,n,i,a,o){e.onBeforeRender(ea,t,n,i,a,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(ea,t,n,i,e,o),!0===a.transparent&&a.side===r.ehD&&!1===a.forceSinglePass?(a.side=r._Li,a.needsUpdate=!0,ea.renderBufferDirect(n,t,i,a,e,o),a.side=r.Wl3,a.needsUpdate=!0,ea.renderBufferDirect(n,t,i,a,e,o),a.side=r.ehD):ea.renderBufferDirect(n,t,i,a,e,o),e.onAfterRender(ea,t,n,i,a,o)}function e0(e,t,n){var r;!0!==t.isScene&&(t=eB);let i=u.get(e),a=en.state.lights,o=en.state.shadowsArray,s=a.state.version,l=w.getParameters(e,a.state,o,t,n),c=w.getProgramCacheKey(l),h=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?y:d).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===h&&(e.addEventListener("dispose",eG),h=new Map,i.programs=h);let f=h.get(c);if(void 0!==f){if(i.currentProgram===f&&i.lightsStateVersion===s)return e2(e,l),f}else l.uniforms=w.getUniforms(e),e.onBeforeCompile(l,ea),f=w.acquireProgram(l,c),h.set(c,f),i.uniforms=l.uniforms;let p=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(p.clippingPlanes=E.uniform),e2(e,l),i.needsLights=(r=e).isMeshLambertMaterial||r.isMeshToonMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isShadowMaterial||r.isShaderMaterial&&!0===r.lights,i.lightsStateVersion=s,i.needsLights&&(p.ambientLightColor.value=a.state.ambient,p.lightProbe.value=a.state.probe,p.directionalLights.value=a.state.directional,p.directionalLightShadows.value=a.state.directionalShadow,p.spotLights.value=a.state.spot,p.spotLightShadows.value=a.state.spotShadow,p.rectAreaLights.value=a.state.rectArea,p.ltc_1.value=a.state.rectAreaLTC1,p.ltc_2.value=a.state.rectAreaLTC2,p.pointLights.value=a.state.point,p.pointLightShadows.value=a.state.pointShadow,p.hemisphereLights.value=a.state.hemi,p.directionalShadowMap.value=a.state.directionalShadowMap,p.directionalShadowMatrix.value=a.state.directionalShadowMatrix,p.spotShadowMap.value=a.state.spotShadowMap,p.spotLightMatrix.value=a.state.spotLightMatrix,p.spotLightMap.value=a.state.spotLightMap,p.pointShadowMap.value=a.state.pointShadowMap,p.pointShadowMatrix.value=a.state.pointShadowMatrix),i.currentProgram=f,i.uniformsList=null,f}function e1(e){if(null===e.uniformsList){let t=e.currentProgram.getUniforms();e.uniformsList=ej.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function e2(e,t){let n=u.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}eY.setAnimationLoop(function(e){eW&&eW(e)}),"undefined"!=typeof self&&eY.setContext(self),this.setAnimationLoop=function(e){eW=e,eO.setAnimationLoop(e),null===e?eY.stop():eY.start()},eO.addEventListener("sessionstart",eX),eO.addEventListener("sessionend",eJ),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!0===eo)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eO.enabled&&!0===eO.isPresenting&&(!0===eO.cameraAutoUpdate&&eO.updateCamera(t),t=eO.getCamera()),!0===e.isScene&&e.onBeforeRender(ea,e,t,eu),(en=M.get(e,ei.length)).init(t),ei.push(en),eR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),eM.setFromProjectionMatrix(eR),eC=this.localClippingEnabled,eE=E.init(this.clippingPlanes,eC),(et=A.get(e,er.length)).init(),er.push(et),!0===eO.enabled&&!0===eO.isPresenting){let e=ea.xr.getDepthSensingMesh();null!==e&&eK(e,t,-1/0,ea.sortObjects)}eK(e,t,0,ea.sortObjects),et.finish(),!0===ea.sortObjects&&et.sort(ex,e_),(eL=!1===eO.enabled||!1===eO.isPresenting||!1===eO.hasDepthSensing())&&T.addToRenderList(et,e),this.info.render.frame++,!0===eE&&E.beginShadows();let n=en.state.shadowsArray;C.render(n,e,t),!0===eE&&E.endShadows(),!0===this.info.autoReset&&this.info.reset();let r=et.opaque,i=et.transmissive;if(en.setupLights(),t.isArrayCamera){let n=t.cameras;if(i.length>0)for(let t=0,a=n.length;t<a;t++)eQ(r,i,e,n[t]);eL&&T.render(e);for(let t=0,r=n.length;t<r;t++){let r=n[t];eq(et,e,r,r.viewport)}}else i.length>0&&eQ(r,i,e,t),eL&&T.render(e),eq(et,e,t);null!==eu&&0===el&&(c.updateMultisampleRenderTarget(eu),c.updateRenderTargetMipmap(eu)),!0===e.isScene&&e.onAfterRender(ea,e,t),L.resetDefaultState(),ec=-1,ed=null,ei.pop(),ei.length>0?(en=ei[ei.length-1],!0===eE&&E.setGlobalState(ea.clippingPlanes,en.state.camera)):en=null,er.pop(),et=er.length>0?er[er.length-1]:null},this.getActiveCubeFace=function(){return es},this.getActiveMipmapLevel=function(){return el},this.getRenderTarget=function(){return eu},this.setRenderTargetTextures=function(e,t,r){u.get(e.texture).__webglTexture=t,u.get(e.depthTexture).__webglTexture=r;let i=u.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===r,i.__autoAllocateDepthBuffer||!0!==n.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){let n=u.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};let e3=eD.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){eu=e,es=t,el=n;let r=!0,i=null,a=!1,o=!1;if(e){let l=u.get(e);if(void 0!==l.__useDefaultFramebuffer)s.bindFramebuffer(eD.FRAMEBUFFER,null),r=!1;else if(void 0===l.__webglFramebuffer)c.setupRenderTarget(e);else if(l.__hasExternalTextures)c.rebindTextures(e,u.get(e.texture).__webglTexture,u.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){let t=e.depthTexture;if(l.__boundDepthTexture!==t){if(null!==t&&u.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");c.setupDepthRenderbuffer(e)}}let d=e.texture;(d.isData3DTexture||d.isDataArrayTexture||d.isCompressedArrayTexture)&&(o=!0);let h=u.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(h[t])?h[t][n]:h[t],a=!0):i=e.samples>0&&!1===c.useMultisampledRTT(e)?u.get(e).__webglMultisampledFramebuffer:Array.isArray(h)?h[n]:h,eh.copy(e.viewport),ef.copy(e.scissor),ep=e.scissorTest}else eh.copy(ew).multiplyScalar(eb).floor(),ef.copy(eS).multiplyScalar(eb).floor(),ep=eA;if(0!==n&&(i=e3),s.bindFramebuffer(eD.FRAMEBUFFER,i)&&r&&s.drawBuffers(e,i),s.viewport(eh),s.scissor(ef),s.setScissorTest(ep),a){let r=u.get(e.texture);eD.framebufferTexture2D(eD.FRAMEBUFFER,eD.COLOR_ATTACHMENT0,eD.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){let r=u.get(e.texture);eD.framebufferTextureLayer(eD.FRAMEBUFFER,eD.COLOR_ATTACHMENT0,r.__webglTexture,n,t)}else if(null!==e&&0!==n){let t=u.get(e.texture);eD.framebufferTexture2D(eD.FRAMEBUFFER,eD.COLOR_ATTACHMENT0,eD.TEXTURE_2D,t.__webglTexture,n)}ec=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,l){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let c=u.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==l&&(c=c[l]),c){s.bindFramebuffer(eD.FRAMEBUFFER,c);try{let s=e.texture,l=s.format,u=s.type;if(!o.textureFormatReadable(l)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!o.textureTypeReadable(u)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&eD.readPixels(t,n,r,i,B.convert(l),B.convert(u),a)}finally{let e=null!==eu?u.get(eu).__webglFramebuffer:null;s.bindFramebuffer(eD.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,a,l,c){if(!(e&&e.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let d=u.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==c&&(d=d[c]),d){let c=e.texture,h=c.format,f=c.type;if(!o.textureFormatReadable(h))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!o.textureTypeReadable(f))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-a){s.bindFramebuffer(eD.FRAMEBUFFER,d);let e=eD.createBuffer();eD.bindBuffer(eD.PIXEL_PACK_BUFFER,e),eD.bufferData(eD.PIXEL_PACK_BUFFER,l.byteLength,eD.STREAM_READ),eD.readPixels(t,n,i,a,B.convert(h),B.convert(f),0);let o=null!==eu?u.get(eu).__webglFramebuffer:null;s.bindFramebuffer(eD.FRAMEBUFFER,o);let c=eD.fenceSync(eD.SYNC_GPU_COMMANDS_COMPLETE,0);return eD.flush(),await (0,r.Qey)(eD,c,4),eD.bindBuffer(eD.PIXEL_PACK_BUFFER,e),eD.getBufferSubData(eD.PIXEL_PACK_BUFFER,0,l),eD.deleteBuffer(e),eD.deleteSync(c),l}throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){!0!==e.isTexture&&((0,r.O4K)("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);let i=Math.pow(2,-n),a=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),l=null!==t?t.x:0,u=null!==t?t.y:0;c.setTexture2D(e,0),eD.copyTexSubImage2D(eD.TEXTURE_2D,n,0,0,l,u,a,o),s.unbindTexture()};let e4=eD.createFramebuffer(),e5=eD.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,i=null,a=0,o=null){let l,d,h,f,p,m,g,v,y,b;!0!==e.isTexture&&((0,r.O4K)("WebGLRenderer: copyTextureToTexture function signature has changed."),i=arguments[0]||null,e=arguments[1],t=arguments[2],o=arguments[3]||0,n=null),null===o&&(0!==a?((0,r.O4K)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),o=a,a=0):o=0);let x=e.isCompressedTexture?e.mipmaps[o]:e.image;if(null!==n)l=n.max.x-n.min.x,d=n.max.y-n.min.y,h=n.isBox3?n.max.z-n.min.z:1,f=n.min.x,p=n.min.y,m=n.isBox3?n.min.z:0;else{let t=Math.pow(2,-a);l=Math.floor(x.width*t),d=Math.floor(x.height*t),h=e.isDataArrayTexture?x.depth:e.isData3DTexture?Math.floor(x.depth*t):1,f=0,p=0,m=0}null!==i?(g=i.x,v=i.y,y=i.z):(g=0,v=0,y=0);let _=B.convert(t.format),w=B.convert(t.type);t.isData3DTexture?(c.setTexture3D(t,0),b=eD.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(c.setTexture2DArray(t,0),b=eD.TEXTURE_2D_ARRAY):(c.setTexture2D(t,0),b=eD.TEXTURE_2D),eD.pixelStorei(eD.UNPACK_FLIP_Y_WEBGL,t.flipY),eD.pixelStorei(eD.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),eD.pixelStorei(eD.UNPACK_ALIGNMENT,t.unpackAlignment);let S=eD.getParameter(eD.UNPACK_ROW_LENGTH),A=eD.getParameter(eD.UNPACK_IMAGE_HEIGHT),M=eD.getParameter(eD.UNPACK_SKIP_PIXELS),E=eD.getParameter(eD.UNPACK_SKIP_ROWS),C=eD.getParameter(eD.UNPACK_SKIP_IMAGES);eD.pixelStorei(eD.UNPACK_ROW_LENGTH,x.width),eD.pixelStorei(eD.UNPACK_IMAGE_HEIGHT,x.height),eD.pixelStorei(eD.UNPACK_SKIP_PIXELS,f),eD.pixelStorei(eD.UNPACK_SKIP_ROWS,p),eD.pixelStorei(eD.UNPACK_SKIP_IMAGES,m);let T=e.isDataArrayTexture||e.isData3DTexture,R=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){let n=u.get(e),r=u.get(t),i=u.get(n.__renderTarget),c=u.get(r.__renderTarget);s.bindFramebuffer(eD.READ_FRAMEBUFFER,i.__webglFramebuffer),s.bindFramebuffer(eD.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<h;n++)T&&(eD.framebufferTextureLayer(eD.READ_FRAMEBUFFER,eD.COLOR_ATTACHMENT0,u.get(e).__webglTexture,a,m+n),eD.framebufferTextureLayer(eD.DRAW_FRAMEBUFFER,eD.COLOR_ATTACHMENT0,u.get(t).__webglTexture,o,y+n)),eD.blitFramebuffer(f,p,l,d,g,v,l,d,eD.DEPTH_BUFFER_BIT,eD.NEAREST);s.bindFramebuffer(eD.READ_FRAMEBUFFER,null),s.bindFramebuffer(eD.DRAW_FRAMEBUFFER,null)}else if(0!==a||e.isRenderTargetTexture||u.has(e)){let n=u.get(e),r=u.get(t);s.bindFramebuffer(eD.READ_FRAMEBUFFER,e4),s.bindFramebuffer(eD.DRAW_FRAMEBUFFER,e5);for(let e=0;e<h;e++)T?eD.framebufferTextureLayer(eD.READ_FRAMEBUFFER,eD.COLOR_ATTACHMENT0,n.__webglTexture,a,m+e):eD.framebufferTexture2D(eD.READ_FRAMEBUFFER,eD.COLOR_ATTACHMENT0,eD.TEXTURE_2D,n.__webglTexture,a),R?eD.framebufferTextureLayer(eD.DRAW_FRAMEBUFFER,eD.COLOR_ATTACHMENT0,r.__webglTexture,o,y+e):eD.framebufferTexture2D(eD.DRAW_FRAMEBUFFER,eD.COLOR_ATTACHMENT0,eD.TEXTURE_2D,r.__webglTexture,o),0!==a?eD.blitFramebuffer(f,p,l,d,g,v,l,d,eD.COLOR_BUFFER_BIT,eD.NEAREST):R?eD.copyTexSubImage3D(b,o,g,v,y+e,f,p,l,d):eD.copyTexSubImage2D(b,o,g,v,f,p,l,d);s.bindFramebuffer(eD.READ_FRAMEBUFFER,null),s.bindFramebuffer(eD.DRAW_FRAMEBUFFER,null)}else R?e.isDataTexture||e.isData3DTexture?eD.texSubImage3D(b,o,g,v,y,l,d,h,_,w,x.data):t.isCompressedArrayTexture?eD.compressedTexSubImage3D(b,o,g,v,y,l,d,h,_,x.data):eD.texSubImage3D(b,o,g,v,y,l,d,h,_,w,x):e.isDataTexture?eD.texSubImage2D(eD.TEXTURE_2D,o,g,v,l,d,_,w,x.data):e.isCompressedTexture?eD.compressedTexSubImage2D(eD.TEXTURE_2D,o,g,v,x.width,x.height,_,x.data):eD.texSubImage2D(eD.TEXTURE_2D,o,g,v,l,d,_,w,x);eD.pixelStorei(eD.UNPACK_ROW_LENGTH,S),eD.pixelStorei(eD.UNPACK_IMAGE_HEIGHT,A),eD.pixelStorei(eD.UNPACK_SKIP_PIXELS,M),eD.pixelStorei(eD.UNPACK_SKIP_ROWS,E),eD.pixelStorei(eD.UNPACK_SKIP_IMAGES,C),0===o&&t.generateMipmaps&&eD.generateMipmap(b),s.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,i=null,a=0){return!0!==e.isTexture&&((0,r.O4K)("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,i=arguments[1]||null,e=arguments[2],t=arguments[3],a=arguments[4]||0),(0,r.O4K)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,i,a)},this.initRenderTarget=function(e){void 0===u.get(e).__webglFramebuffer&&c.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?c.setTextureCube(e,0):e.isData3DTexture?c.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?c.setTexture2DArray(e,0):c.setTexture2D(e,0),s.unbindTexture()},this.resetState=function(){es=0,el=0,eu=null,s.reset(),L.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return r._RZ}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=r.epp._getDrawingBufferColorSpace(e),t.unpackColorSpace=r.epp._getUnpackColorSpace()}}},8006:function(e,t,n){"use strict";n.d(t,{R:()=>l});var r=n(5263),i=n(8254),a=n(692);let o=(e,t)=>{let n=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{n.current=(0,i.h8)(e,t,!0)}),(0,r.useDebugValue)(n.current)},s=new WeakMap;function l(e,t){let n=null==t?void 0:t.sync,l=(0,r.useMemo)(()=>e&&new WeakMap,[e]),u=(0,r.useRef)(void 0),c=!0,d=(0,r.useSyncExternalStore)((0,r.useCallback)(t=>{let r=(0,a.Ld)(e,t,n);return t(),r},[e,n]),()=>{let t=(0,a.CO)(e);try{if(!c&&u.current&&!(0,i.ln)(u.current,t,l,new WeakMap))return u.current}catch(e){}return t},()=>(0,a.CO)(e));c=!1,(0,r.useLayoutEffect)(()=>{u.current=d}),o(d,l);let h=(0,r.useMemo)(()=>new WeakMap,[]);return(0,i.DM)(d,l,h,s)}},692:function(e,t,n){"use strict";n.d(t,{CO:()=>v,Ld:()=>g,sj:()=>m});var r=n(8254);let i=e=>"object"==typeof e&&null!==e,a=(e,t)=>{let n=l.get(e);if((null==n?void 0:n[0])===t)return n[1];let i=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return(0,r.jc)(i,!0),l.set(e,[t,i]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(i,t))return;let n=Reflect.get(e,t),{enumerable:l}=Reflect.getOwnPropertyDescriptor(e,t),u={value:n,enumerable:l,configurable:!0};if(s.has(n))(0,r.jc)(n,!1);else if(o.has(n)){let[e,t]=o.get(n);u.value=a(e,t())}Object.defineProperty(i,t,u)}),Object.preventExtensions(i)},o=new WeakMap,s=new WeakSet,l=new WeakMap,u=[1,1],c=new WeakMap,d=Object.is,h=(e,t)=>new Proxy(e,t),f=e=>i(e)&&!s.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise),p=(e,t,n,a)=>({deleteProperty(e,t){let r=Reflect.get(e,t);n(t);let i=Reflect.deleteProperty(e,t);return i&&a(["delete",[t],r]),i},set(s,l,u,h){let p=!e()&&Reflect.has(s,l),g=Reflect.get(s,l,h);if(p&&(d(g,u)||c.has(u)&&d(g,c.get(u))))return!0;n(l),i(u)&&(u=(0,r.o5)(u)||u);let v=!o.has(u)&&f(u)?m(u):u;return t(l,v),Reflect.set(s,l,v,h),a(["set",[l],u,g]),!0}});function m(e={}){if(!i(e))throw Error("object required");let t=c.get(e);if(t)return t;let n=u[0],r=new Set,a=(e,t=++u[0])=>{n!==t&&(n=t,r.forEach(n=>n(e,t)))},l=u[1],d=e=>(t,n)=>{let r=[...t];r[1]=[e,...r[1]],a(r,n)},f=new Map,g=!0,v=h(e,p(()=>g,(e,t)=>{let n=!s.has(t)&&o.get(t);if(n){if(f.has(e))throw Error("prop listener already exists");if(r.size){let t=n[2](d(e));f.set(e,[n,t])}else f.set(e,[n])}},e=>{var t;let n=f.get(e);n&&(f.delete(e),null==(t=n[1])||t.call(n))},a));c.set(e,v);let y=[e,(e=++u[1])=>(l===e||r.size||(l=e,f.forEach(([t])=>{let r=t[1](e);r>n&&(n=r)})),n),e=>(r.add(e),1===r.size&&f.forEach(([e,t],n)=>{if(t)throw Error("remove already exists");let r=e[2](d(n));f.set(n,[e,r])}),()=>{r.delete(e),0===r.size&&f.forEach(([e,t],n)=>{t&&(t(),f.set(n,[e]))})})];return o.set(v,y),Reflect.ownKeys(e).forEach(t=>{let n=Object.getOwnPropertyDescriptor(e,t);"value"in n&&n.writable&&(v[t]=e[t])}),g=!1,v}function g(e,t,n){let r;let i=o.get(e);i||console.warn("Please use proxy object");let a=[],s=i[2],l=!1,u=s(e=>{if(a.push(e),n){t(a.splice(0));return}r||(r=Promise.resolve().then(()=>{r=void 0,l&&t(a.splice(0))}))});return l=!0,()=>{l=!1,u()}}function v(e){let t=o.get(e);t||console.warn("Please use proxy object");let[n,r]=t;return a(n,r())}}}]);